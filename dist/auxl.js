(()=>{var e={487:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var a=o(601),i=o.n(a),n=o(314),r=o.n(n)()(i());r.push([e.id,'/* MVP.css v1.12 - https://github.com/andybrewer/mvp */\n\n:root {\n    --active-brightness: 0.85;\n    --border-radius: 5px;\n    --box-shadow: 2px 2px 10px;\n    --color-accent: #118bee15;\n    --color-bg: #fff;\n    --color-bg-secondary: #e9e9e9;\n    --color-link: #118bee;\n    --color-secondary: #920de9;\n    --color-secondary-accent: #920de90b;\n    --color-shadow: #f4f4f4;\n    --color-table: #118bee;\n    --color-text: #000;\n    --color-text-secondary: #999;\n    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n    --hover-brightness: 1.2;\n    --justify-important: center;\n    --justify-normal: left;\n    --line-height: 1.5;\n    --width-card: 285px;\n    --width-card-medium: 460px;\n    --width-card-wide: 800px;\n    --width-content: 1080px;\n}\n\n@media (prefers-color-scheme: dark) {\n    :root[color-mode="user"] {\n        --color-accent: #0097fc4f;\n        --color-bg: #333;\n        --color-bg-secondary: #555;\n        --color-link: #0097fc;\n        --color-secondary: #e20de9;\n        --color-secondary-accent: #e20de94f;\n        --color-shadow: #bbbbbb20;\n        --color-table: #0097fc;\n        --color-text: #f7f7f7;\n        --color-text-secondary: #aaa;\n    }\n}\n\n/* Layout */\narticle aside {\n    background: var(--color-secondary-accent);\n    border-left: 4px solid var(--color-secondary);\n    padding: 0.01rem 0.8rem;\n}\n\nbody {\n    background: var(--color-bg);\n    color: var(--color-text);\n    font-family: var(--font-family);\n    line-height: var(--line-height);\n    margin: 0;\n    overflow-x: hidden;\n    padding: 0;\n}\n\nfooter,\nheader,\nmain {\n    margin: 0 auto;\n    max-width: var(--width-content);\n    padding: 3rem 1rem;\n}\n\nhr {\n    background-color: var(--color-bg-secondary);\n    border: none;\n    height: 1px;\n    margin: 4rem 0;\n    width: 100%;\n}\n\nsection {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: var(--justify-important);\n}\n\nsection img,\narticle img {\n    max-width: 100%;\n}\n\nsection pre {\n    overflow: auto;\n}\n\nsection aside {\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow) var(--color-shadow);\n    margin: 1rem;\n    padding: 1.25rem;\n    width: var(--width-card);\n}\n\nsection aside:hover {\n    box-shadow: var(--box-shadow) var(--color-bg-secondary);\n}\n\n[hidden] {\n    display: none;\n}\n\n/* Headers */\narticle header,\ndiv header,\nmain header {\n    padding-top: 0;\n}\n\nheader {\n    text-align: var(--justify-important);\n}\n\nheader a b,\nheader a em,\nheader a i,\nheader a strong {\n    margin-left: 0.5rem;\n    margin-right: 0.5rem;\n}\n\nheader nav img {\n    margin: 1rem 0;\n}\n\nsection header {\n    padding-top: 0;\n    width: 100%;\n}\n\n/* Nav */\nnav {\n    align-items: center;\n    display: flex;\n    font-weight: bold;\n    justify-content: space-between;\n    margin-bottom: 7rem;\n}\n\nnav ul {\n    list-style: none;\n    padding: 0;\n}\n\nnav ul li {\n    display: inline-block;\n    margin: 0 0.5rem;\n    position: relative;\n    text-align: left;\n}\n\n/* Nav Dropdown */\nnav ul li:hover ul {\n    display: block;\n}\n\nnav ul li ul {\n    background: var(--color-bg);\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow) var(--color-shadow);\n    display: none;\n    height: auto;\n    left: -2px;\n    padding: .5rem 1rem;\n    position: absolute;\n    top: 1.7rem;\n    white-space: nowrap;\n    width: auto;\n    z-index: 1;\n}\n\nnav ul li ul::before {\n    /* fill gap above to make mousing over them easier */\n    content: "";\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: -0.5rem;\n    height: 0.5rem;\n}\n\nnav ul li ul li,\nnav ul li ul li a {\n    display: block;\n}\n\n/* Typography */\ncode,\nsamp {\n    background-color: var(--color-accent);\n    border-radius: var(--border-radius);\n    color: var(--color-text);\n    display: inline-block;\n    margin: 0 0.1rem;\n    padding: 0 0.5rem;\n}\n\ndetails {\n    margin: 1.3rem 0;\n}\n\ndetails summary {\n    font-weight: bold;\n    cursor: pointer;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    line-height: var(--line-height);\n}\n\nmark {\n    padding: 0.1rem;\n}\n\nol li,\nul li {\n    padding: 0.2rem 0;\n}\n\np {\n    margin: 0.75rem 0;\n    padding: 0;\n    width: 100%;\n}\n\npre {\n    margin: 1rem 0;\n    max-width: var(--width-card-wide);\n    padding: 1rem 0;\n}\n\npre code,\npre samp {\n    display: block;\n    max-width: var(--width-card-wide);\n    padding: 0.5rem 2rem;\n    white-space: pre-wrap;\n}\n\nsmall {\n    color: var(--color-text-secondary);\n}\n\nsup {\n    background-color: var(--color-secondary);\n    border-radius: var(--border-radius);\n    color: var(--color-bg);\n    font-size: xx-small;\n    font-weight: bold;\n    margin: 0.2rem;\n    padding: 0.2rem 0.3rem;\n    position: relative;\n    top: -2px;\n}\n\n/* Links */\na {\n    color: var(--color-link);\n    display: inline-block;\n    font-weight: bold;\n    text-decoration: none;\n}\n\na:active {\n    filter: brightness(var(--active-brightness));\n    text-decoration: underline;\n}\n\na:hover {\n    filter: brightness(var(--hover-brightness));\n    text-decoration: underline;\n}\n\na b,\na em,\na i,\na strong,\nbutton,\ninput[type="submit"] {\n    border-radius: var(--border-radius);\n    display: inline-block;\n    font-size: medium;\n    font-weight: bold;\n    line-height: var(--line-height);\n    margin: 0;\n    padding: 0.5rem 1rem;\n}\n\nbutton,\ninput[type="submit"] {\n    font-family: var(--font-family);\n}\n\nbutton:active,\ninput[type="submit"]:active {\n    filter: brightness(var(--active-brightness));\n}\n\nbutton:hover,\ninput[type="submit"]:hover {\n    cursor: pointer;\n    filter: brightness(var(--hover-brightness));\n}\n\na b,\na strong,\nbutton,\ninput[type="submit"] {\n    background-color: var(--color-link);\n    border: 2px solid var(--color-link);\n    color: var(--color-bg);\n}\n\na em,\na i {\n    border: 2px solid var(--color-link);\n    border-radius: var(--border-radius);\n    color: var(--color-link);\n    display: inline-block;\n    padding: 1rem 2rem;\n}\n\narticle aside a {\n    color: var(--color-secondary);\n}\n\n/* Images */\nfigure {\n    margin: 0;\n    padding: 0;\n}\n\nfigure img {\n    max-width: 100%;\n}\n\nfigure figcaption {\n    color: var(--color-text-secondary);\n}\n\n/* Forms */\nbutton:disabled,\ninput:disabled {\n    background: var(--color-bg-secondary);\n    border-color: var(--color-bg-secondary);\n    color: var(--color-text-secondary);\n    cursor: not-allowed;\n}\n\nbutton[disabled]:hover,\ninput[type="submit"][disabled]:hover {\n    filter: none;\n}\n\nform {\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow) var(--color-shadow);\n    display: block;\n    max-width: var(--width-card-wide);\n    min-width: var(--width-card);\n    padding: 1.5rem;\n    text-align: var(--justify-normal);\n}\n\nform header {\n    margin: 1.5rem 0;\n    padding: 1.5rem 0;\n}\n\ninput,\nlabel,\nselect,\ntextarea {\n    display: block;\n    font-size: inherit;\n    max-width: var(--width-card-wide);\n}\n\ninput[type="checkbox"],\ninput[type="radio"] {\n    display: inline-block;\n}\n\ninput[type="checkbox"]+label,\ninput[type="radio"]+label {\n    display: inline-block;\n    font-weight: normal;\n    position: relative;\n    top: 1px;\n}\n\ninput[type="range"] {\n    padding: 0.4rem 0;\n}\n\ninput,\nselect,\ntextarea {\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    margin-bottom: 1rem;\n    padding: 0.4rem 0.8rem;\n}\n\ninput[type="text"],\ntextarea {\n    width: calc(100% - 1.6rem);\n}\n\ninput[readonly],\ntextarea[readonly] {\n    background-color: var(--color-bg-secondary);\n}\n\nlabel {\n    font-weight: bold;\n    margin-bottom: 0.2rem;\n}\n\n/* Popups */\ndialog {\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow) var(--color-shadow);\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 50%;\n    z-index: 999;\n}\n\n/* Tables */\ntable {\n    border: 1px solid var(--color-bg-secondary);\n    border-radius: var(--border-radius);\n    border-spacing: 0;\n    display: inline-block;\n    max-width: 100%;\n    overflow-x: auto;\n    padding: 0;\n    white-space: nowrap;\n}\n\ntable td,\ntable th,\ntable tr {\n    padding: 0.4rem 0.8rem;\n    text-align: var(--justify-important);\n}\n\ntable thead {\n    background-color: var(--color-table);\n    border-collapse: collapse;\n    border-radius: var(--border-radius);\n    color: var(--color-bg);\n    margin: 0;\n    padding: 0;\n}\n\ntable thead th:first-child {\n    border-top-left-radius: var(--border-radius);\n}\n\ntable thead th:last-child {\n    border-top-right-radius: var(--border-radius);\n}\n\ntable thead th:first-child,\ntable tr td:first-child {\n    text-align: var(--justify-normal);\n}\n\ntable tr:nth-child(even) {\n    background-color: var(--color-accent);\n}\n\n/* Quotes */\nblockquote {\n    display: block;\n    font-size: x-large;\n    line-height: var(--line-height);\n    margin: 1rem auto;\n    max-width: var(--width-card-medium);\n    padding: 1.5rem 1rem;\n    text-align: var(--justify-important);\n}\n\nblockquote footer {\n    color: var(--color-text-secondary);\n    display: block;\n    font-size: small;\n    line-height: var(--line-height);\n    padding: 1.5rem 0;\n}\n',""]);const s=r},415:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var a=o(601),i=o.n(a),n=o(314),r=o.n(n)()(i());r.push([e.id,'/* style.css */\n\nhtml {\nscroll-behavior: smooth;\n}\n\nbody {\nbackground-color: transparent;\nbackground-image: none;\nbackground-repeat: repeat;\ntouch-action: manipulation;\n}\n\n\nheader {\npadding-bottom: 0;\n}\n\nh2 {\ntext-align: var(--justify-important);\n}\n\nsection aside {\nborder: none;\n}\n\n.sticky {\nposition: -webkit-sticky;\nposition: sticky;\ntop: 0;\nz-index: 100;\n}\n\n.flexRow {\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\n}\n\n.flexStart {\njustify-content: flex-start;\n}\n\n.flexCol {\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\n}\n\n.flexRowCenter {\ndisplay: flex;\nflex-direction: row;\njustify-content: center;\n}\n\n.a-enter-ar, .a-enter-vr {\nposition: fixed;\n}\n\n#stickyBar {\npointer-events: auto;\npadding: 0.25em;\nbackground-color: transparent !Important;\nheight: 5%;\n}\n\n#stickyTitle h5 {\nmargin-bottom: 0;\nmargin-left: 0.25em;\n--color: var(--h1-color);\njustify-content: flex-start;\n}\n\n#stickyButton {\npadding: 0.9em;\nbackground-color: #C14B76;\n}\n\n#stickyTheme {\nmargin-bottom: 0;\n\n}\n\n#stickyIcon {\nbackground-color: var(--background-color);\nborder-radius: 50%;\n}\n\n#contactButton {\ndisplay: flex;\njustify-content: center;\n}\n\n#photo {\ndisplay: flex;\njustify-content: center;\nborder-radius: 50%;\nborder: solid;\nborder-color: #46c496;\n}\n\n#topButton {\ndisplay: flex;\njustify-content: center;\n}\n\n@media screen and (max-width: 600px) {\n\t#stickyTitle h3 {\n\tfont-size: small;\n\t}\n}\n\n#beginDiv{\nposition: absolute;\nz-index: 1000;\nbackground-color: #C14B76;\npadding: 1.75em;\ndisplay: flex;\nflex-direction: column;\njustify-content: flex-start;\nlist-style: none;\ntop: 50%;\nleft: 50%;\n-ms-transform: translate(-50%, -50%);\ntransform: translate(-50%, -50%);\nborder-radius: 15%;\n\nwidth: 80%;\nheight: 80%;\nopacity: 80%;\n}\n\n#beginDiv li{\n\n\n}\n\n.menu {\n\twidth: 100%;\n\tfont-size: x-large;\n\tjustify-content: center;\n}\n\n#expInfo{\ndisplay: none;\nposition: absolute;\nz-index: 1001;\nbackground-color: #C14B76;\npadding: 1.75em;\nflex-direction: column;\nlist-style: none;\ntop: 50%;\nleft: 50%;\n-ms-transform: translate(-50%, -50%);\ntransform: translate(-50%, -50%);\nborder-radius: 15%;\n\nwidth: 70%;\nheight: 70%;\nopacity: 95%;\n\nfont-size: large;\n}\n\n#dataInfo{\ndisplay: none;\nposition: absolute;\nz-index: 1002;\nbackground-color: #C14B76;\npadding: 1.75em;\nflex-direction: column;\nlist-style: none;\ntop: 50%;\nleft: 50%;\n-ms-transform: translate(-50%, -50%);\ntransform: translate(-50%, -50%);\nborder-radius: 15%;\n}\n\n\n#manageData {\n\tfont-size: large;\n}\n\n#resetData {\n\tbackground-color: red!Important;\n}\n\n\n\n#vrHandButton{\ndisplay: none;\n}\n\n#vrLocomotionType{\ndisplay: none;\n}\n\n#audioVolume{\ndisplay: none;\n}\n\n#volUpButton{\ndisplay: flex;\n}\n\n#volume{\ndisplay: flex;\n}\n\n#volDownButton{\ndisplay: flex;\n}\n\n\n/* HTML Controller */\n\n\n/* Full Screen */\n#fullScreen {\ndisplay: flex;\nposition: absolute;\njustify-content: flex-start;\nz-index: 2;\npointer-events: none;\n\nwidth: 100%;\nheight: 100%;\n\nflex-direction: column;\n}\n\n#screen {\ndisplay: flex;\njustify-content: space-around;\nz-index: 2;\npointer-events: none;\n\nwidth: 100%;\nheight: 55%;\n}\n\n#screenFooter {\ndisplay: none;\nz-index: 2;\npointer-events: none;\n\nwidth: 100%;\nheight: 5%;\n}\n\n\n/* Controller Block */\n#controllerBlock {\ndisplay: none;\njustify-content: space-around;\nz-index: 3;\npointer-events: none;\n\nwidth: 100%;\nheight: 35%;\n\n}\n\n.column {\ndisplay: flex;\nflex-direction: column;\njustify-content: space-around;\n}\n\n.col1 {\nwidth: 100%;\n/*justify-content: space-around; */\n}\n\n.col2 {\nwidth: 100%;\njustify-content: flex-start;\n}\n\n.col3 {\nwidth: 100%;\n/*justify-content: center; */\n}\n\n.directions{\ndisplay: flex;\nheight: 100%;\n/*justify-content: space-evenly; */\n}\n\n.actionCol{\ndisplay: flex;\nheight: 100%;\n/*justify-content: space-evenly; */\n}\n\n\n\n.startselect{\ndisplay: flex;\n/*justify-content: space-evenly; */\n}\n\n#a{\n\n/*justify-content: flex-start; */\n}\n\n#b{\n\n/*justify-content: flex-start; */\n}\n\n#c{\n\n/*justify-content: center; */\n}\n\n#d{\n\n/*justify-content: center; */\n}\n\n#e{\n\n/*justify-content: flex-end; */\n}\n\n#f{\n\n/*justify-content: flex-end; */\n}\n\n#h{\n\n/*justify-content: flex-end; */\n}\n\n#h{\n\n/*justify-content: flex-end; */\n}\n\n.directionButtons, .startSelectButtons, .actionButtons button{\nbackground-color: transparent;\ncursor: pointer;\n-webkit-user-select: none;\n-ms-user-select: none;\nuser-select: none;\n\npointer-events: auto;\n\nwidth: 100%;\nheight: 100%;\n\njustify-content: space-evenly;\npadding: 0;\n\nfont-size: x-large;\n}\n/*\n\npointer-events: auto;\n\nborder-radius: 4px;\nbox-shadow: inset 0 0 0 2px #e5e2e2;\ncolor: #e5e2e2 !important;\n\ndisplay: inline-block;\nfont-size: 0.7em;\nfont-weight: 900;\n\nletter-spacing: 0.35em;\noverflow: hidden;\npadding: 1rem;\ntext-align: center;\ntext-decoration: none;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\nheight: 3.5em;\n\n*/\n\n/* TEMP for customizing Mobile UI\n#center, #start, #select, #a, #b, #c, #d, #e, #f, #g, #h, #i, #l, #r{\ndisplay: none;\n}\n\n.directionButtons {\nheight: 8em;\n}\n\n.startSelectButtons {\nheight: 3.5em;\npadding: 0 1.25em 0 1.6em;\n}\n\n.actionButtons {\nheight: 5em;\n}\n\n.actionCol {\n\n}\n\n.actionDiv {\n\n}\n\n.directionButtons, .startSelectButtons, .actionButtons button{\npointer-events: auto;\nbackground-color: transparent;\nborder-radius: 4px;\nbox-shadow: inset 0 0 0 2px #e5e2e2;\ncolor: #e5e2e2 !important;\ncursor: pointer;\ndisplay: inline-block;\nfont-size: 0.7em;\nfont-weight: 900;\nheight: 3.5em;\nletter-spacing: 0.35em;\noverflow: hidden;\npadding: 1rem;\ntext-align: center;\ntext-decoration: none;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\n-webkit-user-select: none;\n-ms-user-select: none;\nuser-select: none;\n}\n*/\n /* Safari -webkit-user-select: none; */\n /* IE 10+ -ms-user-select: none; */\n\n.snapView {\npointer-events: none;\nposition: absolute;\ndisplay: flex;\njustify-content: space-between;\nwidth: 100%;\nheight: 60%;\nz-index: 1;\nbottom: 40%;\n}\n\n.snapView button{\npointer-events: auto;\nbackground-color: transparent;\nborder: 0;\ncursor: pointer;\ndisplay: inline-block;\nfont-size: x-large;\nfont-weight: 900;\nletter-spacing: 0.35em;\nwidth: 10vw;\npadding: 1rem;\ntext-align: center;\ntext-decoration: none;\ntext-overflow: ellipsis;\nwhite-space: nowrap;\n-webkit-user-select: none; /* Safari 0.7em */\n-ms-user-select: none; /* IE 10+ */\nuser-select: none;\n}\n\n#scenarioHeaderTitle {\n\tmargin-right: 0.5em;\n}\n\n#stickyMenu {\n\tbackground-color: transparent;\n\tfont-size: x-large;\n}\n\n.stickyButtons {\n\tbackground-color: transparent;\n\tfont-size: x-large;\n}\n\n\n#menuModeButton {\n\tbackground-color: darkorange!Important;\n}\n\n\n/* Portrait */\n@media screen and (orientation:portrait) {\n\t/*Testing\n\t#stickyTitle {\n\t\tcolor: blue;\n\t}*/\n\n\n\t/* Controller Block\n\t#controllerBlock {\n\t\twidth: 100%;\n\t\theight: 20%;\n\t\ttop: 75%;\n\t} */\n/*\n\t.directionButtons, .startSelectButtons, .actionButtons button{\n\t\tfont-size: 0.5em;\n\t}\n\n\t.col2 {\n\t\tmargin-bottom: -1rem;\n\t}\n*/\n}\n\n/* Landscape */\n@media screen and (orientation:landscape) {\n\t/*Testing\n\t#stickyTitle {\n\t\tcolor: red;\n\t}*/\n\n\n\t/* Controller Block\n\t#controllerBlock {\n\t\twidth: 100%;\n\t\theight: 15%;\n\t\ttop: 60%;\n\t} */\n/*\n\t.col2 {\n\t\tmargin-bottom: -5rem;\n\t}\n*/\n}\n\n\n.a-dialog-allow-button {\n\tbackground-color: red;\n}\n\n.a-dialog-deny-button {\n\tbackground-color: blue;\n}\n\n.a-dialog-ok-button {\n\tbackground-color: green;\n}\n.a-dialog {\n\tcolor: #b2b1b1;\n}\n\n:root {\n    --active-brightness: 0.45;\n    --border-radius: 5px;\n    --box-shadow: 2px 2px 10px;\n    --color-accent: #118bee15;\n    --color-bg: #fff;\n    --color-bg-secondary: #e9e9e9;\n    --color-link: #46c496;\n    --color-secondary: #f2849e;\n    --color-secondary-accent: #920de90b;\n    --color-shadow: #393434;\n    --color-table: #118bee;\n    --color-text: #FFFFFF;\n    --color-text-secondary: #999;\n    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n    --hover-brightness: 1.2;\n    --justify-important: center;\n    --justify-normal: left;\n    --line-height: 1.5;\n    --width-card: 420px;\n    --width-card-medium: 460px;\n    --width-card-wide: 800px;\n    --width-content: 1080px;\n}',""]);const s=r},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",a=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),a&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),a&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,a,i,n){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&r[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},72:e=>{"use strict";var t=[];function o(e){for(var o=-1,a=0;a<t.length;a++)if(t[a].identifier===e){o=a;break}return o}function a(e,a){for(var n={},r=[],s=0;s<e.length;s++){var l=e[s],c=a.base?l[0]+a.base:l[0],d=n[c]||0,p="".concat(c," ").concat(d);n[c]=d+1;var h=o(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(m);else{var u=i(m,a);a.byIndex=s,t.splice(s,0,{identifier:p,updater:u,references:1})}r.push(p)}return r}function i(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,i){var n=a(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<n.length;r++){var s=o(n[r]);t[s].references--}for(var l=a(e,i),c=0;c<n.length;c++){var d=o(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=l}}},659:e=>{"use strict";var t={};e.exports=function(e,o){var a=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(o)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var a="";o.supports&&(a+="@supports (".concat(o.supports,") {")),o.media&&(a+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(a+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),a+=o.css,i&&(a+="}"),o.media&&(a+="}"),o.supports&&(a+="}");var n=o.sourceMap;n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},925:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=925,e.exports=t}},t={};function o(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={id:a,exports:{}};return e[a](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0,(()=>{"use strict";const e=(e,t)=>{let a=JSON.parse(JSON.stringify(t));a.inScene=!1,a.el={},a.dom=!1,a.domInterval,a.events={},a.parent=!1,a.hasOwnProperty("defaultParent")||(a.defaultParent=!1),a.gridSpawned=!1,a.gridPath=[],a.pathSpeed=1e3,a.pathWait=1e3,a.pathRoute="any",a.pathLoop="infinite",a.pathType="jump",a.currentPath=-1,a.gridPathInterval,a.gridPathTimeout;let i=!1,n=!1,r=!1,s=!1;async function l(e){const t=await fetch(e);return await o(925)(t.url),!0}function c(){e.loadingObjects.set(a.id,!0),e.loadingScene||(e.loadingScene=!0)}function d(){e.loadingObjects.delete(a.id),u(!0),e.el.emit(a.id+"spawned",{})}a.physics=!1;const p=()=>{if(a.el={},a.sources){let t=Object.keys(a.sources),o=Object.values(a.sources);for(let i in t)if(e.jsLoaded.hasOwnProperty(t[i]))!1===e.jsLoaded[t[i]]&&(console.log(a.id),console.log("JS is not yet loaded"),e.spawnedWaitingForJS[t[i]].push({id:a.id,properties:a.components[t[i]]}));else{function s(){console.log(t[i]),console.log("Done"),e.jsLoaded[t[i]]=!0,f({property:t[i],value:a.components[t[i]]}),console.log(e.spawnedWaitingForJS);for(let o in e.spawnedWaitingForJS[t[i]]){let a=e.spawnedWaitingForJS[t[i]][o].id,n=e.spawnedWaitingForJS[t[i]][o].properties;console.log(a),console.log(n),document.getElementById(a).setAttribute(t[i],n)}delete e.spawnedWaitingForJS[t[i]],console.log(e.spawnedWaitingForJS)}e.spawnedWaitingForJS[t[i]]=[],console.log(t[i]),console.log(o[i]),e.jsLoaded[t[i]]=!1,l(o[i]).then(s)}}if("preAdded"===a.entity?document.getElementById(a.id)?a.el=document.getElementById(a.id):a.el=document.createElement("a-entity"):a.entity?a.el=document.createElement(a.entity):a.el=document.createElement("a-entity"),e.audioEnabled){let c={};if(a.sound&&(c=JSON.parse(JSON.stringify(a.sound)),c.volume||(c.volume=1),c.volume*=e.volume,a.el.setAttribute("auxsound",c)),a.sounds)for(let d in a.sounds)c=JSON.parse(JSON.stringify(a.sounds[d])),c.volume||(c.volume=1),c.volume*=e.volume,a.el.setAttribute("auxsound__"+d,c)}if(a.text&&a.el.setAttribute("text",a.text),a.el.setAttribute("id",a.id),a.geometry&&a.el.setAttribute("geometry",a.geometry),a.material&&(a.material.src&&(r=!0),a.el.setAttribute("material",a.material)),a.position&&a.el.setAttribute("position",a.position),a.rotation&&a.el.setAttribute("rotation",a.rotation),a.scale&&a.el.setAttribute("scale",a.scale),a.mixins&&a.el.setAttribute("mixins",a.mixins),a.classes?a.el.classList.add(...a.classes):a.el.classList.add("a-ent"),a.hasOwnProperty("animations")){let p=Object.keys(a.animations),h=Object.values(a.animations);for(let m in p)0===m||a.el.setAttribute("animation__"+p[m],h[m])}if(a.hasOwnProperty("components")){(a.components["gltf-model"]||a.components["obj-model"])&&(n=!0);let u=Object.keys(a.components),y=Object.values(a.components);for(let g in u)if(0===g);else if(e.jsAll.hasOwnProperty(u[g]))if(e.jsLoaded.hasOwnProperty(u[g]))!1===e.jsLoaded[u[g]]?e.spawnedWaitingForJS[u[g]].push({id:a.id,properties:a.components[u[g]]}):a.el.setAttribute(u[g],y[g]);else{function v(){e.jsLoaded[u[g]]=!0,f({property:u[g],value:a.components[u[g]]});for(let t in e.spawnedWaitingForJS[u[g]]){let o=e.spawnedWaitingForJS[u[g]][t].id,a=e.spawnedWaitingForJS[u[g]][t].properties;document.getElementById(o).setAttribute(u[g],a)}delete e.spawnedWaitingForJS[u[g]]}e.spawnedWaitingForJS[u[g]]=[],e.jsLoaded[u[g]]=!1,l(e.jsAll[u[g]]).then(v)}else a.el.setAttribute(u[g],y[g])}return a.el},h=t=>{a.parent=t||a.defaultParent||!1;let o=!1;if(a.inScene)t&&(a.parent.core?a.parent.core.inScene?a.parent=a.parent.GetEl():a.parent=!1:a.parent.layer?t.layer.inScene?a.parent=a.parent.GetParentEl():a.parent=!1:a.parent.id||"string"==typeof a.parent&&(document.getElementById(a.parent)?a.parent=document.getElementById(a.parent):a.parent=!1),a.parent?a.parent.appendChild(a.el):(console.log(id),console.log(a.parent),console.log(document.getElementById(a.parent)),console.log("Parent is not in scene!")));else{p(),(n||r)&&c(),"preAdded"===a.entity&&document.getElementById(a.id)&&(o=!0),o||(a.parent?(a.parent.core?a.parent.core.inScene?a.parent=a.parent.GetEl():a.parent=!1:a.parent.layer?t.layer.inScene?a.parent=a.parent.GetParentEl():a.parent=!1:a.parent.id||"string"==typeof a.parent&&(document.getElementById(a.parent)?a.parent=document.getElementById(a.parent):a.parent=!1),a.parent?a.parent.appendChild(a.el):(console.log(id),console.log(a.parent),console.log(document.getElementById(a.parent)),console.log("Parent is not in scene!"))):e.sceneEl.appendChild(a.el));let i=!1;n&&(a.el.addEventListener("model-loaded",d),i=!0),r&&(a.el.addEventListener("loaded",d),i=!0),a.el.components&&a.el.components.body&&(a.el.addEventListener("body-loaded",d),i=!0),i||(a.domInterval=setTimeout((()=>{u(!0)&&(e.el.emit(a.id+"spawned",{}),clearInterval(a.domInterval))}),100)),a.inScene=!0}},m=()=>{if(a.inScene){if(clearInterval(a.domInterval),clearTimeout(a.gridPathTimeout),clearInterval(a.gridPathInterval),a.physics&&b(),n&&a.el.removeEventListener("model-loaded",d),(r||s)&&a.el.removeEventListener("loaded",d),a.hasOwnProperty("components")){let e=Object.keys(a.components);for(let t in e)0===t||e[t].startsWith("shape")||u().removeAttribute(e[t])}a.gridSpawned&&(a.grid.collide?e.map.UpdateMapArea(a.id,a.grid.start,a.grid.end,!1):a.grid.trigger&&e.map.UpdateMapAreaTrigger(a.id,a.grid.start,a.grid.end,!1),a.gridSpawned=!1),a.parent?a.parent.removeChild(a.el):e.sceneEl.removeChild(a.el),e.ExistsInTracker(a.id)&&e.RemoveFromTracker(a.id),a.dom=!1,a.inScene=!1,e.el.emit(a.id+"despawned",{})}},u=e=>(e?a.dom=document.getElementById(a.id):a.dom||(a.dom=document.getElementById(a.id)),a.dom);function y(e){let t=new THREE.Vector3;if(e.start.x===e.end.x&&e.start.z===e.end.z)t.x=e.start.x,t.z=e.start.z;else{let o=-1*(e.start.x-e.end.x),a=-1*(e.start.z-e.end.z);o/=2,a/=2,t.x=e.start.x+o,t.z=e.start.z+a}return t.y=e.start.y,t}const g=t=>{let o={start:{},end:{}};o.start.x=a.grid.start.x,o.start.y=a.grid.start.y,o.start.z=a.grid.start.z,o.end.x=a.grid.end.x,o.end.y=a.grid.end.y,o.end.z=a.grid.end.z,t.x&&(o.start.x+=t.x,o.end.x+=t.x),t.y&&(o.start.y+=t.y,o.end.y+=t.y),t.z&&(o.start.z+=t.z,o.end.z+=t.z);let i=y(o);return a.grid.collide?!!e.map.CheckMapAreaSansArea(a.grid,o,a.grid.height)&&(e.map.UpdateMapArea(a.id,a.grid.start,a.grid.end,!1),e.map.UpdateMapArea(a.id,o.start,o.end,!0),"anim"===a.pathType?t.x?x("animstartx"+i.x):t.y?x("animstarty"+i.y):t.z&&x("animstartz"+i.z):"jump"===a.pathType&&f({property:"position",value:i}),a.grid.start.x=o.start.x,a.grid.start.y=o.start.y,a.grid.start.z=o.start.z,a.grid.end.x=o.end.x,a.grid.end.y=o.end.y,a.grid.end.z=o.end.z,!0):a.grid.trigger?(e.map.UpdateMapAreaTrigger(a.id,a.grid.start,a.grid.end,!1),e.map.UpdateMapAreaTrigger(a.id,o.start,o.end,!0),"anim"===a.pathType?t.x?x("animstartx"+i.x):t.y?x("animstarty"+i.y):t.z&&x("animstartz"+i.z):"jump"===a.pathType&&(t.pos.y,a.grid.yOffset,f({property:"position",value:i})),a.grid.start.x=o.start.x,a.grid.start.y=o.start.y,a.grid.start.z=o.start.z,a.grid.end.x=o.end.x,a.grid.end.y=o.end.y,a.grid.end.z=o.end.z,!0):void 0},v=e=>{if(Array.isArray(e))for(let t in e)a[e[t].property]=Object.assign({},e[t].value);else a[e.property]=Object.assign({},e.value)},f=(t,o)=>{if(o&&v(t),a.inScene)if(Array.isArray(t))for(let o in t)t[o].value&&t[o].value.src&&e.loadingScene&&(s||(s=!0,c(),a.el.addEventListener("loaded",d))),u().setAttribute(t[o].property,t[o].value);else t.value&&t.value.src&&e.loadingScene&&(s||(s=!0,c(),a.el.addEventListener("loaded",d))),u().setAttribute(t.property,t.value)},b=()=>{"ammo"===a.physics?(u().removeAttribute("ammo-body",a.body),u().removeAttribute("ammo-shape__"+a.id,a.shape)):"cannon"===a.physics&&(u().removeAttribute("shape__core"),u().removeAttribute("body")),a.physics=!1};function E(e){let t="animation__"+e.name||0,o=e.property,a=e.from||!1;0===e.from&&(a=0);let i=e.to||!1;0===e.to&&(i=0);let n=e.dur||!1,r=e.delay||!1,s=e.loop||!1,l=e.dir||!1,c=e.easing||!1,d=e.elasticity||!1,p=e.autoplay||!1,h=e.enabled||!1,m=e.startEvents||!1,u=e.pauseEvents||!1,y=e.resumeEvents||!1,g={property:"object3D.rotation.y",to:360,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"};return o&&(g.property=o),(a||0===a)&&(g.from=a),(i||0===i)&&(g.to=i),n&&(g.dur=n),r&&(g.delay=r),s&&(g.loop=s),l&&(g.dir=l),c&&(g.easing=c),d&&(g.elasticity=d),p&&(g.autoplay=p),h&&(g.enabled=h),m&&(g.startEvents=m),u&&(g.pauseEvents=u),y&&(g.resumeEvents=y),{name:t,anim:g}}const w=e=>{if(Array.isArray(e))for(let t in e){let o=E(e[t]);u().setAttribute(o.name,o.anim)}else{let t=E(e);u().setAttribute(t.name,t.anim)}},x=(e,t)=>{if(a.inScene)if(Array.isArray(e))for(let o in e)u().emit(e[o],{bubbles:t});else u().emit(e,{bubbles:t})};function T(){a.detailMain.core.el.emit("close",{}),a.detailClose.core.el.emit("close",{});let e=setTimeout((function(){a.detailAll.DespawnLayer(),a.isOpen=!1,clearTimeout(e)}),550)}function C(){function e(){a.detailClose.core.el.removeEventListener("click",e),a.isOpen=T()}a.isOpen?(a.isOpen=T(),a.detailClose.core.el.removeEventListener("click",e)):(a.detailAll.SpawnLayer(),a.isOpen=function(){let e=setTimeout((function(){a.detailMain.core.el.emit("open",{}),a.detailClose.core.el.emit("open",{}),a.isOpen=!0,clearTimeout(e)}),25)}(),a.detailClose.core.el.addEventListener("click",e))}return{core:a,Generate:p,SpawnCore:h,DespawnCore:m,ToggleSpawn:(t,o)=>{let i=t||!1;i&&(a.parent=i),a.inScene?m():(h(a.parent),o&&e.SpawnTracker(a.id,o))},GetEl:u,SpawnCoreOnGrid:t=>{if(a.inScene);else{if(t&&(a.grid=t),!a.grid&&a.data.grid,!a.grid)return void console.log({msg:"Missing grid, unable to spawn",core:a});a.grid.hasOwnProperty("collide")||a.grid.hasOwnProperty("trigger")||(a.grid.collide=!0),a.grid.end||(a.grid=((e,t,o)=>{let i={},n=new THREE.Vector3;e?e.width?(n.x=e.width,n.y=e.height,n.z=e.depth):e.radius&&!e.height?(n.x=2*e.radius,n.y=2*e.radius,n.z=2*e.radius):e.radius&&e.height&&(n.x=2*e.radius,n.y=e.height,n.z=2*e.radius):(a.gridSize||(a.gridSize={x:1,y:1,z:1}),n.x=a.gridSize.x,n.y=a.gridSize.y,n.z=a.gridSize.z),i.yOffset=0,i.start=(new THREE.Vector3).copy(t),i.end=new THREE.Vector3,i.collide=o||!1;let r=0;if(i.end.x=i.start.x,n.x>.5){r=n.x/.5;for(let e=0;e<r;e++)0!==e&&(i.end.x+=.5)}if(i.end.y=i.start.y,i.yOffset=n.y/2,i.end.z=i.start.z,n.z>.5){r=n.z/.5;for(let e=0;e<r;e++)0!==e&&(i.end.z+=.5)}return i})(a.geometry,a.grid.start,a.grid.collide)),a.grid.start.y||(a.grid.start.y=0),a.grid.end.y||(a.grid.end.y=0),t&&t.xOffset?a.grid.xOffset=t.xOffset:a.grid.xOffset||(a.grid.xOffset=0),t&&t.yOffset?a.grid.yOffset=t.yOffset:a.grid.yOffset||(a.grid.yOffset=0),t&&t.zOffset?a.grid.zOffset=t.zOffset:a.grid.zOffset||(a.grid.zOffset=0),a.grid.start.y===a.grid.end.y?a.grid.height=1:a.grid.height=1+Math.ceil(Math.abs(Math.abs(a.grid.start.y)-Math.abs(a.grid.end.y)));let o=e.player.GetPlayerInfo().grid;if(a.grid.start.x<=o.x&&a.grid.end.x>=o.x&&a.grid.start.y<=o.y&&a.grid.end.y>=o.y&&a.grid.start.z<=o.z&&a.grid.end.z>=o.z)e.map.WaitToSpawn({name:a.id,func:"SpawnCoreOnGrid"});else{let t=y(a.grid);a.position.x=a.grid.xOffset+t.x,a.position.y=a.grid.yOffset+t.y,a.position.z=a.grid.zOffset+t.z,h(),a.grid.collide?e.map.UpdateMapArea(a.id,a.grid.start,a.grid.end,a.grid.collide):a.grid.trigger&&e.map.UpdateMapAreaTrigger(a.id,a.grid.start,a.grid.end,a.grid.trigger),a.gridSpawned=!0}}},ToggleCoreGridSpawn:e=>{a.inScene?DespawnFromGrid():SpawnOnGrid(e)},RemoveComponent:e=>{if(a.inScene)if(Array.isArray(e))for(let t in e)u().removeAttribute(e[t]);else u().removeAttribute(e)},GridMove:g,GridPath:e=>{a.pathSpeed=e.speed||1e3,a.pathWait=e.wait||1e3,a.pathPatience=e.patience||3,a.pathRoute=e.route||"any",a.pathLoop=e.loop||"infinite",a.pathType=e.type||"jump";let t=y(a.grid);a.position.x=t.x,t.y&&(a.position.y=t.y),a.position.z=t.z;let o,i,n=.5;for(let t in e.path){let o=1;for(let i in e.path[t]){"y"===i?(n=e.path[t][i]>0?1:-1,o=Math.abs(e.path[t][i])):(n=e.path[t][i]>0?.5:-.5,o=Math.abs(e.path[t][i]/.5));for(let e=0;e<o;e++)a.gridPath.push({[i]:n})}}let r=a.position.x,s=a.position.y,l=a.position.z;if("anim"===a.pathType)for(let e in a.gridPath){let t={name:"animmove",property:"object3D.position.x",to:0,dur:a.pathSpeed,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"moveXStart",pauseEvents:"moveXStop"};o=Object.keys(a.gridPath[e])[0],i=a.gridPath[e][o],t.property="object3D.position."+o,"x"===o?(t.to=r+=i,t.name="animmove"+o+r,t.startEvents="animstart"+o+r,t.pauseEvents="animstop"+o+r):"y"===o?(t.to=(s+=i)+a.grid.yOffset,t.name="animmove"+o+s,t.startEvents="animstart"+o+s,t.pauseEvents="animstop"+o+s):"z"===o&&(t.to=l+=i,t.name="animmove"+o+l,t.startEvents="animstart"+o+l,t.pauseEvents="animstop"+o+l),a.inScene?w(t):(0===Object.keys(a.animations).length&&(a.animations={}),delete t.name,a.animations["move"+e]=t)}},WalkPath:()=>{let e=!0,t=!1,o=!0,i=!1,n=!0,r=!1,s=0,l=!1,c=0;function d(){l=!l}function p(){a.currentPath=0}function h(){a.currentPath=a.gridPath.length-1}"any"===a.pathRoute&&100*Math.random()>50&&(l=!0),a.gridPathInterval=setInterval((()=>{e&&o&&n&&(("circuit"===a.pathRoute||"alternate"===a.pathRoute||"any"===a.pathRoute)&&(l?(a.currentPath--,a.currentPath<0&&("infinite"===a.pathLoop||(s>=a.pathLoop?clearInterval(a.gridPathInterval):s++),"circuit"===a.pathRoute?l&&(p(),d()):"alternate"===a.pathRoute?(p(),d()):"any"===a.pathRoute&&(100*Math.random()>50?(p(),d()):h()))):(a.currentPath++,a.currentPath>=a.gridPath.length&&("infinite"===a.pathLoop||(s>=a.pathLoop?clearInterval(a.gridPathInterval):s++),"circuit"===a.pathRoute?p():"alternate"===a.pathRoute?(h(),d()):"any"===a.pathRoute&&(100*Math.random()>50?p():(h(),d()))))),e=!1,o=!1,n=!1,t=!!a.gridPath[a.currentPath].x,i=!!a.gridPath[a.currentPath].y,r=!!a.gridPath[a.currentPath].z),t?(e=g(l?{x:-1*a.gridPath[a.currentPath].x}:{x:a.gridPath[a.currentPath].x}),e?(t=!1,c=0,i||(o=!0),r||(n=!0)):(c++,c>=a.pathPatience&&(e=!0,o=!0,n=!0,d()))):i?(o=g(l?{y:-1*a.gridPath[a.currentPath].y}:{y:a.gridPath[a.currentPath].y}),o?(i=!1,c=0,t||(e=!0),r||(n=!0)):(c++,c>=a.pathPatience&&(e=!0,o=!0,n=!0,d()))):r&&(n=g(l?{z:-1*a.gridPath[a.currentPath].z}:{z:a.gridPath[a.currentPath].z}),n?(r=!1,c=0,t||(e=!0),i||(o=!0)):(c++,c>=a.pathPatience&&(e=!0,o=!0,n=!0,d())))}),a.pathSpeed+a.pathWait)},ChangeSelf:f,ChangeCore:v,EnablePhysics:t=>{a.physics=e.worldPhysics,"ammo"===a.physics?(e=>{e&&e.body?a.body.type||(a.body.shape="dynamic"):a.body||(a.body={type:"kinematic"}),e&&e.shape?a.shape=e.shape:a.geometry&&["box, sphere, cone, cylinder, box"].includes(a.geometry.primitive)?a.shape={type:a.geometry.primitive}:a.shape={type:"box"},u().setAttribute("ammo-body",a.body),u().setAttribute("ammo-shape__"+a.id,a.shape)})(t):"cannon"===a.physics&&(e=>{e?.body?(a.body=e.body,a.body.type||(a.body.shape="dynamic"),a.body.mass||(a.body.mass=1),a.body.shape="none"):a.body||(a.body={type:"dynamic",shape:"none",mass:1}),e?.shape?a.shape=e.shape:a.shape&&(a.data.geometry?(a.shape=a.data.geometry,a.data.geometry.height?a.shape.offset=new THREE.Vector3(0,a.data.geometry.height/2,0):a.data.geometry.radius&&(a.shape.offset=new THREE.Vector3(0,a.data.geometry.radius/2,0))):a.shape={shape:"box",height:.5,width:.5,depth:.5,offset:"0 0.25 0"}),u().setAttribute("body",a.body),u().setAttribute("shape__core",a.shape),e.fixed&&(u().body.fixedRotation=!0,u().body.updateMassProperties())})(t)},DisablePhysics:b,PhysPos:e=>{a.el.body&&a.inScene&&(a.el.body.position.copy(e),a.el.object3D.position.copy(e))},Animate:w,EmitEvent:x,SetFlag:t=>{if(Array.isArray(t))for(let o in t)a[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:a.id,type:"core",sub:!1,name:t[o].flag,data:t[o].value});else a[t.flag]=t.value,e.SaveToProfile({auxlObject:a.id,type:"core",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(a(e[o]));return t}return a[e]},DomClass:(e,t,o)=>{t&&(a.el.classList.remove(...a.classes),a.classes=[]),a.inScene&&(Array.isArray(e)?(a.el.classList.add(...e),o&&e.forEach((e=>a.classes.push(e)))):(a.el.classList.add(e),o&&a.classes.push(e)))},EnableDetail:t=>{var o,n,r,s,l,c;i||(o=t.text,n=t.position,r=t.textColor,s=t.windowColor,l=t.windowWidth,c=t.windowHeight,a.isOpen=!1,a.detailMain=e.Core(e.detailMainData),a.detailClose=e.Core(e.detailCloseData),n?(a.detailMain.core.position.x=n.x,a.detailMain.core.position.y=n.y,a.detailMain.core.position.z=n.z):(a.detailMain.core.position.x=a.position.x+.1,a.detailMain.core.position.y=a.position.y+.75,a.detailMain.core.position.z=a.position.z+.25),s&&(a.detailMain.core.material.color=s),o?a.detailMain.core.text.value=o:a.detail&&(a.detailMain.core.text.value=a.detail),r&&(a.detailMain.core.text.color=r),l&&(a.detailMain.core.geometry.width=l,a.detailClose.core.position.x=c/2),c&&(a.detailMain.core.geometry.height=c,a.detailClose.core.position.y=c/2),a.detailLayer={parent:{core:a.detailMain},child0:{core:a.detailClose}},a.detailAll=e.Layer("detailAll",a.detailLayer),i=!0),u().addEventListener("click",C)},DisableDetail:()=>{a.isOpen&&(a.isOpen=T()),u().removeEventListener("click",C)},ChangeMatSrc:t=>{a.inScene&&(e.loadingScene&&(s||(s=!0,c(),a.el.addEventListener("loaded",d))),u().setAttribute("material",{src:t}))}}},t=(e,t,o,a)=>{let i,n,r,s,l,c={};c.id=t,c.layer=o,o.id=t,o.vrUI=!1,o.defaultPosition=new THREE.Vector3(0,0,0),e.camQuat=new THREE.Quaternion,e.rigQuat=new THREE.Quaternion,o.transition={},o.transition.id="000000",o.transition.scene="fade",o.transition.teleport="fade",o.teleporting=!1,o.move=!1,o.moveType={pov:"1st",axis:"posXZ",style:"free"},o.roomScaleStand=!1,o.bodyCrouch=!1,o.animating=!1,o.snapMode=45,o.snapRotating=!1;let d={name:"anim45",property:"object3D.rotation.y",from:"0",to:"45",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},p={name:"anim90",property:"object3D.rotation.y",from:"0",to:"90",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0};o.beltDefaultText="Hello World!",o.beltText="Hello World!",o.infoText="Player :\n",o.equipped=!1,o.equippedObject="none",o.menuToggle=!0,o.SpawnLayer(),e.avatar.SpawnLayer("playerBody"),e.controller=e.playerRig.GetEl().components.auxcontroller,o.position=new THREE.Vector3(0,0,0),o.gridPos=new THREE.Vector3(0,0,0),o.gridPos.copy(e.playerRig.GetEl().getAttribute("position")),o.gridDirection="still",o.linkDistance=8,o.raycasters={},o.raycasters.display=!1,o.raycasters.hmdmouse={},o.raycasters.hmdmouse.core=e.mouseController,o.raycasters.hmdmouse.el=e.mouseController.GetEl(),o.raycasters.hmdmouse.cursorCore=e.mouseControllerUI,o.raycasters.hmdmouse.cursorEl=e.mouseControllerUI.GetEl(),o.raycasters.hmdmouse.intersection=new THREE.Vector3(0,0,0),o.raycasters.hmdmouse.intersectionEl=!1,o.raycasters.hmdmouse.distance=o.linkDistance,o.raycasters.hmdmouse.linkInterval,o.raycasters.hmdmouse.hoverInterval,o.raycasters.hmdmouse.linkDisplay=!1,o.raycasters.hmdmouse.linkCoreData={data:"linkCoreData",id:"hmdLinkCore",sources:!1,text:!1,geometry:{primitive:"ring",radiusInner:.15,radiusOuter:.4},material:{shader:"standard",color:"#eb07a5",emissive:"#eb07a5",emissiveIntensity:.25,opacity:.69,side:"double"},position:new THREE.Vector3(0,0,.15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{body:{type:"static",shape:"none",mass:0},"look-at-xyz":{match:"camera",x:!0,y:!0,z:!0}}},o.raycasters.hmdmouse.linkCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hmdmouse.linkCoreData,!1,!0)),o.raycasters.hmdmouse.linkAnchor=e.Core(e.CoreDataFromTemplate(o.raycasters.hmdmouse.linkCoreData,{id:"hmdLinkAnchor",geometry:{primitive:"ring",radiusInner:.25,radiusOuter:.35},material:{shader:"standard",color:"#eb07a5",emissive:"#eb07a5",emissiveIntensity:.25,opacity:.69,side:"double"}},!0)),o.raycasters.hmdmouse.linkConfig={type:"auxspring",to:"playerRig",minOneLength:0,maxOneLength:30,restLength:1,damping:.5,stiffness:10},o.raycasters.hmdmouse.linkConstraint=e.Constraints(o.raycasters.hmdmouse.linkCore,o.raycasters.hmdmouse.linkConfig,!1),o.raycasters.hmdmouse.bullets=[],o.raycasters.hmdmouse.bulletCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hmdmouse.linkCoreData,{id:"hmdbulletCore",geometry:{primitive:"sphere",radius:.2},material:{shader:"standard",color:"#d8f020",emissive:"#d8f020",emissiveIntensity:.25,opacity:.75},components:{body:{type:"dynamic",shape:"sphere",mass:1},bodymaterial:{friction:1,restitution:.01}}},!0)),o.raycasters.hmdmouse.grabbed=[],o.raycasters.hmdmouse.bullet0=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet0"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet0),o.raycasters.hmdmouse.bullet1=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet1"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet1),o.raycasters.hmdmouse.bullet2=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet2"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet2),o.raycasters.hmdmouse.bullet3=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet3"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet3),o.raycasters.hmdmouse.bullet4=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet4"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet4),o.raycasters.hmdmouse.bullet5=e.CoreFromTemplate(o.raycasters.hmdmouse.bulletCore,{id:"hmdbullet5"},!0),o.raycasters.hmdmouse.bullets.push(o.raycasters.hmdmouse.bullet5),o.raycasters.hand1={},o.raycasters.hand1.core=e.vrController1,o.raycasters.hand1.el=e.vrController1.GetEl(),o.raycasters.hand1.uiCore=e.vrController1UI,o.raycasters.hand1.uiEl=e.vrController1UI.GetEl(),o.raycasters.hand1.cursorCore=e.vrController1Cursor,o.raycasters.hand1.cursorEl=e.vrController1Cursor.GetEl(),o.raycasters.hand1.intersection=new THREE.Vector3(0,0,0),o.raycasters.hand1.intersectionEl=!1,o.raycasters.hand1.distance=o.linkDistance,o.raycasters.hand1.linkInterval,o.raycasters.hand1.hoverInterval,o.raycasters.hand1.linkDisplay=!1,o.raycasters.hand1.linkCoreData={data:"linkCoreData",id:"hand1LinkCore",sources:!1,text:!1,geometry:{primitive:"ring",radiusInner:.3,radiusOuter:.5},material:{shader:"standard",color:"#ebd107",emissive:"#ebd107",emissiveIntensity:.25,opacity:.75,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{body:{type:"static",shape:"none",mass:0},"look-at-xyz":{match:"camera",x:!0,y:!0,z:!0}}},o.raycasters.hand1.linkCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hand1.linkCoreData,!1,!0)),o.raycasters.hand1.linkAnchor=e.Core(e.CoreDataFromTemplate(o.raycasters.hand1.linkCoreData,{id:"hand1LinkAnchor",geometry:{primitive:"ring",radiusInner:.25,radiusOuter:.35},material:{shader:"standard",color:"#eb07a5",emissive:"#eb07a5",emissiveIntensity:.25,opacity:.69,side:"double"}},!0)),o.raycasters.hand1.linkConfig={type:"auxspring",to:"playerRig",minOneLength:0,maxOneLength:30,restLength:1,damping:.5,stiffness:10},o.raycasters.hand1.linkConstraint=e.Constraints(o.raycasters.hand1.linkCore,o.raycasters.hand1.linkConfig,!1),o.raycasters.hand1.bullets=[],o.raycasters.hand1.bulletCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hand1.linkCoreData,{id:"hmdbulletCore",geometry:{primitive:"sphere",radius:.2},material:{shader:"standard",color:"#2dba74",emissive:"#2dba74",emissiveIntensity:.25,opacity:.5,blending:"multiply"},components:{body:{type:"dynamic",shape:"sphere",mass:1},bodymaterial:{friction:1,restitution:.01}}},!0)),o.raycasters.hand1.grabbed=[],o.raycasters.hand1.bullet0=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet0"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet0),o.raycasters.hand1.bullet1=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet1"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet1),o.raycasters.hand1.bullet2=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet2"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet2),o.raycasters.hand1.bullet3=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet3"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet3),o.raycasters.hand1.bullet4=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet4"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet4),o.raycasters.hand1.bullet5=e.CoreFromTemplate(o.raycasters.hand1.bulletCore,{id:"hand1bullet5"},!0),o.raycasters.hand1.bullets.push(o.raycasters.hand1.bullet5),o.raycasters.hand2={},o.raycasters.hand2.core=e.vrController2,o.raycasters.hand2.el=e.vrController2.GetEl(),o.raycasters.hand2.uiCore=e.vrController2UI,o.raycasters.hand2.uiEl=e.vrController2UI.GetEl(),o.raycasters.hand2.cursorCore=e.vrController2Cursor,o.raycasters.hand2.cursorEl=e.vrController2Cursor.GetEl(),o.raycasters.hand2.intersection=new THREE.Vector3(0,0,0),o.raycasters.hand2.intersectionEl=!1,o.raycasters.hand2.distance=o.linkDistance,o.raycasters.hand2.linkInterval,o.raycasters.hand2.hoverInterval,o.raycasters.hand2.linkDisplay=!1,o.raycasters.hand2.linkCoreData={data:"linkCoreData",id:"hand2LinkCore",sources:!1,text:!1,geometry:{primitive:"ring",radiusInner:.3,radiusOuter:.5},material:{shader:"standard",color:"#ebd107",emissive:"#ebd107",emissiveIntensity:.25,opacity:.75,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{body:{type:"static",shape:"none",mass:0},"look-at-xyz":{match:"camera",x:!0,y:!0,z:!0}}},o.raycasters.hand2.linkCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hand2.linkCoreData,!1,!0)),o.raycasters.hand2.linkAnchor=e.Core(e.CoreDataFromTemplate(o.raycasters.hand2.linkCoreData,{id:"hand2LinkAnchor",geometry:{primitive:"ring",radiusInner:.25,radiusOuter:.35},material:{shader:"standard",color:"#eb07a5",emissive:"#eb07a5",emissiveIntensity:.25,opacity:.69,side:"double"}},!0)),o.raycasters.hand2.linkConfig={type:"auxspring",to:"playerRig",minOneLength:0,maxOneLength:30,restLength:1,damping:.5,stiffness:10},o.raycasters.hand2.linkConstraint=e.Constraints(o.raycasters.hand2.linkCore,o.raycasters.hand2.linkConfig,!1),o.raycasters.hand2.bullets=[],o.raycasters.hand2.bulletCore=e.Core(e.CoreDataFromTemplate(o.raycasters.hand2.linkCoreData,{id:"hand2bulletCore",geometry:{primitive:"sphere",radius:.2},material:{shader:"standard",color:"#d02caa",emissive:"#d02caa",emissiveIntensity:.25,opacity:.5,blending:"multiply"},components:{body:{type:"dynamic",shape:"sphere",mass:1},bodymaterial:{friction:1,restitution:.01}}},!0)),o.raycasters.hand2.grabbed=[],o.raycasters.hand2.bullet0=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet0"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet0),o.raycasters.hand2.bullet1=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet1"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet1),o.raycasters.hand2.bullet2=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet2"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet2),o.raycasters.hand2.bullet3=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet3"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet3),o.raycasters.hand2.bullet4=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet4"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet4),o.raycasters.hand2.bullet5=e.CoreFromTemplate(o.raycasters.hand2.bulletCore,{id:"hand2bullet5"},!0),o.raycasters.hand2.bullets.push(o.raycasters.hand2.bullet5),o.raycasters.activeCamera="camera",o.raycasters.previousCamera=!1,o.scroll={},o.scroll.zoomed=!1,o.scroll.distances=[0,1],o.scroll.scrolls=[new THREE.Vector3(0,0,0),new THREE.Vector3(0,.5,0)],o.allowZoom=!0;const h=(t,a)=>{if(!o.allowZoom)return;o.allowZoom=!1;let i=setTimeout((()=>{o.allowZoom=!0,clearTimeout(i)}),250),n=0;o.scroll.zoomed?e.avatarHead.ChangeSelf({property:"visible",value:!1}):(o.scroll.scrolls=[],o.scroll.distances.forEach((t=>{o.scroll.scrolls.push(function(t){let o=(new THREE.Vector3).copy(e.player.RayCoord(e.camera.GetEl(),2,new THREE.Vector3(0,0,t)).direction),a=0;return 0===t||1===t&&(a+=.75),o.setY(e.playerHead.GetEl().object3D.position.y+a),o}(t))})),n=1,e.avatarHead.ChangeSelf({property:"visible",value:!0}));let r=new THREE.Vector3(0,0,0).copy(o.scroll.scrolls[n]);e.playerHead.GetEl().object3D.position.copy(r),o.scroll.zoomed=!o.scroll.zoomed};o.roamCamViewer=!1;const m=()=>{e.player.layer.teleporting=!1,e.player.layer.faded=!1},u=()=>{let t;e.player.layer.teleporting||(e.player.layer.teleporting=!0,"blink"===e.player.layer.transition.teleport?(e.blink1Screen.ChangeSelf({property:"visible",value:"true"}),e.blink2Screen.ChangeSelf({property:"visible",value:"true"}),e.blink1Screen.EmitEvent("blinkquick"),e.blink2Screen.EmitEvent("blinkquick"),t=setTimeout((()=>{e.blink1Screen.ChangeSelf({property:"visible",value:"false"}),e.blink2Screen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),500)):"fade"===e.player.layer.transition.teleport?(e.fadeScreen.ChangeSelf({property:"visible",value:"true"}),e.fadeScreen.EmitEvent("fadequick"),t=setTimeout((()=>{e.fadeScreen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),500)):"sphere"===e.player.layer.transition.teleport?(e.sphereScreen.ChangeSelf({property:"visible",value:"true"}),e.sphereScreen.EmitEvent("spherequick"),t=setTimeout((()=>{e.sphereScreen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),500)):"instant"===e.player.layer.transition.teleport?t=setTimeout((()=>{m(),clearTimeout(t)}),50):"locomotion"===e.player.layer.transition.teleport&&(t=setTimeout((()=>{m(),clearTimeout(t)}),500)))};o.CamRigHeight=0;const y=()=>{45===o.snapMode?(()=>{if(o.snapRotating);else{o.snapRotating=!0;let t=e.playerBody.GetEl().getAttribute("rotation").y;d.from=t,d.to=t-45,e.playerBody.Animate(d),l=setTimeout((()=>{o.snapRotating=!1,clearTimeout(l)}),d.dur+10)}})():90===o.snapMode&&(()=>{if(o.snapRotating);else{o.snapRotating=!0;let t=e.playerBody.GetEl().getAttribute("rotation").y;p.from=t,p.to=t-90,e.playerBody.Animate(p),l=setTimeout((()=>{o.snapRotating=!1,clearTimeout(l)}),p.dur+10)}})()},g=()=>{45===o.snapMode?(()=>{if(o.snapRotating);else{o.snapRotating=!0;let t=e.playerBody.GetEl().getAttribute("rotation").y;d.from=t,d.to=t+45,e.playerBody.Animate(d),l=setTimeout((()=>{o.snapRotating=!1,clearTimeout(l)}),d.dur+10)}})():90===o.snapMode&&(()=>{if(o.snapRotating);else{o.snapRotating=!0;let t=e.playerBody.GetEl().getAttribute("rotation").y;p.from=t,p.to=t+90,e.playerBody.Animate(p),l=setTimeout((()=>{o.snapRotating=!1,clearTimeout(l)}),p.dur+10)}})()},v=t=>{let o=e.camera.GetEl().getAttribute("rotation").y;o>0?o<360&&(o%=360):o<-360&&(o%=360);let a=new THREE.Vector3(0,-1*o+1+t,0);e.playerBody.ChangeSelf({property:"rotation",value:a})},f=(t,o)=>{let a={name:"camYAnim",property:"object3D.position.y",from:t||0,to:o||0,dur:750,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0};e.playerBody.Animate(a)};o.flashlight=!1;const b=t=>{t&&(o.beltText=t),e.playerBeltText.core.inScene&&e.playerBeltText.ChangeSelf({property:"text",value:{value:o.beltText}})},E=t=>{t&&(o.HoverText=t),o.hoverDisplay&&e.avatarHover.ChangeSelf({property:"text",value:{value:o.HoverText}})};o.actions={};const w=()=>{document.getElementById("beltUIParent")&&e.locomotionUILayer.DespawnLayer()},x=e=>{o.defaultPosition.copy(e)},T=t=>{let a=new THREE.Vector3(0,0,0);a.x=t.x||0,a.y=t.y||0,a.z=t.z||0,e.playerRig.ChangeSelf({property:"position",value:a}),o.gridPos.copy(a),o.playerPhysics&&e.playerRig.PhysPos(a),x(a)},C=()=>{if(o.menuToggle){o.menuToggle=!1;let t=setTimeout((()=>{o.menuToggle=!0,clearTimeout(t)}),350);e.comp.comp.inScene?e.mainMenu.multiMenu.menuOpen?e.mainMenu.ToggleMenu():e.comp.DespawnComp():e.comp.SpawnComp()}},D=()=>{o.equipped=!1,o.equippedObject="none",b(e.systemText)},S=()=>({layer:o,id:o.layer.all.parent.core.core.id,pos:e.playerRig.GetEl().object3D.position,bodyRot:e.playerRig.GetEl().getAttribute("rotation"),headRot:e.camera.GetEl().getAttribute("rotation"),grid:o.gridPos}),k=e=>e.distanceTo(S().pos),R=(t,a,i)=>{let n=new THREE.Vector3;o.position=new THREE.Vector3,o.quaternion=new THREE.Quaternion,o.rigQuaternion=new THREE.Quaternion,o.quaternion.copy(a.object3D.quaternion),o.rigQuaternion.copy(e.playerRig.GetEl().object3D.quaternion),o.position.copy(a.object3D.position),o.position.add(e.playerRig.GetEl().object3D.position);let r=i||new THREE.Vector3(0,0,-1);return r.applyQuaternion(o.quaternion),r.multiplyScalar(t),e.playerRig.GetEl().object3D.quaternion.equals(new THREE.Quaternion(0,0,0,1))||r.applyQuaternion(o.rigQuaternion),n.copy(o.position.clone().add(r)),n},P=()=>{let t=new THREE.Vector3;return e.camera.GetEl().object3D.getWorldDirection(t),t},I=e=>{let t=new THREE.Vector3;return e.object3D.getWorldDirection(t),t},M=(t,o)=>{let a=new THREE.Vector3;t.object3D.getWorldDirection(a);let i=new THREE.Quaternion;return i.copy(e.playerRig.GetEl().object3D.quaternion),e.playerRig.GetEl().object3D.quaternion.equals(new THREE.Quaternion(0,0,0,1))||a.applyQuaternion(i),o&&a.multiplyScalar(o),a},H=(t,o,a)=>{let i=new THREE.Vector3,n=new THREE.Quaternion,r=o||1.5,s=a||new THREE.Vector3(0,0,-1);if(t.hasAttribute("raycaster")){let e=t.getAttribute("raycaster").direction;s.x=e.x,s.y=e.y,s.z=e.z,a&&s.add(a)}return t.object3D.getWorldQuaternion(n),"camera"===t.id?e.avatarHead.GetEl().object3D.getWorldPosition(i):t.object3D.getWorldPosition(i),s.applyQuaternion(n),i.add(s.clone().multiplyScalar(r)),{position:i,direction:s}};o.tracking=!1,o.track2DInterval,new THREE.Vector3(0,0,0);let L=new THREE.Vector3(0,0,0);const O=e=>{let t=e||1e3;G();let o=setTimeout((function(){A(),clearTimeout(o)}),t)},G=()=>{"Desktop"===e.controls||"Mobile"===e.controls?e.mouseController.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".disabled",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}}):"VR"===e.controls&&("bothRight"===e.vrHand||"right"===e.vrHand?e.vrController2.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".disabled",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}):"bothLeft"===e.vrHand||"left"===e.vrHand?e.vrController1.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".disabled",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}):"both"===e.vrHand&&(e.vrController1.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".disabled",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}),e.vrController2.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".disabled",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}})))},A=()=>{"Desktop"===e.controls||"Mobile"===e.controls?e.mouseController.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}}):"VR"===e.controls&&("bothRight"===e.vrHand||"right"===e.vrHand?e.vrController2.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}):"bothLeft"===e.vrHand||"left"===e.vrHand?e.vrController1.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}):"both"===e.vrHand&&(e.vrController1.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}}),e.vrController2.ChangeSelf({property:"raycaster",value:{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:!0,useWorldCoordinates:!1}})))},z=e=>{let t=new THREE.Vector3(0,0,0);e&&e.detail&&e.detail.intersections&&e.detail.intersections[0]&&e.detail.intersections[0].point?t.copy(e.detail.intersections[0].point):e&&e.detail&&e.detail.intersection&&t.copy(e.detail.intersection.point),e&&e.target&&("mouseController"===e.target.id?o.raycasters.hmdmouse.intersection.copy(t):"vrController1"===e.target.id?o.raycasters.hand1.intersection.copy(t):"vrController2"===e.target.id&&o.raycasters.hand2.intersection.copy(t))};o.playerPowers=!0,o.raycasters.hmdmouse.mods={},o.raycasters.hand1.mods={},o.raycasters.hand2.mods={},o.playerPhysics=!1,o.worldGravity=new THREE.Vector3(0,0,0),o.localAxis=new THREE.Vector3(0,0,0),o.worldAxis=new THREE.Vector3(0,0,0),o.gravity=new THREE.Vector3(0,0,0),o.axis=new THREE.Vector3(0,0,0),o.physMove=!0,o.rotation=new THREE.Quaternion(0,0,0,0),o.rotation.copy(e.playerRig.GetEl().object3D.quaternion);o.body={type:"dynamic",shape:"none",mass:2.2,angularDamping:.425,linearDamping:.225};o.material={friction:.01,restitution:.0075};o.shape={shape:"cylinder",height:1.7,radiusTop:.225,radiusBottom:.225,offset:"0 0.85 0"};o.jumping=!1,o.jumpDistance=4,o.jumpTimeout,e.playerRig.GetEl().addEventListener("collide",(function(t){const a=new CANNON.Vec3;let i=new THREE.Vector3;i.copy(e.playerRig.GetEl().components.gravitycontrol.axis);let n=new THREE.Vector3;n.copy(i),n.negate();const r=t.detail.contact;r.bi.id==e.playerRig.GetEl().body.id?r.ni.negate(a):a.copy(r.ni),a.dot(n)>.5&&(o.jumping=!1)}));const V=t=>{e.playerRig.GetEl().components.gravitycontrol&&((t.type||0===t.type)&&(e.playerRig.GetEl().components.gravitycontrol.setTypes(t.type),e.playerRig.GetEl().components.gravitycontrol.setWorldTypes(t.type)),(t.axis||0===t.axis)&&(e.playerRig.GetEl().components.gravitycontrol.setAxis(t.axis),e.playerRig.GetEl().components.gravitycontrol.setWorldAxis(t.axis)))},F=(e,t,a)=>{let i=!1;if("mouseController"===e)i=o.raycasters.hmdmouse;else if("vrController1"===e)i=o.raycasters.hand1;else{if("vrController2"!==e)return;i=o.raycasters.hand2}he(i.linkCore),i.power=1e3,clearInterval(i.linkInterval),i.cursorCore.EmitEvent("charge"),i.linkInterval=setInterval((()=>{i.power>=15?i.power-=15:(i.cursorCore.EmitEvent("charged"),clearInterval(i.linkInterval))}),1)};o.boostDistance=25;const U=t=>{if(o.toggle4){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}B(i,a)}},j=e=>{o.toggle4&&F(e.target.id)},B=(t,a)=>{let i=new THREE.Vector3;i.copy(I(t)),i.multiplyScalar(o.boostDistance),i.negate(),e.playerRig.GetEl().body.applyLocalImpulse(i,new THREE.Vector3(0,0,0))};o.backBoostDistance=20;const N=t=>{if(o.toggle5){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}q(i,a.power)}},_=e=>{o.toggle5&&F(e.target.id)},q=(t,a)=>{let i=new THREE.Vector3;i.copy(I(t)),i.multiplyScalar(o.backBoostDistance),e.playerRig.GetEl().body.applyLocalImpulse(i,new THREE.Vector3(0,0,0))},W=()=>{e.playerRig.GetEl(!0).body&&e.playerRig.GetEl().body.sleep()},J=()=>{e.playerRig.GetEl(!0).body&&e.playerRig.GetEl().body.wakeUp()};o.brakeDoubleTapSet=!1,o.playerRedirect=new THREE.Vector3;const Z=t=>{if(o.toggle3){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}clearInterval(o.redirectInterval),X(i,a)}},K=t=>{o.velocitySpeed=0,o.brakeOff=o.body.linearDamping,o.braking=o.brakeOff/32,clearInterval(o.redirectInterval),o.redirectInterval=setInterval((()=>{o.velocitySpeed<121?o.velocitySpeed++:clearInterval(o.redirectInterval),e.playerRig.GetEl().body.linearDamping<.9&&(e.playerRig.GetEl().body.linearDamping+=o.braking)}),1)},X=(t,a)=>{e.playerRig.GetEl().body.linearDamping=o.brakeOff,o.playerRedirect.copy(M(t)),o.playerRedirect.normalize().multiplyScalar(o.velocitySpeed).negate(),e.playerRig.GetEl().body.applyLocalImpulse(o.playerRedirect,new THREE.Vector3(0,0,0))},Y=t=>{if(o.toggle0){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}$(i,a)}},Q=e=>{o.toggle0&&F(e.target.id)},$=(e,t)=>{t.power/=1e3;let o=t.distance||42,a=0;t.power>.85&&(a=15);let i=new THREE.Vector3;k(t.intersection)<=o?i.copy(t.intersection):i.copy(H(e,o).position);let n=o*t.power+a;t.linkConstraint.Connect({type:"auxspring",restLength:n,damping:.5,stiffness:0,maxForce:1e6}),t.linkCore.core.inScene?t.linkCore.PhysPos(i):(t.linkCore.core.position=i,t.linkCore.SpawnCore())};o.teleDistance=5;const ee=t=>{if(o.toggle2){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}oe(i,a)}},te=e=>{o.toggle2&&F(e.target.id)},oe=(t,a)=>{a.power<100&&(a.power=100),a.power/=1e3;let i=o.teleDistance+o.teleDistance/a.power,n=new THREE.Vector3;k(a.intersection)<=i?n.copy(a.intersection):n.copy(R(i,t));let r=setTimeout((()=>{e.playerRig.PhysPos(n),W();let t=setTimeout((()=>{J(),clearTimeout(r),clearTimeout(t)}),275)}),225);u()};o.bulletLasts=15e3,o.bulletAt=0;const ae=t=>{if(o.toggle1){let a=!1,i=!1;if("mouseController"===t.target.id)clearInterval(o.raycasters.hmdmouse.linkInterval),i=e.camera.GetEl(),a=o.raycasters.hmdmouse;else if("vrController1"===t.target.id)clearInterval(o.raycasters.hand1.linkInterval),i=e.vrController1.GetEl(),a=o.raycasters.hand1;else{if("vrController2"!==t.target.id)return;clearInterval(o.raycasters.hand2.linkInterval),i=e.vrController2.GetEl(),a=o.raycasters.hand2}ne(i,a)}},ie=e=>{o.toggle1&&F(e.target.id)},ne=(e,t)=>{if(!t.shooting){t.shooting=!0,t.power/=1e3,t.power>.75&&(t.power=.5);let a=H(e,.35),i=30;a.direction.multiplyScalar((1-t.power)*i);let n=!1;t.bullets[o.bulletAt].core.inScene?(t.bullets[o.bulletAt].PhysPos(a.position),t.bullets[o.bulletAt].RemoveComponent("velocity"),t.bullets[o.bulletAt].GetEl().body.velocity.x=a.direction.x,t.bullets[o.bulletAt].GetEl().body.velocity.y=a.direction.y,t.bullets[o.bulletAt].GetEl().body.velocity.z=a.direction.z,n=!0):(t.bullets[o.bulletAt].core.components.velocity={},t.bullets[o.bulletAt].core.components.velocity.x=a.direction.x,t.bullets[o.bulletAt].core.components.velocity.y=a.direction.y,t.bullets[o.bulletAt].core.components.velocity.z=a.direction.z,t.bullets[o.bulletAt].core.position=a.position,t.bullets[o.bulletAt].SpawnCore()),clearTimeout(t.shootTimeout),t.shootTimeout=setTimeout((()=>{o.bulletAt++,o.bulletAt>=t.bullets.length&&(o.bulletAt=0),t.shooting=!1,clearTimeout(t.shootTimeout)}),3);let r=o.bulletAt;n&&clearTimeout(t["bulletTimeout"+r]),t["bulletTimeout"+r]=setTimeout((()=>{t.bullets[r].DespawnCore(),clearTimeout(t["bullet"+r])}),o.bulletLasts)}};o.raycasters.hmdmouse.id="mouseController",o.raycasters.hand1.id="vrController1",o.raycasters.hand2.id="vrController2",o.raycasters.hmdmouse.targets=[],o.raycasters.hand1.targets=[],o.raycasters.hand2.targets=[],o.raycasters.hmdmouse.maxTargets=12,o.raycasters.hand1.maxTargets=12,o.raycasters.hand2.maxTargets=12,o.raycasters.hmdmouse.targetDistance=50,o.raycasters.hand1.targetDistance=50,o.raycasters.hand2.targetDistance=50,o.raycasters.hmdmouse.targetChecked=!1,o.raycasters.hand1.targetChecked=!1,o.raycasters.hand2.targetChecked=!1;const re=(e,t)=>{t.targets.forEach((e=>{let t=!!document.getElementById("target"+e.id)&&document.getElementById("target"+e.id);t&&e.removeChild(t)})),t.blocked=!0},se=(e,t)=>{t.targets=[],t.targetsLocked=!1,t.blocked=!1},le=t=>{let a=t.target.id,i=!1,n=!1;if("mouseController"===a)i=o.raycasters.hmdmouse,n=e.mouseController.GetEl();else if("vrController1"===a)i=o.raycasters.hand1,n=e.vrController1.GetEl();else{if("vrController2"!==a)return;i=o.raycasters.hand2,n=e.vrController2.GetEl()}"raycaster-intersection"===t.type?((t,o)=>{if(!o.targetsLocked&&!o.blocked&&!o.targetChecked&&t.components.raycaster.intersections.length>0){o.intersection=new THREE.Vector3(0,0,0);let a=!1;if(t.components.raycaster.intersections.every((e=>e.object.el.id===o.id||(o.intersection.copy(e.point),o.intersectionEl=e.object.el,a=e.object.el,!1))),!a||!a.classList.contains("target"))return;if(o.targets.includes(a));else{if(o.targets.length>=o.maxTargets){let e=document.getElementById("target"+o.targets[0].id);o.targets[0].removeChild(e),o.targets.shift()}o.targets.push(a);let t=((t,o)=>{let a="#fff500",i={id:"target"+t,sources:!1,text:!1,geometry:{primitive:"torus",arc:360,radius:.4,radiusTubular:.01,segmentsRadial:36,segmentsTubular:32},material:{shader:"standard",color:a,emissive:a,emissiveIntensity:.25,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{targettedx:{property:"object3D.scale.x",from:3,to:1,dur:250,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},targettedy:{property:"object3D.scale.y",from:3,to:1,dur:250,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},targettedz:{property:"object3D.scale.z",from:3,to:1,dur:250,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},hitx:{property:"object3D.scale.x",from:1,to:4,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fire"},hity:{property:"object3D.scale.y",from:1,to:4,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fire"},hitz:{property:"object3D.scale.z",from:1,to:4,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fire"}},mixins:!1,classes:["a-ent"],components:{"look-at-xyz":{match:"camera",x:!0,y:!0,z:!0}}};return e.Core(i)})(o.intersectionEl.id);t.SpawnCore(o.intersectionEl)}o.targetChecked=!0}})(n,i):"raycaster-intersection-cleared"===t.type?((e,t)=>{t.targetChecked=!1})(0,i):"raycaster-closest-entity-changed"===t.type||("mousedown"===t.type?((e,t)=>{t.targetsLocked=!0})(0,i):"mouseup"===t.type&&(re(0,i),se(0,i)))},ce=t=>{let a=!1,i=!1,n=!1;if("Desktop"===e.controls||"Mobile"===e.controls)a=o.raycasters.hmdmouse,i=e.mouseController.GetEl();else{if("VR"!==e.controls)return;t.startsWith("action1")||t.startsWith("action2")?(a=o.raycasters.hand1,i=e.vrController1.GetEl()):(t.startsWith("action3")||t.startsWith("action4"),a=o.raycasters.hand2,i=e.vrController2.GetEl())}n=i.id,"launch"===t||(i.addEventListener("raycaster-intersection",le),i.addEventListener("raycaster-intersection-cleared",le),i.addEventListener("raycaster-closest-entity-changed",le),i.addEventListener("mousedown",le),i.addEventListener("mouseup",le)),F(n)},de=t=>{let a=!1,i=!1;if("Desktop"===e.controls||"Mobile"===e.controls)a=o.raycasters.hmdmouse,i=e.mouseController.GetEl();else{if("VR"!==e.controls)return;t.startsWith("action1")||t.startsWith("action2")?(a=o.raycasters.hand1,i=e.vrController1.GetEl()):(t.startsWith("action3")||t.startsWith("action4"),a=o.raycasters.hand2,i=e.vrController2.GetEl())}clearInterval(a.linkInterval),a.cursorCore.EmitEvent("reset"),a.blocked||pe(i,a,t),i.removeEventListener("raycaster-intersection",le),i.removeEventListener("raycaster-intersection-cleared",le),i.removeEventListener("raycaster-closest-entity-changed",le),i.removeEventListener("mousedown",le),i.removeEventListener("mouseup",le)},pe=(t,o,a)=>{re(0,o);let i=setTimeout((()=>{se(0,o),clearTimeout(i)}),500);function n(){o.grabbed.forEach((e=>{e.removeAttribute("ammo-constraint")})),o.grabbed=[]}o.grabbed.length>0&&(o.targets=[...o.grabbed],n()),"release"===a?n():o.targets.forEach((i=>{if("dynamic"!==i.components["ammo-body"].data.type)return void console.log({msg:"Target is not dynamic, cannot grab",each:i,rayEl:t,ray:o,type:a});let r=new THREE.Vector3,s=new THREE.Vector3;e.playerRig.GetEl().object3D.getWorldPosition(r),i.object3D.getWorldPosition(s);let l=r.distanceTo(s),c=i.body.getCenterOfMassTransform(),d=H(t,l).direction,p=(new THREE.Vector3).sub(d,c).normalize();p.negate();let h=22,m=a||"free";if(m.endsWith("free"));else if(m.endsWith("pull")){p=new THREE.Vector3;let t=new THREE.Vector3;e.playerRig.GetEl().object3D.getWorldPosition(p),i.object3D.getWorldPosition(t),p.sub(t),p.normalize(),p.add(new THREE.Vector3(0,2,0)),h=14,l=l>h?h:l,l=l<4?4:l,h=l<=h?l:h}else if(m.endsWith("up"))p.setZ(0),p.setX(0);else if(m.endsWith("grab")||m.endsWith("flick")){let e=!1;"mouseController"===o.id?e="avatarHead":"vrController1"===o.id?e="avatarHand1":"vrController2"===o.id&&(e="avatarHand2");let t=0;if(i.hasAttribute("ammo-constraint")&&(console.log({msg:"ammo-constraint still attached, removing and delaying.",each:i}),i.removeAttribute("ammo-constraint"),t=25),m.endsWith("flick")){let e=setTimeout((()=>{n(),clearTimeout(e)}),150)}else{let a=setTimeout((()=>{if(i.hasAttribute("ammo-constraint"))return console.log({msg:"ammo-constraint still not removed, bailing.",timing:t,each:i}),re(0,o),void se(0,o);i.setAttribute("ammo-constraint",{type:"lock",target:"#"+e}),o.grabbed.push(i),clearTimeout(a)}),t)}}else m.endsWith("launch")&&n();if(m.endsWith("grab"));else{let e=(1e3-o.power)/1e3;e*=h,p.multiplyScalar(e);let t=p.x,a=p.y,n=p.z;const r=new Ammo.btVector3(t,a,n),s=new Ammo.btVector3(0,0,0);i.body.applyImpulse(r,s),Ammo.destroy(r),Ammo.destroy(s)}}))},he=e=>{e.core.inScene&&e.DespawnCore()};return document.addEventListener("keydown",(e=>{"`"===e.key?C():"1"===e.key?g():"2"===e.key?y():"3"===e.key?h():"4"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||e.key})),{layer:o,player:c,Reset:()=>{o.transition={},o.transition.id="000000",o.transition.scene="fade",o.transition.teleport="fade",o.teleporting=!1,o.roomScaleStand=!1,o.bodyCrouch=!1,o.animating=!1,o.snapRotating=!1,o.beltDefaultText="Hello World!",o.beltText="Hello World!",o.flashlight=!1,o.infoText="Player :\n"},PlayerColors:(t,o)=>{e.avatarHead.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarBody0.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarBody1.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarBody2.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarBody3.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarHover.ChangeSelf({property:"material",value:{color:t,emissive:t}}),e.avatarHand1.ChangeSelf({property:"material",value:{color:o,emissive:o}}),e.avatarHand2.ChangeSelf({property:"material",value:{color:o,emissive:o}}),e.avatarBody4.ChangeSelf({property:"material",value:{color:o,emissive:o}}),e.avatarFeet.ChangeSelf({property:"material",value:{color:o,emissive:o}}),e.cameraUI.ChangeSelf({property:"material",value:{color:t}}),e.cameraUI.ChangeSelf({property:"text",value:{color:o}}),e.vrController1UI.ChangeSelf({property:"material",value:{color:t}}),e.vrController1UI.ChangeSelf({property:"text",value:{color:o}}),e.vrController2UI.ChangeSelf({property:"material",value:{color:t}}),e.vrController2UI.ChangeSelf({property:"text",value:{color:o}}),e.playerFloor.ChangeSelf({property:"material",value:{color:t}}),e.playerFloor.ChangeSelf({property:"text",value:{color:o}})},CameraSwitch:t=>{e[o.raycasters.activeCamera].ChangeSelf({property:"active",value:!1}),e[t].ChangeSelf({property:"active",value:!0}),o.raycasters.previousCamera=o.raycasters.activeCamera,o.raycasters.activeCamera=t},CameraSwitchBack:()=>{e[o.raycasters.activeCamera].ChangeSelf({property:"active",value:!1}),e[o.raycasters.previousCamera].ChangeSelf({property:"active",value:!0}),o.raycasters.previousCamera=o.raycasters.activeCamera,o.raycasters.activeCamera=o.raycasters.previousCamera},PlayerSceneAnim:()=>{let t=setTimeout((()=>{e.loadingScene||(e.loadingScene=!0),m(),clearTimeout(t)}),800);o.teleporting||(o.teleporting=!0,"blink"===o.transition.scene?(G(),o.GetChild("blink1Screen").ChangeSelf({property:"visible",value:"true"}),o.GetChild("blink2Screen").ChangeSelf({property:"visible",value:"true"}),o.GetChild("blink1Screen").EmitEvent("blinkScene1"),o.GetChild("blink2Screen").EmitEvent("blinkScene1")):"fade"===o.transition.scene?(G(),o.GetChild("fadeScreen").ChangeSelf({property:"visible",value:"true"}),o.GetChild("fadeScreen").EmitEvent("fadeScene1")):"sphere"===o.transition.scene?(G(),o.GetChild("sphereScreen").ChangeSelf({property:"visible",value:"true"}),o.GetChild("sphereScreen").EmitEvent("sphereScene1")):"instant"===o.transition.scene&&G())},UpdateSceneTransitionStyle:e=>{o.transition.scene=e},PlayerTeleportAnim:()=>{let t;e.player.layer.teleporting||(e.player.layer.teleporting=!0,"blink"===e.player.layer.transition.teleport?(e.player.TempDisableClick(),e.blink1Screen.ChangeSelf({property:"visible",value:"true"}),e.blink2Screen.ChangeSelf({property:"visible",value:"true"}),e.blink1Screen.EmitEvent("blink"),e.blink2Screen.EmitEvent("blink"),t=setTimeout((()=>{e.blink1Screen.ChangeSelf({property:"visible",value:"false"}),e.blink2Screen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),1200)):"fade"===e.player.layer.transition.teleport?(e.player.TempDisableClick(),e.fadeScreen.ChangeSelf({property:"visible",value:"true"}),e.fadeScreen.EmitEvent("fade"),t=setTimeout((()=>{e.fadeScreen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),1200)):"sphere"===e.player.layer.transition.teleport?(e.player.TempDisableClick(),e.sphereScreen.ChangeSelf({property:"visible",value:"true"}),e.sphereScreen.EmitEvent("sphere"),t=setTimeout((()=>{e.sphereScreen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),1200)):"instant"===e.player.layer.transition.teleport?t=setTimeout((()=>{m(),clearTimeout(t)}),500):"locomotion"===e.player.layer.transition.teleport&&(t=setTimeout((()=>{m(),clearTimeout(t)}),1e3)))},PlayerQuickAnim:u,PlayerFadeOut:()=>{if(!e.player.layer.teleporting&&!e.player.layer.faded){let t;G(),e.player.layer.teleporting=!0,e.fadeScreen.ChangeSelf({property:"visible",value:"true"}),e.fadeScreen.EmitEvent("fadeScene1"),t=setTimeout((()=>{e.player.layer.faded=!0,clearTimeout(t)}),500)}},PlayerFadeIn:()=>{if(e.player.layer.faded){let t;e.fadeScreen.EmitEvent("fadeScene2"),t=setTimeout((()=>{A(),e.fadeScreen.ChangeSelf({property:"visible",value:"false"}),m(),clearTimeout(t)}),500)}},UpdateTeleportTransitionStyle:e=>{o.transition.teleport=e},UpdateTransitionColor:t=>{e.fadeScreen.ChangeSelf({property:"material",value:{color:t}}),e.sphereScreen.ChangeSelf({property:"material",value:{color:t}}),e.blink1Screen.ChangeSelf({property:"material",value:{color:t}}),e.blink2Screen.ChangeSelf({property:"material",value:{color:t}})},GetCameraDirection:P,ToggleVRText:()=>{o.vrUI=!o.vrUI,"VR"===e.controls&&("bothRight"===e.vrHand?e.vrController2.ChangeSelf({property:"visible",value:o.vrUI}):"bothLeft"===e.vrHand?e.vrController1.ChangeSelf({property:"visible",value:o.vrUI}):"both"===e.vrHand?(e.vrController1.ChangeSelf({property:"visible",value:o.vrUI}),e.vrController2.ChangeSelf({property:"visible",value:o.vrUI})):"right"===e.vrHand?e.vrController2.ChangeSelf({property:"visible",value:o.vrUI}):"left"===e.vrHand&&e.vrController1.ChangeSelf({property:"visible",value:o.vrUI}))},UpdateUIText:t=>{UpdateSystemText(t),"VR"===e.controls&&o.vrUI&&("bothRight"===e.vrHand?e.vrController2.ChangeSelf({property:"text",value:t}):"bothLeft"===e.vrHand?e.vrController1.ChangeSelf({property:"text",value:t}):"both"===e.vrHand?(e.vrController1.ChangeSelf({property:"text",value:t}),e.vrController2.ChangeSelf({property:"text",value:t})):"right"===e.vrHand?e.vrController2.ChangeSelf({property:"text",value:t}):"left"===e.vrHand&&e.vrController1.ChangeSelf({property:"text",value:t}))},ToggleBeltText:(t,o)=>{t||!e.playerBeltText.core.inScene?(e.playerBeltText.ChangeSelf({property:"visible",value:!0}),e.playerBeltTitleText.ChangeSelf({property:"visible",value:!0}),b(o)):e.playerBeltText.core.inScene&&(e.playerBeltText.ChangeSelf({property:"visible",value:!1}),e.playerBeltTitleText.ChangeSelf({property:"visible",value:!1}))},UpdateBeltText:b,ToggleHoverText:t=>{t||!o.hoverDisplay?(e.avatarHover.ChangeSelf({property:"visible",value:!0}),E(),o.hoverDisplay=!0):o.hoverDisplay&&(e.avatarHover.ChangeSelf({property:"visible",value:!1}),o.hoverDisplay=!1)},UpdateHoverText:E,ToggleFloorText:t=>{t||!o.floorDisplay?(e.playerFloor.ChangeSelf({property:"visible",value:!0}),E(),o.floorDisplay=!0):o.floorDisplay&&(e.playerFloor.ChangeSelf({property:"visible",value:!1}),o.floorDisplay=!1)},Notification:t=>{r=t.time||2750,r<500&&(console.log({msg:"Error. Too short of a time. Min is 1000ms",notificationInfo:t}),r=1e3),O(r),clearTimeout(i),clearTimeout(n),e.cameraUI.ChangeSelf({property:"text",value:{value:t.message,width:.5,color:"#FFFFFF",align:"center",font:"exo2bold",side:"double",opacity:0}}),e.cameraUI.ChangeSelf({property:"visible",value:"true"}),e.cameraUI.EmitEvent("cameraMsg"),i=setTimeout((()=>{e.cameraUI.EmitEvent("cameraMsgFadeOut"),clearTimeout(i)}),r-501),n=setTimeout((()=>{e.cameraUI.ChangeSelf({property:"visible",value:"false"}),clearTimeout(n)}),r)},UpdateActions:({actions:t,remove:a,tracker:i,limit:n})=>{if(a){if(i&&o.actions[i]?o.actionArray={...o.actions[i]}:o.actionArray=t?{...t}:{},o.actionArray)for(let t in o.actionArray)o.actions[t]?(e.controller[t+"Func"]=o.actions[t].func,e.controller[t+"Params"]=o.actions[t].params,o.actions[t].name&&(e.controlsInfo[t]={name:o.actions[t].name,info:o.actions[t].info}),delete o.actions[t]):e.controller.disableAction({[t]:o.actionArray[t]})}else{for(let a in t)if(e.controller[a+"Func"]&&(o.actions[a]={},o.actions[a].func=e.controller[a+"Func"],o.actions[a].params=e.controller[a+"Params"],e.controlsInfo[a]&&(o.actions[a].name=e.controlsInfo[a].name,o.actions[a].info=e.controlsInfo[a].info)),i&&(o.actions[i]||(o.actions[i]={}),o.actions[i][a]=o.actions[a]),n)switch(n.type){case"scenario":case"zone":case"scene":case"time":case"uses":case"flag":break;default:console.log("Other")}e.controller.updateAction(t)}e.UpdateControlText()},TempDisableClick:O,DisableClick:G,EnableClick:A,UnlockLocomotion:()=>{o.move=!0},LockLocomotion:()=>{o.move=!1},EnableVRLocomotion:()=>{w(),e.playerRig.GetEl().setAttribute("locomotion",{uiid:!1,courserid:"mouseController",movetype:"vr"})},EnableVRHoverLocomotion:t=>{e.locomotionUILayer.GetParentEl()||e.locomotionUILayer.SpawnLayer(),e.playerRig.GetEl().setAttribute("locomotion",{uiid:"beltUIParent",courserid:"mouseController",movetype:"vrHover"})},EnableDesktopLocomotion:()=>{w(),e.playerRig.GetEl().setAttribute("locomotion",{uiid:!1,courserid:"mouseController",movetype:"desktop"})},EnableMobileLocomotion:()=>{w(),e.playerRig.GetEl().setAttribute("locomotion",{uiid:!1,courserid:"mouseController",movetype:"mobile"})},ChangeLocomotionType:t=>{t.pov&&(o.moveType.pov=t.pov),t.axis&&(o.moveType.axis=t.axis),t.style&&(o.moveType.style=t.style),e.playerRig.GetEl().setAttribute("locomotion",{pov:o.moveType.pov,axis:o.moveType.axis,style:o.moveType.style})},RemoveBelt:w,ToggleCrouch:()=>{if(o.animating);else{if(o.animating=!0,s=setTimeout((()=>{o.animating=!1,clearTimeout(s)}),775),o.bodyCrouch){let t=new THREE.Vector3(0,0,0);if(t.copy(o.gridPos),t.y+=1,!e.map.CheckMapObstaclesDiagonal(t,o.gridPos))return}let t=e.playerBody.GetEl().getAttribute("position").y;o.bodyCrouch?f(t,t+.75):f(t,t-.75),o.bodyCrouch=!o.bodyCrouch}},SnapRight:y,SnapLeft:g,ToggleFlashlight:t=>{let a=o.flashlight;t&&t.on?a=!1:t&&t.off&&(a=!0),a?("Desktop"===e.controls||"Mobile"===e.controls?e.camera.RemoveComponent("light"):"VR"===e.controls&&("bothRight"===e.vrHand||"bothRightLoco"===e.vrHand||"right"===e.vrHand?e.vrController2.RemoveComponent("light"):e.vrController1.RemoveComponent("light")),o.flashlight=!1):("Desktop"===e.controls||"Mobile"===e.controls?e.camera.ChangeSelf({property:"light",value:{type:"spot",intensity:.35,distance:15,decay:.3,penumbra:.15,angle:25}}):"VR"===e.controls&&("bothRight"===e.vrHand||"bothRightLoco"===e.vrHand||"right"===e.vrHand?e.vrController2.ChangeSelf({property:"light",value:{type:"spot",intensity:.3,distance:15,decay:.3,penumbra:.15,angle:35}}):e.vrController1.ChangeSelf({property:"light",value:{type:"spot",intensity:.3,distance:15,decay:.3,penumbra:.15,angle:35}})),o.flashlight=!0)},ResetUserPosRot:()=>{T(e.player.layer.defaultPosition),v(0)},GetPlayerInfo:S,ToggleRayHelp:t=>{t="toggle"===t?!o.raycasters.display:t,o.raycasters.display=t,"Desktop"===e.controls||"Mobile"===e.controls?(o.raycasters.hmdmouse.linkDisplay=t,o.raycasters.hand1.linkDisplay=t?!t:t,o.raycasters.hand2.linkDisplay=t?!t:t,t?o.raycasters.hmdmouse.linkAnchor.core.inScene||o.raycasters.hmdmouse.linkAnchor.SpawnCore():o.raycasters.hmdmouse.linkAnchor.core.inScene&&o.raycasters.hmdmouse.linkAnchor.DespawnCore(),o.raycasters.hand1.linkAnchor.core.inScene&&o.raycasters.hand1.linkAnchor.DespawnCore(),o.raycasters.hand2.linkAnchor.core.inScene&&o.raycasters.hand2.linkAnchor.DespawnCore()):"VR"===e.controls&&(o.raycasters.hmdmouse.linkDisplay=t?!t:t,o.raycasters.hand1.linkDisplay=t,o.raycasters.hand2.linkDisplay=t,t?(o.raycasters.hand1.linkAnchor.core.inScene||o.raycasters.hand1.linkAnchor.SpawnCore(),o.raycasters.hand2.linkAnchor.core.inScene||o.raycasters.hand2.linkAnchor.SpawnCore()):(o.raycasters.hand1.linkAnchor.core.inScene&&o.raycasters.hand1.linkAnchor.DespawnCore(),o.raycasters.hand2.linkAnchor.core.inScene&&o.raycasters.hand2.linkAnchor.DespawnCore()),o.raycasters.hmdmouse.linkAnchor.core.inScene&&o.raycasters.hmdmouse.linkAnchor.DespawnCore())},CamRigPoint:(t,a)=>{let i=new THREE.Vector3;o.position=new THREE.Vector3,o.quaternion=new THREE.Quaternion,o.rigQuaternion=new THREE.Quaternion,o.quaternion.copy(e.camera.GetEl().object3D.quaternion),o.rigQuaternion.copy(e.playerRig.GetEl().object3D.quaternion),o.position.copy(e.camera.GetEl().object3D.position),o.position.add(e.playerRig.GetEl().object3D.position);let n=a||new THREE.Vector3(0,0,-1);return n.applyQuaternion(o.quaternion),n.multiplyScalar(t),e.playerRig.GetEl().object3D.quaternion.equals(new THREE.Quaternion(0,0,0,1))||n.applyQuaternion(o.rigQuaternion),i.copy(o.position.clone().add(n)),i},RigPoint:R,RaySpawnPoint:(t,o,a)=>{let i=new THREE.Vector3;t.object3D.getWorldDirection(i);let n=new THREE.Vector3;e.playerRig.GetEl().components.gravitycontrol?n.copy(e.playerRig.GetEl().components.gravitycontrol.axis):n.copy(new THREE.Vector3(0,-1,0));let r=0,s=0,l=0;n.equals(new THREE.Vector3)?(r=i.x,s=0,l=i.z):0!==n.x?(r=0,s=i.y,l=i.z):0!==n.y?(r=i.x,s=0,l=i.z):0!==n.z&&(r=i.x,s=i.y,l=0);let c=new THREE.Vector3(r,s,l).normalize().multiplyScalar(a);return 0===r?c.x=o:0===s?c.y=o:0===l&&(c.z=o),c},RayDir:H,RayDistanceDirection:(t,o,a)=>{!1===t&&(t=e.camera.GetEl());let i=new THREE.Quaternion;t.object3D.getWorldQuaternion(i);let n=o||1,r=a||new THREE.Vector3(0,0,-1);return r.applyQuaternion(i),(new THREE.Vector3).copy(r).normalize().multiplyScalar(n)},GetRayDirectionRig:M,AttachToPlayer:(e,t)=>{let a=new THREE.Vector3(0,0,0);t&&(a.x+=t.x,a.y+=t.y,a.z+=t.z),e.setAttribute("sync-pos",{idname:o.id,position:a})},Equip:t=>{let a=!1;if(o.equipped&&t===o.equippedObject?D():a=!0,a){o.equipped=!0,o.equippedObject=t;let a="Equipped : "+e[t].name;b(a)}},Unequip:D,MainMenuAction:C,DetachFromPlayer:e=>{e.removeAttribute("sync-pos")},EnablePhysics:t=>{"ammo"===e.worldPhysics?(e.avatarHand1.ChangeSelf([{property:"ammo-body",value:{type:"kinematic",emitCollisionEvents:!0}},{property:"ammo-shape",value:{type:"box"}},{property:"kinsync",value:{auxlObj:"vrController1",offset:new THREE.Vector3(0,0,0),sync:!0}}]),e.avatarHand2.ChangeSelf([{property:"ammo-body",value:{type:"kinematic",emitCollisionEvents:!0}},{property:"ammo-shape",value:{type:"box"}},{property:"kinsync",value:{auxlObj:"vrController2",offset:new THREE.Vector3(0,0,0),sync:!0}}]),e.avatarTorso.ChangeSelf([{property:"ammo-body",value:{type:"kinematic",emitCollisionEvents:!0}},{property:"ammo-shape",value:{type:"cylinder"}}]),e.avatarHead.ChangeSelf([{property:"ammo-body",value:{type:"kinematic",emitCollisionEvents:!0}},{property:"ammo-shape",value:{type:"sphere"}}])):"cannon"===e.worldPhysics?(t=>{t&&t.body&&(o.body=t.body),t&&t.shape&&(o.shape=t.shape),e.playerRig.EnablePhysics({body:o.body,shape:o.shape}),o.worldBody=e.playerRig.GetEl().body,o.playerPhysics=!0,e.playerRig.ChangeSelf({property:"bodymaterial",value:o.material}),e.playerRig.ChangeSelf({property:"gravitycontrol",value:{type:"float",axis:new THREE.Vector3(0,0,0),customGravity:1e-5,velocityExpo:1e3,gravityObject:"none"}}),e.playerRig.GetEl().body.fixedRotation=!0,e.playerRig.GetEl().body.updateMassProperties(),e.mouseController.RemoveComponent(["animation__hoverenter","animation__hoverleave"])})(t):console.log({msg:"Failed to recognize physics engine",engine:e.worldPhysics,layer:o})},DisablePhysics:()=>{"ammo"===e.worldPhysics?e.avatar.RemoveComponentAll(["ammo-body","ammo-shape","kinsync"]):"cannon"===e.worldPhysics?(e.playerRig.DisablePhysics(),e.playerRig.RemoveComponent(["gravitycontrol","bodymaterial"]),o.worldBody=!1,o.playerPhysics=!1):console.log({msg:"Failed to recognize physics engine",engine:e.worldPhysics,layer:o})},setAllGravity:V,setAllGravityAxis:e=>{V({axis:e})},setAllGravityTypes:e=>{V({type:e})},cycleAllGravityTypes:()=>{e.playerRig.GetEl().components.gravitycontrol&&(e.playerRig.GetEl().components.gravitycontrol.cycleTypes(),e.playerRig.GetEl().components.gravitycontrol.cycleWorldTypes())},cycleWorldGravityAxis:()=>{e.playerRig.GetEl().components.gravitycontrol&&e.playerRig.GetEl().components.gravitycontrol.cycleWorldAxis()},ToggleAction:e=>{o.toggle0=!1,o.toggle1=!1,o.toggle2=!1,o.toggle3=!1,o.toggle4=!1,o.toggle5=!1,o.toggle6=!1,"0"===e?o.toggle0=!0:"1"===e?o.toggle1=!0:"2"===e?o.toggle2=!0:"3"===e?o.toggle3=!0:"4"===e?o.toggle4=!0:"5"===e?o.toggle5=!0:"6"===e?o.toggle6=!0:(he(o.raycasters.hmdmouse.linkCore),he(o.raycasters.hand1.linkCore),he(o.raycasters.hand2.linkCore))},Rubberband:$,TeleportTo:oe,BoostTo:B,BackBoost:q,ChuteUp:()=>{e.playerRig.GetEl().components.gravitycontrol.data.chuteOpen=!1},ChuteDown:()=>{e.playerRig.GetEl().components.gravitycontrol.data.chuteOpen=!0},BrakeUp:t=>{e.playerRig.GetEl().body.linearDamping=o.brakeOff,clearInterval(o.brakeInterval),o.brakeDoubleTapSet=!0,o.brakeDoubleTapTimeout=setTimeout((()=>{o.brakeDoubleTapSet=!1}),500)},BrakeDown:t=>{o.brakeDoubleTapSet?(o.brakeOff=o.body.linearDamping,e.playerRig.GetEl().body.linearDamping=.9,o.brakeDoubleTapSet=!1,clearTimeout(o.brakeDoubleTapTimeout)):(o.brakeOff=o.body.linearDamping,o.braking=o.brakeOff/32,clearInterval(o.brakeInterval),o.brakeInterval=setInterval((()=>{e.playerRig.GetEl().body.linearDamping<.9?e.playerRig.GetEl().body.linearDamping+=o.braking:clearInterval(o.brakeInterval)}),1))},RedirectUp:Z,RedirectDown:K,Redirect:X,Freeze:W,UnFreeze:J,DelinkCore:he,LinkUp:()=>{o.linkCore.core.inScene&&(o.linkLength<maxLinkLength&&o.linkLength++,o.linkConstraint.Connect({restLength:o.linkLength}))},LinkDown:()=>{o.linkCore.core.inScene&&(o.linkLength>1&&o.linkLength--,o.linkConstraint.Connect({restLength:o.linkLength}))},LinkGrab:(e,t)=>{console.log("Link Grab"),console.log(t)},LinkDrop:(e,t)=>{console.log("Link Drop"),console.log(t)},LinkShoot:(e,t)=>{console.log("Link Shoot"),console.log(t)},LinkHit:(e,t)=>{console.log("Link Hit"),console.log(t.target),console.log(t.detail),console.log(t.detail.intersection.point);let o=P();o.x*=-2,o.y*=-2,o.z*=-2,t.target.body.applyLocalImpulse(o,new THREE.Vector3(0,0,0))},PhysJump:(t,a,i)=>{if(!o.jumping){o.jumping=!0;let a=t||4;THREE.MathUtils.degToRad(45);let i=new THREE.Vector3;i.copy(e.playerRig.GetEl().components.gravitycontrol.axis);let n=new THREE.Vector3;n.copy(i),n.negate();let r=new THREE.Vector3;e.camera.GetEl().object3D.getWorldDirection(r),r.negate();let s=new THREE.Vector3(0,0,0);s.copy(r).add(n).multiplyScalar(a),e.playerRig.GetEl().body.velocity.x=s.x,e.playerRig.GetEl().body.velocity.y=s.y,e.playerRig.GetEl().body.velocity.z=s.z}},UpdatePlayerPosition:T,UpdateDefaultPosition:x,TwistTo:v,ToggleBackgroundAudio:()=>{e.backgroundAudio=!e.backgroundAudio,e.backgroundAudio?e.playerAudio.SpawnCore(e.playerRig):e.playerAudio.DespawnCore()},Ticker:()=>{},TriggerEnter:e=>{z(e)},TriggerDown:e=>{(o.playerPhysics||o.playerPowers)&&(e=>{z(e),o.toggle0?Q(e):o.toggle1?ie(e):o.toggle2?te(e):o.toggle3?K(e):o.toggle4?j(e):o.toggle5?_(e):o.toggle6&&ce(e)})(e)},TriggerUp:t=>{(o.playerPhysics||o.playerPowers)&&(t=>{z(t),o.toggle0?Y(t):o.toggle1?ae(t):o.toggle2?ee(t):o.toggle3?Z(t):o.toggle4?U(t):o.toggle5?N(t):o.toggle6&&de(t),e.mouseControllerUI.EmitEvent("reset")})(t)},TriggerLeave:e=>{z(e)},Track2D:t=>{let a=t||new THREE.Vector3(0,0,0);if(a.equals(new THREE.Vector3(0,0,0)))return;L.copy(e.playerRig.GetEl().getAttribute("position"));let i=new THREE.Vector3(0,0,0),n=new THREE.Vector3(0,0,0),r=0;o.track2DInterval=setInterval((()=>{r++,i.equals(new THREE.Vector3(0,0,0))?i.copy(e.mouseController.GetEl().components.raycaster.intersections[0].point):n.equals(new THREE.Vector3(0,0,0))&&n.copy(e.mouseController.GetEl().components.raycaster.intersections[0].point),r>1&&(o.localAxis=function(e,t,o){let a=function(e,t,o){const a=(new THREE.Vector3).subVectors(t,e),i=(new THREE.Vector3).subVectors(o,e);return(new THREE.Vector3).crossVectors(a,i).normalize()}(e,t,o);const i=[new THREE.Vector3(0,-1,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,0)];let n=null,r=-1;for(const e of i){const t=e.dot(a);t>r&&(r=t,n=e)}return n}(a,i,n),r=0,clearInterval(o.track2DInterval))}),300)},EmitEvent:(t,o)=>{e.playerRig.EmitEvent(t,o)},TestFunc:e=>{console.log(e)},TogglePlayerPhysics:t=>{t?e.playerRig.GetEl().body.wakeUp():e.playerRig.GetEl().body.sleep()},CycleCameraZoom:h,ToggleRoamCamView:()=>{o.roamCamViewer=!o.roamCamViewer,o.roamCamViewer?e.roamCameraViewer.SpawnCore(e.camera.GetEl()):e.roamCameraViewer.DespawnCore()},HoverTargetDown:ce,HoverTargetUp:de,ToggleSnapMode:()=>{o.snapToggle=!o.snapToggle,o.snapToggle?o.snapMode=90:o.snapMode=45},LinkDistance:({distance:e})=>{o.linkDistance=e,o.raycasters.hmdmouse.distance=o.linkDistance,o.raycasters.hand1.distance=o.linkDistance,o.raycasters.hand2.distance=o.linkDistance},CamRigAdjust:t=>{let a=0;if("up"===t){if(o.CamRigHeight>=1.8)return;a=.1}else if("down"===t){if(o.CamRigHeight<=-.2)return;a=-.1}else"reset"===t&&(a=-1*o.CamRigHeight);let i=a+e.headRig.GetEl().object3D.position.y;e.headRig.GetEl().object3D.position.setY(i),o.scroll.scrolls.forEach((e=>e.y+=a)),"reset"===t?o.CamRigHeight=0:o.CamRigHeight+=a,"cannon"===e.worldPhysics||("ammo"===e.worldPhysics?(e.avatarHand1.ChangeSelf({property:"kinsync",value:{offset:new THREE.Vector3(0,o.CamRigHeight,0)}}),e.avatarHand2.ChangeSelf({property:"kinsync",value:{offset:new THREE.Vector3(0,o.CamRigHeight,0)}})):(e.avatarHand1.ChangeSelf({property:"position",value:new THREE.Vector3(-.35,.6+o.CamRigHeight,0)}),e.avatarHand2.ChangeSelf({property:"position",value:new THREE.Vector3(-.35,.6+o.CamRigHeight,0)}))),e.comp.TurnToPlayer()},RayCoord:(t,o,a,i)=>{let n=new THREE.Vector3,r=a||new THREE.Vector3(0,0,-1);if(t.hasAttribute("raycaster")){let e=t.getAttribute("raycaster").direction;r.x=e.x,r.y=e.y,r.z=e.z,a&&(r.add(a),r.normalize())}let s=r.clone();s.multiplyScalar(o||1.5),t.object3D.localToWorld(s);let l=e.FindInScene(i);return"camera"===t.id?(e.headRig.GetEl().object3D.getWorldPosition(n),l=e.headRig.GetEl(),l.object3D.worldToLocal(s)):(t.object3D.getWorldPosition(n),l&&l.object3D.worldToLocal(s)),n.copy(s),r.copy(n).normalize().multiplyScalar(o||1),{position:n,direction:r}}}},a=(e,t)=>{let o,a=Object.assign({},t),i=e.Core(e.sceneTextData),n=e.SpeechSystem(i);const r=(t,o,{cond:a,ifTrue:i,ifFalse:n})=>{if(e[o].GetFlag)if(e[o].GetFlag(a))for(let e in i)for(let t in i[e])d(e,t,i[e][t]);else for(let e in n)for(let t in n[e])d(e,t,n[e][t]);else if(e[o].GetFlagParent)if(e[o].GetFlagParent(a))for(let e in i)for(let t in i[e])d(e,t,i[e][t]);else for(let e in n)for(let t in n[e])d(e,t,n[e][t])},s=(t,o,a)=>{let i=[];for(let e in a)"default"===e||i.push(e);if(e[o].GetFlag){let t=e[o].GetFlag(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])d(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])d(e,t,a.default[e][t])}else if(e[o].GetFlagParent){let t=e[o].GetFlagParent(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])d(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])d(e,t,a.default[e][t])}else console.log(o),console.log("Unable to find value"),console.log(a.cond)},l=({name:t,type:o,id:a,method:i,params:n,event:r})=>{let s=t+a;"timeout"===o||"interval"===o?e.running[s]={type:o,name:t,id:a,nameId:s}:"interaction"!==o&&"event"!==o||(e.running[s]={type:o,name:t,id:a,nameId:s,method:i,params:n,event:r})},c=t=>{delete e.running[t]},d=(t,o,a)=>{for(let a in e.objGenTracking)o!==e.objGenTracking[a].spawn&&o!==e.objGenTracking[a].altSpawn||e.SpawnTracker(t,"node");e[t][o](a)};function p(t){if("controls"!==t){"info"===t&&(a[t].fog?e.sceneEl.setAttribute("fog",a[t].fog):e.sceneEl.setAttribute("fog",{type:"linear",near:999,far:1e3,color:"#FFF"}));for(let o in a[t])if("delay"===t)for(let i in a[t][o])for(let n in a[t][o][i])if("IfElse"===n)for(let s in a[t][o][i][n])l({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){r(0,s,a[t][o][i][n][s]),clearTimeout(e.timeouts[o+i])}),o);else if("Switch"===n)for(let r in a[t][o][i][n])l({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){s(0,r,a[t][o][i][n][r]),clearTimeout(e.timeouts[o+i])}),o);else l({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){d(i,n,a[t][o][i][n]),clearTimeout(e.timeouts[o+i])}),o);else if("interval"===t)for(let i in a[t][o]){let n,p=0,h=a[t][o].loop;if(a[t][o].end&&(n=a[t][o].end),"run"===i)for(let m in a[t][o][i])for(let u in a[t][o][i][m])if("IfElse"===u)for(let s in a[t][o][i][m][u])l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),c(o+m)),r(0,s,a[t][o][i][m][u][s]),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o);else if("Switch"===u)for(let r in a[t][o][i][m][u])l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),c(o+m)),s(0,r,a[t][o][i][m][u][r]),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o);else{let r=u,s=a[t][o][i][m][u];l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),c(o+m)),d(m,r,s),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o)}}else if("interaction"===t)for(let i in a[t][o])for(let n in a[t][o][i])if("IfElse"===n)for(let s in a[t][o][i][n]){let c=i,d=a[t][o][i][n][s];l({name:c,type:"interaction",id:i,method,params:d,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){r(0,s,d)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){r(0,s,d)}))}else if("Switch"===n)for(let r in a[t][o][i][n]){let c=i,d=a[t][o][i][n][r];l({name:c,type:"interaction",id:i,method,params:d,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){s(0,r,d)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){s(0,r,d)}))}else if("relay"===n)for(let r in a[t][o][i][n])for(let s in a[t][o][i][n][r]){let c=i,p=r,h=s,m=a[t][o][i][n][r][s];l({name:c,type:"interaction",id:i,method:h,params:m,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){d(p,h,m),console.log({object:c,relay:p,method:h,params:m})})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){d(p,h,m)}))}else{let r=i,s=n,c=a[t][o][i][n];l({name:r,type:"interaction",id:i,method:s,params:c,event:o}),e[r].GetEl?e[r].GetEl().addEventListener(o,(function(){d(r,s,c)})):e[r].GetParentEl&&e[r].GetParentEl().addEventListener(o,(function(){d(r,s,c)}))}else if("event"===t)for(let i in a[t][o])for(let n in a[t][o][i]){let c,p,h,m;if("IfElse"===n)for(let s in a[t][o][i][n])c=i,h=a[t][o][i][n][s],l({name:c,type:"event",id:i,method:p,params:h,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){r(0,s,h)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){r(0,s,h)}));else if("Switch"===n)for(let r in a[t][o][i][n])c=i,h=a[t][o][i][n][r],l({name:c,type:"event",id:i,method:p,params:h,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){s(0,r,h)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){s(0,r,h)}));else if("relay"===n)for(let r in a[t][o][i][n])for(let s in a[t][o][i][n][r])c=i,m=r,p=s,h=a[t][o][i][n][r][s],l({name:c,type:"event",id:i,method:p,params:h,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){d(m,p,h)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){d(m,p,h)}));else c=i,p=n,h=a[t][o][i][n],l({name:c,type:"event",id:i,method:p,params:h,event:o}),e[c].GetEl?e[c].GetEl().addEventListener(o,(function(){d(c,p,h)})):e[c].GetParentEl&&e[c].GetParentEl().addEventListener(o,(function(){d(c,p,h)}))}else if("info"===t);else for(let e in a[t][o])if("start"===t)if("IfElse"===e)for(let i in a[t][o][e])r(0,i,a[t][o][e][i]);else if("Switch"===e)for(let i in a[t][o][e])s(0,i,a[t][o][e][i]);else d(o,e,a[t][o][e]);else if("exit"===t)if("IfElse"===e)for(let i in a[t][o][e])r(0,i,a[t][o][e][i]);else if("Switch"===e)for(let i in a[t][o][e])s(0,i,a[t][o][e][i]);else d(o,e,a[t][o][e]);else console.log(t),console.log(o),console.log(e),console.log("Hit Other Timeline, Please Investigate")}else e.controller.updateAction(a[t])}const h=()=>{e.map.grid.edgeSpawned&&e.map.DespawnEdges(),e.map.ClearWaiting(),e.map.ClearTriggers()},m=()=>{"other"===a.info.spawnPos||(a.info.spawnPos?e.player.UpdateDefaultPosition(a.info.spawnPos):e.player.UpdateDefaultPosition(new THREE.Vector3)),e.player.UpdatePlayerPosition(e.player.layer.defaultPosition)};return{core:a,ClearScene:()=>{p("exit"),e.controller.disableAction(a.controls),h(),e.player.EmitEvent("sceneExit",!0),a.info.sceneText&&n.KillStop(),(()=>{for(let t in e.running)"timeout"===e.running[t].type?(clearTimeout(e.timeouts[e.running[t].nameId]),delete e.timeouts[e.running[t].nameId]):"interval"===e.running[t].type?(clearInterval(e.intervals[e.running[t].nameId]),delete e.intervals[e.running[t].nameId]):"interaction"!==e.running[t].type&&"event"!==e.running[t].type||(e[e.running[t].name].GetEl?e[e.running[t].name].GetEl().removeEventListener(e.running[t].event,(function(){d(e.running[t].object,e.running[t].method,e.running[t].params)})):e[e.running[t].name].GetParentEl&&e[e.running[t].name].GetParentEl().removeEventListener(e.running[t].event,(function(){d(e.running[t].object,e.running[t].method,e.running[t].params)}))),c(t)})(),e.ClearSpawned(e.nodeSpawned)},StartScene:()=>{e.sceneReading=!0,e.SceneLoadTimeout(),m(),p("info"),a.info.map&&(e.map.BuildMap(a.info.map.size,a.info.map.height),e.mapEdge=a.info.map.edge||!1,e.mapEdge&&a.info.map.spawnEdge&&e.map.SpawnEdges(a.info.map.edgeUpdate)),p("start"),p("delay"),p("interval"),p("event"),p("interaction"),p("controls"),e.UpdateControlText(),(()=>{if(a.info.sceneText){n.Start(),n.DisplaySpeech({role:a.info.name,speech:"... ... ..."});let e=setTimeout((()=>{n.DisplaySpeech({role:a.info.name,speech:a.info.description}),clearTimeout(e)}),1150)}})(),o=setTimeout((()=>{e.sceneReading=!1,clearTimeout(o)}),400),e.local.location.scene=a.info.id,e.SaveToProfile(),e.local.location.load&&(e.local.location.load=!1)},ScenePlayerPosition:m}},i=(e,t)=>{let o,a,i=Object.assign({},t);i.mapMenuData=!1,i.mapMainMenuData=!1,i.mapWorldsMenuData=!1,i.mapMenu,i.nodes={},i.currentNode,i.zoneLoaded=!1,i.displayBasicTravelMenu=i.info.travelMenu||!1;const n=(t,o,{cond:a,ifTrue:i,ifFalse:n})=>{if(e[o].GetFlag)if(e[o].GetFlag(a))for(let e in i)for(let t in i[e])s(e,t,i[e][t]);else for(let e in n)for(let t in n[e])s(e,t,n[e][t]);else if(e[o].GetFlagParent)if(e[o].GetFlagParent(a))for(let e in i)for(let t in i[e])s(e,t,i[e][t]);else for(let e in n)for(let t in n[e])s(e,t,n[e][t])},r=(t,o,a)=>{let i=[];for(let e in a)"default"===e||i.push(e);if(e[o].GetFlag){let t=e[o].GetFlag(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])s(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])s(e,t,a.default[e][t])}else if(e[o].GetFlagParent){let t=e[o].GetFlagParent(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])s(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])s(e,t,a.default[e][t])}else console.log(o),console.log("Unable to find value"),console.log(a.cond)},s=(t,o,a)=>{for(let a in e.objGenTracking)o!==e.objGenTracking[a].spawn&&o!==e.objGenTracking[a].altSpawn||e.SpawnTracker(t,"zone");e[t][o](a)},l=({name:t,type:o,id:a,method:i,params:n,event:r})=>{let s=t+a;"timeout"===o||"interval"===o?e.zoneRunning[s]={type:o,name:t,id:a,nameId:s}:"interaction"!==o&&"event"!==o||(e.zoneRunning[s]={type:o,name:t,id:a,nameId:s,method:i,params:n,event:r})},c=t=>{delete e.zoneRunning[t]};function d(t){if("controls"!==t)for(let o in i[t])if("delay"===t)for(let a in i[t][o])for(let c in i[t][o][a])if("IfElse"===c)for(let r in i[t][o][a][c])l({name:o,type:"timeout",id:a}),e.timeouts[o+a]=setTimeout((function(){n(0,r,i[t][o][a][c][r]),clearTimeout(e.timeouts[o+a])}),o);else if("Switch"===c)for(let n in i[t][o][a][c])l({name:o,type:"timeout",id:a}),e.timeouts[o+a]=setTimeout((function(){r(0,n,i[t][o][a][c][n]),clearTimeout(e.timeouts[o+a])}),o);else l({name:o,type:"timeout",id:a}),e.timeouts[o+a]=setTimeout((function(){s(a,c,i[t][o][a][c]),clearTimeout(e.timeouts[o+a])}),o);else if("interval"===t)for(let a in i[t][o]){let d,p=0,h=i[t][o].loop;if(i[t][o].end&&(d=i[t][o].end),"run"===a)for(let m in i[t][o][a])for(let u in i[t][o][a][m])if("IfElse"===u)for(let r in i[t][o][a][m][u])l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(d)&&(clearInterval(e.intervals[o+m]),c(o+m)),n(0,r,i[t][o][a][m][u][r]),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o);else if("Switch"===u)for(let n in i[t][o][a][m][u])l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(d)&&(clearInterval(e.intervals[o+m]),c(o+m)),r(0,n,i[t][o][a][m][u][n]),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o);else{let n=u,r=i[t][o][a][m][u];l({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(d)&&(clearInterval(e.intervals[o+m]),c(o+m)),s(m,n,r),"infinite"===h||(p++,p>=h&&(clearInterval(e.intervals[o+m]),c(o+m)))}),o)}}else if("interaction"===t)for(let a in i[t][o])for(let c in i[t][o][a]){let d,p,h;if("IfElse"===c)for(let r in i[t][o][a][c])d=a,h=i[t][o][a][c][r],l({name:d,type:"interaction",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){n(0,r,h)}));else if("Switch"===c)for(let n in i[t][o][a][c])d=a,h=i[t][o][a][c][n],l({name:d,type:"interaction",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){r(0,n,h)}));else d=a,p=c,h=i[t][o][a][c],l({name:d,type:"interaction",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){s(d,p,h)}))}else if("event"===t)for(let a in i[t][o])for(let c in i[t][o][a]){let d,p,h;if("IfElse"===c)for(let r in i[t][o][a][c])d=a,h=i[t][o][a][c][r],l({name:d,type:"event",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){n(0,r,h)}));else if("Switch"===c)for(let n in i[t][o][a][c])d=a,h=i[t][o][a][c][n],l({name:d,type:"event",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){r(0,n,h)}));else d=a,p=c,h=i[t][o][a][c],l({name:d,type:"event",id:a,method:p,params:h,event:o}),e[d].GetEl().addEventListener(o,(function(){s(d,p,h)}))}else if("info"===t);else for(let e in i[t][o])if("start"===t)if("IfElse"===e)for(let a in i[t][o][e])n(0,a,i[t][o][e][a]);else if("Switch"===e)for(let a in i[t][o][e])r(0,a,i[t][o][e][a]);else s(o,e,i[t][o][e]);else if("exit"===t)if("IfElse"===e)for(let a in i[t][o][e])n(0,a,i[t][o][e][a]);else if("Switch"===e)for(let a in i[t][o][e])r(0,a,i[t][o][e][a]);else s(o,e,i[t][o][e]);else console.log("Hit Other Timeline, Please Investigate");else e.controller.updateAction(i[t])}const p=()=>{e.controller.disableAction(i.controls)},h=t=>{e.local.location.load?i.currentNode=e.local.location.scene:i.currentNode=t||i.info.start,i.currentZone=i.info.id,e.currentZone=i.info.id,i.zoneLoaded||(d("start"),d("delay"),d("interval"),d("event"),d("interaction"),d("controls"),e.audioEnabled&&e.backgroundAudio&&!e.IsFalsey(i.info.backgroundAudio)?e.currentWorld.MusicPlaylist(i.info.backgroundAudio):"none"===i.info.backgroundAudio&&e.currentWorld.MusicPlaylist(!1),e.local.location.zone=i.info.id,i.zoneLoaded=!0),e[i.currentNode].StartScene(),y(),i.displayBasicTravelMenu&&u(),e.player.UnlockLocomotion()},m=()=>{e[i.currentNode].ClearScene()},u=()=>{i.mapMenuData={id:"moveMenu",prompt:"Move to...",options:{option0:"0"},actions:{action0:"0"},data:e.menuBaseData,cursorObj:i.currentZone,method:"MenuMoveClick",pos:new THREE.Vector3(-1.5,1.5,-1)};let t,o=0;for(let a in i.map[i.currentNode])t=i.nodes[i.map[i.currentNode][a].node]?i.nodes[i.map[i.currentNode][a].node]:e[i.map[i.currentNode][a].node],i.map[i.currentNode][a].locked&&!e.comp.CheckForKey(i.map[i.currentNode][a].keyId)?i.mapMenuData.options["option"+o]=t.core.info.name+" [Locked]":i.map[i.currentNode][a].locked&&e.comp.CheckForKey(i.map[i.currentNode][a].keyId)?i.mapMenuData.options["option"+o]=t.core.info.name+" [Unlocked]":i.mapMenuData.options["option"+o]=t.core.info.name,i.mapMenuData.actions["action"+o]=a,o++;i.mapMenu=e.Menu(i.mapMenuData),i.mapMenu.SpawnMenu()},y=()=>{i.mapMainMenuData={};let t,o,a={},n={},r=1,s=1,l=Object.keys(i.map[i.currentNode]).length,c=Math.ceil(l/7),d="travel"+s;e.local.location.load||""===e.local.location.scenario||e[e.local.location.scenario].UpdateZoneMap();for(let p in i.map[i.currentNode])t=i.nodes[i.map[i.currentNode][p].node]?i.nodes[i.map[i.currentNode][p].node]:e[i.map[i.currentNode][p].node],o=i.map[i.currentNode][p].locked&&!e.comp.CheckForKey(i.map[i.currentNode][p].keyId)?t.core.info.name+" [Locked]":i.map[i.currentNode][p].locked&&e.comp.CheckForKey(i.map[i.currentNode][p].keyId)?t.core.info.name+" [Unlocked]":t.core.info.name,a={id:"action"+r,style:!1,title:o,description:"Travel to "+o,subMenu:!1,action:{auxlObj:i.currentZone,component:!1,method:"Move",params:p,menu:"close"}},n={id:"action"+r,style:!1,title:"More",description:"Next Page",subMenu:!1,action:!1},i.mapMainMenuData["button"+r]=a,r===l?e.mainMenu.UpdateSubMenu(d,i.mapMainMenuData):r++,c>1&&r%7==0&&(s++,n.id="action"+r,n.subMenu="travel"+s,i.mapMainMenuData["button"+r]=n,e.mainMenu.UpdateSubMenu(d,i.mapMainMenuData),i.mapMainMenuData={},d="travel"+s)},g=t=>{a=i.map[i.currentNode][t],a.locked&&!e.comp.CheckForKey(a.keyId)?(clearTimeout(void 0),e.player.Notification({message:"Requires : "+a.keyName})):(e.player.LockLocomotion(),e.player.PlayerSceneAnim(),a.locked&&e.comp.CheckForKey(a.keyId)&&!a.keepKey&&e.comp.RemoveFromInventory(a.keyId),o=setTimeout((()=>{i.displayBasicTravelMenu&&i.mapMenu.DespawnMenu(),m(),i.nodes[a.node]?h(a.node):(v(),i.zoneLoaded=!1,e[a.inZone].StartScene(a.node)),clearTimeout(o)}),425))},v=()=>{d("exit"),p(),e.player.EmitEvent("zoneExit",!0),i.zoneLoaded=!1,(()=>{for(let t in e.zoneRunning)"timeout"===e.zoneRunning[t].type?(clearTimeout(e.timeouts[e.zoneRunning[t].nameId]),delete e.timeouts[e.zoneRunning[t].nameId]):"interval"===e.zoneRunning[t].type?(clearInterval(e.intervals[e.zoneRunning[t].nameId]),delete e.intervals[e.zoneRunning[t].nameId]):"interaction"!==e.zoneRunning[t].type&&"event"!==e.zoneRunning[t].type||e[e.zoneRunning[t].name].GetEl().removeEventListener(e.zoneRunning[t].event,(function(){s(e.zoneRunning[t].object,e.zoneRunning[t].method,e.zoneRunning[t].params)})),c(t)})(),p(),e.ClearSpawned(e.zoneSpawned),i.displayBasicTravelMenu&&i.mapMenu.DespawnMenu()};return{core:i,UpdateMap:t=>{i.nodes={},i.map=t;for(let o in t)i.nodes[o]=e[o]},StartScene:h,MoveSpawnMenu:u,MenuMoveClick:e=>{let t=e.getAttribute("result");g(t)},Move:g,Change:(t,a)=>{e.player.PlayerSceneAnim(),o=setTimeout((()=>{i.displayBasicTravelMenu&&i.mapMenu.DespawnMenu(),m(),i.info.id===t?h(a):(v(),i.zoneLoaded=!1,e[t].StartScene(a)),clearTimeout(o)}),425)},ClearZone:v}},n=(e,t)=>{let o,a=Object.assign({},t);a.scenarioLoaded=!1;let i=a.info.startZone,n=a.info.name,r=a.info.instructions;const s=(t,o,{cond:a,ifTrue:i,ifFalse:n})=>{if(e[o].GetFlag)if(e[o].GetFlag(a))for(let e in i)for(let t in i[e])c(e,t,i[e][t]);else for(let e in n)for(let t in n[e])c(e,t,n[e][t]);else if(e[o].GetFlagParent)if(e[o].GetFlagParent(a))for(let e in i)for(let t in i[e])c(e,t,i[e][t]);else for(let e in n)for(let t in n[e])c(e,t,n[e][t])},l=(t,o,a)=>{let i=[];for(let e in a)"default"===e||i.push(e);if(e[o].GetFlag){let t=e[o].GetFlag(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])c(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])c(e,t,a.default[e][t])}else if(e[o].GetFlagParent){let t=e[o].GetFlagParent(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])c(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])c(e,t,a.default[e][t])}else console.log(o),console.log("Unable to find value"),console.log(a.cond)},c=(t,o,a)=>{for(let a in e.objGenTracking)o!==e.objGenTracking[a].spawn&&o!==e.objGenTracking[a].altSpawn||e.SpawnTracker(t,"scenario");e[t][o](a)},d=({name:t,type:o,id:a,method:i,params:n,event:r})=>{let s=t+a;"timeout"===o||"interval"===o?e.scenarioRunning[s]={type:o,name:t,id:a,nameId:s}:"interaction"!==o&&"event"!==o||(e.scenarioRunning[s]={type:o,name:t,id:a,nameId:s,method:i,params:n,event:r})},p=t=>{delete e.scenarioRunning[t]};function h(t){if("controls"!==t)for(let o in a[t])if("delay"===t)for(let i in a[t][o])for(let n in a[t][o][i])if("IfElse"===n)for(let r in a[t][o][i][n])d({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){s(0,r,a[t][o][i][n][r]),clearTimeout(e.timeouts[o+i])}),o);else if("Switch"===n)for(let r in a[t][o][i][n])d({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){l(0,r,a[t][o][i][n][r]),clearTimeout(e.timeouts[o+i])}),o);else d({name:o,type:"timeout",id:i}),e.timeouts[o+i]=setTimeout((function(){c(i,n,a[t][o][i][n]),clearTimeout(e.timeouts[o+i])}),o);else if("interval"===t)for(let i in a[t][o]){let n,r=0,h=a[t][o].loop;if(a[t][o].end&&(n=a[t][o].end),"run"===i)for(let m in a[t][o][i])for(let u in a[t][o][i][m])if("IfElse"===u)for(let l in a[t][o][i][m][u])d({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),p(o+m)),s(0,l,a[t][o][i][m][u][l]),"infinite"===h||(r++,r>=h&&(clearInterval(e.intervals[o+m]),p(o+m)))}),o);else if("Switch"===u)for(let s in a[t][o][i][m][u])d({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),p(o+m)),l(0,s,a[t][o][i][m][u][s]),"infinite"===h||(r++,r>=h&&(clearInterval(e.intervals[o+m]),p(o+m)))}),o);else{let s=u,l=a[t][o][i][m][u];d({name:o,type:"interval",id:m}),e.intervals[o+m]=setInterval((function(){!0===e[m].GetFlag(n)&&(clearInterval(e.intervals[o+m]),p(o+m)),c(m,s,l),"infinite"===h||(r++,r>=h&&(clearInterval(e.intervals[o+m]),p(o+m)))}),o)}}else if("interaction"===t)for(let i in a[t][o])for(let n in a[t][o][i]){let r,p,h;if("IfElse"===n)for(let l in a[t][o][i][n])r=i,h=a[t][o][i][n][l],d({name:r,type:"interaction",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){s(0,l,h)}));else if("Switch"===n)for(let s in a[t][o][i][n])r=i,h=a[t][o][i][n][s],d({name:r,type:"interaction",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){l(0,s,h)}));else r=i,p=n,h=a[t][o][i][n],d({name:r,type:"interaction",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){c(r,p,h)}))}else if("event"===t)for(let i in a[t][o])for(let n in a[t][o][i]){let r,p,h;if("IfElse"===n)for(let l in a[t][o][i][n])r=i,h=a[t][o][i][n][l],d({name:r,type:"event",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){s(0,l,h)}));else if("Switch"===n)for(let s in a[t][o][i][n])r=i,h=a[t][o][i][n][s],d({name:r,type:"event",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){l(0,s,h)}));else r=i,p=n,h=a[t][o][i][n],d({name:r,type:"event",id:i,method:p,params:h,event:o}),e[r].GetEl().addEventListener(o,(function(){c(r,p,h)}))}else if("info"===t);else for(let e in a[t][o])if("start"===t)if("IfElse"===e)for(let i in a[t][o][e])s(0,i,a[t][o][e][i]);else if("Switch"===e)for(let i in a[t][o][e])l(0,i,a[t][o][e][i]);else c(o,e,a[t][o][e]);else if("exit"===t)if("IfElse"===e)for(let i in a[t][o][e])s(0,i,a[t][o][e][i]);else if("Switch"===e)for(let i in a[t][o][e])l(0,i,a[t][o][e][i]);else c(o,e,a[t][o][e]);else console.log("Hit Other Timeline, Please Investigate");else e.controller.updateAction(a[t])}const m=()=>{e.controller.disableAction(a.controls)},u=()=>{for(let t in a.map)e[t].UpdateMap(a.map[t])};return{core:a,StartScenario:()=>{a.scenarioLoaded||(e.player.PlayerSceneAnim(),u(),scenarioHeaderTitle.innerHTML=n,scenarioMenuTitle.innerHTML=n,instructions.innerHTML=r,o=setTimeout((()=>{h("start"),h("delay"),h("interval"),h("event"),h("interaction"),h("controls"),i=e.local.location.load?e.local.location.zone:a.info.startZone,e[i].StartScene(),a.scenarioLoaded=!0,e.local.location.scenario=a.info.id,clearTimeout(o)}),425))},ClearScenario:()=>{e[e[e.currentZone].core.currentNode].ClearScene(),e[e.currentZone].ClearZone(),h("exit"),m(),e.player.EmitEvent("scenarioExit",!0),(()=>{for(let t in e.scenarioRunning)"timeout"===e.scenarioRunning[t].type?(clearTimeout(e.timeouts[e.scenarioRunning[t].nameId]),delete e.timeouts[e.scenarioRunning[t].nameId]):"interval"===e.scenarioRunning[t].type?(clearInterval(e.intervals[e.scenarioRunning[t].nameId]),delete e.intervals[e.scenarioRunning[t].nameId]):"interaction"!==e.scenarioRunning[t].type&&"event"!==e.scenarioRunning[t].type||e[e.scenarioRunning[t].name].GetEl().removeEventListener(e.scenarioRunning[t].event,(function(){c(e.scenarioRunning[t].object,e.scenarioRunning[t].method,e.scenarioRunning[t].params)})),p(t)})(),m(),e.ClearSpawned(e.scenarioSpawned),a.scenarioLoaded=!1},UpdateZoneMap:u}},r=(e,t)=>{let o={};o.data=Object.assign({},t),o.inScene=!1,o.menuOpen=!1,o.active=!1,o.descriptionOpen=!1,o.buttonHover="",o.currentMenu="menu",o.menuPath=["menu"],o.switching=!1,o.switchingTimeout,o.id=t.info.id||"hoverMenu",o.name=t.info.name||"Quick Menu",o.layout=t.info.layout||"circleUp",o.posOffset=t.info.posOffset||new THREE.Vector3(0,0,0),o.offset=t.info.offset||-1,o.parent=o.data.info.parent||!1,o.spawnPos=new THREE.Vector3(0,0,0),o.attached=o.data.info.attached||!1;let a=-45,i=0;o.buttonData=JSON.parse(JSON.stringify(o.data.info.buttonData)),o.hoverData=JSON.parse(JSON.stringify(o.data.info.hoverData)),o.nullParentData={data:"nullParentData",id:"nullParent",sources:!1,text:!1,geometry:!1,material:!1,position:o.posOffset,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},o.cores={},o.cores.hover={},o.nullParentData.id=o.id,o.data.info.position&&(o.nullParentData.position=o.data.info.position),o.cores.parent=e.Core(o.nullParentData),o.nullParentData.position=new THREE.Vector3(0,0,0),o.nullParentData.components={},o.buttonData.id=o.data.info.id+"menu","circleUp"!==o.layout&&"circleDown"!==o.layout||(o.buttonData.position.x=o.offset),o.buttonData.text.value=o.name,o.cores.main=e.Core(o.buttonData);for(let t in o.data)if("info"===t);else{o.cores[t]=[],o.cores.hover[t]=[];let n=0;for(let i in o.data[t])n++,o.buttonData.id=o.data[t][i].id,o.buttonData.text.value=o.data[t][i].title,"circleUp"===o.layout?o.buttonData.rotation.z=a*n*-1:"circleDown"===o.layout?o.buttonData.rotation.z=a*n:"vertical"===o.layout?o.buttonData.position.y=n*o.offset:"horizontal"===o.layout&&(o.buttonData.position.x=n*o.offset),o.buttonData.components={},o.buttonData.components.hoverrun={},o.buttonData.components.hoverrun.menu=o.id,o.buttonData.components.hoverrun.action=i,o.attached&&(o.buttonData.components.hoverrun.attached=o.attached),o.buttonData.components.mouseenterrun={},o.buttonData.components.mouseenterrun.cursorObj=o.id,o.buttonData.components.mouseenterrun.method="SpawnDescription",o.buttonData.components.mouseenterrun.params=i,o.buttonData.components.mouseleaverun={},o.buttonData.components.mouseleaverun.cursorObj=o.id,o.buttonData.components.mouseleaverun.method="DespawnDescription",o.buttonData.components.mouseleaverun.params=i,o.hoverData.id=o.data[t][i].id+"hover",o.hoverData.text.value=o.data[t][i].description,o.cores.hover[t][i]=e.Core(o.hoverData),o.cores[t][i]=e.Core(o.buttonData);n>i&&(i=n)}o.cores.nulls=[];for(let t=0;t<=8;t++)o.nullParentData.id=o.id+"null"+t,"circleUp"===o.layout?o.nullParentData.rotation.z=a*t:"circleDown"===o.layout&&(o.nullParentData.rotation.z=a*t*-1),o.cores.nulls.push(e.Core(o.nullParentData));o.menuLayerData={parent:{core:o.cores.parent},child0:{parent:{core:o.cores.nulls[0]},child0:{core:o.cores.main}}};for(let e=1;e<o.cores.nulls.length;e++)o.menuLayerData["child"+e]={},o.menuLayerData["child"+e].core=o.cores.nulls[e];o.menuLayer=e.Layer(o.id,o.menuLayerData);const n=e=>{let t;if(t=e?0:5,o.switching);else if(o.menuOpen){let a=setTimeout((()=>{(e=>{o.menuOpen=!1,o.switching=!0;let t,a=o.currentMenu,i=1,n={};t=e?25:5,o.descriptionOpen&&r(o.buttonHover);let s=setTimeout((()=>{for(let e in o.cores[a])n[e]=o.menuLayer.GetChildEl(o.id+"null"+i),o.cores[a][e].DespawnCore(),i++;clearTimeout(s)}),t);o.switchingTimeout=setTimeout((()=>{o.switching=!1,clearTimeout(o.switchingTimeout)}),2*t)})(e),clearTimeout(a)}),t)}},r=e=>{o.descriptionOpen&&(o.cores[o.currentMenu][e].GetEl(),o.cores.hover[o.currentMenu][e].DespawnCore(),o.buttonHover="",o.descriptionOpen=!1)};return{hoverMenu:o,SpawnHoverMenu:()=>{o.inScene||(o.active=!1,o.menuLayer.layer.all.parent.core.core.position=function(){let t=new THREE.Vector3;e.camera.GetEl().object3D.getWorldDirection(t);let a=new THREE.Vector3;return a.copy(e.camera.GetEl().object3D.position).add(new THREE.Vector3(t.x,t.y,t.z).normalize().multiplyScalar(o.posOffset.z)),a}(),o.menuLayer.SpawnLayer(o.parent),(()=>{o.menuOpen=!0,o.switching=!0;let e,t=o.currentMenu,a=1,i=setTimeout((()=>{for(let i in o.cores[t])e=o.menuLayer.GetChildEl(o.id+"null"+a),o.cores[t][i].SpawnCore(e),a++;clearTimeout(i)}),5);o.switchingTimeout=setTimeout((()=>{o.switching=!1,clearTimeout(o.switchingTimeout)}),10)})(),o.inScene=!0)},DespawnHoverMenu:()=>{if(o.inScene){o.active&&function(t){if(t.component&&"null"!==t.component){if(document.getElementById(t.auxlObj)){let e=document.getElementById(t.auxlObj);t.params&&"null"!==t.params?e.components[t.component][t.method](t.params):e.components[t.component][t.method]()}}else e[t.auxlObj][t.method]&&(t.params&&"null"!==t.params?e[t.auxlObj][t.method](t.params):e[t.auxlObj][t.method]())}(o.data.menu[o.active].action),n(!0);let t=setTimeout((()=>{o.menuLayer.DespawnLayer(),o.inScene=!1,clearTimeout(t)}),5)}},UpdateParent:e=>{let t=e||!1;o.inScene||(o.parent=t)},UpdateSubMenu:(t,n)=>{if(o.currentMenu===t);else{o.cores[t]=[],o.cores.hover[t]=[];let r=0;for(let i in n)r++,o.buttonData.id=n[i].id,o.buttonData.text.value=n[i].title,"circleUp"===o.layout?o.buttonData.rotation.z=a*r*-1:"circleDown"===o.layout?o.buttonData.rotation.z=a*r:"vertical"===o.layout?o.buttonData.position.y=r*o.offset:"horizontal"===o.layout&&(o.buttonData.position.x=r*o.offset),o.buttonData.components={},n[i].action&&(o.buttonData.components.clickrun={},o.buttonData.components.clickrun.cursorObj=n[i].action.auxlObj,o.buttonData.components.clickrun.method=n[i].action.method,n[i].action.component&&(o.buttonData.components.clickrun.component=n[i].action.component),n[i].action.params&&(o.buttonData.components.clickrun.params=n[i].action.params)),o.buttonData.components.mouseenterrun={},o.buttonData.components.mouseenterrun.cursorObj=o.id,o.buttonData.components.mouseenterrun.method="SpawnDescription",o.buttonData.components.mouseenterrun.params=i,o.buttonData.components.mouseleaverun={},o.buttonData.components.mouseleaverun.cursorObj=o.id,o.buttonData.components.mouseleaverun.method="DespawnDescription",o.buttonData.components.mouseleaverun.params=i,o.hoverData.id=n[i].id+"hover",o.hoverData.text.value=n[i].description,o.cores.hover[t][i]=e.Core(o.hoverData),o.cores[t][i]=e.Core(o.buttonData);r>i&&(i=r)}},ResetMenu:n,SpawnDescription:e=>{if(o.descriptionOpen);else{o.buttonHover=e;let t=o.cores[o.currentMenu][e].GetEl();o.cores.hover[o.currentMenu][e].SpawnCore(t),o.descriptionOpen=!0}},DespawnDescription:r}},s=(e,t,o,a,i,n)=>{let r={};r.id=t;let s=r.id+"layer",l=r.id+"combo0",c=r.id+"combo1",d=r.id+"combo2",p=r.id+"combo3",h=r.id+"combo4";if(r.sequence=a,r.run=i,r.current=0,r.locked=!0,r.correctSoFar=!0,r.lockedTimeout,r.unlockedTimeout,r.position=n||new THREE.Vector3(0,0,0),r.texts=[],o)for(let e in o)r.texts[e]={value:o[e],color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.051,side:"front",wrapCount:2,baseline:"center"};else r.texts[0]=!1,r.texts[1]=!1,r.texts[2]=!1,r.texts[3]=!1,r.texts[4]=!1;r.comboParentData={data:"comboParentData",id:"comboParent",sources:!1,text:!1,geometry:!1,material:!1,position:r.position,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},r.comboParent=e.Core(r.comboParentData),r.combo0Data={data:"combo0Data",id:l,sources:!1,text:r.texts[0],geometry:{primitive:"box",depth:.1,width:.2,height:.3},material:{shader:"standard",color:"#e02574",emissive:"#e02574",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.4,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"},locked:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:250,delay:0,loop:!1,dir:"normal",easing:"easeInSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"locked"},locked2:{property:"material.emissiveIntensity",from:"1",to:"0.25",dur:250,delay:1750,loop:!1,dir:"normal",easing:"easeOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"locked"},unlocked:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:250,delay:0,loop:"8",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"unlocked"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:r.id,component:"null",method:"KeyClick",params:"0"}}},r[l]=e.Core(r.combo0Data),r.combo1Data=e.CoreDataFromTemplate(r.combo0Data,{id:c,text:r.texts[1],position:new THREE.Vector3(-.2,0,0),material:{shader:"standard",color:"#66e025",emissive:"#66e025",emissiveIntensity:.25,opacity:1},components:{clickrun:{cursorObj:r.id,component:"null",method:"KeyClick",params:"1"}}},!0),r[c]=e.Core(r.combo1Data),r.combo2Data=e.CoreDataFromTemplate(r.combo0Data,{id:d,text:r.texts[2],position:new THREE.Vector3(0,0,0),material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},components:{clickrun:{cursorObj:r.id,component:"null",method:"KeyClick",params:"2"}}},!0),r[d]=e.Core(r.combo2Data),r.combo3Data=e.CoreDataFromTemplate(r.combo0Data,{id:p,text:r.texts[3],position:new THREE.Vector3(.2,0,0),material:{shader:"standard",color:"#e0e025",emissive:"#e0e025",emissiveIntensity:.25,opacity:1},components:{clickrun:{cursorObj:r.id,component:"null",method:"KeyClick",params:"3"}}},!0),r[p]=e.Core(r.combo3Data),r.combo4Data=e.CoreDataFromTemplate(r.combo0Data,{id:h,text:r.texts[4],position:new THREE.Vector3(.4,0,0),material:{shader:"standard",color:"#e09825",emissive:"#e09825",emissiveIntensity:.25,opacity:1},components:{clickrun:{cursorObj:r.id,component:"null",method:"KeyClick",params:"4"}}},!0),r[h]=e.Core(r.combo4Data),r.comboAll={parent:{core:r.comboParent},child0:{core:r[l]},child1:{core:r[c]},child2:{core:r[d]},child3:{core:r[p]},child4:{core:r[h]}},r[s]=e.Layer(s,r.comboAll);const m=()=>{r.locked=!1,u(),g(),r.unlockedTimeout=setTimeout((()=>{r.run.component&&"null"!==r.run.component?document.getElementById(r.run.cursorObj).components[r.run.component][r.run.method](r.run.params):e[r.run.cursorObj][r.run.method](r.run.params),g(),f(),clearTimeout(r.lockedTimeout)}),2250)},u=()=>{r[s].EmitEventAll("unlocked")},y=()=>{r[s].EmitEventAll("locked")},g=()=>{r[s].GetAllChildEl().forEach((e=>e.classList.toggle("clickable")))},v=()=>{r.current=0,r.correctSoFar=!0,r.locked=!0},f=()=>{clearTimeout(r.lockedTimeout),clearTimeout(r.unlockedTimeout),r[s].DespawnLayer()};return{comboLock:r,SpawnComboLock:()=>{r.locked=!0,r[s].SpawnLayer()},DespawnComboLock:f,KeyClick:e=>{r.locked&&(e=>{r.correctSoFar&&(e===r.sequence[r.current]?r.correctSoFar=!0:r.correctSoFar=!1),r.current++,r.current>=r.sequence.length&&(r.correctSoFar?m():(v(),y(),g(),r.unlockedTimeout=setTimeout((()=>{g(),clearTimeout(r.unlockedTimeout)}),2e3)))})(e)},NewSequence:e=>{clearTimeout(r.lockedTimeout),clearTimeout(r.unlockedTimeout),r.sequence=e,v()}}},l=(e,t,o,a)=>{let i,n;t.npc=o||!1,t.on=!1,t.speaking=!1,t.blinking=!1,t.blinkNextText="",t.blinkText0="",t.blinkText1="",t.textDisplayInterval;let r="speech";t.type="core",t.core?(t.type="core",r=t.core.id):(t.type="layer",r=t.layer.id);let s=!1;s=o?o.avatar.core?"core":"layer":t.core?"core":"layer";const l=e=>"core"===t.type?t.GetEl(e):t.GetParentEl(e),c=()=>{l()?"core"===t.type?t.GetEl().emit("skip",{}):t.GetParentEl().emit("skip",{}):console.log({core:t,npc:o,func:"Skip()",msg:"Failed to find speech bubble"})},d=()=>{t.speaking=!1,clearInterval(e.intervals[r]),delete e.intervals[r]},p=()=>{t.blinking=!1,clearInterval(e.intervals[r+"blink"]),delete e.intervals[r+"blink"]},h=()=>{m({name:"blinkDisplayInterval",type:"interval",id:r}),e.intervals[r+"blink"]=setInterval((()=>{l()?t.blinking?("core"===t.type?t.GetEl().setAttribute("text",{value:t.blinkText1}):t.GetParentEl().setAttribute("text",{value:t.blinkText1}),t.blinking=!1):("core"===t.type?t.GetEl().setAttribute("text",{value:t.blinkText0}):t.GetParentEl().setAttribute("text",{value:t.blinkText0}),t.blinking=!0):p()}),1500)},m=({name:t,type:o,id:a,method:i,params:n})=>{let r=t+a;"timeout"===o||"interval"===o?e.running[r]={type:o,name:t,id:a,nameId:r}:"interaction"!==o&&"event"!==o||(e.running[r]={type:o,name:t,id:a,nameId:r,method:i,params:n,event})};return{core:t,Start:()=>{let a=!1;if(t.npc?"core"===s?a=o.avatar.GetEl():"layer"===s&&(a=o.avatar.GetParentEl()):"core"===s?a=t.GetEl():"layer"===s&&(a=t.GetParentEl()),"core"===t.type)t.SpawnCore(a),n=setTimeout((()=>{t.GetEl(!0).addEventListener("mouseenter",c),t.EmitEvent("loadin"),clearTimeout(i)}),100);else{t.SpawnLayer(a);let i=setInterval((()=>{let n=0;t.GetParentEl(!0)?(t.GetParentEl(!0).addEventListener("mouseenter",c),t.layer.all.child0.core.GetEl().addEventListener("click",e[o.id].ResetSpeech),t.layer.all.child1.core.GetEl().addEventListener("click",e[o.id].ForceResetBook),t.EmitEventAll("loadin"),clearInterval(i)):(n++,n>=20&&(n=0,t.SpawnLayer(a)))}),125)}t.on=!0},Skip:c,KillStop:()=>{d(),p(),(()=>{if(t.on){if(!l())return void console.log({core:t,npc:o,func:"Stop()",msg:"Failed to find speech bubble"});"core"===t.type?(t.GetEl().removeEventListener("mouseenter",c),t.EmitEvent("loadout"),t.DespawnCore(),t.on=!1,i=setTimeout((()=>{clearTimeout(i)}),150)):(t.GetParentEl().removeEventListener("mouseenter",c),t.EmitEventAll("loadout"),t.layer.all.child0.core.GetEl().removeEventListener("click",o.ResetSpeech),t.layer.all.child1.core.GetEl().removeEventListener("click",o.ForceResetBook),t.DespawnLayer(),t.on=!1,i=setTimeout((()=>{clearTimeout(i)}),150))}})()},ChangeCore:e=>{if(l())if("core"===t.type)if(Array.isArray(e))for(let o in e)t.ChangeSelf(e[o]);else t.ChangeSelf(e);else if(Array.isArray(e))for(let o in e)t.ChangeParent(e[o]);else t.ChangeParent(e);else console.log({core:t,npc:o,func:"ChangeCore()",msg:"Failed to find speech bubble"})},DisplaySpeech:({role:a,speech:i})=>{if("core"===t.type){if(!t.GetEl(!0))return}else if(!t.GetParentEl(!0))return;if(d(),p(),!l())return void console.log({core:t,npc:o,func:"DisplaySpeech()",msg:"Failed to find speech bubble"});let n=a+" : ",s=n,c=0;function u(){"core"===t.type?t.GetEl().setAttribute("text",{value:n+i}):t.GetParentEl().setAttribute("text",{value:n+i}),t.speaking=!1,d(),t.blink&&(t.blinkText0=n+i,t.blinkText1=n+i,o.bookEnd?t.blinkNextText=" X":t.blinkNextText=" ->",t.blinkText1+=t.blinkNextText,h()),"core"===t.type?t.GetEl().removeEventListener("skip",u):t.GetParentEl().removeEventListener("skip",u)}"core"===t.type?t.GetEl(!0).setAttribute("text",{value:s}):t.GetParentEl(!0).setAttribute("text",{value:s}),t.speaking=!0,"core"===t.type?t.GetEl().addEventListener("skip",u):t.GetParentEl().addEventListener("skip",u),m({name:"textDisplayInterval",type:"interval",id:r}),e.intervals[r]=setInterval((()=>{l()?(c<i.length&&(s+=i[c],c++),c>=i.length&&(t.speaking=!1,"core"===t.type?t.GetEl().removeEventListener("skip",u):t.GetParentEl().removeEventListener("skip",u),t.blink&&(t.blinkText0=s,t.blinkText1=s,o.bookEnd?t.blinkNextText=" X":t.blinkNextText=" ->",t.blinkText1+=t.blinkNextText,h()),d()),t.on&&("core"===t.type?t.GetEl().setAttribute("text",{value:s}):t.GetParentEl().setAttribute("text",{value:s}))):d()}),20)}}},c=e=>{let t={size:0,topHeight:0,bottomHeight:0,collide:{},trigger:{},triggersActive:!1,edgeSpawned:!1,edges:{}};t.edge=e.mapEdgeBasic,t.waiting=!1,t.spawnWaiting={},t.waitingMove=!1,t.moveWaiting={};const o=()=>{e.collision=!0};o();const a=()=>{if(t.collide={},e.collisionMap[0]=[],e.collisionMap[1]=[],t.topHeight>0)for(let o=0;o<t.topHeight;o++)i(e.collisionMap[0],o);if(t.bottomHeight>0)for(let o=0;o<t.bottomHeight;o++)i(e.collisionMap[1],o)},i=(e,o)=>{let a=[[],[],[],[]];a[0]=[],a[0]=Array(t.size/2).fill(0,0);for(let e in a[0])a[0][e]=Array(t.size/2).fill(0,0);a[1]=[],a[1]=Array(t.size/2).fill(0,0);for(let e in a[1])a[1][e]=Array(t.size/2).fill(0,0);a[2]=[],a[2]=Array(t.size/2).fill(0,0);for(let e in a[2])a[2][e]=Array(t.size/2).fill(0,0);a[3]=[],a[3]=Array(t.size/2).fill(0,0);for(let e in a[3])a[3][e]=Array(t.size/2).fill(0,0);e.push(a)},n=e=>{for(let o in t.collide)if(o===e.name);else for(let a in t.collide[o])if(t.collide[o][a].pos.x===e.pos.x&&t.collide[o][a].pos.y===e.pos.y&&t.collide[o][a].pos.z===e.pos.z)return!1;return!0},r=(t,o)=>{let a,i=2*t.x,n=t.y,r=2*t.z;a=n>=0?0:1,i<0&&r<0?e.collisionMap[a][n][0][-1*r][-1*i]=o:t.x>=0&&r<0?e.collisionMap[a][n][1][-1*r][i]=o:i<0&&r>=0?e.collisionMap[a][n][2][r][-1*i]=o:i>=0&&r>=0?e.collisionMap[a][n][3][r][i]=o:console.log("Update out of bounds")},s=t=>{let o=e.player.GetPlayerInfo().grid;return!(t.start.x<=o.x&&t.end.x>=o.x&&t.start.y<=o.y&&t.end.y>=o.y&&t.start.z<=o.z&&t.end.z>=o.z||!e.player.layer.bodyCrouch&&t.start.x<=o.x&&t.end.x>=o.x&&t.start.y<=o.y+1&&t.end.y>=o.y+1&&t.start.z<=o.z&&t.end.z>=o.z)},l=t=>{let o,a={};if(a.x=2*t.x,a.y=t.y||0,a.z=2*t.z,Math.abs(a.y)-Math.floor(Math.abs(a.y))>0&&(a.y=Math.floor(a.y)),o=a.y>=0?0:1,a.y>=0){if(e.collisionMap[o].length<=a.y)return console.log("height out of bounds"),!e.mapEdge}else if(e.collisionMap[o].length>=-1*a.y)return console.log("height out of bounds"),!e.mapEdge;return a.x<0&&a.z<0?e.collisionMap[o][a.y][0].length>-1*a.z&&e.collisionMap[o][a.y][0][-1*a.z].length>-1*a.x?0===e.collisionMap[o][a.y][0][-1*a.z][-1*a.x]:!e.mapEdge:a.x>=0&&a.z<0?e.collisionMap[o][a.y][1].length>-1*a.z&&e.collisionMap[o][a.y][1][-1*a.z].length>a.x?0===e.collisionMap[o][a.y][1][-1*a.z][a.x]:!e.mapEdge:a.x<0&&a.z>=0?e.collisionMap[o][a.y][2].length>a.z&&e.collisionMap[o][a.y][2][a.z].length>-1*a.x?0===e.collisionMap[o][a.y][2][a.z][-1*a.x]:!e.mapEdge:a.x>=0&&a.z>=0&&(e.collisionMap[o][a.y][3].length>a.z&&e.collisionMap[o][a.y][3][a.z].length>a.x?0===e.collisionMap[o][a.y][3][a.z][a.x]:!e.mapEdge)},c=()=>{if(t.triggers={},e.triggerMap[0]=[],e.triggerMap[1]=[],t.topHeight>0)for(let o=0;o<t.topHeight;o++)i(e.triggerMap[0],o);if(t.bottomHeight>0)for(let o=0;o<t.bottomHeight;o++)i(e.triggerMap[1],o)},d=e=>{t.trigger[e.name]||(t.trigger[e.name]={}),t.trigger[e.name]["space"+e.spaces]={},t.trigger[e.name]["space"+e.spaces].pos=e.pos},p=e=>{delete t.trigger[e]},h=e=>{for(let o in t.trigger)if(o===e.name);else for(let a in t.trigger[o]){if("active"===a)return!1;if(t.trigger[o][a].pos.x===e.pos.x&&t.trigger[o][a].pos.y===e.pos.y&&t.trigger[o][a].pos.z===e.pos.z)return!1}return!0},m=(t,o)=>{let a,i=2*t.x,n=t.y,r=2*t.z;a=t.y>=0?0:1,i<0&&r<0?e.triggerMap[a][n][0][-1*r][-1*i]=o:t.x>=0&&r<0?e.triggerMap[a][n][1][-1*r][i]=o:i<0&&r>=0?e.triggerMap[a][n][2][r][-1*i]=o:i>=0&&r>=0?e.triggerMap[a][n][3][r][i]=o:console.log("Update out of bounds")},u=(o,a)=>{e[o.name]?a?t.trigger[o.name].active||(e[o.name].EmitEvent?e[o.name].EmitEvent("triggerEnter"):e[o.name].EmitEventParent&&e[o.name].EmitEventParent("triggerEnter"),t.trigger[o.name].active=!0):t.trigger[o.name].active&&(e[o.name].EmitEvent?e[o.name].EmitEvent("triggerExit"):e[o.name].EmitEventParent&&e[o.name].EmitEventParent("triggerExit"),t.trigger[o.name].active=!1):(console.log(o.name),console.log("Trigger is not an AUXL object"))};return{grid:t,BuildMap:(e,o)=>{t.size=e,t.topHeight=o.top||2,t.bottomHeight=o.bottom||0,a(),c()},BlankMap:a,UpdateMap:r,UpdateMapArea:(e,o,a,i)=>{let s,l,c,d,p,h,m,u={x:o.x,y:o.y,z:o.z},y=0;m=i?1:0,o.y===a.y?c=1:(c=Math.abs(o.y)+Math.abs(a.y),c+=1),u.y=o.y,d=c;for(let i=0;i<c;i++){o.z===a.z?p=1:(p=o.z-a.z,p*=2,p<0&&(p*=-1),p+=1),u.z=o.z,h=p;for(let i=0;i<p;i++){o.x===a.x?s=1:(s=o.x-a.x,s*=2,s<0&&(s*=-1),s+=1),u.x=o.x,l=s;for(let o=0;o<s;o++)0===m?(n({name:e,pos:{x:u.x,y:u.y,z:u.z}})&&r(u,m),y++):1===m&&(r(u,m),y++,g={name:e,spaces:y,pos:{x:u.x,y:u.y,z:u.z}},t.collide[g.name]||(t.collide[g.name]={}),t.collide[g.name]["space"+g.spaces]={},t.collide[g.name]["space"+g.spaces].pos=g.pos),l--,l>0&&(u.x+=.5);h--,h>0&&(u.z+=.5)}d--,d>0&&(u.y+=1)}var g;0===m&&(e=>{delete t.collide[e]})(e)},EnableCollision:o,DisableCollision:()=>{e.collision=!1},CheckMapObstacles:l,CheckMapObstaclesDiagonal:(t,o)=>{let a,i={};i.x=o.x,i.y=o.y,i.z=o.z,i.x*=2,i.z*=2,a=i.y>=0?0:1;let n,r,s,l={};if(l.x=t.x,l.y=t.y,l.z=t.z,l.x*=2,l.z*=2,n=l.y>=0?0:1,l.x===i.x&&l.z===i.z?r="same":l.x===i.x||l.z===i.z?l.x===i.x?r="z":l.z===i.z&&(r="x"):r=l.x>i.x?l.z>i.z?"reverseRight":"forwardRight":l.z>i.z?"reverseLeft":"forwardLeft",s=l.y===i.y?"same":l.y>i.y?"up":"down",l.y>=0){if(e.collisionMap[a].length<=l.y)return console.log("height out of bounds"),!e.mapEdge}else if(e.collisionMap[a].length>=-1*l.y)return console.log("height out of bounds"),!e.mapEdge;function c(t,o,a,i,n){if(void 0===e.collisionMap[t][i])0===t?i<0&&("undefined"===e.collisionMap[1]||c(1,o,a,-1*i,n)):1===t&&i<0&&("undefined"===e.collisionMap[0]||c(0,o,a,-1*i,n));else if(void 0===e.collisionMap[t][i][o][n])0===o?n<0&&c(t,2,a,i,-1*n):1===o?n<0&&c(t,3,a,i,-1*n):2===o?n<0&&c(t,0,a,i,-1*n):3===o&&n<0&&c(t,1,a,i,-1*n);else{if(void 0!==e.collisionMap[t][i][o][n][a])return e.collisionMap[t][i][o][n][a];0===o?a<0&&c(t,1,-1*a,i,n):1===o?a<0&&c(t,0,-1*a,i,n):2===o?a<0&&c(t,3,-1*a,i,n):3===o&&a<0&&c(t,2,-1*a,i,n)}}return l.x<0&&l.z<0?e.collisionMap[n][l.y][0].length>-1*l.z&&e.collisionMap[n][l.y][0][-1*l.z].length>-1*l.x?0===c(n,0,-1*l.x,l.y,-1*l.z)&&("forwardRight"===r?0===c(n,0,-1*l.x,l.y,-1*l.z+1)||0===c(n,0,-1*l.x-1,l.y,-1*l.z):"forwardLeft"===r?0===c(n,0,-1*l.x,l.y,-1*l.z+1)||0===c(n,0,-1*l.x+1,l.y,-1*l.z):"reverseRight"===r?0===c(n,0,-1*l.x,l.y,-1*l.z-1)||0===c(n,0,-1*l.x-1,l.y,-1*l.z):"reverseLeft"!==r||0===c(n,0,-1*l.x,l.y,-1*l.z-1)||0===c(n,0,-1*l.x+1,l.y,-1*l.z)):!e.mapEdge:l.x>=0&&l.z<0?e.collisionMap[n][l.y][1].length>-1*l.z&&e.collisionMap[n][l.y][1][-1*l.z].length>l.x?0===c(n,1,l.x,l.y,-1*l.z)&&("forwardRight"===r?0===c(n,1,l.x,l.y,-1*l.z+1)||0===c(n,1,l.x-1,l.y,-1*l.z):"forwardLeft"===r?0===c(n,1,l.x,l.y,-1*l.z+1)||0===c(n,1,l.x+1,l.y,-1*l.z):"reverseRight"===r?0===c(n,1,l.x,l.y,-1*l.z-1)||0===c(n,1,l.x-1,l.y,-1*l.z):"reverseLeft"!==r||0===c(n,1,l.x,l.y,-1*l.z-1)||0===c(n,1,l.x+1,l.y,-1*l.z)):!e.mapEdge:l.x<0&&l.z>=0?e.collisionMap[n][l.y][2].length>l.z&&e.collisionMap[n][l.y][2][l.z].length>-1*l.x?0===c(n,2,-1*l.x,l.y,l.z)&&("forwardRight"===r?0===c(n,2,-1*l.x,l.y,l.z+1)||0===c(n,2,-1*l.x-1,l.y,l.z):"forwardLeft"===r?0===c(n,2,-1*l.x,l.y,l.z+1)||0===c(n,2,-1*l.x+1,l.y,l.z):"reverseRight"===r?0===c(n,2,-1*l.x,l.y,l.z-1)||0===c(n,2,-1*l.x-1,l.y,l.z):"reverseLeft"!==r||0===c(n,2,-1*l.x,l.y,l.z-1)||0===c(n,2,-1*l.x+1,l.y,l.z)):!e.mapEdge:l.x>=0&&l.z>=0&&(e.collisionMap[n][l.y][3].length>l.z&&e.collisionMap[n][l.y][3][l.z].length>l.x?0===c(n,3,l.x,l.y,l.z)&&("forwardRight"===r?0===c(n,3,l.x,l.y,l.z+1)||0===c(n,3,l.x-1,l.y,l.z):"forwardLeft"===r?0===c(n,3,l.x,l.y,l.z+1)||0===c(n,3,l.x+1,l.y,l.z):"reverseRight"===r?0===c(n,3,l.x,l.y,l.z-1)||0===c(n,3,l.x-1,l.y,l.z):"reverseLeft"!==r||0===c(n,3,l.x,l.y,l.z-1)||0===c(n,3,l.x+1,l.y,l.z)):!e.mapEdge)},CheckMapObstaclesArea:(e,t)=>{let o,a,i,n,r={x:e.x,z:e.z};if(e.z===t.z?i=1:(i=e.z-t.z,i*=2,i<0&&(i*=-1),i+=1),r.z=e.z,n=i,!s({start:e,end:t}))return console.log("Hit Player"),!1;for(let s=0;s<i;s++){e.x===t.x?o=1:(o=e.x-t.x,o*=2,o<0&&(o*=-1),o+=1),r.x=e.x,a=o;for(let e=0;e<o;e++){if(!l(r))return console.log("Hit Object"),console.log(r),!1;a--,a>0&&(r.x+=.5)}n--,n>0&&(r.z+=.5)}return!0},CheckMapAreaSansArea:(e,t,o)=>{let a,i,n,r,c,d,p=((e,t,o)=>{let a,i,n,r,s,l,c={x:e.x,y:e.y,z:e.z},d=[],p=Math.abs(e.y)+Math.abs(t.y)+o;for(let e=0;e<p+1;e++)d.push(new Array);e.y===t.y?n=1:(n=Math.abs(e.y)+Math.abs(t.y),n+=1),c.y=e.y,r=n;for(let o=0;o<n;o++){e.z===t.z?s=1:(s=e.z-t.z,s*=2,s<0&&(s*=-1),s+=1),c.z=e.z,l=s;for(let o=0;o<s;o++){e.x===t.x?a=1:(a=e.x-t.x,a*=2,a<0&&(a*=-1),a+=1),c.x=e.x,i=a;for(let e=0;e<a;e++)d[c.y].push({x:c.x,z:c.z}),i--,i>0&&(c.x+=.5);l--,l>0&&(c.z+=.5)}r--,r>0&&(c.y+=1)}return d})(e.start,e.end,o),h=!1,m={x:t.start.x,y:t.start.y,z:t.start.z};if(!s(t))return!1;t.start.y===t.end.y?n=1:(n=Math.abs(t.start.y)+Math.abs(t.end.y),n+=1),m.y=t.start.y,r=n;for(let e=0;e<n;e++){t.start.z===t.end.z?c=1:(c=t.start.z-t.end.z,c*=2,c<0&&(c*=-1),c+=1),m.z=t.start.z,d=c;for(let e=0;e<c;e++){t.start.x===t.end.x?a=1:(a=t.start.x-t.end.x,a*=2,a<0&&(a*=-1),a+=1),m.x=t.start.x,i=a;for(let e=0;e<a;e++){for(let e in p[m.y])if(m.x===p[m.y][e].x&&m.z===p[m.y][e].z){h=!0;break}if(h);else if(!l(m))return!1;h=!1,i--,i>0&&(m.x+=.5)}d--,d>0&&(m.z+=.5)}r--,r>0&&(m.y+=1)}return!0},SpawnEdges:o=>{var a;o&&(a=o,t.edge.core.material=a);let i=t.size/4+1,n=t.size/2+2.5;t.edges.northEdge=e.CoreFromTemplate(t.edge,{id:"northEdge",geometry:{primitive:"box",depth:.5,width:n,height:.5},position:new THREE.Vector3(0,.25,-1*i)},!0),t.edges.northEdge.SpawnCore(),t.edges.southEdge=e.CoreFromTemplate(t.edge,{id:"southEdge",geometry:{primitive:"box",depth:.5,width:n,height:.5},position:new THREE.Vector3(0,.25,i)},!0),t.edges.southEdge.SpawnCore(),t.edges.westEdge=e.CoreFromTemplate(t.edge,{id:"westEdge",geometry:{primitive:"box",depth:n,width:.5,height:.5},position:new THREE.Vector3(-1*i,.25,0)},!0),t.edges.westEdge.SpawnCore(),t.edges.eastEdge=e.CoreFromTemplate(t.edge,{id:"eastEdge",geometry:{primitive:"box",depth:n,width:.5,height:.5},position:new THREE.Vector3(i,.25,0)},!0),t.edges.eastEdge.SpawnCore(),t.edgeSpawned=!0},DespawnEdges:e=>{t.edges.northEdge.DespawnCore(),delete t.edges.northEdge,t.edges.southEdge.DespawnCore(),delete t.edges.southEdge,t.edges.westEdge.DespawnCore(),delete t.edges.westEdge,t.edges.eastEdge.DespawnCore(),delete t.edges.eastEdge,t.edgeSpawned=!1},UpdateEdge:e=>{t.edge=e},BlankMapTrigger:c,OnMapTrigger:d,OffMapTrigger:p,CheckMapOverlapTrigger:h,UpdateMapAreaTrigger:(e,t,o,a)=>{let i,n,r,s,l,c,u,y={x:t.x,y:t.y,z:t.z},g=0;u=a?1:0,t.y===o.y?r=1:(r=Math.abs(t.y)+Math.abs(o.y),r+=1),y.y=t.y,s=r;for(let a=0;a<r;a++){t.z===o.z?l=1:(l=t.z-o.z,l*=2,l<0&&(l*=-1),l+=1),y.z=t.z,c=l;for(let a=0;a<l;a++){t.x===o.x?i=1:(i=t.x-o.x,i*=2,i<0&&(i*=-1),i+=1),y.x=t.x,n=i;for(let t=0;t<i;t++)0===u?(h({name:e,pos:{x:y.x,y:y.y,z:y.z}})&&m(y,u),g++):1===u&&(m(y,u),g++,d({name:e,spaces:g,pos:{x:y.x,y:y.y,z:y.z}})),n--,n>0&&(y.x+=.5);c--,c>0&&(y.z+=.5)}s--,s>0&&(y.y+=1)}0===u&&p(e)},UpdateMapTrigger:m,CheckMapTriggers:t=>{let o,a={};if(a.x=2*t.x,a.y=t.y,a.z=2*t.z,o=a.y>=0?0:1,a.x<0&&a.z<0){if(e.triggerMap[o][a.y][0].length>-1*a.z&&e.triggerMap[o][a.y][0][-1*a.z].length>-1*a.x)return 1===e.triggerMap[o][a.y][0][-1*a.z][-1*a.x]}else if(a.x>=0&&a.z<0){if(e.triggerMap[o][a.y][1].length>-1*a.z&&e.triggerMap[o][a.y][1][-1*a.z].length>a.x)return 1===e.triggerMap[o][a.y][1][-1*a.z][a.x]}else if(a.x<0&&a.z>=0){if(e.triggerMap[o][a.y][2].length>a.z&&e.triggerMap[o][a.y][2][a.z].length>-1*a.x)return 1===e.triggerMap[o][a.y][2][a.z][-1*a.x]}else{if(!(a.x>=0&&a.z>=0))return!1;if(e.triggerMap[o][a.y][3].length>a.z&&e.triggerMap[o][a.y][3][a.z].length>a.x)return 1===e.triggerMap[o][a.y][3][a.z][a.x]}},TriggerEnterHit:e=>{let o=[];for(let a in t.trigger)for(let i in t.trigger[a])"active"===i||t.trigger[a][i].pos.x===e.x&&t.trigger[a][i].pos.z===e.z&&o.push({name:a,pos:t.trigger[a][i]});if(o.length>0){t.triggersActive=!0;for(let e in o)u(o[e],!0)}},CheckActiveTriggers:e=>{if(t.triggersActive){let o=!1,a=!1;for(let o in t.trigger)if(a=!1,t.trigger[o].active){for(let i in t.trigger[o])t.trigger[o][i].pos&&t.trigger[o][i].pos.x===e.x&&t.trigger[o][i].pos.z===e.z&&(a=!0);a||u({name:o},!1)}o&&(t.triggersActive=!1)}},ClearTriggers:()=>{for(let e in t.trigger)for(let o in t.trigger[e])"active"===o&&(t.trigger[e][o]=!1);t.triggersActive=!1},WaitToSpawn:e=>{t.waiting||(t.waiting=!0),t.spawnWaiting[e.name]=e},WaitingToSpawn:()=>{if(t.waiting)for(let a in t.spawnWaiting)e[a][t.spawnWaiting[a].func](),e[a].inScene&&(o=a,delete t.spawnWaiting[o],0===Object.keys(t.spawnWaiting).length&&(t.waiting=!1));var o},ClearWaiting:()=>{t.waiting=!1,t.spawnWaiting={}},MoveToGrid:(t,o)=>{console.log(t),console.log(o),console.log(e[o.id])},PathOnGrid:e=>{}}},d=(e,t,o,a)=>{let i={};i.objGen=t,i.worldBody=!1,i.core=!1,i.layer=!1,i.bodyEl=!1,i.rayEl=!1,i.spawnControl=!0,t.core?i.core=t:t.layer&&(i.core=t.layer.all.parent.core,i.layer=t),i.num=Math.random().toFixed(8),i.name=i.core.core.id+"Phys"||0,i.id=i.name+i.num,i.loaded=!1,i.type="static",i.shape="box",i.mass=0,i.friction=0,i.restitution=0,i.connectTo=0,i.linearDamping=.2,i.angularDamping=.2,i.length=0,i.damping=0,i.stiffness=0,i.worldAxis=new THREE.Vector3(0,-1,0),i.worldGravityStyle="earth",i.worldGravity=new THREE.Vector3(0,0,0),i.body={type:i.type,mass:i.mass,shape:"none"},i.fixedRotation=o.fixedRotation||!1,i.shapes={},i.shapes.cylinder={shape:"cylinder",height:1,radiusTop:1,radiusBottom:1,offset:"0 0 0"},i.shapes.box={shape:"box",height:1,width:1,depth:1,offset:"0 1 0"},i.shapes.sphere={shape:"sphere",radius:1,width:1,depth:1,offset:"0 0 0"},i.mainShape=o.shapeData||i.shapes.box,i.avatar=[i.mainShape],i.avatarRemove=[],i.bodymaterial={friction:i.friction,restitution:i.restitution},i.connections=[];const n=()=>{i.fixedRotation&&!i.bodyEl.body.fixedRotation?(i.bodyEl.body.fixedRotation=!0,i.bodyEl.body.updateMassProperties()):!i.fixedRotation&&i.bodyEl.body.fixedRotation&&(i.bodyEl.body.fixedRotation=!1,i.bodyEl.body.updateMassProperties())};const r=()=>{i.core.ChangeSelf({property:"shape",value:i.mainShape}),i.core.ChangeSelf([{property:"body",value:i.body},{property:"bodymaterial",value:i.bodymaterial}]),n()},s=e=>{if(e)for(let t in e)i[t]=e[t];if(i.core.core.components||(i.core.core.components={}),i.avatarRemove.length>0)for(let e in i.avatarRemove)delete i.core.core.components["shapes__"+e];for(let e in i.avatar)i.core.core.components["shapes__"+e]=i.avatar[e];if(i.core.core.components.body={property:"body",value:i.body},i.core.core.components.bodymaterial={property:"bodymaterial",value:i.bodymaterial},i.loaded){if(i.avatarRemove.length>0){for(let e in i.avatarRemove)i.core.RemoveComponent("shapes__"+e);i.avatarRemove=[]}r()}};s(o),i.constraint={};let l={playerPhysics:!1};l.worldGravity=new THREE.Vector3(0,-9.8,0),l.localAxis=new THREE.Vector3(0,0,0),l.worldAxis=new THREE.Vector3(0,-1,0),l.gravity=new THREE.Vector3(0,0,0),l.axis=new THREE.Vector3(0,-1,0),l.gravity.copy(l.worldGravity),l.physMove=!0,l.jumping=!1,l.jumpTimeout,l.gravityStyle="earth",l.velocityStyle="slam",l.currentVelocity=30,l.tracking=!1,l.track2DInterval;const c=t=>{l.distance=40,e.linkHoverMenuData={info:{id:"linkHoverMenu",buttonData:e.menuCylinderData,hoverData:e.menuHoverData,title:"Link Hover Menu",description:"A link hover menu for quick access.",layout:"circleUp",offset:-1,attached:!1,parent:"playerBody",posOffset:new THREE.Vector3(0,1.5,-2)},menu:{button0:{id:"action1",style:!1,title:"Rubber",description:"Launch yourself at link.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"LinkControls",params:"rubber",menu:"close"}},button1:{id:"action2",style:!1,title:"Power",description:"Swing from a far current distance",subMenu:!1,action:{auxlObj:"player",component:!1,method:"LinkControls",params:"power",menu:"close"}},button4:{id:"action5",style:!1,title:"Swing",description:"Swing from current distance",subMenu:!1,action:{auxlObj:"player",component:!1,method:"LinkControls",params:"swing",menu:"close"}}}},e.linkHoverMenu=e.HoverMenu(e.linkHoverMenuData),l.linkLength=1;let o={data:"linkData",id:"linkCore",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.5},material:{shader:"standard",color:"#ebd107",emissive:"#ebd107",emissiveIntensity:.25,opacity:.75},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{body:{type:"static",shape:"none",mass:0},bodymaterial:{friction:0,restitution:0}}};l.linkCore=e.Core(e.CoreDataFromTemplate(o,!1,!0)),l.linkConfig={type:"auxspring",to:"playerRig",minOneLength:0,maxOneLength:30,restLength:1,damping:.5,stiffness:10},l.linkCoreConstraint=e.Constraints(l.linkCore,l.linkConfig,!1),l.linkCoreType="rubber";let a={data:"anchorData",id:"anchorCore",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.5},material:{shader:"standard",color:"#eb07bf",emissive:"#eb07bf",emissiveIntensity:.25,opacity:.5},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1};l.anchorCore=e.Core(a),l.linkInterval};c(),console.log("Link ran"),l.boostPower=100;return{one:i,SpawnOne:()=>{i.spawnControl&&(i.layer?i.layer.SpawnLayer():i.core.SpawnCore());let e=setTimeout((()=>{i.loaded=!0,i.bodyEl=i.core.GetEl(),i.worldBody=i.bodyEl.body,a?a.core?i.rayEl=a.GetEl():a.layer&&(i.rayEl=a.GetParentEl()):i.rayEl=i.bodyEl,n(),r(),clearTimeout(e)}),50)},DespawnOne:()=>{i.spawnControl?i.layer?i.layer.DespawnLayer():i.core.DespawnCore():(()=>{if(i.avatarRemove.length>0){for(let e in i.avatarRemove)i.core.RemoveComponent("shapes__"+e);i.avatarRemove=[]}i.core.RemoveComponent(i.avatar),i.core.RemoveComponent(["body","bodymaterial"])})(),i.worldBody=!1,i.loaded=!1},UpdatePhys:s,Link:c,Unlink:()=>{i.core.RemoveComponent("auxspring__"+i.id)},UnlinkAll:()=>{for(let e of i.constraint)i.constraint[e].Disconnect(i);i.constraint={}},Track2D:()=>{let t=l.raycaster.intersection||new THREE.Vector3(0,0,0);if(t.equals(new THREE.Vector3(0,0,0)))return;let o=new THREE.Vector3(0,0,0);l.worldAxis=new THREE.Vector3(0,-1,0),l.tracking=!0,l.track2DInterval=setInterval((()=>{l.tracking&&(o.copy(e.mouseController.GetEl().components.raycaster.intersections[0].point),t.equals(o)||(t.x.toFixed(2)===o.x.toFixed(2)?t.x>0?l.worldAxis=new THREE.Vector3(1,0,0):l.worldAxis=new THREE.Vector3(-1,0,0):t.y.toFixed(2)===o.y.toFixed(2)&&(t.y>0?l.worldAxis=new THREE.Vector3(0,-1,0):l.worldAxis=new THREE.Vector3(0,1,0)),t.z.toFixed(2)===o.z.toFixed(2)&&(t.z>0?l.worldAxis=new THREE.Vector3(0,0,1):l.worldAxis=new THREE.Vector3(0,0,-1)),l.localAxis.copy(l.worldAxis),l.worldAxis.equals(new THREE.Vector3(0,0,0))?console.log({GravitationalAxisFloat:l.worldAxis}):console.log({GravitationalAxisNew:l.worldAxis}),l.tracking=!1,clearInterval(l.track2DInterval)))}),1)},Freeze:()=>{i.bodyEl.body.sleep()},UnFreeze:()=>{i.bodyEl.body.wakeUp()},ToggleAction:e=>{l.toggle0=!1,l.toggle1=!1,l.toggle2=!1,l.toggle3=!1,l.toggle4=!1,l.toggle5=!1,"0"===e?l.toggle0=!0:"1"===e?l.toggle1=!0:"2"===e?l.toggle2=!0:"3"===e?l.toggle3=!0:"4"===e?l.toggle4=!0:"5"===e?l.toggle5=!0:l.linkCore.core.inScene&&(console.log("Delink"),l.linkCore.DespawnCore())}}},p=(e,t)=>{let o=Object.assign({},t);const a=["nature1","nature2","nature3"],i=["sad","happy"],n=["famished","hungry","content","full"],r=[0,50,100,200,400,800,1600,3200,6400,12800,25600];o.nature=a[Math.floor(Math.random()*a.length)],o.ability=a[Math.floor(3*Math.random())],o.mana=Math.floor(5*Math.random())+5,o.mood=i[0],o.mind=0,o.currHunger=0,o.hunger=n[o.currHunger],o.stamina=2,o.clean=!0,o.maxHealth=6,o.currHealth=4,o.level=0,o.xp=0,o.age=0,o.tokens=0,o.currency=0,o.awake=!0,o.sleepCycle=!1,o.menu=0;const s=(e,t)=>{t?console.log(e+" "+o.name+"."):console.log(o.name+" "+e+".")};return{pet:o,SpawnPet:()=>{o.core.SpawnCore()},DespawnPet:()=>{o.core.DespawnCore()},Pet:()=>{s("Petting",!0),o.mind++,o.mood=i[o.mind],s("is "+o.mood,!1)},Feed:()=>{o.currHunger++,o.hunger=n[o.currHunger],s("is "+o.hunger,!1)},Groom:()=>{o.clean||(o.clean=!0,s("is clean.",!1))},Play:()=>{o.stamina>0&&(s("Playing with",!0),o.stamina--,o.mind++)},Heal:()=>{o.currHealth<o.maxHealth&&(o.currHealth+=2,s("Healing",!0),o.currHealth>o.maxHealth&&(o.currHealth=o.maxHealth))},Quest:()=>{var e;o.stamina>0&&(s("Questing with",!1),o.stamina-=2,100*Math.random()-o.mana>=69?(s("Completed a quest with ",!0),e=10,o.xp+=e,o.xp>=r[o.level]&&s(" gained a level!",!1)):s("Failed a quest with",!0))},Gamble:()=>{o.tokens>0&&(s("Gambling with",!1),o.tokens--,100*Math.random()>=50&&(o.currency++,s(" is a winner",!1)))},ToggleSleep:()=>{o.awake?(o.awake=!1,s(" is asleep",!1)):(o.awake=!0,s(" is awake",!1))},Stats:()=>{console.log(o)},Settings:()=>{},spawnPetMainMenu:()=>{o.pos=o.core.GetEl().getAttribute("position"),o.systemMenuData={id:"systemMenu",prompt:"X - Pet Menu",options:{option0:"0"},actions:{action0:"0"},layout:"vertical",data:e.menuBaseData,cursorObj:o.id,method:"mainMenuClick",pos:new THREE.Vector3(o.pos.x+1,1.5,o.pos.z-1)},o.systemMenu=e.Menu(o.systemMenuData),o.systemMenu.SpawnMenu(),o.systemMenu.AddToParentSpawnTracker(o.systemMenu,o)},mainMenuClick:e=>{let t=e.getAttribute("result");console.log(t)}}};AFRAME.registerSystem("auxl",{schema:{id:{type:"string",default:"#FFFFFF"},color:{type:"string",default:"#FFFFFF"},shortname:{type:"string",default:"#FFFFFF"},longname:{type:"string",default:"#FFFFFF"},server:{type:"string",default:"localhost"},onlineKey:{type:"string",default:"FFFFFF"}},init:function(){const o=this;this.auxl=o,this.expStarted=!1,this.defaultWorld=!1,this.currentWorld=!1,this.currentZone=!1,this.worldLoaded=!1,this.local={},this.local.profile={},this.rebuildObjects=[],this.libraries=[],this.worlds=[],this.volume=1,this.backgroundAudio=!1,this.checkSceneLoadThrottled=AFRAME.utils.throttle(this.checkSceneLoad,30,this),this.sceneReading=!1,this.loadingScene=!1,this.loadingObjects=new Map,this.maxLoadTime=5e3,this.jsLoaded={},this.jsAll={};const h=document.querySelector("a-scene");o.sceneEl=h,document.querySelector("head");const m=document.querySelector("body"),u=document.getElementById("stickyMenu"),y=document.getElementById("stickyTitle"),g=document.getElementById("systemText"),v=document.getElementById("beginDiv"),f=document.getElementById("startButton"),b=document.getElementById("menuModeButton"),E=document.getElementById("audioButton"),w=document.getElementById("audioVolume"),x=document.getElementById("volDownButton"),T=document.getElementById("volume"),C=document.getElementById("volUpButton"),D=document.getElementById("viewInfo"),S=document.getElementById("viewData"),k=document.getElementById("expInfo"),R=document.getElementById("infoClose"),P=document.getElementById("instructions"),I=document.getElementById("dataInfo"),M=document.getElementById("dataClose"),H=document.getElementById("manageData"),L=document.getElementById("resetData"),O=document.getElementById("donateLink"),G=document.getElementById("repoLink"),A=document.getElementById("scenarioHeaderTitle"),z=document.getElementById("scenarioMenuTitle"),V=document.getElementById("fullScreen"),F=document.getElementById("screenFooter"),U=document.getElementById("controllerBlock"),j=document.getElementById("vrHandButton"),B=document.getElementById("vrLocomotionType"),N=document.getElementById("upLeft"),_=document.getElementById("up"),q=document.getElementById("upRight"),W=document.getElementById("left"),J=document.getElementById("center"),Z=document.getElementById("right"),K=document.getElementById("downLeft"),X=document.getElementById("down"),Y=document.getElementById("downRight"),Q=document.getElementById("select"),$=document.getElementById("start"),ee=document.getElementById("a"),te=document.getElementById("b"),oe=document.getElementById("c"),ae=document.getElementById("d"),ie=document.getElementById("main"),ne=document.getElementById("f"),re=document.getElementById("g"),se=document.getElementById("h"),le=document.getElementById("i");let ce=[m,v,f,b,E,D,S,k,R,P,z,I,M,H,L,O,G,V,U,j,B],de=[u,y,A,V,U,N,_,q,W,J,Z,K,X,Y,Q,$,ee,te,oe,ae,ie,ne,re,se,le];this.SystemLoaded=e=>{be(e),o.player.infoText="Player : "+o.local.profile.shortname+"\n",pe(),he()};const pe=()=>{o.map=o.Collision(),console.log({timeSince:this.local.profile.time.span,loadedProfile:o.local})},he=()=>{me(),ue(),ye(this.local.profile.systemText)},me=()=>{for(let e in ce)ce[e].style.setProperty("background-color",this.local.profile.colorScheme.base),ce[e].style.setProperty("color-text",this.local.profile.colorScheme.compl);for(let e in de)de[e].style.setProperty("background-color","transparent"),de[e].style.setProperty("color-text",this.local.profile.colorScheme.compl),de[e].style.setProperty("border-color",this.local.profile.colorScheme.compl);o.player.PlayerColors(this.local.profile.colorScheme.base,this.local.profile.colorScheme.compl)},ue=()=>{g.innerHTML=this.systemText,o.player.UpdateBeltText(this.systemText),o.cameraUI.ChangeSelf({property:"text",value:{value:this.systemText}}),o.vrController1UI.ChangeSelf({property:"text",value:{value:this.systemText}}),o.vrController2UI.ChangeSelf({property:"text",value:{value:this.systemText}}),o.avatarHover.ChangeSelf({property:"text",value:{value:this.systemText}}),o.player.UpdateHoverText(this.local.profile.shortname)},ye=e=>{this.systemText=e,ue()};this.Loaded=e=>{o.libraries.push(e)},this.WorldsLoaded=e=>{o.worlds.push(e)},this.ToBeRebuilt=e=>{o.rebuildObjects.push(e),o.Loaded(e)},this.SceneLoadTimeout=()=>{o.sceneLoadTimeout=setTimeout((()=>{o.loadingObjects=new Map,clearTimeout(o.sceneLoadTimeout)}),o.maxLoadTime)},this.save="auxl"+window.location.pathname;const ge=()=>{this.local={},this.local.profile={},this.local.profile.domain=window.location.hostname,this.local.profile.page=window.location.pathname,this.local.profile.userAgent=window.navigator.userAgent,this.local.profile.controls=this.controls,this.local.profile.vrHand=this.vrHand,this.local.profile.volume=this.volume,this.local.profile.time={},this.local.profile.time.creation=o.Time(),this.local.profile.time.lastVisit=o.Time(),this.local.profile.colorScheme=o.ColorTheoryGen(),this.local.profile.id=this.local.profile.colorScheme.base,this.local.profile.color=this.local.profile.colorScheme.base,this.local.profile.shortname=this.local.profile.colorScheme.base,this.local.profile.longname=this.data.longname,this.local.profile.server=this.data.server,this.local.profile.onlineKey=this.data.onlineKey,this.local.profile.systemText="Welcome "+this.local.profile.shortname,this.systemText=this.local.profile.systemText,this.local.location={},this.local.location.load=!1,this.local.location.world="",this.local.location.scenario="",this.local.location.zone="",this.local.location.scene=""},ve=()=>{console.log("New here. Loading default data."),window.localStorage.clear(),ge(),(()=>{clearTimeout(o.sceneLoadTimeout),o.comp.ClearInventoryNotifications(),o.player.Reset();for(let e in o.rebuildObjects)o[o.rebuildObjects[e]]()})(),window.localStorage.setItem(this.save,JSON.stringify(o.local)),he(),Ce(this.local.profile.vrHand),Te(this.local.profile.controls),De()},fe=()=>{console.log("Welcome Back! ^-^"),this.local=JSON.parse(window.localStorage.getItem(this.save)),he(),this.local.profile.time.return=this.Time(),this.local.profile.time.span=this.TimeDif(this.local.profile.time.lastVisit,this.local.profile.time.return),this.local.profile.time.lastVisit=this.local.profile.time.return,""===this.local.location.world||""===this.local.location.scenario||""===this.local.location.zone||""===this.local.location.scene?this.local.location.load=!1:this.local.location.load=!0,o.SaveToProfile(),Ee(),Ce(this.local.profile.vrHand),Te(this.local.profile.controls),De(),this.volume=this.local.profile.volume},be=e=>{e?ve():localStorage.getItem(this.save)?fe():ve()};this.SaveToProfile=e=>{e&&(o.local[e.auxlObject]?e.sub?(o.local[e.auxlObject][e.type][e.sub]||(o.local[e.auxlObject][e.type][e.sub]={}),o.local[e.auxlObject][e.type][e.sub][e.name]=e.data):o.local[e.auxlObject][e.type][e.name]=e.data:(o.local[e.auxlObject]={},o.local[e.auxlObject][e.type]={},e.sub?(o.local[e.auxlObject][e.type][e.sub]={},o.local[e.auxlObject][e.type][e.sub][e.name]=e.data):o.local[e.auxlObject][e.type][e.name]=e.data)),window.localStorage.setItem(this.save,JSON.stringify(o.local))};const Ee=()=>{for(let e in o.local)if("profile"===e||"location"===e);else for(let t in o.local[e])for(let a in o.local[e][t])o[e]&&(o[e][t][a]=o.local[e][t][a])};function we(){o.vrController1.GetEl().setAttribute("visible",!1),o.vrController2.GetEl().setAttribute("visible",!1),o.vrController1UI.GetEl().setAttribute("visible",!1),o.vrController2UI.GetEl().setAttribute("visible",!1),o.vrController1Cursor.GetEl().setAttribute("visible",!1),o.vrController2Cursor.GetEl().setAttribute("visible",!1),o.vrController1.GetEl().removeAttribute("cursor"),o.vrController2.GetEl().removeAttribute("cursor"),o.vrController1.GetEl().removeAttribute("laser-controls"),o.vrController2.GetEl().removeAttribute("laser-controls")}function xe(){o.controller.swapClick(!0),"bothRight"===o.vrHand?(o.vrController1.GetEl().setAttribute("visible",!0),o.vrController2.GetEl().setAttribute("visible",!0),o.vrController1Cursor.GetEl().setAttribute("visible",!0),o.vrController2Cursor.GetEl().setAttribute("visible",!0),o.vrController1.GetEl().setAttribute("laser-controls",{hand:"left"}),o.vrController2.GetEl().setAttribute("laser-controls",{hand:"right"}),o.vrController1.GetEl().setAttribute("raycaster",{enabled:!1,autoRefresh:!1,objects:".disabled",far:0,near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}),o.vrController2.GetEl().setAttribute("raycaster",{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}),o.vrController2.GetEl().setAttribute("cursor",{fuse:!1,rayOrigin:"vrController2",mouseCursorStylesEnabled:!0}),o.playerRig.GetEl().setAttribute("auxcontroller",{update:Math.random().toFixed(5)}),o.player.EnableVRLocomotion(),o.locomotionText="Left Controller Joystick"):"bothLeft"===o.vrHand?(o.vrController1.GetEl().setAttribute("visible",!0),o.vrController2.GetEl().setAttribute("visible",!0),o.vrController1Cursor.GetEl().setAttribute("visible",!0),o.vrController2Cursor.GetEl().setAttribute("visible",!0),o.vrController1.GetEl().setAttribute("laser-controls",{hand:"left"}),o.vrController2.GetEl().setAttribute("laser-controls",{hand:"right"}),o.vrController1.GetEl().setAttribute("raycaster",{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}),o.vrController2.GetEl().setAttribute("raycaster",{enabled:!1,autoRefresh:!1,objects:".disabled",far:0,near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}),o.vrController1.GetEl().setAttribute("cursor",{fuse:!1,rayOrigin:"vrController1",mouseCursorStylesEnabled:!0}),o.playerRig.GetEl().setAttribute("auxcontroller",{update:Math.random().toFixed(5)}),o.player.EnableVRLocomotion(),o.locomotionText="Right Controller Joystick"):"bothRightLoco"!==o.vrHand&&"bothLeftLoco"!==o.vrHand||(o.vrController1.GetEl().setAttribute("visible",!0),o.vrController2.GetEl().setAttribute("visible",!0),o.vrController1Cursor.GetEl().setAttribute("visible",!0),o.vrController2Cursor.GetEl().setAttribute("visible",!0),o.vrController1.GetEl().setAttribute("laser-controls",{hand:"left"}),o.vrController2.GetEl().setAttribute("laser-controls",{hand:"right"}),o.vrController1.GetEl().setAttribute("raycaster",{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:"false"}),o.vrController2.GetEl().setAttribute("raycaster",{enabled:!0,autoRefresh:!0,objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"#228da7",lineOpacity:.5,showLine:!1,useWorldCoordinates:!1}),o.vrController1.GetEl().setAttribute("cursor",{fuse:!1,rayOrigin:"vrController1",mouseCursorStylesEnabled:!0}),o.vrController2.GetEl().setAttribute("cursor",{fuse:!1,rayOrigin:"vrController2",mouseCursorStylesEnabled:!0}),o.playerRig.GetEl().setAttribute("auxcontroller",{update:Math.random().toFixed(5)}),o.player.EnableVRLocomotion(),"bothLeftLoco"===o.vrHand?o.locomotionText="Left Controller Joystick":"bothRightLoco"===o.vrHand&&(o.locomotionText="Right Controller Joystick"))}function Te(e){"Desktop"===o.controls?(o.mouseController.GetEl().setAttribute("visible",!1),o.mouseController.GetEl().removeAttribute("raycaster"),o.mouseController.GetEl().removeAttribute("cursor")):"Mobile"===o.controls?(o.mouseController.GetEl().setAttribute("visible",!1),o.mouseController.GetEl().removeAttribute("raycaster"),o.mouseController.GetEl().removeAttribute("cursor"),F.style.display="none",U.style.display="none"):"VR"===o.controls&&(j.style.display="none",B.style.display="none",we()),"Desktop"===e?(b.innerHTML="Mode : Desktop",o.controller.swapClick(),o.mouseController.GetEl().setAttribute("visible",!0),o.mouseController.GetEl().setAttribute("raycaster",{enabled:"true",autoRefresh:"true",objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:"false",useWorldCoordinates:"false"}),o.mouseController.GetEl().setAttribute("cursor",{fuse:"false",rayOrigin:"mouseController",mouseCursorStylesEnabled:"true"}),o.playerRig.GetEl().setAttribute("auxcontroller",{update:Math.random().toFixed(5)}),o.player.EnableDesktopLocomotion(),o.locomotionText="WASD Keys"):"Mobile"===e?(b.innerHTML="Mode : Mobile",o.controller.swapClick(),o.mouseController.GetEl().setAttribute("visible",!0),o.mouseController.GetEl().setAttribute("raycaster",{enabled:"true",autoRefresh:"true",objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:"false",useWorldCoordinates:"false"}),o.mouseController.GetEl().setAttribute("cursor",{fuse:"false",rayOrigin:"mouseController",mouseCursorStylesEnabled:"true"}),F.style.display="flex",U.style.display="flex",o.playerRig.GetEl().setAttribute("auxcontroller",{update:Math.random().toFixed(5)}),o.player.EnableMobileLocomotion(),o.locomotionText="Arrow Buttons"):"VR"===e&&(b.innerHTML="Mode : VR",j.style.display="flex",B.style.display="flex",xe()),o.controls=e,De()}function Ce(e){"bothRight"===e?j.innerHTML="2 Hands : Right Ray | Left Move":"bothLeft"===e?j.innerHTML="2 Hands : Left Ray | Right Move":"bothLeftLoco"===e?j.innerHTML="2 Hands : Dual Ray | Left Move":"bothRightLoco"===e&&(j.innerHTML="2 Hands : Dual Ray | Right Move"),o.vrHand=e}function De(){o.UpdateControlText(),o.local.profile.controls=o.controls,o.local.profile.vrHand=o.vrHand,o.SaveToProfile()}function Se(){o.infoOpen?(k.style.display="none",o.infoOpen=!1):(k.style.display="flex",o.infoOpen=!0)}function ke(){o.dataOpen?(I.style.display="none",o.dataOpen=!1):(I.style.display="flex",o.dataOpen=!0)}this.Time=()=>{let e={};return e.time=new Date,e.year=e.time.getFullYear(),e.month=e.time.getMonth(),e.date=e.time.getDate(),e.day=e.time.getDay(),e.hour=e.time.getHours(),e.minute=e.time.getMinutes(),e.second=e.time.getSeconds(),e.ms=e.time.getTime(),e},this.TimeDif=(e,t)=>{let o={},a={};function i(e){let t={};return t.ms=e,t.seconds=Math.floor(t.ms/1e3),t.minutes=Math.floor(t.seconds/60),t.hours=Math.floor(t.minutes/60),t.days=Math.floor(t.hours/24),t.months=Math.floor(t.days/(365/12)),t.years=Math.floor(t.months/12),t}a.total=t.ms-e.ms;let n=t.ms-e.ms;return o=i(n),n-=315576e5*o.years,a.years=o.years,o=i(n),n-=26298e5*o.months,a.months=o.months,o=i(n),n-=864e5*o.days,a.days=o.days,o=i(n),n-=36e5*o.hours,a.hours=o.hours,o=i(n),n-=6e4*o.minutes,a.minutes=o.minutes,o=i(n),n-=1e3*o.seconds,a.seconds=o.seconds,o=i(n),n-=1*o.ms,a.ms=o.ms,o=i(n),a},this.universalControls,this.controls="Desktop",this.vrHand="bothLeftLoco",this.vrHandPrevious=!1,this.directionType="camera",this.locomotionText="WASD Keys",this.joystickLoco=8,this.controlsInfo={},this.controlsText="",this.menuOpen=!0,this.infoOpen=!1,this.dataOpen=!1,this.audioEnabled=!1,this.mobilePermissionGranted=!1,this.spawned={},this.scenarioSpawned={},this.zoneSpawned={},this.nodeSpawned={},this.bookSpawned={},this.spawnedWaitingForJS={},this.objGenTracking={core:{type:"core",spawn:"SpawnCore",despawn:"DespawnCore",altSpawn:"SpawnCoreOnGrid"},layer:{type:"layer",spawn:"SpawnLayer",despawn:"DespawnLayer",altSpawn:"SpawnLayerOnGrid"},menu:{type:"menu",spawn:"SpawnMenu",despawn:"DespawnMenu"},multiMenu:{type:"multiMenu",spawn:"SpawnMultiMenu",despawn:"DespawnMultiMenu"},singleGen:{type:"singleGen",spawn:"SpawnObjRing",despawn:"DespawnObjRing"},multiGen:{type:"multiGen",spawn:"SpawnMultiAsset",despawn:"DespawnMultiAsset"},comp:{type:"comp",spawn:"SpawnComp",despawn:"DespawnComp"},teleport:{type:"teleport",spawn:"SpawnTeleport",despawn:"DespawnTeleport"},npc:{type:"npc",spawn:"SpawnNPC",despawn:"DespawnNPC"},speechSystem:{type:"speechSystem",spawn:"SpawnSpeech",despawn:"DespawnSpeech"},book:{type:"book",spawn:"SpawnBook",despawn:"DespawnBook"},horizon:{type:"horizon",spawn:"SpawnHorizon",despawn:"DespawnHorizon"},skyBox:{type:"skyBox",spawn:"SpawnSkyBox",despawn:"DespawnSkyBox"},gridLayout:{type:"gridLayout",spawn:"SpawnGridLayout",despawn:"DespawnGridLayout"},gate:{type:"gate",spawn:"SpawnGate",despawn:"DespawnGate"},imageSwapper:{type:"imageSwapper",spawn:"SpawnImgSwap",despawn:"DespawnImgSwap"},imageCarousel:{type:"imageCarousel",spawn:"SpawnImgCarousel",despawn:"DespawnImgCarousel"},comboLock:{type:"comboLock",spawn:"SpawnComboLock",despawn:"DespawnComboLock"},card:{type:"card",spawn:"SpawnCard",despawn:"DespawnCard"}},this.AddObjGenToTracker=(e,t,a,i)=>{o.objGenTracking[e]={},o.objGenTracking[e].type=e,o.objGenTracking[e].spawn=t,o.objGenTracking[e].altSpawn=t,o.objGenTracking[e].despawn=a},this.SpawnTracker=(e,t,a)=>{let i,n,r;if(i="scenario"===t?"scenarioSpawned":"zone"===t?"zoneSpawned":"node"===t?"nodeSpawned":"book"===t?"bookSpawned":"nodeSpawned",o[e]){for(let t in o.objGenTracking)if(o[e][o.objGenTracking[t].spawn]||o[e][o.objGenTracking[t].altSpawn]){n=o.objGenTracking[t].type,r=o[e][n].id;break}n||console.log("Tracker type error")}"book"===t?(o[i][a]||(o[i][a]={}),o[i][a][r]={type:n,obj:e}):o[i][r]={type:n,obj:e}},this.ClearSpawned=e=>{for(let t in e)o[t]?o[t][o.objGenTracking[e[t].type].despawn]():e[t].parent?e[t].parent[t][o.objGenTracking[e[t].type].despawn]():o[t].obj[o.objGenTracking[e[t].type].despawn](),delete e[t]},this.RemoveFromTracker=(e,t)=>{o.scenarioSpawned[e]?delete o.scenarioSpawned[e]:o.zoneSpawned[e]?delete o.zoneSpawned[e]:o.nodeSpawned[e]?delete o.nodeSpawned[e]:o.bookSpawned[t]&&delete o.bookSpawned[t][e]},this.ExistsInTracker=(e,t)=>{let a=t||!1;return!!o.scenarioSpawned[e]||!!o.zoneSpawned[e]||!!o.nodeSpawned[e]||!!a&&!!o.bookSpawned[a][e]&&void delete o.bookSpawned[a][e]},this.running={},this.zoneRunning={},this.scenarioRunning={},this.timeouts={},this.intervals={},this.interactions={},this.events={},this.timeInDay=36e4,this.TimeInDayUpdate=()=>{},this.physics=!1,this.worldPhysics=!1,this.physicsDebug=!1,this.EnablePhysics=e=>{let t=!0;if("cannon"===o.worldPhysics?o.sceneEl.setAttribute("physics",{driver:"local",debug:o.physicsDebug,debugDrawMode:1,gravity:"-9.8"}):"ammo"===o.worldPhysics?o.sceneEl.setAttribute("physics",{driver:"ammo",debug:o.physicsDebug,debugDrawMode:1,gravity:"-9.8"}):(t=!1,console.log({msg:"Failed to recognize physics engine",engine:o.worldPhysics,auxl:o})),t){o.sceneEl.systems.physics.init();let t=setTimeout((()=>{o.physics=o.el.systems.physics,"cannon"===o.worldPhysics?o.physWorld=o.el.systems.physics.driver.world:"ammo"===o.worldPhysics&&(o.physWorld=o.el.systems.physics.data),o.player.EnablePhysics(e),clearTimeout(t)}),0)}},this.DisablePhysics=()=>{o.player.DisablePhysics(),o.sceneEl.removeAttribute("physics"),o.worldPhysics=!1,o.physics=!1,o.physWorld=!1},this.collisionMap=[[],[]],this.triggerMap=[[],[]],this.mapEdge=!1,this.ToggleHTMLMenu=()=>{o.menuOpen?(v.style.display="none",o.menuOpen=!1,o.infoOpen&&Se(),o.backgroundAudio&&!o.playerAudio.core.inScene&&o.playerAudio.SpawnCore(o.playerRig)):(v.style.display="flex",o.menuOpen=!0)},u.addEventListener("click",o.ToggleHTMLMenu),f.addEventListener("click",(function(){o.worldLoaded||(""===o.local.location.world?o.defaultWorld.StartWorld():o[o.local.location.world].StartWorld(),f.innerHTML="Resume",De(),o.worldLoaded=!0),o.ToggleHTMLMenu()})),this.PointerLockToggle=()=>{let e=o.camera.GetEl().getAttribute("look-controls").pointerLockEnabled;o.camera.ChangeSelf({property:"look-controls",value:{pointerLockEnabled:!e}})},this.UpdateControlText=()=>{o.controlsText="Control Configuration : "+o.controls+" mode\n",o.controlsText+="Movement | "+o.locomotionText+"\n";let e="";for(let t in o.controlsInfo)"altDown"===t?"Desktop"===o.controls?e="Mouse Right Click Down":"Mobile"===o.controls?e="Middle Directional Button Down":"VR"===o.controls&&(e="Grip Down"):"altUp"===t?"Desktop"===o.controls?e="Mouse Right Click up":"Mobile"===o.controls?e="Middle Directional Button up":"VR"===o.controls&&(e="Grip up"):"action1Down"===t?"Desktop"===o.controls?e=o.controlConfig.action1Keys[1]+" down":"Mobile"===o.controls?e="A down":"VR"===o.controls&&(e="X down"):"action1Up"===t?"Desktop"===o.controls?e=o.controlConfig.action1Keys[1]+" up":"Mobile"===o.controls?e="A up":"VR"===o.controls&&(e="X up"):"action2Down"===t?"Desktop"===o.controls?e=o.controlConfig.action2Keys[1]+" down":"Mobile"===o.controls?e="B down":"VR"===o.controls&&(e="Y down"):"action2Up"===t?"Desktop"===o.controls?e=o.controlConfig.action2Keys[1]+" up":"Mobile"===o.controls?e="B up":"VR"===o.controls&&(e="Y up"):"action3Down"===t?"Desktop"===o.controls?e=o.controlConfig.action3Keys[1]+" down":"Mobile"===o.controls?e="C down":"VR"===o.controls&&(e="A down"):"action3Up"===t?"Desktop"===o.controls?e=o.controlConfig.action3Keys[1]+" up":"Mobile"===o.controls?e="C up":"VR"===o.controls&&(e="A up"):"action4Down"===t?"Desktop"===o.controls?e=o.controlConfig.action4Keys[1]+" down":"Mobile"===o.controls?e="D down":"VR"===o.controls&&(e="B down"):"action4Up"===t?"Desktop"===o.controls?e=o.controlConfig.action4Keys[1]+" up":"Mobile"===o.controls?e="D up":"VR"===o.controls&&(e="B up"):"action5Down"===t?"Desktop"===o.controls?e=o.controlConfig.action5Keys[1]+" down":"Mobile"===o.controls?e="F down":"VR"===o.controls&&(e="Action Joystick down"):"action5Up"===t?"Desktop"===o.controls?e=o.controlConfig.action5Keys[1]+" up":"Mobile"===o.controls?e="F up":"VR"===o.controls&&(e="Action Joystick reset"):"action6Down"===t?"Desktop"===o.controls?e=o.controlConfig.action6Keys[1]+" down":"Mobile"===o.controls?e="G down":"VR"===o.controls&&(e="Action Joystick up"):"action6Up"===t?"Desktop"===o.controls?e=o.controlConfig.action6Keys[1]+" up":"Mobile"===o.controls?e="G up":"VR"===o.controls&&(e="Action Joystick reset"):"action7Down"===t?"Desktop"===o.controls?e=o.controlConfig.action7Keys[1]+" down":"Mobile"===o.controls?e="H down":"VR"===o.controls&&(e="Action Joystick left"):"action7Up"===t?"Desktop"===o.controls?e=o.controlConfig.action7Keys[1]+" up":"Mobile"===o.controls?e="H up":"VR"===o.controls&&(e="Action Joystick reset"):"action8Down"===t?"Desktop"===o.controls?e=o.controlConfig.action8Keys[1]+" down":"Mobile"===o.controls?e="I down":"VR"===o.controls&&(e="Action Joystick right"):"action8Up"===t?"Desktop"===o.controls?e=o.controlConfig.action8Keys[1]+" up":"Mobile"===o.controls?e="I up":"VR"===o.controls&&(e="Action Joystick reset"):console.log("Failed to identify action"),"  down"===e?e="Spacebar down":"  up"===e&&(e="Spacebar up"),o.controlsText+="| "+e+" | "+o.controlsInfo[t].name+" : "+o.controlsInfo[t].info+"\n";o.controlsText+="Click to Close Window"},b.addEventListener("click",(function(){"Desktop"===o.controls?Te("VR"):"VR"===o.controls?Te("Mobile"):"Mobile"===o.controls&&Te("Desktop"),De()})),j.addEventListener("click",(function(){we(),o.vrHandPrevious=o.vrHand,"bothRight"===o.vrHand?Ce("bothLeft"):"bothLeft"===o.vrHand?Ce("bothLeftLoco"):"bothLeftLoco"===o.vrHand?Ce("bothRightLoco"):"bothRightLoco"===o.vrHand&&Ce("bothRight"),De(),xe()})),B.addEventListener("click",(function(){"camera"===o.directionType?(o.directionType="controller",B.innerHTML="Direction : Controller"):(o.directionType="camera",B.innerHTML="Direction : Camera"),De()})),E.addEventListener("click",(function(){o.audioEnabled?(o.audioEnabled=!1,w.style.display="none",E.innerHTML="Sound : Disabled",function(){for(let e in o.playerAudioData.sounds)o.playerAudio.removeComponent("auxlsound__"+e)}()):(o.audioEnabled=!0,E.innerHTML="Sound : Enabled",w.style.display="flex",T.innerHTML=o.volume.toFixed(1),function(){let e;for(let t in o.playerAudioData.sounds)e=JSON.parse(JSON.stringify(o.playerAudioData.sounds[t])),e.volume||(e.volume=1),e.volume*=o.volume,o.playerAudio.ChangeSelf({property:"auxlsound__"+t,value:o.playerAudioData.sounds[t]})}())})),C.addEventListener("click",(function(){o.volume+=.1,o.volume>2&&(o.volume=2),T.innerHTML=o.volume.toFixed(1),o.local.profile.volume=o.volume,o.SaveToProfile(),o.playerAudio.core.inScene&&o.playerAudio.DespawnCore()})),x.addEventListener("click",(function(){o.volume-=.1,o.volume<0&&(o.volume=0),T.innerHTML=o.volume.toFixed(1),o.local.profile.volume=o.volume,o.SaveToProfile(),o.playerAudio.core.inScene&&o.playerAudio.DespawnCore()})),this.ToggleBackgroundAudio=e=>{o.backgroundAudio=!o.backgroundAudio,o.backgroundAudio?o.IsFalsey(e)?["entranceZone","xrcadeZone"].includes(o.currentZone)?o.currentWorld.MusicPlaylist("town3"):o.currentWorld.MusicPlaylist("spookymusic1"):o.currentWorld.MusicPlaylist(e):o.currentWorld.MusicPlaylist(!1)},D.addEventListener("click",Se),R.addEventListener("click",Se),S.addEventListener("click",ke),M.addEventListener("click",ke),L.addEventListener("click",(function(){o.comp.inScene&&o.comp.DespawnComp();let e=setTimeout((function(){o.worldLoaded&&(o.currentWorld.StopWorld(),f.innerHTML="Restart",o.worldLoaded=!1),o.SystemLoaded(!0),ke(),clearTimeout(e)}),750)})),this.ToggleHTML=(e,t,o)=>{document.getElementById(e).style.display=t?o||"block":"none"},this.Test=e=>{console.log(e)},this.CloneDom=(e,t)=>{let a=e.CloneNode(t);for(;o.CheckDupeName(a.id);)a.id=o.RanNameGen(8,a.id);return a},this.ConvertHTMLScene=()=>({}),this.IsFalsey=e=>null==e||!1===e||NaN===e||""===e||"false"===e||"False"===e||"FALSE"===e,this.OpenLink=(e,t)=>{let o=!1;t&&(o="_blank"),open(e,o)},this.FindInScene=e=>{if(o.IsFalsey(e))return!1;let t=e;return t.core?t=!!t.core.inScene&&t.GetEl():t.layer?t=!!t.layer.inScene&&t.GetParentEl():t.id||"string"==typeof t&&(t=!!document.getElementById(t)&&document.getElementById(t)),t},this.Attach=(e,t)=>{let a=o.FindInScene(e),i=o.FindInScene(t);a&&i?i.appendChild(a):console.log("Failed to find Child or Parent")},this.Detach=e=>{let t=o.FindInScene(e);t?o.sceneEl.appendChild(t):console.log("Failed to find Child")},this.RandomOfArray=e=>e[Math.floor(Math.random()*e.length)],this.ShallowOmit=(e,...t)=>{let o={...e};return t.forEach((e=>{const{[e]:t,...a}=o;o={...a}})),o},this.ColorTheoryGen=(e,t)=>{let o,a,i,n,r,s,l,c,d=!1;const p=["red","orange","yellow","lime","blue","cyan","magenta","maroon","olive","green","purple","teal","navy","silver","grey","black","white"];function h(e,t,o){let a=(1-Math.abs(2*o-1))*t,i=a*(1-Math.abs(e/60%2-1)),n=o-a/2,r=0,s=0,l=0;return 0<=e&&e<60?(r=a,s=i,l=0):60<=e&&e<120?(r=i,s=a,l=0):120<=e&&e<180?(r=0,s=a,l=i):180<=e&&e<240?(r=0,s=i,l=a):240<=e&&e<300?(r=i,s=0,l=a):300<=e&&e<360&&(r=a,s=0,l=i),r=Math.round(255*(r+n)),s=Math.round(255*(s+n)),l=Math.round(255*(l+n)),{r,g:s,b:l}}function m(e,t,o){return e=e.toString(16),t=t.toString(16),o=o.toString(16),1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==o.length&&(o="0"+o),"#"+e+t+o}function u(){return p[Math.floor(Math.random()*(p.length-4))]}if(e&&("#"===e[0]&&4===e.length||"#"===e[0]&&7===e.length||(e=!1)),t){for(let e in p)if(t===p[e]){d=!0;break}d||(t=u())}e?(l=e,c=function(e){let t=0,o=0,a=0;return 4==e.length?(t="0x"+e[1]+e[1],o="0x"+e[2]+e[2],a="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],o="0x"+e[3]+e[4],a="0x"+e[5]+e[6]),{r:t,g:o,b:a}}(l),o=c.r,a=o/255,i=c.g,n=i/255,r=c.b,s=r/255):(t||(t=u()),"red"===t?(o=Math.floor(55*Math.random())+200,i=r=0):"orange"===t?(o=Math.floor(105*Math.random())+150,i=Math.floor(.65*o),r=0):"yellow"===t?(o=i=Math.floor(55*Math.random())+200,r=0):"lime"===t?(i=Math.floor(55*Math.random())+200,o=r=0):"blue"===t?(r=Math.floor(55*Math.random())+200,o=i=0):"cyan"===t?(i=r=Math.floor(55*Math.random())+200,o=0):"magenta"===t?(o=r=Math.floor(55*Math.random())+200,i=0):"maroon"===t?(o=Math.floor(28*Math.random())+100,r=i=0):"olive"===t?(o=i=Math.floor(28*Math.random())+100,r=0):"green"===t?(i=Math.floor(28*Math.random())+100,o=r=0):"purple"===t?(o=r=Math.floor(28*Math.random())+100,i=0):"teal"===t?(i=r=Math.floor(28*Math.random())+100,o=0):"navy"===t?(r=Math.floor(28*Math.random())+100,o=i=0):"black"===t?o=i=r=Math.floor(42*Math.random()):"white"===t?o=i=r=Math.floor(35*Math.random())+220:"silver"===t?o=i=r=Math.floor(42*Math.random())+170:"grey"===t&&(o=i=r=Math.floor(28*Math.random())+100),a=o/255,n=i/255,s=r/255,l=m(o,i,r));let y,g,v=Math.max(a,n,s),f=Math.min(a,n,s),b=.5*(v+f);v===a?y=f===n?6*(s-n)/(a-n)*60:(n-s)/(a-s)*60:v===n?y=f===s?60*(2-(a-s)/(n-s)):60*(2+(s-a)/(n-a)):v===s&&(y=f===a?60*(4-(n-a)/(s-a)):60*(4+(a-n)/(s-n))),g=1===b?0:(v-f)/(1-(2*b-1));let E=h(Math.abs(y+180-360),g,b),w=m(E.r,E.g,E.b),x=[h(Math.abs(y+150-360),g,b),h(Math.abs(y+210-360),g,b)],T=[m(x[0].r,x[0].g,x[0].b),m(x[1].r,x[1].g,x[1].b)],C=[h(Math.abs(y+120-360),g,b),h(Math.abs(y+240-360),g,b)],D=[m(C[0].r,C[0].g,C[0].b),m(C[1].r,C[1].g,C[1].b)],S=[h(Math.abs(y+90-360),g,b),h(Math.abs(y+180-360),g,b),h(Math.abs(y+270-360),g,b)],k=[m(S[0].r,S[0].g,S[0].b),m(S[1].r,S[1].g,S[1].b),m(S[2].r,S[2].g,S[2].b)],R=[h(Math.abs((y+30)%360),g,b),h(Math.abs((y+60)%360),g,b),h(Math.abs((y+90)%360),g,b)],P=[m(R[0].r,R[0].g,R[0].b),m(R[1].r,R[1].g,R[1].b),m(R[2].r,R[2].g,R[2].b)],I=[];const M=.42;let H=Math.floor(o+(255-o)*M,255),L=Math.floor(i+(255-i)*M,255),O=Math.floor(r+(255-r)*M,255);H=isNaN(H)?255:H,L=isNaN(L)?255:L,O=isNaN(O)?255:O;let G=m(H,L,O);I.push(G);let A=m(Math.round(o*(1-M)),Math.round(i*(1-M)),Math.round(r*(1-M)));return I.push(A),{base:l,light:G,dark:A,compl:w,splitCompl:T,triadic:D,tetradic:k,analog:P,mono:I}},this.CheckDupeName=e=>{let t=e,a=-1;for(;;){if(!o[t])return e===t||console.log(e+" changed to "+t),t;a++,t=e+"Copy"+a}},this.RanNameGen=(e,t)=>{let a="",i=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=n=e?Math.floor(Math.random()*e):Math.floor(12*Math.random())+4;for(let e=0;e<n;e++)a+=o.RandomOfArray(i);return a=t?t+a:a,a},this.Pronoun=e=>{let t={};"male"===e?(t.sex="male",t.sexe="man",t.sexes="men"):"female"===e?(t.sex="female",t.sexe="woman",t.sexes="women"):"other"===e&&(t.sex="person",t.sexe="person",t.sexes="people")},this.ObjGenType=e=>"string"==typeof e?Object.keys(o[e])[0]:Object.keys(e)[0],this.Distance=(e,t,o,a)=>Math.sqrt(Math.pow(o-e,2)+1*Math.pow(a-t,2)),this.RandomPosition=(e,t)=>{let o=Math.random()*(2*e)-e,a=t||Math.random()*(2*e)-e,i=Math.random()*(2*e)-e;return new THREE.Vector3(o,a,i)},this.MatrixAxisRot=(e,t,o)=>{let a=new THREE.Matrix4,i=0;switch(o){case 0:i=0;break;case 30:i=Math.PI/6;break;case 45:i=Math.PI/4;break;case 60:i=Math.PI/3;break;case 90:i=Math.PI/2;break;case 120:i=2*Math.PI/3;break;case 135:i=3*Math.PI/4;break;case 150:i=5*Math.PI/6;break;case 180:default:i=Math.PI;break;case 210:i=7*Math.PI/6;break;case 225:i=5*Math.PI/4;break;case 240:i=4*Math.PI/3;break;case 270:i=3*Math.PI/2;break;case 300:i=5*Math.PI/3;break;case 315:i=7*Math.PI/4;break;case 330:i=11*Math.PI/6;break;case 360:i=2*Math.PI}return"x"===t?a.makeRotationX(i):"y"===t?a.makeRotationY(i):"z"===t&&a.makeRotationZ(i),(new THREE.Vector3).copy(e).applyMatrix4(a)},this.Core=t=>e(o,t),this.CoreDataFromTemplate=(e,t,a)=>((e,t,o,a)=>{let i=e.ShallowOmit(t,"el","parent");if(i=JSON.parse(JSON.stringify(i)),o)for(let e in o)i[e]=o[e];if(a||(o.id||(i.id=e.RanNameGen()),i.id=e.CheckDupeName(i.id)),a)return i;e[i.id]=i})(o,e,t,a),this.CoreFromTemplate=(e,t,a)=>((e,t,o,a)=>{a||(o?o.id||(o.id=e.RanNameGen()):(o={}).id=e.RanNameGen(),o.id=e.CheckDupeName(o.id));let i=e.CoreDataFromTemplate(t.core,o,!0);if(a)return e.Core(i);e[i.id]=e.Core(i)})(o,e,t,a),this.Layer=(e,t,a)=>((e,t,o,a)=>{let i={id:t};if(i.config=o.config||!1,i.all=e.ShallowOmit(o,"config"),i.inScene=!1,i.allNames=[],i.children={},i.tempParents=[],i.parent=!1,i.gridSpawned=!1,i.gridPath=[],i.pathSpeed=1e3,i.pathWait=1e3,i.pathRoute="any",i.pathLoop="infinite",i.pathType="jump",i.currentPath=-1,i.gridPathInterval,i.gridPathTimeout,i.config)for(let e in i.config)i[e]=i.config[e];if(a)for(let e in a)i[e]=a[e];let n=[];const r=e=>{if(i.parent=e||!1,e&&(e.core?e.core.inScene?i.parent=e.GetEl():i.parent=!1:e.layer?e.layer.inScene?i.parent=e.GetParentEl():i.parent=!1:e.id?i.parent=e:"string"==typeof e&&(document.getElementById(e)?i.parent=document.getElementById(e):i.parent=!1),i.parent||(console.log(t),console.log(e),console.log(document.getElementById(e)),console.log("Parent is not in scene!"))),i.inScene);else{let o=i.parent;function a(e,t,r){o=e||!1,t.parent&&(i.tempParents[r]=t.parent.core.core.id);for(let e in t)t.hasOwnProperty(e)&&("core"===e?(n.length===r&&n.push([]),n[r].push(t[e]),i.allNames.push(t[e].core.id),t[e].core.id===i.all.parent.core.core.id||t[e].core.id===o||t[e].core.id===i.tempParents[r]||t[e].core.id===i.tempParents[r-1]||(i.children[t[e].core.id]={obj:t[e],parent:o},t[e].SpawnCore(o))):"parent"===e&&t[e].hasOwnProperty("core")?(n.length===r&&n.push([]),n[r].push(t[e].core),o=t[e].core.core.id===i.all.parent.core.core.id?i.parent:t[e].core.core.id===o||t[e].core.core.id===i.tempParents[r]?i.tempParents[r-1]:i.tempParents[r],i.children[t[e].core.id]={obj:t[e],parent:o},t[e].core.SpawnCore(o),a(o,t[e],r+1)):"object"==typeof t[e]&&(o=t[e].parent?t[e].parent:i.tempParents[r],a(o,t[e],r+1)))}a(i.parent,i.all,0),i.inScene=!0}},s=()=>{if(i.inScene){clearTimeout(i.gridPathTimeout),clearInterval(i.gridPathInterval),i.gridSpawned&&(i.grid.collide?e.map.UpdateMapArea(i.id,i.grid.start,i.grid.end,!1):i.grid.trigger&&e.map.UpdateMapAreaTrigger(i.id,i.grid.start,i.grid.end,!1));let t,o=[...n];o.reverse();for(let e of o){t=[...e],t.reverse();for(let e of t)e.DespawnCore()}e.ExistsInTracker(i.id)&&e.RemoveFromTracker(i.id),i.inScene=!1}};function l(e){let t=new THREE.Vector3(0,0,0);if(e.start.x===e.end.x&&e.start.z===e.end.z)t.x=e.start.x,t.z=e.start.z;else{let o=-1*(e.start.x-e.end.x),a=-1*(e.start.z-e.end.z);o/=2,a/=2,t.x=e.start.x+o,t.z=e.start.z+a}return t.y=e.start.y,t}const c=(t,o)=>{let a={start:{},end:{}};a.start.x=i.grid.start.x,a.start.y=i.grid.start.y,a.start.z=i.grid.start.z,a.end.x=i.grid.end.x,a.end.y=i.grid.end.y,a.end.z=i.grid.end.z,t.x&&(a.start.x+=t.x,a.end.x+=t.x),t.y&&(a.start.y+=t.y,a.end.y+=t.y),t.z&&(a.start.z+=t.z,a.end.z+=t.z);let n=l(a);return n.y=i.all.parent.core.core.position.y+n.y,i.grid.collide?!!e.map.CheckMapAreaSansArea(i.grid,a,i.grid.height)&&(e.map.UpdateMapArea(i.id,i.grid.start,i.grid.end,!1),e.map.UpdateMapArea(i.id,a.start,a.end,!0),"anim"===i.pathType?t.x?p("animstartx"+n.x):t.y?p("animstarty"+n.y):t.z&&p("animstartz"+n.z):"jump"===i.pathType&&h({property:"position",value:n}),i.grid.start.x=a.start.x,i.grid.start.y=a.start.y,i.grid.start.z=a.start.z,i.grid.end.x=a.end.x,i.grid.end.y=a.end.y,i.grid.end.z=a.end.z,!0):i.grid.trigger?(e.map.UpdateMapAreaTrigger(i.id,i.grid.start,i.grid.end,!1),e.map.UpdateMapAreaTrigger(i.id,a.start,a.end,!0),"anim"===i.pathType?t.x?p("animstartx"+n.x):t.y?p("animstarty"+n.y):t.z&&p("animstartz"+n.z):"jump"===i.pathType&&h({property:"position",value:n}),i.grid.start.x=a.start.x,i.grid.start.y=a.start.y,i.grid.start.z=a.start.z,i.grid.end.x=a.end.x,i.grid.end.y=a.end.y,i.grid.end.z=a.end.z,!0):void 0},d=(e,t)=>{let o=u(e);if(o)return o.GetEl(t)},p=e=>{if(Array.isArray(e))for(let t in e)i.all.parent.core.EmitEvent(e[t]);else i.all.parent.core.EmitEvent(e)},h=(e,t)=>{if(Array.isArray(e))for(let o in e)i.all.parent.core.ChangeSelf(e[o],t);else i.all.parent.core.ChangeSelf(e,t)},m=e=>{if(Array.isArray(e))for(let t in e)i.all.parent.core.Animate(e[t]);else i.all.parent.core.Animate(e)},u=e=>{let t=[];return function o(a,i){for(let n in a)if(a.hasOwnProperty(n))if("core"===n){if(a[n].core.id===e)return void t.push(a[n])}else if("parent"===n&&a[n].hasOwnProperty("core")){if(a[n].core.core.id===e)return void t.push(a[n].core)}else"object"==typeof a[n]&&o(a[n],i+1)}(i.all,0),t[0]?t[0]:(console.log("Unable to find child"),console.log(e),!1)};return{layer:i,SpawnLayer:r,DespawnLayer:s,ToggleSpawn:e=>{let t=e||!1;t&&(i.parent=t),i.inScene?s():r(i.parent)},SpawnLayerOnGrid:t=>{if(i.inScene);else{t&&(i.grid=t),i.grid.start.y||(i.grid.start.y=0),i.grid.end.y||(i.grid.end.y=0),i.grid.yOffset||(i.grid.yOffset=0),i.grid.height=Math.abs(i.grid.start.y)+Math.abs(i.grid.end.y)+1;let o=e.player.GetPlayerInfo().grid;if(i.grid.start.x<=o.x&&i.grid.end.x>=o.x&&i.grid.start.y<=o.y&&i.grid.end.y>=o.y&&i.grid.start.z<=o.z&&i.grid.end.z>=o.z)e.map.WaitToSpawn({name:i.id,func:"SpawnLayerOnGrid"});else{let t=l(i.grid);i.all.parent.core.core.position.x=t.x,i.all.parent.core.core.position.y=i.grid.yOffset+t.y,i.all.parent.core.core.position.z=t.z,r(),i.grid.collide?e.map.UpdateMapArea(i.id,i.grid.start,i.grid.end,i.grid.collide):i.grid.trigger&&e.map.UpdateMapAreaTrigger(i.id,i.grid.start,i.grid.end,i.grid.trigger),i.gridSpawned=!0}}},ToggleLayerGridSpawn:e=>{i.inScene?DespawnFromGrid():SpawnOnGrid(e)},GridMove:c,GridPath:e=>{i.pathSpeed=e.speed||1e3,i.pathWait=e.wait||1e3,i.pathPatience=e.patience||3,i.pathRoute=e.route||"any",i.pathLoop=e.loop||"infinite",i.pathType=e.type||"jump";let t=l(i.grid);i.all.parent.core.core.position.x=t.x,t.y&&(i.all.parent.core.core.position.y=i.all.parent.core.core.position.y+t.y),i.all.parent.core.core.position.z=t.z;let o,a,n=.5;for(let t in e.path){let o=1;for(let a in e.path[t]){n=e.path[t][a]>0?.5:-.5,o="y"===a?Math.abs(e.path[t][a]):Math.abs(e.path[t][a])/.5;for(let e=0;e<o;e++)i.gridPath.push({[a]:n})}}let r=i.all.parent.core.core.position.x,s=i.all.parent.core.core.position.y,c=i.all.parent.core.core.position.z;if("anim"===i.pathType)for(let e in i.gridPath){let t={name:"animmove",property:"object3D.position.x",to:0,dur:i.pathSpeed,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"moveXStart",pauseEvents:"moveXStop"};o=Object.keys(i.gridPath[e])[0],a=i.gridPath[e][o],t.property="object3D.position."+o,"x"===o?(t.to=r+=a,t.name="animmove"+o+r,t.startEvents="animstart"+o+r,t.pauseEvents="animstop"+o+r):"y"===o?(t.to=s+=a,t.name="animmove"+o+s,t.startEvents="animstart"+o+s,t.pauseEvents="animstop"+o+s):"z"===o&&(t.to=c+=a,t.name="animmove"+o+c,t.startEvents="animstart"+o+c,t.pauseEvents="animstop"+o+c),i.inScene?m(t):(0===Object.keys(i.all.parent.core.core.animations).length&&(i.all.parent.core.core.animations={}),delete t.name,i.all.parent.core.core.animations["move"+e]=t)}},WalkPath:()=>{let e=!0,t=!1,o=!0,a=!1,n=!0,r=!1,s=0,l=!1,d=0;function p(){l=!l}function h(){i.currentPath=0}function m(){i.currentPath=i.gridPath.length-1}"any"===i.pathRoute&&100*Math.random()>50&&(l=!0),i.gridPathInterval=setInterval((()=>{e&&o&&n&&(("circuit"===i.pathRoute||"alternate"===i.pathRoute||"any"===i.pathRoute)&&(l?(i.currentPath--,i.currentPath<0&&("infinite"===i.pathLoop||(s>=i.pathLoop?clearInterval(i.gridPathInterval):s++),"circuit"===i.pathRoute?l&&(h(),p()):"alternate"===i.pathRoute?(h(),p()):"any"===i.pathRoute&&(100*Math.random()>50?(h(),p()):m()))):(i.currentPath++,i.currentPath>=i.gridPath.length&&("infinite"===i.pathLoop||(s>=i.pathLoop?clearInterval(i.gridPathInterval):s++),"circuit"===i.pathRoute?h():"alternate"===i.pathRoute?(m(),p()):"any"===i.pathRoute&&(100*Math.random()>50?h():(m(),p()))))),e=!1,o=!1,n=!1,t=!!i.gridPath[i.currentPath].x,a=!!i.gridPath[i.currentPath].y,r=!!i.gridPath[i.currentPath].z),t?(e=c(l?{x:-1*i.gridPath[i.currentPath].x}:{x:i.gridPath[i.currentPath].x}),e?(t=!1,d=0,a||(o=!0),r||(n=!0)):(d++,d>=i.pathPatience&&(e=!0,o=!0,n=!0,p()))):a?(o=c(l?{y:-1*i.gridPath[i.currentPath].y}:{y:i.gridPath[i.currentPath].y}),o?(a=!1,d=0,t||(e=!0),r||(n=!0)):(d++,d>=i.pathPatience&&(e=!0,o=!0,n=!0,p()))):r&&(n=c(l?{z:-1*i.gridPath[i.currentPath].z}:{z:i.gridPath[i.currentPath].z}),n?(r=!1,d=0,t||(e=!0),a||(o=!0)):(d++,d>=i.pathPatience&&(e=!0,o=!0,n=!0,p())))}),i.pathSpeed+i.pathWait)},GetParentEl:e=>i.all.parent.core.GetEl(e),GetChildEl:d,GetAllChildEl:e=>{let t=[];for(let o in i.allNames)i.allNames[o]===i.all.parent.core.core.id||t.push(d(i.allNames[o],e));return t},GetAllEl:e=>{let t=[];for(let o in i.allNames)t.push(d(i.allNames[o],e));return t},EmitEventParent:p,EmitEventChild:(e,t)=>{let o=u(e);if(Array.isArray(t))for(let e in t)o.EmitEvent(t[e]);else o.EmitEvent(t)},EmitEventAll:e=>{if(Array.isArray(e))for(let t in e)for(let o of n)for(let a of o)a.EmitEvent(e[t]);else for(let t of n)for(let o of t)o.EmitEvent(e)},ChangeParent:h,ChangeChild:(e,t,o)=>{let a=u(e);if(Array.isArray(t))for(let e in t)a.ChangeSelf(t[e]);else a.ChangeSelf(t)},ChangeAll:(e,t)=>{if(Array.isArray(e))for(let o in e)for(let a of n)for(let i of a)i.ChangeSelf(e[o],t);else for(let o of n)for(let a of o)a.ChangeSelf(e,t)},RemoveComponentParent:e=>{if(Array.isArray(e))for(let t in e)i.all.parent.core.RemoveComponent(e[t]);else i.all.parent.core.RemoveComponent(e)},RemoveComponentChild:(e,t)=>{let o=u(e);if(Array.isArray(t))for(let e in t)o.RemoveComponent(t[e]);else o.RemoveComponent(t)},RemoveComponentAll:e=>{if(Array.isArray(e))for(let t in e)for(let o of n)for(let a of o)a.RemoveComponent(e[t]);else for(let t of n)for(let o of t)o.RemoveComponent(e)},AnimateParent:m,AnimateChild:(e,t)=>{let o=u(e);if(Array.isArray(t))for(let e in t)o.Animate(t[e]);else o.Animate(t)},AnimateAll:e=>{if(Array.isArray(e))for(let t in e)for(let o of n)for(let a of o)a.Animate(e[t]);else for(let t of n)for(let o of t)o.Animate(e)},SetFlagParent:e=>{if(Array.isArray(e))for(let t in e)i.all.parent.core.SetFlag(e[t]);else i.all.parent.core.SetFlag(e)},SetFlagChild:(e,t)=>{let o=u(e);if(Array.isArray(t))for(let e in t)o.SetFlag(t[e]);else o.SetFlag(t)},SetFlagAll:e=>{if(Array.isArray(e))for(let t in e)for(let o of n)for(let a of o)a.SetFlag(e[t]);else for(let t of n)for(let o of t)o.SetFlag(e)},GetFlagParent:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(i.all.parent.core.GetFlag(e[o]));return t}return i.all.parent.core.GetFlag(e)},GetFlagChild:(e,t)=>{let o=u(e);if(Array.isArray(t)){let e=[];for(let a in t)e.push(o.GetFlag(t[a]));return e}return o.GetFlag(t)},GetFlagAll:e=>{let t=[];if(Array.isArray(e)){for(let o in e){let a=[];for(let t of n)for(let i of t)a.push(i.GetFlag(e[o]));t.push(a)}return t}for(let o of n)for(let a of o)t.push(a.GetFlag(e));return t},DomClassParent:(e,t,o)=>{i.all.parent.core.DomClass(e,t,o)},DomClassChild:(e,t,o,a)=>{u(e).DomClass(t,o,a)},DomClassAll:(e,t,o)=>{for(let a of n)for(let i of a)i.DomClass(e,t,o)},EnableDetailParent:e=>{i.all.parent.core.EnableDetail(e)},EnableDetailChild:(e,t)=>{u(e).EnableDetail(t)},EnableDetailAll:e=>{for(let t of n)for(let o of t)o.EnableDetail(e)},DisableDetailParent:()=>{i.all.parent.core.DisableDetail()},DisableDetailChild:e=>{u(e).DisableDetail()},DisableDetailAll:()=>{for(let e of n)for(let t of e)t.DisableDetail()},GetChild:u}})(o,e,t,a),this.LayerDataFromTemplate=(e,t,a,i,n)=>((e,t,o,a,i,n)=>{let r=o||e.RanNameGen();r=e.CheckDupeName(r);let s={},l=0;if(a?a.id||(a.id=r+l):(a={}).id=r+l,a.id=e.CheckDupeName(a.id),function t(o,i){for(let n in o)o[n].core?(i[n]={},i[n].core=0===l?e.CoreFromTemplate(o[n].core,a,!0):e.CoreFromTemplate(o[n].core,{id:e.CheckDupeName(r+l)},!0),l++):(i[n]={},t(o[n],i[n]))}(t,s),a)for(let e in a)s.parent.core.core[e]=a[e];if(i&&(s.config={...i}),n)return s;e[r]=s})(o,e,t,a,i,n),this.LayerFromTemplate=(e,t,a,i,n)=>((e,t,o,a,i,n)=>{let r,s={},l=0;if(n||(o||(o=e.RanNameGen()),o=e.CheckDupeName(o)),a?a.id||(a.id=o+l):(a={}).id=o+l,a.id=e.CheckDupeName(a.id),r=t.layer?t.layer.all:t,function t(i,n){for(let r in i)i[r].core?(n[r]={},n[r].core=0===l?e.CoreFromTemplate(i[r].core,a,!0):e.CoreFromTemplate(i[r].core,{id:e.CheckDupeName(o+l)},!0),l++):(n[r]={},t(i[r],n[r]))}(r,s),a)for(let e in a)s.parent.core.core[e]=a[e];if(i&&(s.config={...i}),n)return e.Layer(o,s);e[o]=e.Layer(o,s)})(o,e,t,a,i,n),this.Player=(e,a)=>t(o,e,a),this.Companion=(e,t,a)=>((e,t,o,a)=>{let i,n={};function r(t){let o=e.camera.GetEl(),a=(new THREE.Vector3).copy(e.player.RayCoord(o,n.distance,new THREE.Vector3(0,0,-1)).direction);return a.setY(n.height),a}function s(){let t=new THREE.Vector3(0,-1,0);return e.playerRig.GetEl().components.gravitycontrol&&(t.copy(e.playerRig.GetEl().components.gravitycontrol.axis),t.equals(new THREE.Vector3)&&t.copy(new THREE.Vector3(0,-1,0))),t.negate(),t}n.avatarType="",n.menuParentId,o.SpawnCore?(n.avatarType="core",n.menuParentId=o.core.id,i=o.core.id):o.SpawnLayer&&(n.avatarType="layer",n.menuParentId=o.layer.all.parent.core.core.id,i=o.layer.id),n.avatar=Object.assign({},o),n.shapes={default:i,Cube:"compCubeLayer",Sphere:"compSphereLayer"},n.id=t,n.el=!1,n.inScene=!1,n.infoDisplay=!1,n.pos=e.playerRig.GetEl().getAttribute("position"),n.defaultHeight=1.5,n.height=1.5,n.distance=2,n.spawnToggling=!1,n.viewConfig=!1,n.bookData=e.compBookData,e.compNPC=e.NPC("compNPC",n.avatar,n.bookData,e.compBubbleLayer,!0),n.enableInventory=a||!1,n.inventoryTimeouts=[],n.items={},n.tools={},n.keys={},n.specials={},n.mainMenuData={info:{id:"mainMenu",buttonData:e.menuCylinderData,hoverData:e.menuHoverData,hideData:e.menuPlaneHideData,title:"Main Menu",description:"Main menu for travel, system and settings.",layout:"circleUp",offset:-1.025,posOffset:new THREE.Vector3(0,0,0),parent:"ghostParent",stare:!1,npc:"compNPC"},menu0:{button1:{id:"subMenu2",style:!1,title:"Travel to",description:"Select your next travel destination.",subMenu:"travel1",action:!1},button2:{id:"subMenu3",style:!1,title:"Settings",description:"Configure system settings.",subMenu:"menu3",action:!1},button3:{id:"subMenu4",style:!1,title:"Controls",description:"View current control configuration.",subMenu:!1,action:{auxlObj:"comp",component:!1,method:"ToggleControlView",params:null,menu:"stay"}},button4:{id:"worldJump",style:!1,title:"World Jump",description:"Jump into a new World.",subMenu:"worlds1",action:!1}},travel1:{button0:{id:"subMenu4",style:!1,title:"Sub Menu 4 Test",description:"A test sub menu.",subMenu:"menu4",action:!1},button1:{id:"subMenu5",style:!1,title:"Sub Menu 5 Test",description:"A test sub menu.",subMenu:"menu5",action:!1}},worlds1:{button0:{id:"XRcadeWorld",style:!1,title:"XRcade World",description:"Load the arcade world of XRcade.",subMenu:!1,action:{auxlObj:"xrcadeWorld",component:!1,method:"SwapWorld",params:"false",menu:"close"}},button1:{id:"GridWorld",style:!1,title:"Grid World",description:"Load the world of Grid map collision showcase.",subMenu:!1,action:{auxlObj:"gridWorld",component:!1,method:"SwapWorld",params:"false",menu:"close"}},button2:{id:"AmmoWorld",style:!1,title:"Ammo World",description:"Load the world of Ammo Physics.",subMenu:!1,action:{auxlObj:"ammoWorld",component:!1,method:"SwapWorld",params:"true",menu:"close"}},button3:{id:"CannonWorld",style:!1,title:"Cannon World",description:"Load the world of Cannon Physics.",subMenu:!1,action:{auxlObj:"cannonWorld",component:!1,method:"SwapWorld",params:"true",menu:"close"}},button4:{id:"MascotWorld",style:!1,title:"Mascot World",description:"Load the world of Mascot",subMenu:!1,action:{auxlObj:"mascotWorld",component:!1,method:"SwapWorld",params:"true",menu:"close"}},button5:{id:"CaosWorld",style:!1,title:"Caos World",description:"Load the world of Caos",subMenu:!1,action:{auxlObj:"caosWorld",component:!1,method:"SwapWorld",params:"true",menu:"close"}}},menu2:{button0:{id:"action1",style:!1,title:"Toggle Flashlight",description:"Turn On/Off your flashlight.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"ToggleFlashlight",params:null,menu:"close"}}},menu3:{button0:{id:"subMenu0",style:!1,title:"Adjust Camera Height",description:"Manually adjust the camera height.",subMenu:"camRigMenu",action:!1},button01:{id:"action2",style:!1,title:"45/90 Snap Rotation Toggle",description:"Toggle between 45* or 90* degree snap rotation.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"ToggleSnapMode",params:null,menu:"stay"}},button1:{id:"subMenu1",style:!1,title:"Companion Avatar",description:"Change the companion avatar shape.",subMenu:"compShape1",action:!1},button2:{id:"subMenu2",style:!1,title:"Scene Transition Type",description:"Change the scene transition animation style.",subMenu:"menu4",action:!1},button3:{id:"subMenu3",style:!1,title:"Teleport Transition Type",description:"Change the teleport transition animation style.",subMenu:"menu5",action:!1},button4:{id:"subMenu4",style:!1,title:"Transition Color",description:"Change the transition animation color.",subMenu:"menu6",action:!1},button5:{id:"subMenu5",style:!1,title:"More...",description:"More settings.",subMenu:"settings1",action:!1}},settings1:{button0:{id:"action0",style:!1,title:"Reset Player Pos/Rot",description:"Reset your Position and Rotation.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"ResetUserPosRot",params:null,menu:"stay"}},button1:{id:"action1",style:!1,title:"Toggle Mouse Lock",description:"Toggle mouse pointer lock.",subMenu:!1,action:{auxlObj:"auxl",component:!1,method:"PointerLockToggle",params:"null",menu:"stay"}}},menu4:{button0:{id:"action1",style:!1,title:"Instant",description:"Disable animation.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateSceneTransitionStyle",params:"instant",menu:"back"}},button1:{id:"action2",style:!1,title:"Blink",description:"Blink in and out in between scenes.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateSceneTransitionStyle",params:"blink",menu:"back"}},button2:{id:"action3",style:!1,title:"Fade",description:"Fade in and out in between scenes.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateSceneTransitionStyle",params:"fade",menu:"back"}},button3:{id:"action4",style:!1,title:"Sphere",description:"Close and open a sphere in between scenes.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateSceneTransitionStyle",params:"sphere",menu:"back"}}},camRigMenu:{button0:{id:"action1",style:!1,title:"Up",description:"Adjust rig upward by 0.1 .",subMenu:!1,action:{auxlObj:"player",component:!1,method:"CamRigAdjust",params:"up",menu:"stay"}},button1:{id:"action2",style:!1,title:"Down",description:"Adjust rig downward by 0.1 .",subMenu:!1,action:{auxlObj:"player",component:!1,method:"CamRigAdjust",params:"down",menu:"stay"}},button2:{id:"action3",style:!1,title:"Reset",description:"Reset camera rig height back to 0.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"CamRigAdjust",params:"reset",menu:"stay"}}},menu5:{button0:{id:"action1",style:!1,title:"Instant",description:"Disable animation.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTeleportTransitionStyle",params:"instant",menu:"back"}},button1:{id:"action2",style:!1,title:"Locomotion",description:"Slide to teleport position.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTeleportTransitionStyle",params:"locomotion",menu:"back"}},button2:{id:"action3",style:!1,title:"Blink",description:"Blink in and out in between teleports.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTeleportTransitionStyle",params:"blink",menu:"back"}},button3:{id:"action4",style:!1,title:"Fade",description:"Fade in and out in between teleports.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTeleportTransitionStyle",params:"fade",menu:"back"}},button4:{id:"action5",style:!1,title:"Sphere",description:"Close and open a sphere in between teleports.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTeleportTransitionStyle",params:"sphere",menu:"back"}}},menu6:{button0:{id:"action1",style:!1,title:"Black",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"black",menu:"back"}},button1:{id:"action2",style:!1,title:"Grey",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"grey",menu:"back"}},button2:{id:"action3",style:!1,title:"White",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"white",menu:"back"}},button3:{id:"action4",style:!1,title:"Red",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"red",menu:"back"}},button4:{id:"action5",style:!1,title:"Green",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"green",menu:"back"}},button5:{id:"action6",style:!1,title:"Blue",description:"Change transition color.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"UpdateTransitionColor",params:"blue",menu:"back"}}},compShape1:{},inventory:{button0:{id:"subMenu1",style:!1,title:"Items",description:"View your items.",subMenu:"items1",action:!1},button1:{id:"subMenu2",style:!1,title:"Tools",description:"View your tools.",subMenu:"tools1",action:!1},button2:{id:"subMenu3",style:!1,title:"Keys",description:"View your keys.",subMenu:"keys1",action:!1},button3:{id:"subMenu4",style:!1,title:"Special",description:"View your special objects.",subMenu:"specials1",action:!1}},items1:{},tools1:{},keys1:{},specials1:{}},n.enableInventory&&(n.mainMenuData.menu0.button0={id:"subMenu1",style:!1,title:"Inventory",description:"View your inventory.",subMenu:"inventory",action:!1},n.mainMenuData.menu0.button4={id:"subMenu5",style:!1,title:"Unequip",description:"Unequip your held object.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"Unequip",params:null,menu:"stay"}}),e.mainMenu=e.MultiMenu(n.mainMenuData);const l=()=>{let t=new THREE.Vector3;e.headRig.GetEl().object3D.getWorldPosition(t);let o=s().clone();o.multiplyScalar(e.camera.GetEl().object3D.position.y);let a=e.camera.GetEl().object3D.position.y;t.add(new THREE.Vector3(0,a,0)),e.comp.GetEl().object3D.up.copy(o),e.comp.GetEl().object3D.lookAt(t)},c=()=>{n.shapeButtons={};let t={},o={},a=1,i=1,r=Object.keys(n.shapes).length,s=Math.ceil(r/8),l="compShape"+i;for(let c in n.shapes)t={id:"action"+a,style:!1,title:c,description:"Change to a "+c+" avatar.",subMenu:!1,action:{auxlObj:"comp",component:!1,method:"UpdateShape",params:n.shapes[c],menu:"close"}},o={id:"action"+a,style:!1,title:"More",description:"Next Page",subMenu:!1,action:!1},n.shapeButtons["button"+a]=t,a===r?e.mainMenu.UpdateSubMenu(l,n.shapeButtons):a++,s>1&&a%7==0&&(i++,o.id="action"+a,o.subMenu="compShape"+i,n.shapeButtons["button"+a]=o,e.mainMenu.UpdateSubMenu(l,n.shapeButtons),n.shapeButtons={},l="compShape"+i)};let d;const p=()=>{if(n.inScene);else{e.compNPC.SpawnNPC(e.playerHead.GetEl()),"core"===n.avatarType?n.avatar.ChangeSelf({property:"position",value:r()}):n.avatar.ChangeParent({property:"position",value:r()});let t=setTimeout((()=>{l(),clearTimeout(t)}),10),o=setTimeout((()=>{n.enableInventory&&y(),e.mainMenu.multiMenu.parent=n.menuParentId,e.mainMenu.SpawnMultiMenu(),e.build.SpawnBuild(),n.inScene=!0,e.player.ToggleBeltText(!0),e.player.ToggleHoverText(!0),e.player.ToggleFloorText(!0),clearTimeout(o)}),100)}},h=()=>{if(n.inScene){n.playerQuat0=e.playerRig.GetEl().object3D.quaternion.clone(),e.player.ToggleBeltText(),e.player.ToggleHoverText(),e.player.ToggleFloorText(),e.mainMenu.DespawnMultiMenu(),e.build.DespawnBuild();let t=setTimeout((()=>{e.compNPC.DespawnNPC(),e.RemoveFromTracker(n.id),n.inScene=!1,clearTimeout(t)}),300)}},m=(t,o)=>{let a=e.player.RayDistanceDirection(e.camera.GetEl());a.negate();let i=new THREE.Vector3;return i=a.clone().multiplyScalar(t),i.setY(o),i},u=t=>{n.inventoryButtons={};let o={},a={},i=1,r=1,s=Object.keys(n[t]).length,l=Math.ceil(s/8),c=t+r,d="stay";for(let p in n[t]){let h;h="limited"===n[t][p].persist?n[t][p].name+" x"+n[t][p].amount:n[t][p].name,d=n[t][p].menu?n[t][p].menu:"stay",o={id:"action"+i,style:n[t][p].style,title:h,description:n[t][p].description,subMenu:!1,action:{auxlObj:n[t][p].auxlObj,component:n[t][p].component,method:n[t][p].method,params:n[t][p].params,menu:d}},n[t][p].action||(o.action=!1),a={id:"action"+i,style:!1,title:"More",description:"Next Page",subMenu:!1,action:!1},n.inventoryButtons["button"+i]=o,i===s?e.mainMenu.UpdateSubMenu(c,n.inventoryButtons):i++,l>1&&i%7==0&&(r++,a.id="action"+i,a.subMenu=t+r,n.inventoryButtons["button"+i]=a,e.mainMenu.UpdateSubMenu(c,n.inventoryButtons),n.inventoryButtons={},c=t+r)}},y=()=>{u("items"),u("tools"),u("keys"),u("specials")},g=()=>{for(let e in n.inventoryTimeouts)clearTimeout(n.inventoryTimeouts[e]);n.inventoryTimeouts=[]};return{comp:n,TestFunc:e=>{console.log(e)},AddAvatar:(e,t)=>{n.shapes[e]=t,c()},UpdateShape:t=>{let o=!1;n.inScene&&(o=!0,h());let a=setTimeout((()=>{e[t].SpawnCore?(n.avatarType="core",n.menuParentId=e[t].core.id):e[t].SpawnLayer?(n.avatarType="layer",n.menuParentId=e[t].layer.all.parent.core.core.id):(console.log(t),console.log("failed to detect type")),n.avatar=Object.assign({},e[t]),e.compNPC=e.NPC("compNPC",n.avatar,e.compBookData,e.compBubbleLayer,!0),o&&p(),clearTimeout(a)}),400)},UpdateBook:t=>{let o=!1;n.inScene&&(o=!0,h()),n.bookData=t;let a=setTimeout((()=>{e.compNPC=e.NPC("compNPC",n.avatar,n.bookData,e.compBubbleLayer,!0),o&&p(),clearTimeout(a)}),400)},SpawnComp:p,DespawnComp:h,GetEl:()=>"core"===n.avatarType?n.avatar.GetEl():n.avatar.GetParentEl(),SetFlag:t=>{if(Array.isArray(t))for(let o in t)n[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:n.id,type:"comp",sub:!1,name:t[o].flag,data:t[o].value});else n[t.flag]=t.value,e.SaveToProfile({auxlObject:n.id,type:"comp",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(n(e[o]));return t}return n[e]},TurnToPlayer:l,UpdatePosition:()=>{"core"===n.avatarType?n.avatar.ChangeSelf({property:"position",value:r()}):n.avatar.ChangeParent({property:"position",value:r()})},ToggleControlView:()=>{if(n.viewConfig)e.configurationView.DespawnCore(),n.viewConfig=!1;else{e.configurationView.SpawnCore(e.playerRig.GetEl()),e.configurationView.ChangeSelf([{property:"text",value:{value:e.controlsText}},{property:"position",value:m(-1,1.5)}]),n.viewConfig=!0;let t=setTimeout((()=>{(t=>{let o=(new THREE.Vector3).copy(e.playerRig.GetEl().object3D.position),a=s().clone();a.multiplyScalar(e.camera.GetEl().object3D.position.y),o.add(a),t.object3D.up.copy(a),t.object3D.lookAt(o)})(e.configurationView.GetEl()),clearTimeout(t)}),10)}},UpdateMainMenu:t=>{let o=!1;e.mainMenu.inScene&&(e.mainMenu.DespawnMultiMenu(),o=!0),Object.keys(t).forEach((e=>{n.mainMenuData[e]?n.mainMenuData[e][t[e].id]=t[e]:n.mainMenuData[e]=t[e]})),e.mainMenu=e.MultiMenu(n.mainMenuData),y(),c(),o&&e.mainMenu.SpawnMultiMenu()},UpdateMainMenuStyle:t=>{let o=!1;e.mainMenu.inScene&&(e.mainMenu.DespawnMultiMenu(),o=!0),n.mainMenuData.info.buttonData=t,e.mainMenu=e.MultiMenu(n.mainMenuData),y(),c(),o&&e.mainMenu.SpawnMultiMenu()},EnableInventory:()=>{n.enableInventory=!0,n.mainMenuData.menu0={button0:{id:"subMenu1",style:!1,title:"Inventory",description:"View your inventory.",subMenu:"inventory",action:!1},button4:{id:"subMenu5",style:!1,title:"Unequip",description:"Unequip your held object.",subMenu:!1,action:{auxlObj:"player",component:!1,method:"Unequip",params:null,menu:"stay"}},button1:{id:"subMenu2",style:!1,title:"Travel to",description:"Select your next travel destination.",subMenu:"travel1",action:!1},button2:{id:"subMenu3",style:!1,title:"Settings",description:"Configure system settings.",subMenu:"menu3",action:!1},button3:{id:"subMenu4",style:!1,title:"Controls",description:"View current control configuration.",subMenu:!1,action:{auxlObj:"comp",component:!1,method:"ToggleControlView",params:null,menu:"close"}},button4:{id:"worldJump",style:!1,title:"World Jump",description:"Jump into a new World.",subMenu:"worlds1",action:!1}},e.mainMenu=e.MultiMenu(n.mainMenuData),y()},AddToInventory:({item:t,hide:o})=>{function a(t){n[t.category][t.name]?"limited"===n[t.category][t.name].persist&&(n[t.category][t.name].amount+=t.amount):n[t.category][t.name]=t,e.SaveToProfile({auxlObject:n.id,type:"comp",sub:t.category,name:t.name,data:t})}if(Array.isArray(t))for(let e in t)a(t[e]);else a(t);if(y(),g(),o);else if(Array.isArray(t))for(let o in t){let a=3800;a*=o,n.inventoryTimeouts[o]=setTimeout((()=>{e.player.Notification({message:"Acquired : "+t[o].name}),clearTimeout(n.inventoryTimeouts[o])}),a)}else e.player.Notification({message:"Acquired : "+t.name})},ClearInventoryNotifications:g,RemoveFromInventory:t=>{function o(t){n[t.category][t.name]?"limited"===n[t.category][t.name].persist&&(n[t.category][t.name].amount--,n[t.category][t.name].amount<=0&&delete n[t.category][t.name]):delete n[t.category][t.name],e.SaveToProfile({auxlObject:n.id,type:"comp",sub:t.category,name:t.name,data:t})}if(Array.isArray(t))for(let e in t)o(t[e]);else o(t);y()},CheckInventory:e=>{let t;function o(e){return!!n[e.category][e.name]}if(Array.isArray(e))for(let a in e)t.push(o(e[a]));else t=o(e);return t},CheckForKey:e=>{let t=!1;if(0===Object.keys(n.keys).length)t=!1;else for(let o in n.keys)if(n.keys[o].id===e){t=!0;break}return t},UpdateInventoryMenu:y,DragToPosition:t=>{e.IsFalsey(t)?clearInterval(d):(clearInterval(d),d=setInterval((()=>{"core"===n.avatarType?n.avatar.ChangeSelf({property:"position",value:r()}):n.avatar.ChangeParent({property:"position",value:r()}),l()}),1))}}})(o,e,t,a),this.SceneNode=e=>a(o,e),this.MapZone=e=>i(o,e),this.Scenario=e=>n(o,e),this.World=e=>((e,t)=>{let o={};o.data=Object.assign({},t),o.id=o.data.info.id,o.name=o.data.info.name,o.scenarios=o.data.scenarios,o.current=0,o.loaded=!1,o.scenarioLoaded=!1,o.soundtrack=!1,o.soundtracks=!1,e.WorldsLoaded(o);const a=()=>{let t=i();e.player.ResetUserPosRot();let a=setTimeout((()=>{n(o.current),e.currentWorld=e[o.id],e.local.location.world=o.id,e.worldLoaded=!0,o.loaded=!0,clearTimeout(a)}),t)},i=()=>{let t=0;if(o.data.info.maxLoadtime?e.maxLoadTime=o.data.info.maxLoadtime:e.maxLoadTime=5e3,o.data.info.dayTime?e.timeInDay=o.data.info.dayTime:e.timeInDay=36e4,o.data.info.inventory?e.comp.EnableInventory():e.comp.enableInventory=!1,o.data.info.collision?e.collision=!0:e.collision=!1,o.data.info.physics)if(e.worldPhysics){if(e.worldPhysics&&e.worldPhysics===o.data.info.physics);else if(e.worldPhysics&&e.worldPhysics!==o.data.info.physics){t+=500,e.DisablePhysics(),e.worldPhysics=o.data.info.physics,e.EnablePhysics();let a=setTimeout((()=>{clearTimeout(a)}),500)}}else t+=500,e.worldPhysics=o.data.info.physics,e.EnablePhysics();else e.worldPhysics&&(e.DisablePhysics(),t+=500);if(o.data.info.menuStyle&&e.comp.UpdateMainMenuStyle(o.data.info.menuStyle),o.data.info.menuOptions&&e.comp.UpdateMainMenu(o.data.info.menuOptions),o.data.info.backgroundAudio){o.soundtracks=JSON.parse(JSON.stringify(o.data.info.backgroundAudio));for(let t in o.soundtracks)e.playerAudio.ChangeSelf({property:"auxlsound__"+t,value:o.soundtracks[t]});e.backgroundAudio=!0}if(o.data.info.soundEffects){o.soundEffects=JSON.parse(JSON.stringify(o.data.info.soundEffects));for(let t in o.soundEffects)e.playerAudio.ChangeSelf({property:"auxlsound__"+t,value:o.soundEffects[t]})}return o.data.info.compBookUpdate&&e.comp.UpdateBook(o.data.info.compBookUpdate),t},n=e=>{o.current=e,o.scenarios[e].StartScenario(),o.scenarioLoaded=!0},r=e=>{o.scenarios[e].ClearScenario(),o.scenarioLoaded=!1};return{world:o,SetAsDefault:()=>{e.defaultWorld=e[o.id]},StartWorld:a,StopWorld:()=>{e.currentWorld=!1,e.local.location.world=!1,e.worldLoaded=!1,o.loaded=!1,r(o.current)},StartScenario:n,ClearScenario:r,NextScenario:()=>{r(o.current),o.current++,n(o.current)},LoadScenario:e=>{r(o.current),o.current=e,n(o.current)},MusicPlaylist:t=>{o.soundtrack&&(e.playerAudio.GetEl().components["auxlsound__"+o.soundtrack].stopSound(),o.soundtrack=!1),e.IsFalsey(t)||(o.soundtracks.hasOwnProperty(t)?(e.playerAudio.EmitEvent(t),o.soundtrack=t):console.log({world:o,track:t,msg:"Unable to find track"}))},SwapWorld:t=>{if(o.loaded&&e.IsFalsey(t))return void e.player.Notification({time:2e3,message:"World Loaded"});e.comp.DespawnComp(),e.player.PlayerFadeOut();let i=setTimeout((()=>{e.currentWorld.StopWorld(),a(),clearTimeout(i)}),425)}}})(o,e),this.Menu=e=>((e,t)=>{let o={inScene:!1};o.data=Object.assign({},t.data),o.id=t.id||"menu",o.prompt=t.prompt,o.options=t.options,o.actions=t.actions,o.layers={},o.layer={};let a={},i={},n=[],r=0,s=Object.keys(o.options).length;return o.clickrun={},o.clickrun.cursorObj=t.cursorObj||!1,o.clickrun.method=t.method||"Click",o.clickrun.params=t.params||"target",o.layout=t.layout,o.data.position=new THREE.Vector3(0,0,0),o.data.position.x=t.pos.x,o.data.position.y=t.pos.y,o.data.position.z=t.pos.z,{menu:o,SpawnMenu:()=>{if(o.inScene);else{r=0,n=[],i={},o.data.id=o.id,o.data.text.value=o.prompt,o.data.material.color,o.data.material.emissive=e.ColorTheoryGen().base,a=e.Core(o.data),o.layers={parent:{core:a}},o.data.position.x=1.15*o.data.geometry.width,o.data.position.z=0,1===s||"horizontal"===o.layout?o.data.position.y=0:o.data.position.y=.75*o.data.geometry.height*s/2,o.data.sources={},o.data.components={},o.data.components.clickrun={},o.data.components.clickrun.cursorObj=o.clickrun.cursorObj,o.data.components.clickrun.method=o.clickrun.method,o.data.components.clickrun.params=o.clickrun.params;for(let t in o.options)1===s||0===r||("vertical"===o.layout?o.data.position.y-=1.15*o.data.geometry.height:"horizontal"===o.layout?o.data.position.x+=1.15*o.data.geometry.width:"loop"===o.layout?(o.data.position.x-=1.15*o.data.geometry.width,o.data.position.y-=1.15*o.data.geometry.height):o.data.position.y-=1.15*o.data.geometry.height),o.data.material.color,o.data.material.emissive=e.ColorTheoryGen().base,o.data.text.value=o.options[t],o.data.id=o.id+"option"+r,o.data.components.result=o.actions["action"+r],i=e.Core(o.data),n.push(i),o.layers["child"+r]={core:n[r]},r++;o.layer=e.Layer(o.id,o.layers),o.layer.SpawnLayer(),o.inScene=!0}},DespawnMenu:()=>{o.inScene&&(o.layer.DespawnLayer(),o.inScene=!1)},AddToParentSpawnTracker:(t,a)=>{e.scenarioSpawned[a.id]?e.scenarioSpawned[o.id]={type:"menu",obj:t,parent:a}:e.zoneSpawned[a.id]?e.zoneSpawned[o.id]={type:"menu",obj:t,parent:a}:e.nodeSpawned[a.id]?e.nodeSpawned[o.id]={type:"menu",obj:t,parent:a}:e.bookSpawned[a.id]&&(e.bookSpawned[o.id]={type:"menu",obj:t,parent:a})},RemoveMenuFromSceneTracker:()=>{e.scenarioSpawned[o.id]?delete e.scenarioSpawned[o.id]:e.zoneSpawned[o.id]?delete e.zoneSpawned[o.id]:e.nodeSpawned[o.id]?delete e.nodeSpawned[o.id]:e.bookSpawned[o.id]&&delete e.bookSpawned[o.id]}}})(o,e),this.MultiMenu=e=>((e,t)=>{let o={};o.data=Object.assign({},t),o.inScene=!1,o.menuOpen=!1,o.descriptionOpen=!1,o.buttonHover="",o.currentMenu="menu0",o.menuPath=["menu0"],o.switching=!1,o.switchingTimeout,o.id=t.info.id||"multiMenu",o.layout=t.info.layout||"circleUp",o.posOffset=t.info.posOffset||new THREE.Vector3(0,0,0),o.offset=t.info.offset||-1,o.parent=o.data.info.parent||!1,o.stare=o.data.info.stare||!1,o.npc=o.data.info.npc||!1;let a=-45,i=0,n=250;o.buttonData=e.CoreDataFromTemplate(o.data.info.buttonData,{id:"buttonData"},!0),o.hoverData=e.CoreDataFromTemplate(o.data.info.hoverData,{id:"hoverData"},!0),o.hideData=e.CoreDataFromTemplate(o.data.info.hideData||e.menuPlaneHideData,{id:"hideData"},!0),o.nullParentData={data:"nullParentData",id:"nullParent",sources:!1,text:!1,geometry:!1,material:!1,position:o.posOffset,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},(o.stare||o.look)&&(o.nullParentData.components={},o.stare&&(o.nullParentData.components.stare=o.stare),o.look&&(o.nullParentData.components["look-at-xyz"]=o.look)),o.cores={},o.cores.hover={},o.nullParentData.id=o.id,o.data.info.position&&(o.nullParentData.position=o.data.info.position),o.cores.parent=e.Core(o.nullParentData),o.nullParentData.position=new THREE.Vector3(0,0,0),o.nullParentData.components={},o.buttonData.id=o.data.info.id+"menu","circleUp"!==o.layout&&"circleDown"!==o.layout||(o.buttonData.position.x=o.offset,o.hideData.position.x=o.offset),o.cores.main=e.Core(o.buttonData),o.hideData.id=o.data.info.id+"hide",o.hideData.components={},o.hideData.components.menurun={},o.hideData.components.menurun.cursorObj=o.id,o.hideData.components.menurun.method="HideMenu",o.hideData.components.menurun.params=null,o.cores.hide=e.Core(o.hideData);for(let t in o.data)if("info"===t);else{o.cores[t]={},o.cores.hover[t]={};let n=0;for(let i in o.data[t])n++,o.buttonData.id=o.data[t][i].id,o.buttonData.text.value=o.data[t][i].title,"circleUp"===o.layout?o.buttonData.rotation.z=a*n*-1:"circleDown"===o.layout?o.buttonData.rotation.z=a*n:"vertical"===o.layout?o.buttonData.position.y=n*o.offset:"horizontal"===o.layout&&(o.buttonData.position.x=n*o.offset),o.buttonData.components={},o.data[t][i].action?(o.buttonData.components.clickrun={},o.buttonData.components.clickrun.cursorObj=o.data[t][i].action.auxlObj,o.buttonData.components.clickrun.method=o.data[t][i].action.method,o.data[t][i].action.component&&(o.buttonData.components.clickrun.component=o.data[t][i].action.component),o.data[t][i].action.params&&(o.buttonData.components.clickrun.params=o.data[t][i].action.params),o.data[t][i].action.menu?"stay"===o.data[t][i].action.menu||("back"===o.data[t][i].action.menu?(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ToggleMenu",o.buttonData.components.menurun.params=null):"close"===o.data[t][i].action.menu?(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ResetMenu"):"hide"===o.data[t][i].action.menu&&(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="HideMenu")):(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ResetMenu")):(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="SubMenu",o.buttonData.components.menurun.params=o.data[t][i].subMenu),o.buttonData.components.mouseenterrun={},o.buttonData.components.mouseenterrun.cursorObj=o.id,o.buttonData.components.mouseenterrun.method="SpawnDescription",o.buttonData.components.mouseenterrun.params=i,o.buttonData.components.mouseleaverun={},o.buttonData.components.mouseleaverun.cursorObj=o.id,o.buttonData.components.mouseleaverun.method="DespawnDescription",o.buttonData.components.mouseleaverun.params=i,o.hoverData.id=o.data[t][i].id+"hover",o.hoverData.text.value=o.data[t][i].description,o.cores.hover[t][i]=e.Core(o.hoverData),o.cores[t][i]=e.Core(o.buttonData);n>i&&(i=n)}o.cores.nulls=[];for(let t=0;t<=8;t++)o.nullParentData.id=o.id+"null"+t,"circleUp"===o.layout?o.nullParentData.rotation.z=a*t:"circleDown"===o.layout&&(o.nullParentData.rotation.z=a*t*-1),o.cores.nulls.push(e.Core(o.nullParentData));o.menuLayerData={parent:{core:o.cores.parent},child0:{parent:{core:o.cores.nulls[0]},child0:{core:o.cores.main}}};for(let e=1;e<o.cores.nulls.length;e++)o.menuLayerData["child"+e]={},o.menuLayerData["child"+e].core=o.cores.nulls[e];o.menuLayer=e.Layer(o.id,o.menuLayerData);const r=()=>{o.menuPath.length>1?o.cores.main.ChangeSelf({property:"text",value:{value:"Back"}}):o.cores.main.ChangeSelf({property:"text",value:{value:"Close"}}),o.menuOpen=!0,o.switching=!0,o.cores.hide.core.inScene||o.cores.hide.SpawnCore(o.cores.parent);let t,a=o.currentMenu,i=1,r=setTimeout((()=>{let n="";for(let e in o.cores[a])t=o.menuLayer.GetChildEl(o.id+"null"+i),o.cores[a][e].SpawnCore(t),i++,n+=" "+o.cores[a][e].core.id;o.npc&&e[o.npc].Speak({role:a,speech:n}),clearTimeout(r)}),n);o.switchingTimeout=setTimeout((()=>{o.switching=!1,clearTimeout(o.switchingTimeout)}),500)},s=e=>{o.menuOpen=!1,o.switching=!0;let t,a=o.currentMenu,i=1,r={};t=e?25:n,o.descriptionOpen&&p(o.buttonHover);let s=setTimeout((()=>{for(let e in o.cores[a])r[e]=o.menuLayer.GetChildEl(o.id+"null"+i),o.cores[a][e].DespawnCore(),i++;clearTimeout(s)}),t);o.switchingTimeout=setTimeout((()=>{o.switching=!1,clearTimeout(o.switchingTimeout)}),2*t)},l=()=>{o.switching||(o.menuOpen?o.menuPath.length>1?d(o.menuPath[o.menuPath.length-2]):c():r())},c=e=>{let t;if(o.cores.main.ChangeSelf({property:"text",value:{value:"Open"}}),t=e?0:n,o.switching);else if(o.menuOpen){let a=setTimeout((()=>{s(e),o.cores.hide.DespawnCore(),o.currentMenu="menu0",o.menuPath=["menu0"],o.menuOpen=!1,clearTimeout(a)}),t)}},d=e=>{o.switching||(s(),o.currentMenu=e,o.menuPath.includes(o.currentMenu)?o.menuPath.pop():o.menuPath.push(o.currentMenu),r())},p=e=>{o.descriptionOpen&&(o.cores[o.currentMenu][e].GetEl(),o.cores.hover[o.currentMenu][e].DespawnCore(),o.buttonHover="",o.descriptionOpen=!1)};return{multiMenu:o,SpawnMultiMenu:e=>{o.inScene||(o.menuLayer.SpawnLayer(o.parent),o.menuLayer.GetChildEl(o.id+"null0").addEventListener("click",l),o.cores.main.ChangeSelf({property:"text",value:{value:"Open"}}),e&&l(),o.inScene=!0)},DespawnMultiMenu:()=>{if(o.inScene){c(!0);let t=setTimeout((()=>{let a=o.menuLayer.GetChildEl(o.id+"null0");a&&a.removeEventListener("click",l),o.menuLayer.DespawnLayer(),o.inScene=!1,e.RemoveFromTracker(o.id),clearTimeout(t)}),n)}},ToggleMenu:l,UpdateParent:e=>{let t=e||!1;o.inScene||(o.parent=t)},UpdateButtons:e=>{console.log(o.cores)},UpdateSubMenu:(t,n)=>{if(o.currentMenu===t);else{o.cores[t]={},o.cores.hover[t]={};let r=0;for(let i in n){r++,o.buttonData.id=n[i].id,o.buttonData.text.value=n[i].title,"circleUp"===o.layout?o.buttonData.rotation.z=a*r*-1:"circleDown"===o.layout?o.buttonData.rotation.z=a*r:"vertical"===o.layout?o.buttonData.position.y=r*o.offset:"horizontal"===o.layout&&(o.buttonData.position.x=r*o.offset),o.buttonData.components={},n[i].action?(o.buttonData.components.clickrun={},o.buttonData.components.clickrun.cursorObj=n[i].action.auxlObj,o.buttonData.components.clickrun.method=n[i].action.method,n[i].action.component&&(o.buttonData.components.clickrun.component=n[i].action.component),n[i].action.params&&(o.buttonData.components.clickrun.params=n[i].action.params),n[i].action.menu?"stay"===n[i].action.menu||("back"===n[i].action.menu?(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ToggleMenu",o.buttonData.components.menurun.params=null):"close"===n[i].action.menu?(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ResetMenu"):"hide"===n[i].action.menu&&(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="HideMenu")):(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="ResetMenu")):(o.buttonData.components.menurun={},o.buttonData.components.menurun.cursorObj=o.id,o.buttonData.components.menurun.method="SubMenu",o.buttonData.components.menurun.params=n[i].subMenu),o.buttonData.components.mouseenterrun={},o.buttonData.components.mouseenterrun.cursorObj=o.id,o.buttonData.components.mouseenterrun.method="SpawnDescription",o.buttonData.components.mouseenterrun.params=i,o.buttonData.components.mouseleaverun={},o.buttonData.components.mouseleaverun.cursorObj=o.id,o.buttonData.components.mouseleaverun.method="DespawnDescription",o.buttonData.components.mouseleaverun.params=i,o.hoverData.id=n[i].id+"hover",o.hoverData.text.value=n[i].description,o.cores.hover[t][i]=e.Core(o.hoverData);let s=JSON.parse(JSON.stringify(o.buttonData));o.cores[t][i]=e.Core(s)}r>i&&(i=r)}},SubMenu:d,HideMenu:()=>{o.switching||(o.menuOpen?s(!0):r())},ResetMenu:c,SpawnDescription:e=>{if(o.descriptionOpen);else{o.buttonHover=e;let t=o.cores[o.currentMenu][e].GetEl();o.cores.hover[o.currentMenu][e].SpawnCore(t),o.descriptionOpen=!0}},DespawnDescription:p}})(o,e),this.MegaMenu=(...e)=>{},this.HoverMenu=e=>r(o,e),this.ComboLock=(e,t,a,i,n)=>s(o,e,t,a,i,n),this.ScrollMenu=e=>((e,t)=>{let o={};return o.id=t,o.AllParentData={data:"AllParentData",id:"allParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,1.5,-1.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.allParent=e.Core(o.AllParentData),o.scrollBkgdData={data:"scrollBkgdData",id:"scrollBkgd",sources:!1,text:!1,geometry:{primitive:"box",depth:.1,width:.5,height:1.4},material:{shader:"standard",color:"#e02574",emissive:"#e02574",emissiveIntensity:.25,opacity:.5},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:{scroll:{type:"plane",axis:"vertical",parent:"scrollParent",length:1,options:5,elements:["scroll0","scroll1","scroll2","scroll3","scroll4","scroll5","scroll6","scroll7"]}}},o.scrollBkgd=e.Core(o.scrollBkgdData),o.scrollParentData={data:"scrollParentData",id:"scrollParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.scrollParent=e.Core(o.scrollParentData),o.scroll0Data={data:"scroll0Data",id:"scroll0",sources:!1,text:!1,geometry:{primitive:"box",depth:.025,width:.1,height:.1},material:{shader:"standard",color:"#e02574",emissive:"#e02574",opacity:0},position:new THREE.Vector3(0,-.6,.1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.scroll0=e.Core(o.scroll0Data),o.scroll1Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll1",position:new THREE.Vector3(0,-.4,.1),material:{shader:"standard",color:"#66e025",emissive:"#66e025",opacity:1}},!0),o.scroll1=e.Core(o.scroll1Data),o.scroll2Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll2",position:new THREE.Vector3(0,-.2,.1),material:{shader:"standard",color:"#256de0",emissive:"#256de0",opacity:1}},!0),o.scroll2=e.Core(o.scroll2Data),o.scroll3Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll3",position:new THREE.Vector3(0,0,.1),material:{shader:"standard",color:"#e0e025",emissive:"#e0e025",opacity:1}},!0),o.scroll3=e.Core(o.scroll3Data),o.scroll4Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll4",position:new THREE.Vector3(0,.2,.1),material:{shader:"standard",color:"#e09825",emissive:"#e09825",opacity:1}},!0),o.scroll4=e.Core(o.scroll4Data),o.scroll5Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll5",position:new THREE.Vector3(0,.4,.1),material:{shader:"standard",color:"#e02525",emissive:"#e02525",opacity:1}},!0),o.scroll5=e.Core(o.scroll5Data),o.scroll6Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll6",position:new THREE.Vector3(0,.6,.1),material:{shader:"standard",color:"#25e0d9",emissive:"#25e0d9",opacity:0}},!0),o.scroll6=e.Core(o.scroll6Data),o.scroll7Data=e.CoreDataFromTemplate(o.scroll0Data,{id:"scroll7",position:new THREE.Vector3(0,.8,.1),material:{shader:"standard",color:"#ffffff",emissive:"#ffffff",opacity:0}},!0),o.scroll7=e.Core(o.scroll7Data),o.scrollAllData={parent:{core:o.allParent},child0:{core:o.scrollBkgd},child1:{parent:{core:o.scrollParent},child0:{core:o.scroll0},child1:{core:o.scroll1},child2:{core:o.scroll2},child3:{core:o.scroll3},child4:{core:o.scroll4},child5:{core:o.scroll5},child6:{core:o.scroll6},child7:{core:o.scroll7}}},o.scrollAll=e.Layer("scrollAll",o.scrollAllData),{scrollMenu:o,SpawnScrollMenu:()=>{o.scrollAll.SpawnLayer()},DespawnScrollMenu:()=>{o.scrollAll.DespawnLayer()}}})(o,e),this.SkyBox=e=>((e,t)=>{let o,a,i=Object.assign({},t);i.inScene=!1,i.time=5.5,i.day=!1;const n=()=>{i.inScene||((()=>{for(let e in i.lights)i.lights[e].SpawnCore?i.lights[e].SpawnCore():i.lights[e].SpawnLayer?i.lights[e].SpawnLayer():(console.log("Failed to spawn object"),console.log(i.lights[e]))})(),(()=>{for(let e in i.sky)i.sky[e].SpawnCore?i.sky[e].SpawnCore():i.sky[e].SpawnLayer?i.sky[e].SpawnLayer():(console.log("Failed to spawn object"),console.log(i.sky[e]))})(),(()=>{for(let e in i.space)i.space[e].SpawnCore?i.space[e].SpawnCore():i.space[e].SpawnLayer?i.space[e].SpawnLayer():(console.log("Failed to spawn object"),console.log(i.space[e]))})(),i.inScene=!0)},r=()=>{i.inScene&&(clearTimeout(o),clearInterval(a),(()=>{for(let e in i.lights)i.lights[e].DespawnCore?i.lights[e].DespawnCore():i.lights[e].DespawnLayer?i.lights[e].DespawnLayer():(console.log("Failed to spawn object"),console.log(i.lights[e]))})(),(()=>{for(let e in i.sky)i.sky[e].DespawnCore?i.sky[e].DespawnCore():i.sky[e].DespawnLayer?i.sky[e].DespawnLayer():(console.log("Failed to spawn object"),console.log(i.sky[e]))})(),(()=>{for(let e in i.space)i.space[e].DespawnCore?i.space[e].DespawnCore():i.space[e].DespawnLayer?i.space[e].DespawnLayer():(console.log("Failed to spawn object"),console.log(i.space[e]))})(),e.RemoveFromTracker(i.id),i.inScene=!1)},s=(e,t)=>{for(let o in e)e[o].SpawnCore?e[o].EmitEvent(t):e[o].SpawnLayer?e[o].EmitEventAll(t):(console.log("Failed to emit event to object"),console.log(e[o]))},l=()=>{i.day=!0,s(i.lights,"sunrise"),s(i.sky,"sunrise"),s(i.space,"sunrise")},c=()=>{i.day=!1,s(i.lights,"sunset"),s(i.sky,"sunset"),s(i.space,"sunset")},d=()=>{s(i.lights,"pauseDayNight"),s(i.sky,"pauseDayNight"),s(i.space,"pauseDayNight")},p=t=>{t&&"number"==typeof t&&t>=24e3&&(e.timeInDay=t),l(),o=setTimeout((()=>{c(),a=setInterval((()=>{i.day?c():l()}),e.timeInDay/2)}),e.timeInDay/2-e.timeInDay/24)};return{skyBox:i,SpawnSkyBox:n,DespawnSkyBox:r,ToggleSpawn:()=>{i.inScene?r():n()},SetFlag:t=>{if(Array.isArray(t))for(let o in t)i[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:i.id,type:"skyBox",sub:!1,name:t[o].flag,data:t[o].value});else i[t.flag]=t.value,e.SaveToProfile({auxlObject:i.id,type:"skyBox",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(i(e[o]));return t}return i[e]},DayNightCycle:p,PauseDayNight:d,ResumeDayNight:()=>{s(i.lights,"resumeDayNight"),s(i.sky,"resumeDayNight"),s(i.space,"resumeDayNight")},RestartDayNight:e=>{d(),Despawn(),Spawn(),p(e)},SetTime:t=>{d(),i.day=t>=6&&t<=18,i.time=t;let o=15*i.time-90;e.sunLayer.layer.inScene&&e.sunLayer.GetChild("sunOuter").ChangeSelf({property:"rotation",value:new THREE.Vector3(o,45,0)});let a=15*i.time+90;e.moonLayer.layer.inScene&&e.moonLayer.GetChild("moonOuter").ChangeSelf({property:"rotation",value:new THREE.Vector3(a,45,0)})}}})(o,e),this.Horizon=e=>((e,t)=>{let o,a,i,n,r,s,l,c,d=Object.assign({},t);d.inScene=!1,"low"===d.density?r=5:"normal"===d.density?r=10:"high"===d.density&&(r=20),"low"===d.height?s=.5:"normal"===d.height?s=1:"high"===d.height&&(s=1.5),"low"===d.width?l=.5:"normal"===d.width?l=1:"high"===d.width&&(l=1.5);let p,h=new THREE.Vector3(0,0,-1*d.radius),m=new THREE.Vector3(1,1,1);"mountains"===d.type?(p=100*s,c={primitive:"cone",height:p,radiusBottom:50,radiusTop:0,openEnded:!0,segmentsHeight:1,segmentsRadial:9,thetaLength:180,thetaStart:90},m.x=1.5*l):"hills"===d.type?(p=50*s,c={primitive:"circle",radius:p,thetaStart:0,thetaLength:180},m.x=1.5*l):"buildings"===d.type?(p=100*s,c={primitive:"plane",width:40*l,height:p}):"cylinderWall"===d.type?(p=50*s,c={primitive:"cylinder",openEnded:!0,radius:d.radius,height:p,segmentsHeight:10,segmentsRadial:512,thetaStart:0,thetaLength:360},h.z=0,r=1,m=new THREE.Vector3(1,1,1)):"squareWall"===d.type&&(p=40*s,c={primitive:"plane",width:2*d.radius,height:p},r=4);let u={data:"horizonAllData",id:"horizonParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,-5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},y={parent:{core:e.Core(u)}},g={data:"horizonParentData",id:"horizonParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},v="horizonParent",f=[],b={data:"horizonChildData",id:"horizonChild",sources:!1,text:!1,geometry:c,material:!1,position:h,rotation:new THREE.Vector3(0,0,0),scale:m,animations:!1,mixins:!1,classes:["a-ent"],components:!1},E="horizonChild",w=[];for(let t=0;t<r;t++){v="horizonParent"+t;let s,c,h,m=new THREE.Vector3(0,0,0);m.y=360/r*t,g.id=v,g.rotation=m,f[t]=e.Core(g),E="horizonChild"+t,b.id=E,"squareWall"===d.type||(b.scale.x=1.5*l+(.1*Math.random()-.2),b.scale.y=.2*Math.random()-.4+1),"mountains"===d.type||"buildings"===d.type||"squareWall"===d.type?b.position.y=b.scale.y*p/2-1:"hills"===d.type&&(b.position.y=-1),d.texture?(n=d.baseColor?e.ColorTheoryGen(d.baseColor):d.baseColorFamily?e.ColorTheoryGen(!1,d.baseColorFamily):e.ColorTheoryGen(),h=n.base,s={shader:"standard",side:"double",color:h},d.texture.src&&(c=Array.isArray(d.texture.src)?d.texture.src[Math.floor(Math.random()*d.texture.src.length)]:d.texture.src,s.src=c),d.texture.repeat&&(s.repeat=d.texture.repeat),d.texture.opacity&&(s.opacity=d.texture.opacity),d.texture.metalness&&(s.metalness=d.texture.metalness),d.texture.roughness&&(s.roughness=d.texture.roughness),d.texture.emissive&&(s.emissive=h),d.texture.emissiveIntensity&&(s.emissiveIntensity=d.texture.emissiveIntensity)):d.baseColor?(n=e.ColorTheoryGen(d.baseColor),a=n.base,o=n.tetradic[0],i=n.tetradic[1],s={shader:"threeColorGradientShader",topColor:o,middleColor:a,bottomColor:i,side:"double"}):d.baseColorFamily?(n=e.ColorTheoryGen(!1,d.baseColorFamily),a=n.base,o=n.tetradic[0],i=n.tetradic[1],s={shader:"threeColorGradientShader",topColor:o,middleColor:a,bottomColor:i,side:"double"}):(n=e.ColorTheoryGen(),a=n.base,o=n.tetradic[0],i=n.tetradic[1],s={shader:"threeColorGradientShader",topColor:o,middleColor:a,bottomColor:i,side:"double"}),b.material=s,"cylinderWall"===d.type&&(b.scale=new THREE.Vector3(1,1,1)),w[t]=e.Core(b),y["child"+t]={parent:{core:f[t]},child0:{core:w[t]}}}let x=e.Layer("horizonLayer",y);const T=()=>{d.inScene||(x.SpawnLayer(),d.inScene=!0)},C=()=>{d.inScene&&(x.DespawnLayer(),e.RemoveFromTracker(d.id),d.inScene=!1)};return{horizon:d,SpawnHorizon:T,DespawnHorizon:C,ToggleSpawn:()=>{d.inScene?C():T()},SetFlag:t=>{if(Array.isArray(t))for(let o in t)d[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:d.id,type:"horizon",sub:!1,name:t[o].flag,data:t[o].value});else d[t.flag]=t.value,e.SaveToProfile({auxlObject:d.id,type:"horizon",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(d(e[o]));return t}return d[e]}}})(o,e),this.ObjsGenRing=e=>((e,t)=>{let o=Object.assign({},t);o.inScene=!1;let a,i,n,r,s,l,c,d,p,h,m,u=Object.assign({},t.objData),y=JSON.parse(JSON.stringify(t.objData));function g(e,t,o,a){return Math.sqrt(Math.pow(o-e,2)+1*Math.pow(a-t,2))}function v(e,t){return a=Math.random()*(2*e)-e,n=Math.random()*(2*e)-e,new THREE.Vector3(a,t,n)}o.all=[];const f=()=>{if(o.inScene);else{(()=>{for(let t=0;t<o.total;t++){y.id=u.id+t,o.ranColor&&(m=e.ColorTheoryGen().base,y.material.color=m,y.material.emissive&&(y.material.emissive=m)),o.ranTexture&&(y.material.src=e.patterns[Math.floor(Math.random()*e.patterns.length)]),d=y.rotation.x,p=y.rotation.y,h=y.rotation.z,o.ranRotX&&(d+=360*Math.random()),o.ranRotY&&(p+=360*Math.random()),o.ranRotZ&&(h+=360*Math.random()),y.rotation=new THREE.Vector3(d,p,h),s=o.objData.scale.x,l=o.objData.scale.y,c=o.objData.scale.z,o.ranScaleX&&(s+=Math.random()*o.scaleFlex),o.ranScaleY&&(l+=Math.random()*o.scaleFlex),o.ranScaleZ&&(c+=Math.random()*o.scaleFlex),y.scale=new THREE.Vector3(s,l,c),i=o.objData.position.y,o.ranYPos&&(i+=Math.random()*o.yPosFlex),r=v(o.outerRingRadius,i),y.position=r;let a=42;e:for(;a>0;){if(0===t){if(g(r.x,r.z,0,0)<o.innerRingRadius){r=v(o.outerRingRadius,i),a--;continue e}y.position=r}for(let e=0;e<o.all.length;e++){if(g(r.x,r.z,o.all[e].core.position.x,o.all[e].core.position.z)<o.sameTypeRadius||g(r.x,r.z,0,0)<o.innerRingRadius){r=v(o.outerRingRadius,i),a--;continue e}y.position=r}break}o.all.push(e.Core(y))}})();for(let e=0;e<o.total;e++)o.all[e].SpawnCore();o.inScene=!0}},b=()=>{if(o.inScene){for(let e=0;e<o.total;e++)o.all[e].DespawnCore();e.RemoveFromTracker(o.id),o.inScene=!1}};return{singleGen:o,SpawnObjRing:f,DespawnObjRing:b,ToggleSpawn:()=>{o.inScene?b():f()},SetFlag:t=>{if(Array.isArray(t))for(let a in t)o[t[a].flag]=t[a].value,e.SaveToProfile({auxlObject:o.id,type:"singleGen",sub:!1,name:t[a].flag,data:t[a].value});else o[t.flag]=t.value,e.SaveToProfile({auxlObject:o.id,type:"singleGen",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let a in e)t.push(o(e[a]));return t}return o[e]}}})(o,e),this.MultiAssetGen=e=>((e,t)=>{let o=Object.assign({},t);o.inScene=!1,o.maxRadius=t.maxRadius||500,o.style=t.style||"normal",o.assets={},o.assets.tiny=[],o.assets.small=[],o.assets.med=[],o.assets.large=[],o.assets.huge=[];let a=["tiny","small","med","large","huge"];o.grid=[],o.ring0=[],o.ring1=[],o.ring2=[],o.ring3=[],o.ring4=[],o.ring5=[],t.hasOwnProperty("ring")||(o.ring={i0:5,o0:20,i1:15,o1:40,i2:30,o2:60,i3:60,o3:100,i4:80,o4:150,i5:100,o5:200});let i=[],n=[],r=[],s=[],l=[],c=[],d=x("ring5",o.ring.o5,o.ring.i5),p=x("ring4",o.ring.o4,o.ring.i4,d),h=x("ring3",o.ring.o3,o.ring.i3,p),m=x("ring2",o.ring.o2,o.ring.i2,h),u=x("ring1",o.ring.o1,o.ring.i1,m),y=(x("ring0",o.ring.o0,o.ring.i0,u),0),g=0,v=0,f=0,b=0,E=0;for(let e in i)i[e][0]-=o.ring.o5/2,i[e][1]-=o.ring.o5/2,0===i[e][0]&&0===i[e][1]&&(i[e][0]=i[e][1]=o.ring.o5/2);for(let e in n)n[e][0]-=o.ring.o4/2,n[e][1]-=o.ring.o4/2,0===n[e][0]&&0===n[e][1]&&(n[e][0]=n[e][1]=o.ring.o4/2);for(let e in r)r[e][0]-=o.ring.o3/2,r[e][1]-=o.ring.o3/2,0===r[e][0]&&0===r[e][1]&&(r[e][0]=r[e][1]=o.ring.o3/2);for(let e in s)s[e][0]-=o.ring.o2/2,s[e][1]-=o.ring.o2/2,0===s[e][0]&&0===s[e][1]&&(s[e][0]=s[e][1]=o.ring.o2/2);for(let e in l)l[e][0]-=o.ring.o1/2,l[e][1]-=o.ring.o1/2,0===l[e][0]&&0===l[e][1]&&(l[e][0]=l[e][1]=o.ring.o1/2);for(let e in c)c[e][0]-=o.ring.o0/2,c[e][1]-=o.ring.o0/2,0===c[e][0]&&0===c[e][1]&&(c[e][0]=c[e][1]=o.ring.o0/2);function w(e){e.sort((()=>Math.random()-.5))}function x(e,t,o,a){let d,p;p=!!a&&a.center;let h=function*(p,h,m,u){const y=m*m,g=m*Math.SQRT1_2,v=Math.ceil(p/g),f=Math.ceil(h/g);let b=[];if(d=new Array(v*f),a)for(let e in a)d[e]=a[e],b[e]=a[e];u?yield{add:w(u,u)}:yield{add:w(p/2,h/2)};e:for(;b.length;){const e=Math.trunc(Math.random()*b.length),a=b[e],i=Math.random(),n=1e-7;for(let e=0;e<15;++e){const r=2*Math.PI*(i+1*e/15),s=m+n,l=a[0]+s*Math.cos(r),c=a[1]+s*Math.sin(r);if(o<=l&&l<t&&o<=c&&c<t&&E(l,c)){yield{add:w(l,c),parent:a};continue e}}const r=b.pop();e<b.length&&(b[e]=r),yield{remove:a}}function E(e,t){const o=Math.trunc(e/g),a=Math.trunc(t/g),i=Math.max(o-2,0),n=Math.max(a-2,0),r=Math.min(o+3,v),s=Math.min(a+3,f);for(let o=n;o<s;++o){const a=o*v;for(let o=i;o<r;++o){const i=d[a+o];if(i){const o=i[0]-e,a=i[1]-t;if(o*o+a*a<y)return!1}}}return!0}function w(t,o,a){const p=d[v*Math.trunc(o/g)+Math.trunc(t/g)]=[t,o];return b.push(p),"ring5"===e?i.push(p):"ring4"===e?n.push(p):"ring3"===e?r.push(p):"ring2"===e?s.push(p):"ring1"===e?l.push(p):"ring0"===e&&c.push(p),p}}(t,t,o,p);!function e(){h.done=h.next().done,h.done||e()}();let m=[];for(let e in d)d[e]&&m.push(d[e]);return m}w(i),w(n),w(r),w(s),w(l),w(c);const T=()=>{if(o.inScene);else{(()=>{for(let t in a){let d=Object.assign({},o[a[t]]);for(let p in d.objs){let h,m,u,w,x,T,C,D,S,k,R=Object.assign({},d.objs[p]),P=JSON.parse(JSON.stringify(d.objs[p]));R.hasOwnProperty("position")||(R.position=new THREE.Vector3),R.hasOwnProperty("rotation")||(R.rotation=new THREE.Vector3),R.hasOwnProperty("scale")||(R.scale=new THREE.Vector3(1,1,1));for(let p=0;p<d.max/d.objs.length;p++)P.id=R.id+p,d.ranColor&&(k=e.ColorTheoryGen().base,P.material.color=k,P.material.emissive&&(P.material.emissive=k)),d.ranTexture&&(P.material.src=e.patterns[Math.floor(Math.random()*e.patterns.length)]),C=R.rotation.x,D=R.rotation.y,S=R.rotation.z,d.ranRotX&&(C+=360*Math.random()),d.ranRotY&&(D+=360*Math.random()),d.ranRotZ&&(S+=360*Math.random()),P.rotation=new THREE.Vector3(C,D,S),w=R.scale.x,x=R.scale.y,"tall"===o.style&&(x*=40),T=R.scale.z,d.ranScaleX&&(w+=Math.random()*d.scaleFlex),d.ranScaleY&&(x+=Math.random()*d.scaleFlex,d.scaleFlexY&&(x+=Math.random()*d.scaleFlexY)),d.ranScaleZ&&(T+=Math.random()*d.scaleFlex),P.scale=new THREE.Vector3(w,x,T),m=R.position.y,d.ranYPos&&(m+=Math.random()*d.yPosFlex),0===d.rings?E<c.length?(h=c[E][0],u=c[E][1],E++):(h=Math.random()*(2*o.ring.o0)-o.ring.o0+o.ring.i0,u=Math.random()*(2*o.ring.o0)-o.ring.o0+o.ring.i0):1===d.rings?b<l.length?(h=l[b][0],u=l[b][1],b++):(h=Math.random()*(2*o.ring.o1)-o.ring.o1+o.ring.i1,u=Math.random()*(2*o.ring.o1)-o.ring.o1+o.ring.i1):2===d.rings?f<s.length?(h=s[f][0],u=s[f][1],f++):(h=Math.random()*(2*o.ring.o2)-o.ring.o2+o.ring.i2,u=Math.random()*(2*o.ring.o2)-o.ring.o2+o.ring.i2):3===d.rings?v<r.length?(h=r[v][0],u=r[v][1],v++):(h=Math.random()*(2*o.ring.o3)-o.ring.o3+o.ring.i3,u=Math.random()*(2*o.ring.o3)-o.ring.o3+o.ring.i3):4===d.rings?g<n.length?(h=n[g][0],u=n[g][1],g++):(h=Math.random()*(2*o.ring.o4)-o.ring.o4+o.ring.i4,u=Math.random()*(2*o.ring.o4)-o.ring.o4+o.ring.i4):5===d.rings&&(y<i.length?(h=i[y][0],u=i[y][1],y++):(h=Math.random()*(2*o.ring.o5)-o.ring.o5+o.ring.i5,u=Math.random()*(2*o.ring.o5)-o.ring.o5+o.ring.i5)),P.position=new THREE.Vector3(h,m,u),o.assets[a[t]].push(e.Core(P))}}})();for(let e in a){let t=o.assets[a[e]];for(let e in t)t[e].core?t[e].SpawnCore():t[e].layer&&t[e].SpawnLayer()}o.inScene=!0}},C=()=>{if(o.inScene){for(let e in a){let t=o.assets[a[e]];for(let e in t)t[e].core?t[e].DespawnCore():t[e].layer&&t[e].DespawnLayer()}e.RemoveFromTracker(o.id),o.inScene=!1}};return{multiGen:o,SpawnMultiAsset:T,DespawnMultiAsset:C,ToggleSpawn:()=>{o.inScene?C():T()},SetFlag:t=>{if(Array.isArray(t))for(let a in t)o[t[a].flag]=t[a].value,e.SaveToProfile({auxlObject:o.id,type:"multiGen",sub:!1,name:t[a].flag,data:t[a].value});else o[t.flag]=t.value,e.SaveToProfile({auxlObject:o.id,type:"multiGen",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let a in e)t.push(o(e[a]));return t}return o[e]}}})(o,e),this.Teleport=(e,t)=>((e,t,o)=>{let a,i,n={};n.id=t,n.inScene=!1,n.all=[];let r,s,l,c="",d="",p="";for(let t in o)l=e.ColorTheoryGen().base,c="teleport"+t+"Parent",e.teleportParentData.id=c,e.teleportParentData.position=o[t],i=e.Core(e.teleportParentData),d="teleport"+t+"Confirm",e.teleportConfirmData.id=d,e.teleportConfirmData.material.color=l,e.teleportConfirmData.material.emissive=l,r=e.Core(e.teleportConfirmData),p="teleport"+t+"Cancel",e.teleportCancelData.id=p,e.teleportCancelData.material.color=l.compl,e.teleportCancelData.material.emissive=l.compl,s=e.Core(e.teleportCancelData),a={parent:{core:i},child0:{core:r},child1:{core:s}},n.all[t]=e.Layer("teleport"+t,a);const h=()=>{if(n.inScene);else{for(let e in n.all)n.all[e].SpawnLayer();n.inScene=!0}},m=()=>{if(n.inScene){for(let e in n.all)n.all[e].DespawnLayer();e.RemoveFromTracker(n.id),n.inScene=!1}};return{teleport:n,SpawnTeleport:h,DespawnTeleport:m,ToggleSpawn:()=>{n.inScene?m():h()},SetFlag:t=>{if(Array.isArray(t))for(let o in t)n[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:n.id,type:"teleport",sub:!1,name:t[o].flag,data:t[o].value});else n[t.flag]=t.value,e.SaveToProfile({auxlObject:n.id,type:"teleport",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(n(e[o]));return t}return n[e]}}})(o,e,t),this.Book=(e,t)=>((e,t,o)=>{let a=0,i=0,n=0;for(let e in t.pages)n+=Object.keys(t.pages[e]).length-1;let r=t.pages["page"+i].info.timeline,s=t.idle.page0.info.timeline,l=Object.keys(t.pages.page0).length,c=Math.floor(Math.random()*l-1)+1,d=0,p=Object.keys(t.idle.page0).length,h=Math.floor(Math.random()*p-1)+1,m=0;const u=(t,a,i)=>{"self"===t&&(t=o.id);for(let i in e.objGenTracking)a!==e.objGenTracking[i].spawn&&a!==e.objGenTracking[i].altSpawn||e.SpawnTracker(t,"book",o.id);e[t][a]||console.log({msg:"npc book func fail",object:t,func:a}),e[t][a](i)};function*y(i,r){if(a++,a>=n){if(t.jumping)return console.log({msg:"reset",npc:o,bookData:t}),void e[o.id].BackwardJump();o.bookEnd=!0}else o.bookEnd=!1;for(let t in r)if("id"===t||"description"===t||"tags"===t||"nextPage"===t||"prevPage"===t||"timeline"===t);else if("pureFunction"===t)e[t](r[t]);else for(let e in r[t])u(t,e,r[t][e]);yield}function*g(e,o){for(let a in o)e.currentTimeline=a,e.timelineQue.push([a,o[a]]),a===t.jumpTo&&(t.jumping=!1),t.jumping||(yield*y(0,o[a]))}let v=function*(e){e.currentTimeline=0,e.currentEntry=0,e.currentDialog=0,e.pageQue=[],e.timelineQue=[],e.entryQue=[],e.textBubbleQue=[],e.speaker="",e.speaking=!1,e.jumping=!1,e.jumpTo,e.selectJumpMenu,a=0,o.bookEnd=!1,yield*function*(e){for(let t in e.pages)e.currentPage=t,e.pageQue.push([t,e.pages[t]]),yield*g(e,e.pages[t])}(e)}(t);function*f(t,o){for(let t in o)if("id"===t||"description"===t||"tags"===t||"nextPage"===t||"prevPage"===t||"timeline"===t);else if("pureFunction"===t)e[t](o[t]);else for(let e in o[t])u(t,e,o[t][e]);yield}function*b(e,o){for(let a in o)e.currentTimeline=a,e.timelineQue.push([a,o[a]]),a===t.jumpTo&&(t.jumping=!1),t.jumping||(yield*f(0,o[a]))}let E=!1;t.idle&&(E=function*(e){e.currentPage=0,e.currentTimeline=0,e.currentEntry=0,e.currentDialog=0,e.pageQue=[],e.timelineQue=[],e.entryQue=[],e.textBubbleQue=[],e.speaker="",e.speaking=!1,e.jumping=!1,e.jumpTo,e.selectJumpMenu,yield*function*(e){for(let t in e.idle)e.currentPage=t,e.pageQue.push([t,e.idle[t]]),yield*b(e,e.idle[t])}(e)}(t));const w=e=>{"random"===r&&x(e),v.done=v.next().done;let t=setTimeout((()=>{o.loadingTimeline=!1,clearTimeout(t)}),750)},x=t=>{if(t)c=t;else{for(c=Math.floor(Math.random()*l);c>=l-1||c===d;)c=Math.floor(Math.random()*l-1)+1;c<=d&&e[o.id].ResetBookRandom(!0)}D({timeline:"timeline"+c,page:"page"+i}),d=c},T=t=>{if(t)h=t;else{for(h=Math.floor(Math.random()*p)+1;h>=p-1||h===m;)h=Math.floor(Math.random()*p-1)+1;h<=m&&e[o.id].ResetIdleRandom(!0,h)}C({timeline:"timeline"+h,page:"page0"}),m=h},C=({timeline:e,page:o})=>{let a=o||t.currentPage;t.jumpTo=e,t.idle[a][t.jumpTo]&&(t.jumping=!0)},D=({timeline:e,page:a,now:i})=>{let n=a||t.currentPage;t.jumpTo=e,t.pages[n][t.jumpTo]?(t.jumping=!0,o.jumpData={timeline:e,page:n}):console.log({msg:"Failed to jump to",page:a,timeline:e,now:i}),i&&(v.done=v.next().done)};return{bookData:t,book:v,idleBook:E,Init:e=>{if(v.done=v.next().done,e){let t=setTimeout((()=>{D({now:!0,...e}),clearTimeout(t)}),100)}else v.done=v.next().done;o.loadingTimeline=!1},Next:w,NewPage:({page:e,timeline:o})=>{let a;e?a=e:(i+=1,a="page"+i),D({timeline:o||"timeline0",page:a});let n=setTimeout((function(){w(),clearTimeout(n)}),250);r=t.pages["page"+i].info.timeline},Random:x,IdleInit:()=>{E.done=E.next().done,o.loadingTimeline=!1},IdleNext:e=>{"random"===s&&T(e),E.done=E.next().done;let t=setTimeout((function(){o.loadingTimeline=!1,clearTimeout(t)}),1e3)},RandomIdle:T,Jump:D,JumpIdle:C,SelectJump:a=>{let i=(new THREE.Vector3).copy(e[o.id].GetMainNPCEl().getAttribute("position")),n=new THREE.Vector3;t.info.offset&&n.copy(t.info.offset),i.add(n);let r={id:"selectJumpMenu",prompt:a[0],options:{},actions:{},data:e.menuBaseData,cursorObj:o.id,pos:i,method:"JumpClick"};for(let e=1;e<a.length;e++)r.options["option"+(e-1)]=a[e][0],r.actions["action"+(e-1)]=a[e][1];o.selectJumpMenu=e.Menu(r),o.selectJumpMenu.SpawnMenu(),o.selecting=!0},readTimeline:function({page:o,time:a}){for(let i in t.pages[o][a])if("pureFunction"===i)e[i](a[i]);else for(let n in t.pages[o][a][i])e[i][n](t.pages[o][a][i][n])},BookJumpMenu:e=>{o.inventoryButtons={};let t={},a={},i=e.length;Math.ceil(i/8);for(let i in e)t={id:"action1",style:!1,title:e[i][0],description:e[i][0],subMenu:!1,action:{auxlObj:o.id,component:!1,method:"JumpClick",params:e[i][1],menu:"close"}},e[i].action||(t.action=!1),a={id:"action1",style:!1,title:"More",description:"Next Page",subMenu:!1,action:!1},o.inventoryButtons.button1=t}}})(o,e,t),this.SpeechSystem=(e,t,a)=>l(o,e,t),this.NPC=(e,t,a,i,n)=>((e,t,o,a,i,n)=>{let r,s={};s.avatar=Object.assign({},o),s.avatarType,s.parentId,o.SpawnCore?(s.avatarType="core",s.parentId=o.core.id):o.SpawnLayer&&(s.avatarType="layer",s.parentId=o.layer.all.parent.core.core.id),s.id=t,s.special=n||!0,s.inScene=!1,s.speaking=!1,s.jumpData={page:"page0",timeline:"timeline0"},s.bookEnd=!1,s.idle=!1,s.idleSpeech=!1,s.loadingTimeline=!1,a.info.name?s.name=a.info.name:s.name=s.id,s.bubble=Object.assign({},i),s.bubble.blink=!0;let l,c,d=e.SpeechSystem(s.bubble,s);a.idle&&(s.idleSpeech=!0);let p,h,m=a.info.idleDelay||7e3,u=a.info.idleInterval||1e4;const y=(e,t)=>{if("core"===s.avatarType)s.avatar.GetEl().addEventListener(e,t);else{let o=s.avatar.GetAllEl();for(let a in o)o[a].addEventListener(e,t)}},g=(e,t)=>{if("core"===s.avatarType)s.avatar.GetEl().removeEventListener(e,t);else{let o=s.avatar.GetAllEl();for(let a in o)o[a].removeEventListener(e,t)}},v=(e,t)=>{if("core"===s.avatarType)s.avatar.GetEl().addEventListener(e,t);else{let o=s.avatar.GetAllChildEl();for(let a in o)o[a].addEventListener(e,t)}},f=(e,t)=>{if("core"===s.avatarType)s.avatar.GetEl().removeEventListener(e,t);else{let o=s.avatar.GetAllChildEl();for(let a in o)o[a].removeEventListener(e,t)}},b=t=>{if(s.inScene);else{let o=t||!1;r=e.Book(a,s),"core"===s.avatarType?s.avatar.SpawnCore(o):s.avatar.SpawnLayer(o),l=setTimeout((()=>{s.special?v("mouseenter",x):y("mouseenter",x),clearTimeout(l)}),25),s.idleSpeech&&(c=setTimeout((()=>{D(),clearTimeout(c)}),m)),s.inScene=!0}},E=()=>{s.inScene&&(w(),clearTimeout(l),clearTimeout(c),T(),S(),s.selecting&&s.selectJumpMenu&&s.selectJumpMenu.DespawnMenu(),s.speaking?s.special?f("mouseenter",C):g("mouseenter",C):s.special?f("mouseenter",x):g("mouseenter",x),"core"===s.avatarType?s.avatar.DespawnCore():s.avatar.DespawnLayer(),e.RemoveFromTracker(s.id),s.inScene=!1)},w=()=>{e.ClearSpawned(e.bookSpawned[s.id]),delete e.bookSpawned[s.id]},x=()=>{s.idle&&S(),clearTimeout(c),s.speaking=!0,s.special?f("mouseenter",x):g("mouseenter",x),d.Start(),r.Init(),s.special?v("mouseenter",C):y("mouseenter",C)},T=()=>{d.KillStop(),s.special?f("mouseenter",C):g("mouseenter",C)},C=e=>{d.core.on?d.core.speaking||s.loadingTimeline||(s.loadingTimeline=!0,r.Next(e)):s.loadingTimeline||(s.loadingTimeline=!0,r.Next(e))},D=()=>{s.idle=!0,d.Start(),r.IdleInit(),k(),p=setInterval((()=>{k()}),u)},S=()=>{clearInterval(p),s.idle=!1},k=e=>{d.core.on?d.core.speaking||s.loadingTimeline||(s.loadingTimeline=!0,r.IdleNext(e)):s.loadingTimeline||(s.loadingTimeline=!0,r.IdleNext(e))},R=({timeline:e,page:t,now:o})=>{r.Jump({timeline:e,page:t,now:o})},P=(t,o,a)=>{"self"===t&&(t=s.id),e[t][o](a)};return{npc:s,GetAllNPCEl:()=>{let e;return e="core"===s.avatarType?s.avatar.GetEl():s.avatar.GetAllEl(),e},GetMainNPCEl:()=>{let e;return e="core"===s.avatarType?s.avatar.GetEl():s.avatar.GetParentEl(),e},AddNPCEventsAll:y,RemoveNPCEventsAll:g,SpawnNPC:b,DespawnNPC:E,ToggleSpawn:()=>{s.inScene?E():b()},EnableSpeech:x,DisableSpeech:T,EnableIdleSpeech:D,DisableIdleSpeech:S,Speak:({role:e,speech:t})=>{e?"self"===e&&(e=s.name):e=s.name,d.DisplaySpeech({role:e,speech:t})},NextTimeline:C,NewPage:({page:e,timeline:t})=>{r.NewPage({page:e,timeline:t})},ResetSpeech:()=>{if(s.selectJumpMenu&&s.selectJumpMenu.menu.inScene)if(s.selectJumpMenu.DespawnMenu(),"core"===s.bubble.type?s.bubble.GetEl().classList.toggle("clickable",!0):s.bubble.GetParentEl().classList.toggle("clickable",!0),"core"===s.avatarType)s.avatar.GetEl().classList.toggle("clickable",!0);else{let e=s.avatar.GetAllEl();for(let t in e)e[t].classList.toggle("clickable",!0)}T(),w(),r=e.Book(a,s),s.special?v("mouseenter",x):y("mouseenter",x)},ResetBook:t=>{(r.book.done||t)&&(w(),r=e.Book(a,s),r.Init())},ForceResetBook:()=>{w(),r=e.Book(a,s),r.Init()},ResetBookRandom:(t,o)=>{(r.book.done||t)&&(w(),r=e.Book(a,s),r.Init(),C(o))},IdleNextTimeline:k,IdleReset:t=>{(r.idleBook.done||t)&&(w(),r=e.Book(a,s),r.IdleInit())},ResetIdleRandom:(t,o)=>{(r.idleBook.done||t)&&(w(),r=e.Book(a,s),r.IdleInit(),k(o))},UpdateBook:()=>{console.log(a),console.log(a.pages),console.log(a.idle)},JumpClick:e=>{d.Skip();let t=e.getAttribute("result");if(R({timeline:t}),r.Next(),"core"===s.bubble.type?s.bubble.GetEl().classList.toggle("clickable",!0):s.bubble.GetParentEl().classList.toggle("clickable",!0),"core"===s.avatarType)s.avatar.GetEl().classList.toggle("clickable",!0);else{let e=s.avatar.GetAllEl();for(let t in e)e[t].classList.toggle("clickable",!0)}h=setTimeout((function(){s.selectJumpMenu.DespawnMenu(),s.selecting=!1,clearTimeout(h)}),250)},Jump:R,BackwardJump:(t,o)=>{t&&(s.jumpData=t),o&&w(),r=e.Book(a,s),r.Init(s.jumpData)},SelectJump:e=>{r.SelectJump(e)},auxlObjMethod:P,IfElse:t=>{let o=Object.keys(t)[0],a=t[o].cond,i=t[o].ifTrue,n=t[o].ifFalse;if("self"===o&&(o=s.id),e[o].GetFlag)if(e[o].GetFlag(a))for(let e in i)for(let t in i[e])P(e,t,i[e][t]);else for(let e in n)for(let t in n[e])P(e,t,n[e][t]);else if(e[o].GetFlagParent)if(e[o].GetFlagParent(a))for(let e in i)for(let t in i[e])P(e,t,i[e][t]);else for(let e in n)for(let t in n[e])P(e,t,n[e][t])},Switch:t=>{let o=Object.keys(t)[0],a=t[o];"self"===o&&(o=s.id);let i=[];for(let e in a)"cond"===e||"default"===e||i.push(e);if(e[o].GetFlag){let t=e[o].GetFlag(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])P(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])P(e,t,a.default[e][t])}else if(e[o].GetFlagParent){let t=e[o].GetFlagParent(a.cond);for(let e in i)if(t===i[e]){for(let t in a[i[e]])for(let o in a[i[e]][t])P(t,o,a[i[e]][t][o]);return}for(let e in a.default)for(let t in a.default[e])P(e,t,a.default[e][t])}else console.log(o),console.log("Unable to find value"),console.log(a.cond)},SetFlag:t=>{if(Array.isArray(t))for(let o in t)s[t[o].flag]=t[o].value,e.SaveToProfile({auxlObject:s.id,type:"npc",sub:!1,name:t[o].flag,data:t[o].value});else s[t.flag]=t.value,e.SaveToProfile({auxlObject:s.id,type:"npc",sub:!1,name:t.flag,data:t.value})},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(s(e[o]));return t}return s[e]}}})(o,e,t,a,i,n),this.InfoBubble=(e,t,a,i)=>((e,t,o,a,i)=>{let n={};n.id=t;let r=n.id+"bubble",s=n.id+"text";n.parent=o,o.SpawnCore?n.parentType="core":o.SpawnLayer&&(n.parentType="layer"),n.custom={},n.inScene=!1,n.position=new THREE.Vector3(0,.5,0),n.rotation=new THREE.Vector3(0,0,0),n.color=i||"#14d9a4",a&&(a.x?(n.position.x=a.x,n.position.y=a.y,n.position.z=a.z):n.position.y=a),n.infoBubbleData={data:"infoBubbleData",id:r,sources:!1,sounds:{maximize:{src:e.maximize6,autoplay:!0,loop:!1,volume:.75},minimize:{src:e.minimize6,autoplay:!1,loop:!1,volume:.75,on:"spawnOut"}},text:!1,geometry:{primitive:"circle",radius:.3,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:n.color,opacity:1,metalness:.2,roughness:.8,emissive:n.color,emissiveIntensity:.6,side:"double"},position:n.position,rotation:n.rotation,scale:new THREE.Vector3(.01,.01,.01),animations:{spawnin:{property:"scale",from:"0.01 0.01 0.01",to:"1 1 1",dur:1500,delay:500,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!0,enabled:!0},spawnout:{property:"scale",from:"1 1 1",to:"0.01 0.01 0.01",dur:1e3,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},n[r]=e.Core(n.infoBubbleData),n.emotiTextData={data:"emotiTextData",id:s,sources:!1,text:{value:"!",wrapCount:2,color:"#FFFFFF",font:"exo2bold",zOffset:0,side:"double",align:"center",baseline:"center"},geometry:!1,material:!1,position:new THREE.Vector3(.025,.1,.025),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},n[s]=e.Core(n.emotiTextData),n.emotiLayerData={parent:{core:n[r]},child0:{core:n[s]}},n[n.id]=e.Layer(n.id,n.emotiLayerData);const l=()=>{n.inScene||(n[n.id].layer.all.parent.core.core.animations.spawnout={property:"scale",from:"1 1 1",to:"0.01 0.01 0.01",dur:1e3,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0},n[n.id].SpawnLayer(n.parent),n.inScene=!0,n.soundTimeout=setTimeout((()=>{n[n.id].EmitEventParent("spawnOut"),clearTimeout(n.soundTimeout)}),3e3),n.timeout=setTimeout((()=>{c(),clearTimeout(n.timeout)}),4050))},c=()=>{n.inScene&&(n[n.id].DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},d=()=>{n.inScene||(n[n.id].layer.all.parent.core.core.animations.spawnout={property:"scale",from:"1 1 1",to:"0.01 0.01 0.01",dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0,startEvents:"spawnOut"},n[n.id].SpawnLayer(n.parent),n.inScene=!0,m("mouseenter",p))},p=()=>{n.inScene&&(u("mouseenter",p),n[n.id].EmitEventParent("spawnOut"),n.timeout=setTimeout((()=>{c(),e.RemoveFromTracker(n.id),clearTimeout(n.timeout)}),1050))},h=(e,t,o)=>{n[s].core.text.value=e,n[s].core.text.wrapCount=e.length+2,o?(o.x?n[s].core.text.xOffset=o.x:n[s].core.text.xOffset=0,o.x?n[s].core.text.yOffset=o.y:n[s].core.text.yOffset=0):(n[s].core.text.xOffset=0,n[s].core.text.zOffset=0),n[s].core.rotation.z=t||0},m=(e,t)=>{"core"===n.parentType?n.parent.GetEl().addEventListener(e,t):n.parent.GetParentEl().addEventListener(e,t)},u=(e,t)=>{"core"===n.parentType?n.parent.GetEl().removeEventListener(e,t):n.parent.GetParentEl().removeEventListener(e,t)},y=e=>{for(let t in n.custom)if(e.type===t){n.custom[t].rotation?h(n.custom[t].text,n.custom[t].rotation,n.custom[t].offset):h(n.custom[t].text),n.custom[t].alert?d():l();break}},g=()=>{h("!"),l()},v=()=>{h("!"),d()},f=()=>{h("?"),l()},b=()=>{h("?"),d()},E=()=>{h(":)",-90),l()},w=()=>{h("^-^"),l()},x=()=>{h("@"),l()},T=()=>{h("^^"),l()},C=()=>{h('"'),l()},D=()=>{h("*"),l()},S=()=>{h("?"),l()},k=()=>{h("%"),l()},R=()=>{h("zzz"),l()},P=()=>{h("+"),l()},I=()=>{h("~"),l()},M=()=>{h("!"),l()},H=()=>{h("="),l()},L=()=>{h("$"),l()},O=()=>{h("<3\n",90,{x:-.1}),l()},G=()=>{h("#"),l()};return"core"===n.parentType?(0===Object.keys(n.parent.core.components).length&&(n.parent.core.components={}),n.parent.core.components.onspawnrun__emote={cursorObj:n.id,component:null,method:"AddEmotes",params:null},n.parent.core.components.ondespawnrun__emote={cursorObj:n.id,component:null,method:"RemoveEmotes",params:null}):(0===Object.keys(n.parent.layer.all.parent.core.core.components).length&&(n.parent.layer.all.parent.core.core.components={}),n.parent.layer.all.parent.core.core.components.onspawnrun__emote={cursorObj:n.id,component:null,method:"AddEmotes",params:null},n.parent.layer.all.parent.core.core.components.ondespawnrun__emote={cursorObj:n.id,component:null,method:"RemoveEmotes",params:null}),{infoBubble:n,AddEmotes:()=>{m("alert1",v),m("alert2",b),m("emote1",g),m("emote2",f),m("emote3",E),m("emote4",w),m("casual",x),m("happy",T),m("sad",C),m("angry",D),m("confused",S),m("tired",k),m("asleep",R),m("annoyed",P),m("smug",I),m("shocked",M),m("scared",H),m("confident",L),m("love",O),m("shy",G);for(let e in n.custom)m(e,y)},RemoveEmotes:()=>{n.inScene&&(clearTimeout(n.soundTimeout),clearTimeout(n.timeout),c()),u("alert1",v),u("alert2",b),u("emote1",g),u("emote2",f),u("emote3",E),u("emote4",w),u("casual",x),u("happy",T),u("sad",C),u("angry",D),u("confused",S),u("tired",k),u("asleep",R),u("annoyed",P),u("smug",I),u("shocked",M),u("scared",H),u("confident",L),u("love",O),u("shy",G);for(let e in n.custom)u(e,y)},NewBubble:e=>{n.custom[e.eventName]=e}}})(o,e,t,a,i),this.Creature=(e,t,a)=>((e,t,o,a)=>{let i={};i.id=t,i.auxlId=t+"layer",i.bubbleId=t+"bubble",i.parent=o||!1,i.inScene=!1;let n="parent"+i.id,r="head"+i.id,s="eye1Socket"+i.id,l="eyebrow1"+i.id,c="eye1Pupil"+i.id,d="eye1PupilAccent"+i.id,p="eye1Blink"+i.id,h="eye1LidOffset"+i.id,m="eye1Lid"+i.id,u="eye2Socket"+i.id,y="eyebrow2"+i.id,g="eye2Pupil"+i.id,v="eye2PupilAccent"+i.id,f="eye2Blink"+i.id,b="eye2LidOffset"+i.id,E="eye2Lid"+i.id,w="ear1Offset"+i.id,x="ear1"+i.id,T="ear2Offset"+i.id,C="ear2"+i.id,D="body"+i.id,S=(i.id,"leg1"+i.id),k="leg2"+i.id,R="leg3"+i.id,P="leg4"+i.id;i.id,i.custom=a||!1;let I=!1,M=["egg","circle","square","rectangle","triangle"],H=!1,L=["egg","circle","square","rectangle","triangle"],O=!1,G=["*","!","x","&","<3","z"],A=!1,z=["bun","bunny","mouse","ant","horn"];i.custom&&(i.custom.eye&&(I=i.custom.eye),i.custom.pupil&&(H=i.custom.pupil),i.custom.accent&&(O=i.custom.accent),i.custom.ear&&(A=i.custom.ear)),I||(I=M[Math.floor(Math.random()*M.length)]),H||(H=L[Math.floor(Math.random()*L.length)]),O||(O=G[Math.floor(Math.random()*G.length)]),A||(A=z[Math.floor(Math.random()*z.length)]),i.position=new THREE.Vector3(0,3,-3),i.rotation=new THREE.Vector3(0,0,0),i.scale=new THREE.Vector3(1,1,1),i.custom&&(a.offset&&(a.offset.x?(i.position.x=a.offset.x,i.position.y=a.offset.y,i.position.z=a.offset.z):i.position.z=a.offset),a.rotation&&(a.rotation.x?(i.rotation.x=a.rotation.x,i.rotation.y=a.rotation.y,i.rotation.z=a.rotation.z):i.rotation.y=a.rotation),a.scale&&(a.scale.x?(i.scale.x=a.scale.x,i.scale.y=a.scale.y,i.scale.z=a.scale.z):i.scale.y=a.scale)),i.color=e.ColorTheoryGen(!1,!0),i.pupilColor=i.color.base,i.pupilMaterial={shader:"standard",color:i.pupilColor,emissive:i.pupilColor,emissiveIntensity:.5,opacity:1,side:"double",metalness:.2,roughness:.8},i.skinColor0=i.color.splitCompl[1],i.skinMaterial={shader:"standard",color:i.skinColor0,emissive:i.skinColor0,emissiveIntensity:.5,opacity:1,side:"double",metalness:.2,roughness:.8},i.skinColor1=e.ColorTheoryGen(i.skinColor0).base,i.browMaterial={shader:"standard",color:i.skinColor1,emissive:i.skinColor1,emissiveIntensity:.5,opacity:1,side:"double",metalness:.2,roughness:.8},i.accentColor="white",i.accentText={value:O,wrapCount:3,color:i.accentColor,font:"exo2bold",side:"double",align:"center",baseline:"center",zOffset:.0175};let V=Math.random();i.custom&&("small"===a.browSize?V=0:"medium"===a.browSize?V=.5:"large"===a.browSize&&(V=1)),i.browThickness=.04*V+.01;let F=Math.random();i.custom&&("small"===a.eyeSize?F=0:"medium"===a.eyeSize?F=.5:"large"===a.eyeSize&&(F=1));let U=.08*F+.125,j={primitive:"cylinder",radius:U,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:32,thetaStart:0,thetaLength:360},B=new THREE.Vector3(.75,1,1),N={primitive:"cylinder",radius:U,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},_=new THREE.Vector3(0,0,U),q=new THREE.Vector3(0,0,-1*U),W={primitive:"cylinder",radius:U,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},J={primitive:"cylinder",radius:U/3,height:.025,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},Z=.0575*F+.1,K={primitive:"cylinder",radius:Z,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},X=new THREE.Vector3(1,1,1),Y={primitive:"cylinder",radius:Z,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},Q=new THREE.Vector3(0,0,Z),$=new THREE.Vector3(0,0,-1*Z),ee={primitive:"cylinder",radius:Z,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},te={primitive:"cylinder",radius:Z/3,height:.025,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},oe=.125*F+.175,ae={primitive:"box",depth:oe,width:oe,height:.015},ie=new THREE.Vector3(1,1,1),ne={primitive:"box",depth:oe,width:oe,height:.015},re=new THREE.Vector3(0,0,oe),se=new THREE.Vector3(0,0,-1*oe),le={primitive:"box",depth:oe,width:oe,height:.015},ce={primitive:"box",depth:oe/3,width:oe/3,height:.015},de=.25*F+.225,pe=.66*de,he={primitive:"box",depth:de,width:pe,height:.015},me=new THREE.Vector3(1,1,1),ue={primitive:"box",depth:de,width:pe,height:.015},ye=new THREE.Vector3(0,0,pe),ge=new THREE.Vector3(0,0,-1*pe),ve={primitive:"box",depth:de,width:pe,height:.015},fe={primitive:"box",depth:de/3,width:pe/3,height:.015},be=.15*F+.1,Ee={primitive:"triangle",vertexA:new THREE.Vector3(0,0,be),vertexB:new THREE.Vector3(-1*be,0,-1*be),vertexC:new THREE.Vector3(be,0,-1*be)},we=new THREE.Vector3(1,1.5,1),xe={primitive:"triangle",vertexA:new THREE.Vector3(0,0,be),vertexB:new THREE.Vector3(-1*be,0,-1*be),vertexC:new THREE.Vector3(be,0,-1*be)},Te=new THREE.Vector3(0,.05,be),Ce=new THREE.Vector3(0,0,-1*be),De={primitive:"triangle",vertexA:new THREE.Vector3(0,0,be),vertexB:new THREE.Vector3(-1*be,0,-1*be),vertexC:new THREE.Vector3(be,0,-1*be)},Se={primitive:"triangle",vertexA:new THREE.Vector3(0,0,.33*be),vertexB:new THREE.Vector3(-.33*be,0,-.33*be),vertexC:new THREE.Vector3(.33*be,0,-.33*be)},ke=.05*F+.075;"egg"===H?i.pupilShape=J:"circle"===H?i.pupilShape=te:"square"===H?i.pupilShape=ce:"rectangle"===H?i.pupilShape=fe:"triangle"===H&&(i.pupilShape=Se),"egg"===I?(i.socketShape=j,i.socketScale=B,i.lidShape=N,i.lidPosition=_,i.lidOffsetPosition=q,i.blinkShape=W,i.blinkAnim={property:"object3D.scale.z",from:.65,to:1.3,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"flux",pauseEvents:"stopFlux"},i.wideAnim={property:"object3D.scale.z",to:.5,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"wide"},i.normalAnim={property:"object3D.scale.z",to:.65,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"normal"},i.squintAnim={property:"object3D.scale.z",to:1.3,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"squint"},i.tiredAnim={property:"object3D.scale.z",to:1.1,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"tired"}):"circle"===I?(i.socketShape=K,i.socketScale=X,i.lidShape=Y,i.lidPosition=Q,i.lidOffsetPosition=$,i.blinkShape=ee,i.blinkAnim={property:"object3D.scale.z",from:.65,to:1.3,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}):"square"===I?(i.socketShape=ae,i.socketScale=ie,i.lidShape=ne,i.lidPosition=re,i.lidOffsetPosition=se,i.blinkShape=le,i.blinkAnim={property:"object3D.scale.z",from:.45,to:.8,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}):"rectangle"===I?(i.socketShape=he,i.socketScale=me,i.lidShape=ue,i.lidPosition=ye,i.lidOffsetPosition=ge,i.blinkShape=ve,i.blinkAnim={property:"object3D.scale.z",from:.35,to:.75,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}):"triangle"===I&&(i.socketShape=Ee,i.socketScale=we,i.lidShape=xe,i.lidPosition=Te,i.lidOffsetPosition=Ce,i.blinkShape=De,i.blinkAnim={property:"object3D.scale.z",from:.325,to:.6,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0});let Re=Math.random();i.custom&&("small"===a.earSize?Re=0:"medium"===a.earSize?Re=.5:"large"===a.earSize&&(Re=1));let Pe=.15*Re+.1,Ie=new THREE.Vector3(-.25,.5,.4),Me=new THREE.Vector3(.25,.5,.4),He=new THREE.Vector3(.9,1,.9),Le={primitive:"cylinder",radius:Pe,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},Oe=new THREE.Vector3(0,0,.175),Ge=new THREE.Vector3(1,1,1),Ae=.1*Re+.15,ze=new THREE.Vector3(-.25,.5,.4),Ve=new THREE.Vector3(.25,.5,.4),Fe=new THREE.Vector3(.5,1,.5),Ue={primitive:"cylinder",radius:Ae,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},je=new THREE.Vector3(0,0,.175),Be=new THREE.Vector3(1,1,5),Ne=.175*Re+.075,_e=new THREE.Vector3(-.125,.51,.4),qe=new THREE.Vector3(.125,.51,.4),We=new THREE.Vector3(.5,1,.5),Je={primitive:"cylinder",radius:Ne,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},Ze=new THREE.Vector3(0,0,.175),Ke=new THREE.Vector3(.35,.35,6),Xe=.2*Re+.125,Ye=new THREE.Vector3(-.25,.5,.4),Qe=new THREE.Vector3(.25,.5,.4),$e=new THREE.Vector3(.5,1,.5),et={primitive:"cylinder",radius:Xe,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:90,thetaLength:180},tt=new THREE.Vector3(0,0,.175),ot=new THREE.Vector3(.4,.4,2),at=.15*Re+.1,it=new THREE.Vector3(-.325,.625,.4),nt=new THREE.Vector3(.325,.625,.4),rt=new THREE.Vector3(1,1,1),st={primitive:"cylinder",radius:at,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},lt=new THREE.Vector3(0,0,.175),ct=new THREE.Vector3(1,1,1);"bun"===A?(i.ear1OffsetPos=Ie,i.ear2OffsetPos=Me,i.earOffsetScale=He,i.earShape=Le,i.earPos=Oe,i.earScale=Ge):"bunny"===A?(i.ear1OffsetPos=ze,i.ear2OffsetPos=Ve,i.earOffsetScale=Fe,i.earShape=Ue,i.earPos=je,i.earScale=Be):"mouse"===A?(i.ear1OffsetPos=it,i.ear2OffsetPos=nt,i.earOffsetScale=rt,i.earShape=st,i.earPos=lt,i.earScale=ct):"ant"===A?(i.ear1OffsetPos=_e,i.ear2OffsetPos=qe,i.earOffsetScale=We,i.earShape=Je,i.earPos=Ze,i.earScale=Ke):"horn"===A&&(i.ear1OffsetPos=Ye,i.ear2OffsetPos=Qe,i.earOffsetScale=$e,i.earShape=et,i.earPos=tt,i.earScale=ot),i.faceParentData={data:"faceParentData",id:n,sources:!1,text:!1,geometry:!1,material:!1,position:i.position,rotation:i.rotation,scale:i.scale,animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},i[n]=e.Core(i.faceParentData),i.headData={data:"headData",id:r,sources:!1,text:!1,geometry:{primitive:"sphere",radius:.4,phiStart:0,phiLength:180,segmentsWidth:16,segmentsHeight:16,thetaStart:0,thetaLength:180},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.15,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},i[r]=e.Core(i.headData),i.faceEye1SocketData={data:"faceEye1SocketData",id:s,sources:!1,text:!1,geometry:i.socketShape,material:{shader:"standard",color:"#fcfafd",emissive:"#fcfafd",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(-.15,.1,.4),rotation:new THREE.Vector3(90,0,0),scale:i.socketScale,animations:!1,mixins:!1,classes:["a-ent"],components:!1},i[s]=e.Core(i.faceEye1SocketData),i.faceEye2SocketData=e.CoreDataFromTemplate(i.faceEye1SocketData,{id:u,position:new THREE.Vector3(.15,.1,.4)},!0),i[u]=e.Core(i.faceEye2SocketData),i.faceEye1PupilData={data:"faceEye1PupilData",id:c,sources:!1,text:!1,geometry:i.pupilShape,material:i.pupilMaterial,position:new THREE.Vector3(0,.01,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{lookdown:{property:"position",to:new THREE.Vector3(0,.01,.07),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookDown"},lookup:{property:"position",to:new THREE.Vector3(0,.01,-.07),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookUp"},lookright:{property:"position",to:new THREE.Vector3(.05,.01,0),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookRight"},lookleft:{property:"position",to:new THREE.Vector3(-.05,.01,0),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookLeft"}},mixins:!1,classes:["a-ent"],components:!1},i[c]=e.Core(i.faceEye1PupilData),i.faceEye2PupilData=e.CoreDataFromTemplate(i.faceEye1PupilData,{id:g},!0),i[g]=e.Core(i.faceEye2PupilData),i.faceEye1PupilAccentData={data:"faceEye1PupilAccentData",id:d,sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(ke,ke,ke),animations:!1,mixins:!1,classes:["a-ent"],components:!1},i[d]=e.Core(i.faceEye1PupilAccentData),i.faceEye2PupilAccentData=e.CoreDataFromTemplate(i.faceEye1PupilAccentData,{id:v},!0),i[v]=e.Core(i.faceEye2PupilAccentData),i.faceEyebrow1Data={data:"faceEyebrow1Data",id:l,sources:!1,text:!1,geometry:{primitive:"box",depth:i.browThickness,width:.25,height:.025},material:i.browMaterial,position:new THREE.Vector3(0,0,-.25),rotation:new THREE.Vector3(0,10,0),scale:new THREE.Vector3(1,1,1),animations:{updown:{property:"object3D.position.z",from:-.3,to:-.225,dur:2e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:!1},i[l]=e.Core(i.faceEyebrow1Data),i.faceEyebrow2Data=e.CoreDataFromTemplate(i.faceEyebrow1Data,{id:y,rotation:new THREE.Vector3(0,-10,0)},!0),i[y]=e.Core(i.faceEyebrow2Data),i.faceEye1LidOffsetData={data:"faceEye1LidOffsetData",id:h,sources:!1,text:!1,geometry:!1,material:!1,position:i.lidOffsetPosition,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{flux:i.blinkAnim,wide:i.wideAnim,normal:i.normalAnim,squint:i.squintAnim,tired:i.tiredAnim},mixins:!1,classes:["a-ent"],components:!1},i[h]=e.Core(i.faceEye1LidOffsetData),i.faceEye2LidOffsetData=e.CoreDataFromTemplate(i.faceEye1LidOffsetData,{id:b},!0),i[b]=e.Core(i.faceEye2LidOffsetData),i.faceEye1LidData={data:"faceEye1LidData",id:m,sources:!1,text:!1,geometry:i.lidShape,material:i.skinMaterial,position:i.lidPosition,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1.06,4,1.06),animations:!1,mixins:!1,classes:["a-ent"],components:!1},i[m]=e.Core(i.faceEye1LidData),i.faceEye2LidData=e.CoreDataFromTemplate(i.faceEye1LidData,{id:E},!0),i[E]=e.Core(i.faceEye2LidData),i.faceEye1BlinkData={data:"faceEye1BlinkData",id:p,sources:!1,text:!1,geometry:i.blinkShape,material:i.skinMaterial,position:new THREE.Vector3(0,.05,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1.05,1.05,1.05),animations:{blinkin:{property:"visible",from:!1,to:!0,dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkout:{property:"visible",from:!0,to:!1,dur:1,delay:250,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},close:{property:"visible",from:!1,to:!0,dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"close"},open:{property:"visible",from:!0,to:!1,dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"open"}},mixins:!1,classes:["a-ent"],components:{visible:!1}},i[p]=e.Core(i.faceEye1BlinkData),i.faceEye2BlinkData=e.CoreDataFromTemplate(i.faceEye1BlinkData,{id:f},!0),i[f]=e.Core(i.faceEye2BlinkData),i.faceEar1OffsetData={data:"faceEar1OffsetData",id:w,sources:!1,text:!1,geometry:!1,material:!1,position:i.ear1OffsetPos,rotation:new THREE.Vector3(90,0,0),scale:i.earOffsetScale,animations:!1,mixins:!1,classes:["a-ent"],components:!1},i[w]=e.Core(i.faceEar1OffsetData),i.faceEar2OffsetData=e.CoreDataFromTemplate(i.faceEar1OffsetData,{id:T,position:i.ear2OffsetPos},!0),i[T]=e.Core(i.faceEar2OffsetData),i.faceEar1Data={data:"faceEar1Data",id:x,sources:!1,text:!1,geometry:i.earShape,material:i.skinMaterial,position:i.earPos,rotation:new THREE.Vector3(0,30,0),scale:i.earScale,animations:{twitch:{property:"object3D.rotation.y",from:25,to:35,dur:3e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:!1},i[x]=e.Core(i.faceEar1Data),i.faceEar2Data=e.CoreDataFromTemplate(i.faceEar1Data,{id:C,rotation:new THREE.Vector3(0,-30,0),animations:{twitch:{property:"object3D.rotation.y",from:-25,to:-35,dur:3e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}}},!0),i[C]=e.Core(i.faceEar2Data),i.bodyData={data:"bodyData",id:D,sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.4,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},i[D]=e.Core(i.bodyData),i.legData={data:"legData",id:"leg",sources:!1,text:!1,geometry:{primitive:"cone",radiusBottom:0,radiusTop:.15,height:.2,openEnded:!1,segmentsHeight:4,segmentsRadial:8,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(-.25,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},i.leg1Data=e.CoreDataFromTemplate(i.legData,{id:S},!0),i[S]=e.Core(i.leg1Data),i.leg2Data=e.CoreDataFromTemplate(i.legData,{id:k,position:new THREE.Vector3(.25,-.25,0)},!0),i[k]=e.Core(i.leg2Data),i.leg3Data=e.CoreDataFromTemplate(i.legData,{id:R,position:new THREE.Vector3(0,-.25,-.25)},!0),i[R]=e.Core(i.leg3Data),i.leg4Data=e.CoreDataFromTemplate(i.legData,{id:P,position:new THREE.Vector3(0,-.25,.25)},!0),i[P]=e.Core(i.leg4Data),i.faceLayerData={parent:{core:i[n]},child0:{parent:{core:i[r]},child0:{parent:{core:i[s]},child0:{core:i[l]},child1:{parent:{core:i[c]},child0:{core:i[d]}},child2:{core:i[p]},child3:{parent:{core:i[h]},child0:{core:i[m]}}},child1:{parent:{core:i[u]},child0:{core:i[y]},child1:{parent:{core:i[g]},child0:{core:i[v]}},child2:{core:i[f]},child3:{parent:{core:i[b]},child0:{core:i[E]}}},child2:{parent:{core:i[w]},child0:{core:i[x]}},child3:{parent:{core:i[T]},child0:{core:i[C]}}},child1:{parent:{core:i[D]},child0:{core:i[S]},child1:{core:i[k]},child2:{core:i[R]},child3:{core:i[P]}}},e[i.auxlId]=e.Layer(i.auxlId,i.faceLayerData),e[i.bubbleId]=e.InfoBubble(i.bubbleId,e[i.auxlId],.75,i.color.base);const dt=()=>{i[h].EmitEvent("normal"),i[b].EmitEvent("normal"),e[i.auxlId].EmitEventParent("casual")},pt=()=>{i[h].EmitEvent("wide"),i[b].EmitEvent("wide"),e[i.auxlId].EmitEventParent("happy")},ht=()=>{i[h].EmitEvent("squint"),i[b].EmitEvent("squint"),e[i.auxlId].EmitEventParent("sad")},mt=()=>{i[h].EmitEvent("squint"),i[b].EmitEvent("squint"),e[i.auxlId].EmitEventParent("angry")},ut=()=>{i[h].EmitEvent("wide"),i[b].EmitEvent("squint"),e[i.auxlId].EmitEventParent("confused")},yt=()=>{i[h].EmitEvent("tired"),i[b].EmitEvent("tired"),e[i.auxlId].EmitEventParent("tired")},gt=()=>{i[p].EmitEvent("close"),i[f].EmitEvent("close"),e[i.auxlId].EmitEventParent("asleep")},vt=()=>{i[p].EmitEvent("open"),i[f].EmitEvent("open"),e[i.auxlId].EmitEventParent("shocked")},ft=()=>{i[h].EmitEvent("normal"),i[b].EmitEvent("normal"),e[i.auxlId].EmitEventParent("annoyed")},bt=()=>{i[h].EmitEvent("squint"),i[b].EmitEvent("squint"),e[i.auxlId].EmitEventParent("smug")},Et=()=>{i[h].EmitEvent("wide"),i[b].EmitEvent("wide"),e[i.auxlId].EmitEventParent("shocked")},wt=()=>{i[h].EmitEvent("wide"),i[b].EmitEvent("wide"),e[i.auxlId].EmitEventParent("scared")},xt=()=>{i[h].EmitEvent("normal"),i[b].EmitEvent("normal"),e[i.auxlId].EmitEventParent("confident")},Tt=()=>{i[h].EmitEvent("wide"),i[b].EmitEvent("wide"),e[i.auxlId].EmitEventParent("love")},Ct=()=>{i[h].EmitEvent("squint"),i[b].EmitEvent("squint"),e[i.auxlId].EmitEventParent("shy")};return{creature:i,SpawnCreature:()=>{i.inScene||(e[i.auxlId].SpawnLayer(i.parent),(()=>{let e=.25;i.blinkInterval=setInterval((()=>{Math.random()>=e?(i[p].EmitEvent("blink"),i[f].EmitEvent("blink"),e=.25):e+=.25}),3e3)})(),i.inScene=!0)},DespawnCreature:()=>{i.inScene&&(clearInterval(i.blinkInterval),clearTimeout(i.accentTimeout),clearTimeout(i.emoteTimeout),clearInterval(i.intervalTest),clearTimeout(i.timeoutTest),e[i.auxlId].DespawnLayer(),i.inScene=!1)},Emote:e=>{console.log(e),"casual"===e?dt():"happy"===e?pt():"sad"===e?ht():"angry"===e?mt():"confused"===e?ut():"tired"===e?yt():"asleep"===e?gt():"wakeUp"===e?vt():"annoyed"===e?ft():"smug"===e?bt():"shocked"===e?Et():"scared"===e?wt():"confident"===e?xt():"love"===e?Tt():"shy"===e&&Ct()}}})(o,e,t,a),this.Collision=()=>c(o),this.GridLayout=e=>((e,t)=>{let o=Object.assign({},t);o.inScene=!1,o.current=!1,o.type,o.objInfo="single",o.coreData?(o.type="coreData",Array.isArray(o.coreData)&&(o.objInfo="array")):o.core?(o.type="core",Array.isArray(o.core)&&(o.objInfo="array")):o.layerData?(o.type="layerData",Array.isArray(o.layerData)&&(o.objInfo="array")):o.layer&&(o.type="layer",Array.isArray(o.layer)&&(o.objInfo="array")),o.objs=[],o.amount=0;for(let e in o.grids)o.grids[e].length>o.amount&&(o.amount=o.grids[e].length);return"single"===o.objInfo?(()=>{for(let t=0;t<o.amount;t++){let a={},i={};"coreData"===o.type?(a=e.CoreDataFromTemplate(o.coreData,{id:o.id+t},!0),i=e.Core(a),o.objs.push(i)):"core"===o.type?(i=e.CoreFromTemplate(o.core,{id:o.id+t},!0),o.objs.push(i)):"layerData"===o.type?(a=e.LayerDataFromTemplate(o.layerData,{id:o.id+t},!1,!0),i=e.Layer(o.id+"layer",a),o.objs.push(i)):"layer"===o.type&&(i=e.LayerFromTemplate(o.layer,o.id+t,{id:o.id+t},!1,!0),o.objs.push(i))}})():(()=>{let t=0,a=1;"coreData"===o.type?a=o.coreData.length:"core"===o.type?a=o.core.length:"layerData"===o.type?a=o.layerData.length:"layer"===o.type&&(a=o.layer.length);for(let i=0;i<o.amount;i++){let n={},r={};"coreData"===o.type?(n=e.CoreDataFromTemplate(o.coreData[t],{id:o.id+i},!0),r=e.Core(n),o.objs.push(r)):"core"===o.type?(r=e.CoreFromTemplate(o.core[t],{id:o.id+i},!0),o.objs.push(r)):"layerData"===o.type?(n=e.LayerDataFromTemplate(o.layerData[t],{id:o.id+i},!1,!0),r=e.Layer(o.id+"layer",n),o.objs.push(r)):"layer"===o.type&&(r=e.LayerFromTemplate(o.layer[t],o.id+i,{id:o.id+i},!1,!0),o.objs.push(r)),t++,t>=a&&(t=0)}})(),{gridLayout:o,SpawnGridLayout:e=>{if(o.inScene);else{(e=>{for(let t in o.grids[e])"coreData"===o.type||"core"===o.type?o.objs[t].core.grid=o.grids[e][t]:"data"!==o.type&&"core"!==o.type||(o.objs[t].layer.grid=o.grids[e][t])})(e);for(let t in o.grids[e])"coreData"===o.type||"core"===o.type?o.objs[t].SpawnCoreOnGrid():"layerData"!==o.type&&"layer"!==o.type||o.objs[t].SpawnLayerOnGrid();o.current=e,o.inScene=!0}},DespawnGridLayout:()=>{if(o.inScene){for(let e in o.grids[o.current])"coreData"===o.type||"core"===o.type?o.objs[e].DespawnCore():"layerData"!==o.type&&"layer"!==o.type||o.objs[e].DespawnLayer();o.current=!1,o.inScene=!1,e.RemoveFromTracker(o.id)}}}})(o,e),this.Gate=(e,t,a)=>((e,t,o,a)=>{let i={};i.id=t,i.object=o,i.objType,i.object.core?i.objType="core":i.object.core&&(i.objType="layer"),i.direction=a,i.directions=[],i.inScene=!1,i.open=!1;const n=e=>{e&&(i.direction=e,i.directions=[],"forward"===i.direction?(i.directions.push("forwardright"),i.directions.push("forwardleft"),i.directions.push("forward")):"reverse"===i.direction?(i.directions.push("reverseright"),i.directions.push("reverseleft"),i.directions.push("reverse")):"right"===i.direction?(i.directions.push("forwardright"),i.directions.push("reverseright"),i.directions.push("right")):"left"===i.direction&&(i.directions.push("reverseleft"),i.directions.push("forwardleft"),i.directions.push("left"))),"core"===i.objType?(0===Object.keys(i.object.core.components).length&&(i.object.core.components={}),i.object.core.components.oneventrun__closegate={event:"triggerExit",cursorObj:i.id,component:"null",method:"CloseGate",params:"null"}):"layer"===i.objType&&(Object.keys(0===i.object.layer.all.parent.core.core.components.length)&&(i.object.layer.all.parent.core.core.components={}),i.object.layer.all.parent.core.core.components.oneventrun__closegate={event:"triggerExit",cursorObj:i.id,component:"null",method:"CloseGate",params:"null"}),i.open=!0},r=()=>{i.inScene||("core"===i.objType?i.object.SpawnCoreOnGrid():"layer"===i.objType&&i.object.SpawnLayerOnGrid(),i.inScene=!0)},s=()=>{i.inScene&&("core"===i.objType?i.object.DespawnCore():"layer"===i.objType&&i.object.DespawnLayer(),i.inScene=!1)},l=()=>{i.open||(console.log("opening gate"),s(),"core"===i.objType?(i.object.core.grid.collide=!1,i.object.core.grid.trigger=!0,i.object.core.material.opacity=0):"layer"===i.objType&&(i.object.layer.all.parent.core.core.grid.collide=!1,i.object.layer.all.parent.core.core.grid.trigger=!0,i.object.layer.all.parent.core.core.material.opacity=0),n(),r())};return n(i.direction),{gate:i,SpawnGate:r,DespawnGate:()=>{i.inScene&&("core"===i.objType?i.object.DespawnCore():"layer"===i.objType&&i.object.DespawnLayer(),i.inScene=!1,e.RemoveFromTracker(i.id))},CloseGate:()=>{if(i.open)for(let t in i.directions)if(e.player.layer.gridDirection===i.directions[t]){console.log("closing gate"),"core"===i.objType?(i.object.core.grid.trigger=!1,i.object.core.grid.collide=!0,delete i.object.core.components.oneventrun__closegate,i.object.core.material.opacity=1):"layer"===i.objType&&(i.object.layer.all.parent.core.core.grid.trigger=!1,i.object.layer.all.parent.core.core.grid.collide=!0,delete i.object.layer.all.parent.core.core.components.oneventrun__closegate,i.object.layer.all.parent.core.core.material.opacity=1),s(),r(),i.open=!1;let e=setTimeout((()=>{console.log("Re-opening Gate"),l(),clearTimeout(e)}),3e3)}},OpenGate:l,ResetGate:n}})(o,e,t,a),this.Constraints=(e,t,o)=>((e,t,o,a)=>{let i={};i.on=a||!1,i.core=t,i.type=o.type||"auxspring",i.to=o.to||"playerRig",i.id="constraint"+t.id+Math.floor(1e7*Math.random().toFixed(8)),i.minLength=0,i.maxLength=20,i.pivotA=new THREE.Vector3(0,0,0),i.pivotB=new THREE.Vector3(0,0,0),i.axisA=new THREE.Vector3(0,0,0),i.axisB=new THREE.Vector3(0,0,0),i.maxForce=1e6,i.restLength=o.restLength||1,i.damping=o.damping||.5,i.stiffness=o.stiffness||10,i.collideConnected=!0,i.always=!0;const n=e=>{e&&(e.type&&(i.type=e.type),e.restLength&&(i.restLength=e.restLength),e.damping&&(i.damping=e.damping),e.stiffness&&(i.stiffness=e.stiffness),e.maxForce&&(i.maxForce=e.maxForce)),"lock"===i.type?i.connect={name:"auxconstraint__"+i.id,type:i.type,connectTo:i.to,maxForce:1e6,collideConnected:i.collideConnected,always:i.always}:"pointToPoint"===i.type?i.connect={name:"auxconstraint__"+i.id,type:i.type,connectTo:i.to,pivotA:i.pivotA,pivotB:i.pivotB,maxForce:i.maxForce,collideConnected:i.collideConnected,always:i.always}:"coneTwist"===i.type||"hinge"===i.type?i.connect={name:"auxconstraint__"+i.id,type:i.type,connectTo:i.to,pivotA:i.pivotA,pivotB:i.pivotB,axisA:i.axisA,axisB:i.axisB,maxForce:i.maxForce,collideConnected:i.collideConnected,always:i.always}:"auxspring"===i.type&&(i.connect={name:"auxspring__"+i.id,connectTo:i.to,restLength:i.restLength,damping:i.damping,stiffness:i.stiffness,collideConnected:i.collideConnected,always:i.always})};n(o);const r=e=>{n(e),i.core.core.components[i.connect.name]=i.connect,i.core.ChangeSelf({property:i.connect.name,value:i.connect},!0)};return i.on&&r(),{constraint:i,Update:n,Connect:r,Disconnect:()=>{i.core.RemoveComponent(i.connect.name)},Disable:()=>{delete i.core.core.components[i.connect.name]}}})(0,e,t,o),this.One=(e,t)=>d(o,e,t),this.BuildIn3D=()=>(e=>{let t={id:"build"};return t.player=e.player.GetPlayerInfo(),t.core={},t.core.data={},t.core.made=[],t.layer={},t.objGen={},t.null={},t.templates={},t.core.blank={data:"blankData",id:"blank",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},t.states=["ready","building","editing","deleting","settings"],t.state=t.states[0],t.building={},t.building.current=!1,t.building.prepped=!1,t.building.building=!1,t.buildCoreData={data:"buildCoreData",id:"buildCore",sources:!1,text:{value:"Menu",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:.9},geometry:{primitive:"circle",radius:.25,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#b011c4",opacity:.9,metalness:.2,roughness:.8,emissive:"#b011c4",emissiveIntensity:.4,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},t.buildMenuData={info:{id:"buildMenu",buttonData:t.buildCoreData,hoverData:e.buildHoverData,title:"Build Mode",description:"Build objects.",layout:"circleUp",posOffset:new THREE.Vector3(0,0,.11),offset:-1.425,parent:"ghostParent",stare:!1},menu0:{button0:{id:"subMenu1",style:!1,title:"Build",description:"Build a new object.",subMenu:"menu1",action:!1},button1:{id:"subMenu2",style:!1,title:"Edit",description:"Edit an object in-scene.",subMenu:"menu22",action:!1},button2:{id:"subMenu3",style:!1,title:"Delete",description:"Delete an object in-scene.",subMenu:"menu23",action:!1},button3:{id:"subMenu4",style:!1,title:"Settings",description:"Configure system settings.",subMenu:"menu24",action:!1}},menu1:{button0:{id:"subMenu2",style:!1,title:"Core",description:"Build a Core object.",subMenu:"menu2",action:!1},button1:{id:"subMenu3",style:!1,title:"Layer",description:"Build a Layer object.",subMenu:"end",action:!1},button2:{id:"subMenu4",style:!1,title:"ObjGen",description:"Build an object.",subMenu:"end",action:!1},button3:{id:"subMenu5",style:!1,title:"Null",description:"Build a Null object.",subMenu:"end",action:!1},button4:{id:"subMenu6",style:!1,title:"Templates",description:"Build a from a Template.",subMenu:"end",action:!1}},menu2:{button0:{id:"subMenu0",style:!1,title:"Generate",description:"Generate a default Core object.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"StartBuilding",params:null,menu:"stay"}},button1:{id:"subMenu1",style:!1,title:"Name",description:"Update core Name.",subMenu:"coreName",action:!1},button2:{id:"subMenu2",style:!1,title:"Geometry",description:"Update core Geometry.",subMenu:"coreGeometry",action:!1},button3:{id:"subMenu3",style:!1,title:"Material",description:"Update core Material.",subMenu:"coreMaterial",action:!1},button4:{id:"subMenu4",style:!1,title:"Text",description:"Update core Text.",subMenu:"coreText",action:!1},button5:{id:"subMenu5",style:!1,title:"Position",description:"Update core Position.",subMenu:"corePosition",action:!1},button6:{id:"subMenu6",style:!1,title:"More",description:"More options.",subMenu:"menu3",action:!1}},menu3:{button0:{id:"subMenu0",style:!1,title:"Rotation",description:"Update core Rotation.",subMenu:"coreRotation",action:!1},button1:{id:"subMenu1",style:!1,title:"Scale",description:"Update core Scale.",subMenu:"coreScale",action:!1},button2:{id:"subMenu2",style:!1,title:"Animations",description:"Update core Animations.",subMenu:"coreAnimations",action:!1},button3:{id:"subMenu3",style:!1,title:"Clickable",description:"Toggle core to be clickable in-scene.",subMenu:"coreClickable",action:!1},button4:{id:"subMenu4",style:!1,title:"Components",description:"Update core Components.",subMenu:"coreComponents",action:!1},button5:{id:"subMenu5",style:!1,title:"Done",description:"Finalize core updates.",subMenu:"coreDone",action:!1}},coreName:{button0:{id:"action1",style:!1,title:"Update Name",description:"Update the cores name and id.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateName",params:null,menu:"stay"}}},coreGeometry:{button0:{id:"action0",style:!1,title:"Plane",description:"A 2D plane.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateGeometry",params:"plane",menu:"stay"}},button1:{id:"action1",style:!1,title:"Cube",description:"A 3D cube.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateGeometry",params:"box",menu:"stay"}},button2:{id:"action2",style:!1,title:"Circle",description:"A 2D circle.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateGeometry",params:"circle",menu:"stay"}},button3:{id:"action3",style:!1,title:"Cylinder",description:"A 3D cylinder.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateGeometry",params:"cylinder",menu:"stay"}},button4:{id:"action4",style:!1,title:"Sphere",description:"A 3D sphere.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateGeometry",params:"sphere",menu:"stay"}}},coreMaterial:{button0:{id:"subMenu0",style:!1,title:"Page 0",description:"Go to Color Page 0",subMenu:"coreMaterialColorPage0",action:!1},button1:{id:"subMenu1",style:!1,title:"Page 1",description:"Go to Color Page 1",subMenu:"coreMaterialColorPage1",action:!1},button2:{id:"subMenu2",style:!1,title:"Page 2",description:"Go to Color Page 2",subMenu:"coreMaterialColorPage2",action:!1}},coreMaterialColorPage0:{},coreMaterialColorPage1:{},coreMaterialColorPage2:{},coreMaterialColorPage3:{},coreText:{button0:{id:"action1",style:!1,title:"Update Text",description:"Update the cores text.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateText",params:null,menu:"stay"}}},corePosition:{button0:{id:"action1",style:!1,title:"Update Position",description:"Update the cores position.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdatePosition",params:null,menu:"stay"}},button0:{id:"PosX",style:!1,title:"X",description:"Update the X axis.",subMenu:"menu1",action:{auxlObj:"build",component:!1,method:"UpdatePosition",params:"x",menu:"stay"}},button1:{id:"PosY",style:!1,title:"Y",description:"Update the Y axis.",subMenu:"menu22",action:{auxlObj:"build",component:!1,method:"UpdatePosition",params:"y",menu:"stay"}},button2:{id:"PosZ",style:!1,title:"Z",description:"Update the Z axis.",subMenu:"menu23",action:{auxlObj:"build",component:!1,method:"UpdatePosition",params:"z",menu:"stay"}}},coreRotation:{button0:{id:"action1",style:!1,title:"Update Rotation",description:"Update the cores rotation.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateRotation",params:null,menu:"stay"}}},coreScale:{button0:{id:"action1",style:!1,title:"Update Scale",description:"Update the cores scale.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateScale",params:null,menu:"stay"}}},coreAnimations:{button0:{id:"action1",style:!1,title:"Update Animations",description:"Update the cores animations.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateAnimations",params:null,menu:"stay"}}},coreClickable:{button0:{id:"action1",style:!1,title:"Toggle Clickable",description:"Toggle the core being interactable. ",subMenu:!1,action:{auxlObj:"build",component:!1,method:"ToggleClickable",params:null,menu:"stay"}}},coreComponents:{button0:{id:"action1",style:!1,title:"Update Components",description:"Update the cores components.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateComponents",params:null,menu:"stay"}}},coreDone:{button0:{id:"action1",style:!1,title:"Done",description:"Finalize the core.",subMenu:!1,action:{auxlObj:"build",component:!1,method:"Done",params:null,menu:"close"}}},end:{button0:{id:"subMenu2",style:!1,title:"Core",description:"Build a Core object.",subMenu:"menu0",action:!1}}},function(){let e=["red","orange","yellow","lime","blue","cyan","magenta","maroon","olive","green","purple","teal","navy","silver","grey","black","white"],o=0,a=0;t.buildMenuData["coreMaterialColorPage"+a]={};for(let i in e){t.buildMenuData["coreMaterialColorPage"+a]["button"+o]={};let n={id:"action"+o,style:!1,title:e[i],description:"Update the core Material to "+e[i],subMenu:!1,action:{auxlObj:"build",component:!1,method:"UpdateMaterial",params:e[i],menu:"stay"}},r={id:"subMenu"+a,style:!1,title:"Page "+(a+1),description:"Next Page > "+a,subMenu:"coreMaterialColorPage"+(a+1),action:!1};o>=6?(t.buildMenuData["coreMaterialColorPage"+a]["button"+o]=r,a++,o=0):t.buildMenuData["coreMaterialColorPage"+a]["button"+o]=n,o++}}(),e.buildMenu=e.MultiMenu(t.buildMenuData),e.numberStyle0Data={data:"numberStyle0Data",id:"numberStyle0",sources:!1,text:{value:"Menu",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:.9},geometry:{primitive:"circle",radius:.25,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#d3be1d",opacity:.9,metalness:.2,roughness:.8,emissive:"#d3be1d",emissiveIntensity:.4,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},t.numberInputs0Data={info:{id:"numberInputs0",buttonData:e.numberStyle0Data,hoverData:e.buildHoverData,title:"Update Number",description:"Update the Number.",layout:"circleUp",posOffset:new THREE.Vector3(-1.75,.13,-.11),offset:1,parent:"ghostParent",stare:!1},menu0:{button0:{id:"0",style:!1,title:"0",description:"Zero",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"0",menu:"stay"}},button1:{id:"1",style:!1,title:"1",description:"One",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"1",menu:"stay"}},button2:{id:"2",style:!1,title:"2",description:"Two",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"2",menu:"stay"}},button3:{id:"3",style:!1,title:"3",description:"Three",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"3",menu:"stay"}},button4:{id:"4",style:!1,title:"4",description:"Four",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"4",menu:"stay"}},button5:{id:"5",style:!1,title:"5",description:"Five",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"5",menu:"stay"}},button6:{id:"6",style:!1,title:"6",description:"Six",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"6",menu:"stay"}}}},e.numberInputs0=e.MultiMenu(t.numberInputs0Data),e.menuStyle4=e.CoreDataFromTemplate(e.numberStyle0Data,{id:"menuStyle4",material:{shader:"standard",color:"#d31d9b",opacity:1,metalness:.2,roughness:.8,emissive:"#d31d9b",emissiveIntensity:.4,side:"double",opacity:.9}},!0),t.buildSubMenuData={info:{id:"buildSubMenu",buttonData:e.menuStyle4,hoverData:e.buildHoverData,title:"Update",description:"Update the selection.",layout:"circleUp",posOffset:new THREE.Vector3(1.75,.13,-.11),offset:-1,parent:"ghostParent",stare:!1},menu0:{button0:{id:"more0",style:!1,title:"More 0",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button1:{id:"more1",style:!1,title:"More 1",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button2:{id:"more2",style:!1,title:"More 2",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button3:{id:"more3",style:!1,title:"More 3",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button4:{id:"more4",style:!1,title:"More 4",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button5:{id:"more5",style:!1,title:"More 5",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}},button6:{id:"more",style:!1,title:"More 6",description:"...",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"other",menu:"stay"}}}},e.buildSubMenu=e.MultiMenu(t.buildSubMenuData),e.numberStyle1Data=e.CoreDataFromTemplate(e.numberStyle0Data,{id:"numberStyle1",material:{shader:"standard",color:"#d3391d",opacity:1,metalness:.2,roughness:.8,emissive:"#d3391d",emissiveIntensity:.4,side:"double",opacity:.9}},!0),t.numberInputs1Data={info:{id:"numberInputs1",buttonData:e.numberStyle1Data,hoverData:e.buildHoverData,title:"Update Number",description:"Update the Number.",layout:"circleUp",posOffset:new THREE.Vector3(-1.75,.15,-.22),offset:.6,parent:"ghostParent",stare:!1},menu0:{button0:{id:"7",style:!1,title:"7",description:"Seven",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"0",menu:"stay"}},button1:{id:"8",style:!1,title:"8",description:"Eight",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"1",menu:"stay"}},button2:{id:"9",style:!1,title:"9",description:"Nine",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"2",menu:"stay"}},button3:{id:"10",style:!1,title:"10",description:"Ten",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"10",menu:"stay"}},button4:{id:"25",style:!1,title:"25",description:"Twenty Five",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"25",menu:"stay"}},button5:{id:"50",style:!1,title:"50",description:"Fifty",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"50",menu:"stay"}},button6:{id:"100",style:!1,title:"100",description:"One Hundred",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"100",menu:"stay"}}}},e.numberInputs1=e.MultiMenu(t.numberInputs1Data),e.numberStyle2Data=e.CoreDataFromTemplate(e.numberStyle0Data,{id:"numberStyle2",material:{shader:"standard",color:"#24d31d",opacity:1,metalness:.2,roughness:.8,emissive:"#24d31d",emissiveIntensity:.4,side:"double",opacity:.9}},!0),t.buildPosMenuData={info:{id:"buildMenuNumber",buttonData:e.numberStyle2Data,hoverData:e.buildHoverData,title:"Update Pos",description:"Update the position of selection.",layout:"circleUp",posOffset:new THREE.Vector3(0,0,-.11),offset:-.6,parent:"ghostParent",stare:!1},menu0:{button0:{id:"PositiveA",style:!1,title:"+Positive",description:"Flip Amount to Positive",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"+",menu:"stay"}},button1:{id:"NegativeA",style:!1,title:"-Negative",description:"Flip Amount to Negative",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"-",menu:"stay"}},button2:{id:"AddA",style:!1,title:"Add +A",description:"Add Amount of units to selection.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"add",menu:"stay"}},button3:{id:"SubtractA",style:!1,title:"Subtract -A",description:"Subtract Amount of units.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"subtract",menu:"stay"}},button4:{id:"DivideA",style:!1,title:"Half A/2",description:"Divide Amount of units by 2.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"divide",menu:"stay"}},button5:{id:"DoubleA",style:!1,title:"Double A*2",description:"Double Amount of units.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"double",menu:"stay"}},button6:{id:"Cancel",style:!1,title:"Cancel",description:"Cancel & Reset.",subMenu:!1,action:{auxlObj:"one",component:!1,method:"UpdateNumber",params:"cancel",menu:"close"}}}},e.buildMenuNumber=e.MultiMenu(t.buildPosMenuData),t.building.geometry={},t.building.geometry.plane={primitive:"plane",width:.5,height:.5},t.building.geometry.box={primitive:"box",depth:.5,width:.5,height:.5},t.building.geometry.circle={primitive:"circle",radius:.5,segments:32},t.building.geometry.cylinder={primitive:"cylinder",radius:.25,height:.75,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},t.building.geometry.sphere={primitive:"sphere",radius:.4,phiStart:0,phiLength:360,segmentsWidth:16,segmentsHeight:16,thetaStart:0,thetaLength:360},t.building.text={},t.building.text.toggle=!1,t.building.text.input="",t.building.text.backups=[],t.building.text.history=[],document.addEventListener("keyup",(o=>{(o=>{if(!t.building.text.toggle)return;let a=o.key;if("Backspace"===a)console.log(t.building.text.backups),t.building.text.backups.length>0?(t.building.text.input=t.building.text.backups[t.building.text.backups.length-1],t.building.text.backups.pop(),t.building.text.next=!1,t.building.text.backups.length<=0&&t.building.text.backups.push(" "),console.log(t.building.text.backups)):t.building.text.input=" ";else{if("Spacebar"===a)a=" ";else{if("Shift"===a)return void(t.building.text.shift=!t.building.text.shift);if("Enter"===a)a="\n";else{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a))return;if(["Alt","Control","CapsLock","Tab","Escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(a))return}}t.building.text.shift&&(a.toUpperCase(),t.building.text.shift=!1),t.building.text.input+=a,t.building.text.backups.push(t.building.text.input)}t.building.text.history.push(a),t.building.text.history.length>=t.building.text.history.maxLength&&t.building.text.history.shift(),e.player.UpdateBeltText(t.building.text.input),t.building.current.ChangeSelf({property:"text",value:{value:t.building.text.input}}),console.log(t.building.text.input)})(o)})),{one:t,SpawnBuild:()=>{e.buildMenu.SpawnMultiMenu(),e.buildMenuNumber.SpawnMultiMenu()},DespawnBuild:()=>{e.buildMenu.DespawnMultiMenu(),e.buildMenuNumber.DespawnMultiMenu()},StartBuilding:()=>{console.log("Start Building"),(()=>{if(t.building.prepped)console.log("Already Prepped");else{console.log("New Core");let o=t.core.made.length;t.core.data[o+"data"]={data:o+"data",id:o,sources:!1,text:{value:"Hello World!",color:"#FFFFFF",align:"center",font:"exo2bold",width:.45,zOffset:.275,side:"front",wrapCount:16,baseline:"center"},geometry:{primitive:"box",depth:.5,width:.5,height:.5},material:{shader:"standard",color:"#2aad7b",emissive:"#2aad7b",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,1.6,-2),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},t.core[o]=e.Core(t.core.data[o+"data"]),t.building.current=t.core[o],t.building.prepped=!0,t.building.building=!0,t.building.current.SpawnCore(e.playerRig.GetEl())}})()},UpdateName:()=>{console.log("UpdateName")},UpdateGeometry:e=>{let o;console.log("UpdateGeometry"),"plane"===e?o=t.building.geometry.plane:"box"===e?o=t.building.geometry.box:"circle"===e?o=t.building.geometry.circle:"cylinder"===e?o=t.building.geometry.cylinder:"sphere"===e&&(o=t.building.geometry.sphere),t.core.data[t.building.current.core.id+"data"].geometry=o,t.building.current.RemoveComponent("geometry"),t.building.current.ChangeSelf({property:"geometry",value:o})},UpdateMaterial:o=>{console.log("UpdateMaterial");let a=t.building.current.GetEl().material?t.building.current.GetEl().material:{shader:"standard",color:"#2aad7b",emissive:"#2aad7b",emissiveIntensity:.25,opacity:1},i=e.ColorTheoryGen(!1,o);a.color=i.base,a.emissive&&(a.emissive=i.base),t.core.data[t.building.current.core.id+"data"].color=i.base,t.core.data[t.building.current.core.id+"data"].materialData=i,t.building.current.ChangeSelf({property:"material",value:a})},UpdateText:()=>{t.building.text.toggle=!t.building.text.toggle,t.building.text.toggle?e.playerBeltTitleText.ChangeSelf({property:"text",value:{value:"Write"}}):e.playerBeltTitleText.ChangeSelf({property:"text",value:{value:"Read"}})},UpdateNumber:e=>{console.log("UpdateNumber"),console.log(e)},UpdatePosition:e=>{console.log("UpdatePosition")},UpdateRotation:()=>{console.log("UpdateRotation")},UpdateScale:()=>{console.log("UpdateScale")},UpdateAnimations:()=>{console.log("UpdateAnimations")},UpdateClickable:()=>{console.log("UpdateClickable")},UpdateComponents:()=>{console.log("UpdateComponents")},UpdateDone:()=>{console.log("UpdateDone")},Testing:()=>{console.log(t)}}})(o),this.ImageSwapper=(e,t,a,...i)=>((e,t,o,a,...i)=>{let n,r={};r.id=t,r.inScene=!1,r.thumbnailCores=[];let s=new THREE.Vector3(0,-.3,.05);r.layerData={};for(let t in i)"0"===t?(o.material=i[t],n=e.Core(o),r.layerData.parent={},r.layerData.parent.core=n):(a.id="thumbnail"+t,a.material=i[t],3===i.length?"1"===t?s.x=-.25:"2"===t&&(s.x=.25):4===i.length?"1"===t?s.x=-.33:"2"===t?s.x=0:"3"===t&&(s.x=.33):5===i.length&&("1"===t?s.x=-.375:"2"===t?s.x=-.125:"3"===t?s.x=.125:"4"===t&&(s.x=.375)),a.position=s,r.thumbnailCores[t]=e.Core(a),r.layerData["child"+t]={},r.layerData["child"+t].core=r.thumbnailCores[t]);r.layer=e.Layer("imageSwapper",r.layerData);const l=()=>{r.inScene||(r.layer.SpawnLayer(),r.inScene=!0)},c=()=>{r.inScene&&(r.layer.DespawnLayer(),RemoveFromTracker(r.id),r.inScene=!1)};return{imageSwapper:r,Click:e=>{let t=e.getAttribute("material").src,o=JSON.parse(JSON.stringify(e.parentNode.getAttribute("material").src));e.parentNode.setAttribute("material",{src:t}),e.setAttribute("material",{src:o})},SpawnImgSwap:l,DespawnImgSwap:c,ToggleSpawn:()=>{r.inScene?c():l()},SetFlag:e=>{if(Array.isArray(e))for(let t in e)r[e[t].flag]=e[t].value;else r[e.flag]=e.value},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(r(e[o]));return t}return r[e]}}})(o,e,t,a,...i),this.ImageCarousel=e=>((e,t)=>{let o,a,i,n=Object.assign({},t);n.inScene=!1,n.frames=8,n.framesPerPage=8,currentImageForward=-1,currentImageBackward=n.images.length-n.framesPerPage,n.framesPerPage;let r=0;currentRotation=-1;let s=!0,l=!0,c=!1,d=!1,p=0,h=!1,m={data:"artFrameParentData",id:"artFrameParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},u={data:"artFrameData",id:"artFrame",sources:!1,text:!1,geometry:{primitive:"box",depth:.01,width:4.4,height:2.55},material:{shader:"flat",color:"#55a5be",opacity:1,alphaTest:.1},position:new THREE.Vector3(0,1.75,-6),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{scale0:{property:"scale",from:"1 1 1",to:"2 2 2",dur:2e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"to0"},position0:{property:"position",from:"0 1.75 -6",to:"0 3.5 -12",dur:2e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"to0"},scale1:{property:"scale",from:"2 2 2",to:"1 1 1",dur:2e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"to1"},position1:{property:"position",from:"0 3.5 -12",to:"0 1.75 -6",dur:2e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"to1"}},mixins:!1,classes:["a-ent"],components:!1},y={data:"artFrameTextData",id:"artFrameText",sources:!1,text:{value:"Art Frame Text",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:0,side:"double"},geometry:!1,material:!1,position:new THREE.Vector3(0,-1.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1};m.id="artFrameParentAll",m.rotation=new THREE.Vector3(0,1,0);let g={parent:{core:e.Core(m)}},v="artFrameParent",f=[],b="artFrame",E=[],w="artFrameText",x=[];for(let t=0;t<n.frames;t++){0===t?r=-45:1===t?r=0:2===t?r=-315:3===t?r=-270:4===t?r=-225:5===t?r=-180:6===t?r=-135:7===t&&(r=-90),v="artFrameParent"+t;let o=new THREE.Vector3(0,0,0);o.y=r,m.id=v,m.rotation=o,f[t]=e.Core(m),b="artFrame"+t,u.id=b,E[t]=e.Core(u),w="artFrameText"+t,y.id=w,x[t]=e.Core(y),g["child"+t]={parent:{core:f[t]},child0:{parent:{core:E[t]},child0:{core:x[t]}}}}let T=e.Layer("artFrameAllLayer",g),C=e.ColorTheoryGen("#6ab0db"),D={data:"Button Parent",id:"buttonParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,80,0),scale:new THREE.Vector3(1,1,1),animations:{scaleclick:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["a-ent"],components:!1},S={data:"Button Obj",id:"buttonObj",sources:!1,text:!1,geometry:!1,material:{shader:"flat",color:C.base,opacity:1},position:new THREE.Vector3(0,.4,-2.5),rotation:new THREE.Vector3(-30,0,0),scale:new THREE.Vector3(.1,.1,.1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},k={data:"Button Border",id:"buttonBorder",sources:!1,text:!1,geometry:!1,material:{shader:"flat",color:C.splitCompl[0],opacity:1},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{"obj-model":{obj:"./assets/3d/buttons/border.obj"}}},R={data:"Button Click Background",id:"buttonClick",sources:!1,text:!1,geometry:{primitive:"circle",radius:2,segments:12},material:{shader:"flat",color:C.splitCompl[1],opacity:.5,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},P={data:"Button Text",id:"buttonText",sources:!1,text:{value:"Button",width:20,color:C.base,align:"center",font:"exo2bold",zOffset:0,side:"double"},geometry:!1,material:!1,position:new THREE.Vector3(0,-2.75,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1};D.id="buttonBackwardParent",D.rotation=new THREE.Vector3(0,22.5,0);let I=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/backward.obj"}},S.id="buttonBackward",k.id="buttonBackwardBorder",R.id="buttonBackwardClick",P.id="buttonBackwardText",P.text.value="Back";let M=e.Core(S),H=e.Core(k),L=e.Core(R),O=e.Core(P),G={parent:{core:I},child0:{parent:{core:M},child0:{core:H},child1:{core:L},child2:{core:O}}},A=e.Layer("buttonBackwardLayer",G);D.id="buttonForwardParent",D.rotation=new THREE.Vector3(0,-22.5,0);let z=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/forward.obj"}},S.id="buttonForward",k.id="buttonForwardBorder",R.id="buttonForwardClick",P.id="buttonForwardText",P.text.value="Forward";let V=e.Core(S),F=e.Core(k),U=e.Core(R),j=e.Core(P),B={parent:{core:z},child0:{parent:{core:V},child0:{core:F},child1:{core:U},child2:{core:j}}},N=e.Layer("buttonForwardLayer",B);D.id="buttonLeftSkipParent",D.rotation=new THREE.Vector3(0,37.5,0);let _=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/left_skip.obj"}},S.id="buttonLeftSkip",k.id="buttonLeftSkipBorder",R.id="buttonLeftSkipClick",P.id="buttonLeftSkipText",P.text.value="Back Page";let q=e.Core(S),W=e.Core(k),J=e.Core(R),Z=e.Core(P),K={parent:{core:_},child0:{parent:{core:q},child0:{core:W},child1:{core:J},child2:{core:Z}}},X=e.Layer("buttonLeftSkipLayer",K);D.id="buttonPlayParent",D.rotation=new THREE.Vector3(0,-7.5,0);let Y=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/play.obj"}},S.id="buttonPlay",k.id="buttonPlayBorder",R.id="buttonPlayClick",P.id="buttonPlayText",P.text.value="Play";let Q=e.Core(S),$=e.Core(k),ee=e.Core(R),te=e.Core(P),oe={parent:{core:Y},child0:{parent:{core:Q},child0:{core:$},child1:{core:ee},child2:{core:te}}},ae=e.Layer("buttonPlayLayer",oe);D.id="buttonRightSkipParent",D.rotation=new THREE.Vector3(0,-37.5,0);let ie=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/right_skip.obj"}},S.id="buttonRightSkip",k.id="buttonRightSkipBorder",R.id="buttonRightSkipClick",P.id="buttonRightSkipText",P.text.value="Next Page";let ne=e.Core(S),re=e.Core(k),se=e.Core(R),le=e.Core(P),ce={parent:{core:ie},child0:{parent:{core:ne},child0:{core:re},child1:{core:se},child2:{core:le}}},de=e.Layer("buttonRightSkipLayer",ce);D.id="buttonSettingsParent",D.rotation=new THREE.Vector3(0,-52.5,0);let pe=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/settings.obj"}},S.id="buttonSettings",k.id="buttonSettingsBorder",R.id="buttonSettingsClick",P.id="buttonSettingsText",P.text.value="Scale";let he=e.Core(S),me=e.Core(k),ue=e.Core(R),ye=e.Core(P),ge={parent:{core:pe},child0:{parent:{core:he},child0:{core:me},child1:{core:ue},child2:{core:ye}}},ve=e.Layer("buttonSettingsLayer",ge);D.id="buttonStopParent",D.rotation=new THREE.Vector3(0,7.5,0),buttonStopParent=e.Core(D),S.components={"obj-model":{obj:"./assets/3d/buttons/stop.obj"}},S.id="buttonStop",k.id="buttonStopBorder",R.id="buttonStopClick",P.id="buttonStopText",P.text.value="Info";let fe=e.Core(S),be=e.Core(k),Ee=e.Core(R),we=e.Core(P),xe={parent:{core:buttonStopParent},child0:{parent:{core:fe},child0:{core:be},child1:{core:Ee},child2:{core:we}}},Te=e.Layer("buttonStopLayer",xe);D.id="buttonHashtagParent",D.rotation=new THREE.Vector3(0,52.5,0);let Ce=e.Core(D);S.components={"obj-model":{obj:"./assets/3d/buttons/hashtag.obj"}},S.id="buttonHashtag",k.id="buttonHashtagBorder",R.id="buttonHashtagClick",P.id="buttonHashtagText",P.text.value="Random Page";let De=e.Core(S),Se=e.Core(k),ke=e.Core(R),Re=e.Core(P),Pe={parent:{core:Ce},child0:{parent:{core:De},child0:{core:Se},child1:{core:ke},child2:{core:Re}}},Ie=e.Layer("buttonHashtagLayer",Pe),Me={name:"anim90",property:"object3D.rotation.y",from:"0",to:"90",dur:2500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},He={name:"anim360",property:"object3D.rotation.y",from:"0",to:"360",dur:12e4,delay:0,loop:"true",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"play",pauseEvents:"pause"};const Le=(e,t,o)=>{g[e].child0.parent.core.ChangeSelf({property:"material",value:{src:o,shader:"flat",color:"#FFFFFF",opacity:1}}),g[e].child0.child0.core.ChangeSelf({property:"text",value:{value:t,width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:0,side:"double"}})},Oe=(e,t)=>{"forward"===t?(currentImageForward++,currentImageBackward++,currentImageForward>=n.images.length&&(currentImageForward=0),currentImageBackward>=n.images.length&&(currentImageBackward=0),Le("child"+e,n.images[currentImageForward].text,n.images[currentImageForward].image)):"backward"===t&&(currentImageBackward--,currentImageForward--,currentImageBackward<0&&(currentImageBackward=n.images.length-1),currentImageForward<0&&(currentImageForward=n.images.length-1),Le("child"+e,n.images[currentImageBackward].text,n.images[currentImageBackward].image))},Ge=e=>{for(let t=0;t<n.frames;t++)Oe(t,e);c=!1},Ae=e=>{let t,o=[];"forward"===e?0===currentRotation?o=[0,1]:1===currentRotation?o=[2,3]:2===currentRotation?o=[4,5]:3===currentRotation&&(o=[6,7]):"backward"===e&&(0===currentRotation?o=[6,7]:1===currentRotation?o=[0,1]:2===currentRotation?o=[2,3]:3===currentRotation&&(o=[4,5]),o.reverse());for(let a in o)t=o[a],Oe(t,e)},ze=()=>{n.inScene||(T.SpawnLayer(),A.SpawnLayer(),Ie.SpawnLayer(),N.SpawnLayer(),X.SpawnLayer(),ae.SpawnLayer(),de.SpawnLayer(),ve.SpawnLayer(),Te.SpawnLayer(),L.GetEl().addEventListener("click",Ue),U.GetEl().addEventListener("click",Fe),J.GetEl().addEventListener("click",Ne),ee.GetEl().addEventListener("click",je),se.GetEl().addEventListener("click",Be),ue.GetEl().addEventListener("click",qe),ke.GetEl().addEventListener("click",_e),We(),n.inScene=!0)},Ve=()=>{n.inScene&&(L.GetEl().removeEventListener("click",Ue),U.GetEl().removeEventListener("click",Fe),J.GetEl().removeEventListener("click",Ne),ee.GetEl().removeEventListener("click",je),se.GetEl().removeEventListener("click",Be),ue.GetEl().removeEventListener("click",qe),ke.GetEl().removeEventListener("click",_e),T.DespawnLayer(),A.DespawnLayer(),Ie.DespawnLayer(),N.DespawnLayer(),X.DespawnLayer(),ae.DespawnLayer(),de.DespawnLayer(),ve.DespawnLayer(),Te.DespawnLayer(),RemoveFromTracker(n.id),n.inScene=!1)},Fe=()=>{if(s){s=!1;let e=T.GetParentEl().getAttribute("rotation").y;Me.from=e,Me.to=e-90,T.AnimateParent(Me),a=setTimeout((()=>{currentRotation++,currentRotation>3&&(currentRotation=0),Ae("forward"),s=!0,clearTimeout(a)}),Me.dur+10)}},Ue=()=>{if(s){s=!1;let e=T.GetParentEl().getAttribute("rotation").y;Me.from=e,Me.to=e+90,T.AnimateParent(Me),a=setTimeout((()=>{currentRotation--,currentRotation<0&&(currentRotation=3),console.log(currentRotation),Ae("backward"),s=!0,clearTimeout(a)}),Me.dur+10)}},je=()=>{if(l){l=!1,s=!1,o=setInterval((()=>{(e=>{let t;t=3,Oe(3,void 0)})(),currentRotation=0,7===currentRotation?currentRotation=0:currentRotation++}),He.dur/8);let e=T.GetParentEl().getAttribute("rotation").y;He.from=e,He.to=e-360,T.AnimateParent(He),T.layer.all.parent.core.EmitEvent("play"),Q.ChangeSelf({property:"obj-model",value:{obj:"./assets/3d/buttons/pause.obj"}}),te.ChangeSelf({property:"text",value:{value:"Pause",width:20,color:C.base,align:"center",font:"exo2bold",zOffset:0,side:"double"}})}else l=!0,s=!0,clearInterval(o),T.layer.all.parent.core.EmitEvent("pause"),Q.ChangeSelf({property:"obj-model",value:{obj:"./assets/3d/buttons/play.obj"}}),te.ChangeSelf({property:"text",value:{value:"Play",width:20,color:C.base,align:"center",font:"exo2bold",zOffset:0,side:"double"}})},Be=()=>{c||(c=!0,Ge("forward"))},Ne=()=>{c||(c=!0,Ge("backward"))},_e=()=>{c||(c=!0,currentImageForward=Math.floor(Math.random()*n.images.length),Ge("forward"))},qe=()=>{d||(d=!0,i=setTimeout((()=>{d=!1,clearTimeout(i)}),2050),0===p?(p=1,g.child0.child0.parent.core.EmitEvent("to0"),g.child1.child0.parent.core.EmitEvent("to0"),g.child2.child0.parent.core.EmitEvent("to0"),g.child3.child0.parent.core.EmitEvent("to0"),g.child4.child0.parent.core.EmitEvent("to0"),g.child5.child0.parent.core.EmitEvent("to0"),g.child6.child0.parent.core.EmitEvent("to0"),g.child7.child0.parent.core.EmitEvent("to0")):(p=0,g.child0.child0.parent.core.EmitEvent("to1"),g.child1.child0.parent.core.EmitEvent("to1"),g.child2.child0.parent.core.EmitEvent("to1"),g.child3.child0.parent.core.EmitEvent("to1"),g.child4.child0.parent.core.EmitEvent("to1"),g.child5.child0.parent.core.EmitEvent("to1"),g.child6.child0.parent.core.EmitEvent("to1"),g.child7.child0.parent.core.EmitEvent("to1")))},We=()=>{Ee.EnableDetail({text:n.description,position:new THREE.Vector3(0,1.5,-2)}),Ge("forward")};return{imageCarousel:n,SpawnImgCarousel:ze,DespawnImgCarousel:Ve,ToggleSpawn:()=>{n.inScene?Ve():ze()},SetFlag:e=>{if(Array.isArray(e))for(let t in e)n[e[t].flag]=e[t].value;else n[e.flag]=e.value},GetFlag:e=>{if(Array.isArray(e)){let t=[];for(let o in e)t.push(n(e[o]));return t}return n[e]},PlayPause:je,Forward:Fe,Backward:Ue,NextPage:Be,PrevPage:Ne,RandomPage:_e,Scale:qe,Info:()=>{h=!h}}})(o,e),this.Card=e=>((e,t)=>{let o={};return o.data=JSON.parse(JSON.stringify(t)),o.id=t.id||e.RanNameGen(),o.position=t.position||new THREE.Vector3,o.rotation=t.rotation||new THREE.Vector3,o.scale=t.scale||new THREE.Vector3(.1,.1,.1),o.title=t.title||o.id,o.colors=t.colors&&t.colors.base?t.colors:e.ColorTheoryGen(),o.parentData={data:"parentData",id:o.id+"parent",sources:!1,text:!1,geometry:!1,material:!1,position:o.position,rotation:o.rotation,scale:o.scale,animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.parent=e.Core(o.parentData),o.iconBaseData={data:"iconBaseData",id:o.id+"iconBase",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.175,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#fcfafd",emissive:"#fcfafd",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.textBaseData={data:"textBaseData",id:o.id+"textBase",sources:!1,text:{value:"Card",wrapCount:24,color:"#ffffff",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:{primitive:"box",width:2.25,height:.25,depth:.2},material:{shader:"standard",color:"#e7fa00",emissive:"#e7fa00",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"object3D.scale.y",to:1,dur:250,delay:0,loop:"1",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:!1},o.backgroundData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"background",position:new THREE.Vector3(0,0,0),text:!1,geometry:{primitive:"box",width:2.5,height:3.5,depth:.1},material:{shader:"standard",color:o.colors.mono[1],emissive:o.colors.mono[1],emissiveIntensity:.25,opacity:.85,side:"double",metalness:.2,roughness:.8}},!0),o.background=e.Core(o.backgroundData),o.titleBarData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"titleBar",position:new THREE.Vector3(0,1.5,0),text:{value:o.title,wrapCount:24,color:o.colors.base.compl,font:"exo2bold",zOffset:.125,xOffset:.05,side:"double",align:"left",baseline:"center"},material:{shader:"standard",color:o.colors.base,emissive:o.colors.base,emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.titleBar=e.Core(o.titleBarData),o.notificationBarData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"notificationBar",position:new THREE.Vector3(0,0,0),geometry:{primitive:"box",width:2,height:.225,depth:.15},text:{value:"!-------!Notification!-------!",wrapCount:24,color:"#ffffff",font:"exo2bold",zOffset:.125,xOffset:0,side:"double",align:"center",baseline:"center"},material:{shader:"standard",color:o.colors.splitCompl[1],emissive:o.colors.splitCompl[1],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.notificationBar=e.Core(o.notificationBarData),o.controlBarData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"controlBar",position:new THREE.Vector3(0,-.225,0),text:{value:"Title - Specific : Logo",wrapCount:24,color:"#ffffff",font:"exo2bold",zOffset:.125,xOffset:.05,side:"double",align:"left",baseline:"center"},material:{shader:"standard",color:o.colors.splitCompl[0],emissive:o.colors.splitCompl[0],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.controlBar=e.Core(o.controlBarData),o.textBodyData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"cardTextBody",position:new THREE.Vector3(0,-.875,0),text:!1,geometry:{primitive:"box",width:2.25,height:1.5,depth:.15},material:{shader:"standard",color:o.colors.mono[1],emissive:o.colors.mono[1],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},text:{value:"Body\n- Wrap :\nMore info...\n- Wrap :\nMore info...\n- Wrap :\nMore info...",wrapCount:42,color:"#ffffff",font:"exo2bold",zOffset:.125,xOffset:.05,xOffset:.05,side:"double",align:"left",baseline:"center"}},!0),o.textBody=e.Core(o.textBodyData),o.textAccentData=e.CoreDataFromTemplate(o.textBaseData,{id:o.id+"textAccent",position:new THREE.Vector3(1,-1.5,0),text:!1,geometry:{primitive:"box",width:.525,height:.525,depth:.2},material:{shader:"standard",color:o.colors.splitCompl[1],emissive:o.colors.splitCompl[1],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},text:{value:"Accent",wrapCount:8,color:"#ffffff",font:"exo2bold",zOffset:.125,xOffset:0,side:"double",align:"center",baseline:"center"}},!0),o.textAccent=e.Core(o.textAccentData),o.costIcon1Data=e.CoreDataFromTemplate(o.iconBaseData,{id:o.id+"costIcon1",position:new THREE.Vector3(.95,1.26,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.base,emissive:o.colors.base,emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.costIcon1=e.Core(o.costIcon1Data),o.costIcon2Data=e.CoreDataFromTemplate(o.costIcon1Data,{id:o.id+"cardCostIcon2",position:new THREE.Vector3(.6,1.26,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.splitCompl[0],emissive:o.colors.splitCompl[0],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.costIcon2=e.Core(o.costIcon2Data),o.costIcon3Data=e.CoreDataFromTemplate(o.costIcon1Data,{id:o.id+"costIcon3",position:new THREE.Vector3(.25,1.26,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.splitCompl[1],emissive:o.colors.splitCompl[1],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8}},!0),o.costIcon3=e.Core(o.costIcon3Data),o.extraIcon1Data=e.CoreDataFromTemplate(o.iconBaseData,{id:o.id+"extraIcon1",position:new THREE.Vector3(1.1,-1.1,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.splitCompl[1],emissive:o.colors.splitCompl[1],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},text:{value:"A",wrapCount:8,color:"#ffffff",font:"exo2bold",zOffset:.155,xOffset:.05,side:"double",align:"center",baseline:"center"}},!0),o.extraIcon1=e.Core(o.extraIcon1Data),o.extraIcon2Data=e.CoreDataFromTemplate(o.iconBaseData,{id:o.id+"extraIcon2",position:new THREE.Vector3(1.1,-.8,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.splitCompl[0],emissive:o.colors.splitCompl[0],emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},text:{value:"A",wrapCount:8,color:"#ffffff",font:"exo2bold",zOffset:.155,xOffset:.05,side:"double",align:"center",baseline:"center"}},!0),o.extraIcon2=e.Core(o.extraIcon2Data),o.extraIcon3Data=e.CoreDataFromTemplate(o.iconBaseData,{id:o.id+"extraIcon3",position:new THREE.Vector3(1.1,-.5,0),text:!1,geometry:{primitive:"cylinder",radius:.15,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"standard",color:o.colors.base,emissive:o.colors.base,emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},text:{value:"A",wrapCount:8,color:"#ffffff",font:"exo2bold",zOffset:.155,xOffset:.05,side:"double",align:"center",baseline:"center"}},!0),o.extraIcon3=e.Core(o.extraIcon3Data),o.layerData={parent:{core:o.parent},child0:{core:o.background},child1:{core:o.titleBar},child2:{core:o.controlBar},child3:{core:o.notificationBar},child4:{core:o.textBody},child5:{core:o.textAccent},child6:{core:o.costIcon1},child7:{core:o.costIcon2},child8:{core:o.costIcon3},child9:{core:o.extraIcon1},child10:{core:o.extraIcon2},child11:{core:o.extraIcon3}},o.layer=e.Layer(o.id,o.layerData),{card:o,SpawnCard:()=>{o.layer.SpawnLayer()},DespawnCard:()=>{o.layer.DespawnLayer()}}})(o,e),this.Pet=e=>p(o,e)},checkSceneLoad:function(e,t){if(this.loadingObjects.size<=0){let e;"blink"===this.player.layer.transition.scene?(this.blink1Screen.EmitEvent("blinkScene2"),this.blink2Screen.EmitEvent("blinkScene2"),this.loadingScene=!1,e=setTimeout((()=>{this.blink1Screen.ChangeSelf({property:"visible",value:"false"}),this.blink2Screen.ChangeSelf({property:"visible",value:"false"}),this.player.layer.teleporting=!1,this.player.EnableClick(),clearTimeout(e)}),800)):"fade"===this.player.layer.transition.scene?(this.fadeScreen.EmitEvent("fadeScene2"),this.loadingScene=!1,e=setTimeout((()=>{this.fadeScreen.ChangeSelf({property:"visible",value:"false"}),this.player.layer.teleporting=!1,this.player.EnableClick(),clearTimeout(e)}),800)):"sphere"===this.player.layer.transition.scene?(this.sphereScreen.EmitEvent("sphereScene2"),this.loadingScene=!1,e=setTimeout((()=>{this.sphereScreen.ChangeSelf({property:"visible",value:"false"}),this.player.layer.teleporting=!1,this.player.EnableClick(),clearTimeout(e)}),800)):"instant"===this.player.layer.transition.scene&&(this.loadingScene=!1,this.player.layer.teleporting=!1,this.player.EnableClick()),this.auxl.el.emit("sceneLoaded",{})}},tick:function(e,t){this.loadingScene&&(this.sceneReading||this.checkSceneLoadThrottled())}}),AFRAME.registerComponent("auxcontroller",{dependencies:["auxl"],schema:{update:{type:"number",default:0},id:{type:"string",default:"player"}},init:function(){this.id=this.data.id,this.time=0,this.aScene=document.querySelector("a-scene"),this.auxl=document.querySelector("a-scene").systems.auxl,this.locomotion,this.gimbal,this.vrController1,this.vrController2,this.controls={directionForwardKeys:["w","W"],directionLeftKeys:["a","A"],directionBackwardKeys:["s","S"],directionRightKeys:["d","D"],rotationForwardKeys:[null],rotationLeftKeys:[null],rotationBackwardKeys:[null],rotationRightKeys:[null],action1Keys:[" "," "],action2Keys:["q","Q"],action3Keys:["e","E"],action4Keys:["r","R"],action5Keys:["t","T"],action6Keys:["x","X"],action7Keys:["c","C"],action8Keys:["v","V"]},this.auxl.controlConfig=this.controls,this.mobileUpLeft=document.getElementById("upLeft"),this.mobileUp=document.getElementById("up"),this.mobileUpRight=document.getElementById("upRight"),this.mobileLeft=document.getElementById("left"),this.mobileCenter=document.getElementById("center"),this.mobileRight=document.getElementById("right"),this.mobileDownLeft=document.getElementById("downLeft"),this.mobileDown=document.getElementById("down"),this.mobileDownRight=document.getElementById("downRight"),this.mobileSelect=document.getElementById("select"),this.mobileStart=document.getElementById("start"),this.mobileA=document.getElementById("a"),this.mobileB=document.getElementById("b"),this.mobileC=document.getElementById("c"),this.mobileD=document.getElementById("d"),this.mobileMain=document.getElementById("main"),this.mobileF=document.getElementById("f"),this.mobileG=document.getElementById("g"),this.mobileH=document.getElementById("h"),this.mobileI=document.getElementById("i"),this.altDownFunc=!1,this.altDownParams=!1,this.altUpFunc=!1,this.altUpParams=!1,this.action1DownFunc=!1,this.action1DownParams=!1,this.action1UpFunc=!1,this.action1UpParams=!1,this.action2DownFunc=!1,this.action2DownParams=!1,this.action2UpFunc=!1,this.action2UpParams=!1,this.action3DownFunc=!1,this.action3DownParams=!1,this.action3UpFunc=!1,this.action3UpParams=!1,this.action4DownFunc=!1,this.action4DownParams=!1,this.action4UpFunc=!1,this.action4UpParams=!1,this.action5DownFunc=!1,this.action5DownParams=!1,this.action5UpFunc=!1,this.action5UpParams=!1,this.action6DownFunc=!1,this.action6DownParams=!1,this.action6UpFunc=!1,this.action6UpParams=!1,this.action7DownFunc=!1,this.action7DownParams=!1,this.action7UpFunc=!1,this.action7UpParams=!1,this.action8DownFunc=!1,this.action8DownParams=!1,this.action8UpFunc=!1,this.action8UpParams=!1,this.mainClickDetail={info:"Main Click",click:null},this.mainClickEvent=new CustomEvent("mainClick",{bubbles:!1,cancelable:!0,detail:this.mainClickDetail}),this.altClickDetail={info:"Alt Click",click:null},this.altClickEvent=new CustomEvent("altClick",{bubbles:!1,cancelable:!0,detail:this.altClickDetail}),this.directionEventDetail={info:"Direction",direction:null},this.directionEvent=new CustomEvent("direction",{bubbles:!1,cancelable:!0,detail:this.directionEventDetail}),this.rotationEventDetail={info:"Rotation",rotation:null},this.rotationEvent=new CustomEvent("rotation",{bubbles:!1,cancelable:!0,detail:this.rotationEventDetail}),this.action1EventDetail={info:"Action 1",action:null},this.action1Event=new CustomEvent("action1",{bubbles:!1,cancelable:!0,detail:this.action1EventDetail}),this.action2EventDetail={info:"Action 2",action:null},this.action2Event=new CustomEvent("action2",{bubbles:!1,cancelable:!0,detail:this.action2EventDetail}),this.action3EventDetail={info:"Action 3",action:null},this.action3Event=new CustomEvent("action3",{bubbles:!1,cancelable:!0,detail:this.action3EventDetail}),this.action4EventDetail={info:"Action 4",action:null},this.action4Event=new CustomEvent("action4",{bubbles:!1,cancelable:!0,detail:this.action4EventDetail}),this.action5EventDetail={info:"Action 5",action:null},this.action5Event=new CustomEvent("action5",{bubbles:!1,cancelable:!0,detail:this.action5EventDetail}),this.action6EventDetail={info:"Action 6",action:null},this.action6Event=new CustomEvent("action6",{bubbles:!1,cancelable:!0,detail:this.action6EventDetail}),this.action7EventDetail={info:"Action 7",action:null},this.action7Event=new CustomEvent("action7",{bubbles:!1,cancelable:!0,detail:this.action7EventDetail}),this.action8EventDetail={info:"Action 8",action:null},this.action8Event=new CustomEvent("action8",{bubbles:!1,cancelable:!0,detail:this.action8EventDetail}),this.mainClickHit=e=>{this.mainClick(e)},this.mainClickE=()=>{this.mainClickDetail.click="click",document.dispatchEvent(this.mainClickEvent)},this.mainClickDown=()=>{this.mainClickDetail.click="clickDown",document.dispatchEvent(this.mainClickEvent)},this.mainClickUp=()=>{this.mainClickDetail.click="clickUp",document.dispatchEvent(this.mainClickEvent)},this.altClickHit=e=>{this.altClick(e)},this.altClickDown=()=>{this.altClickDetail.click="altClickHit",document.dispatchEvent(this.altClickEvent)},this.altClickUp=()=>{this.altClickDetail.click="altClickRelease",document.dispatchEvent(this.altClickEvent)},this.dispatchAlt=()=>{document.dispatchEvent(this.altClickEvent)},this.directionHit=e=>{this.direction(e)},this.directionForwardLeftDown=()=>{this.directionForwardDown(),this.directionLeftDown()},this.directionForwardLeftUp=()=>{this.directionForwardUp(),this.directionLeftUp()},this.directionForwardDown=()=>{this.directionEventDetail.direction="forwardHit",document.dispatchEvent(this.directionEvent)},this.directionForwardUp=()=>{this.directionEventDetail.direction="forwardRelease",document.dispatchEvent(this.directionEvent)},this.directionForwardRightDown=()=>{this.directionForwardDown(),this.directionRightDown()},this.directionForwardRightUp=()=>{this.directionForwardUp(),this.directionRightUp()},this.directionLeftDown=()=>{this.directionEventDetail.direction="leftHit",document.dispatchEvent(this.directionEvent)},this.directionLeftUp=()=>{this.directionEventDetail.direction="leftRelease",document.dispatchEvent(this.directionEvent)},this.directionBackwardLeftDown=()=>{this.directionBackwardDown(),this.directionLeftDown()},this.directionBackwardLeftUp=()=>{this.directionBackwardUp(),this.directionLeftUp()},this.directionBackwardDown=()=>{this.directionEventDetail.direction="backwardHit",document.dispatchEvent(this.directionEvent)},this.directionBackwardUp=()=>{this.directionEventDetail.direction="backwardRelease",document.dispatchEvent(this.directionEvent)},this.directionBackwardRightDown=()=>{this.directionBackwardDown(),this.directionRightDown()},this.directionBackwardRightUp=()=>{this.directionBackwardUp(),this.directionRightUp()},this.directionRightDown=()=>{this.directionEventDetail.direction="rightHit",document.dispatchEvent(this.directionEvent)},this.directionRightUp=()=>{this.directionEventDetail.direction="rightRelease",document.dispatchEvent(this.directionEvent)},this.rotationHit=e=>{this.rotation(e)},this.rotationForwardLeftDown=()=>{this.rotationForwardDown(),this.rotationLeftDown()},this.rotationForwardLeftUp=()=>{this.rotationForwardUp(),this.rotationLeftUp()},this.rotationForwardDown=()=>{this.rotationEventDetail.rotation="forwardHit",document.dispatchEvent(this.rotationEvent)},this.rotationForwardUp=()=>{this.rotationEventDetail.rotation="forwardRelease",document.dispatchEvent(this.rotationEvent)},this.rotationForwardRightDown=()=>{this.rotationForwardDown(),this.rotationRightDown()},this.rotationForwardRightUp=()=>{this.rotationForwardUp(),this.rotationRightUp()},this.rotationLeftDown=()=>{this.rotationEventDetail.rotation="leftHit",document.dispatchEvent(this.rotationEvent)},this.rotationLeftUp=()=>{this.rotationEventDetail.rotation="leftRelease",document.dispatchEvent(this.rotationEvent)},this.rotationBackwardLeftDown=()=>{this.rotationBackwardDown(),this.rotationLeftDown()},this.rotationBackwardLeftUp=()=>{this.rotationBackwardUp(),this.rotationLeftUp()},this.rotationBackwardDown=()=>{this.rotationEventDetail.rotation="backwardHit",document.dispatchEvent(this.rotationEvent)},this.rotationBackwardUp=()=>{this.rotationEventDetail.rotation="backwardRelease",document.dispatchEvent(this.rotationEvent)},this.rotationBackwardRightDown=()=>{this.rotationBackwardDown(),this.rotationRightDown()},this.rotationBackwardRightUp=()=>{this.rotationBackwardUp(),this.rotationRightUp()},this.rotationRightDown=()=>{this.rotationEventDetail.rotation="rightHit",document.dispatchEvent(this.rotationEvent)},this.rotationRightUp=()=>{this.rotationEventDetail.rotation="rightRelease",document.dispatchEvent(this.rotationEvent)},this.action1Hit=e=>{this.action1(e)},this.action1Down=()=>{this.action1EventDetail.action="action1Hit",document.dispatchEvent(this.action1Event)},this.action1Up=()=>{this.action1EventDetail.action="action1Release",document.dispatchEvent(this.action1Event)},this.action2Hit=e=>{this.action2(e)},this.action2Down=()=>{this.action2EventDetail.action="action2Hit",document.dispatchEvent(this.action2Event)},this.action2Up=()=>{this.action2EventDetail.action="action2Release",document.dispatchEvent(this.action2Event)},this.action3Hit=e=>{this.action3(e)},this.action3Down=()=>{this.action3EventDetail.action="action3Hit",document.dispatchEvent(this.action3Event)},this.action3Up=()=>{this.action3EventDetail.action="action3Release",document.dispatchEvent(this.action3Event)},this.action4Hit=e=>{this.action4(e)},this.action4Down=()=>{this.action4EventDetail.action="action4Hit",document.dispatchEvent(this.action4Event)},this.action4Up=()=>{this.action4EventDetail.action="action4Release",document.dispatchEvent(this.action4Event)},this.action5Hit=e=>{this.action5(e)},this.action5Down=()=>{this.action5EventDetail.action="action5Hit",document.dispatchEvent(this.action5Event)},this.action5Up=()=>{this.action5EventDetail.action="action5Release",document.dispatchEvent(this.action5Event)},this.action6Hit=e=>{this.action6(e)},this.action6Down=()=>{this.action6EventDetail.action="action6Hit",document.dispatchEvent(this.action6Event)},this.action6Up=()=>{this.action6EventDetail.action="action6Release",document.dispatchEvent(this.action6Event)},this.action7Hit=e=>{this.action7(e)},this.action7Down=()=>{this.action7EventDetail.action="action7Hit",document.dispatchEvent(this.action7Event)},this.action7Up=()=>{this.action7EventDetail.action="action7Release",document.dispatchEvent(this.action7Event)},this.action8Hit=e=>{this.action8(e)},this.action8Down=()=>{this.action8EventDetail.action="action8Hit",document.dispatchEvent(this.action8Event)},this.action8Up=()=>{this.action8EventDetail.action="action8Release",document.dispatchEvent(this.action8Event)},this.keyboardDownHit=e=>{this.keyboardDown(e)},this.keyboardUpHit=e=>{this.keyboardUp(e)},this.blankHit=e=>{this.blank(e)},this.questLeftMainClickDown=()=>{this.mainClickDetail.click="leftClickDown",document.dispatchEvent(this.mainClickEvent)},this.questLeftMainClickUp=()=>{this.mainClickDetail.click="leftClickUp",document.dispatchEvent(this.mainClickEvent)},this.questLeftAltClickDown=()=>{this.altClickDetail.click="leftAltClickDown",document.dispatchEvent(this.altClickEvent)},this.questLeftAltClickUp=()=>{this.altClickDetail.click="leftAltClickUp",document.dispatchEvent(this.altClickEvent)},this.questRightMainClickDown=()=>{this.mainClickDetail.click="rightClickDown",document.dispatchEvent(this.mainClickEvent)},this.questRightMainClickUp=()=>{this.mainClickDetail.click="rightClickUp",document.dispatchEvent(this.mainClickEvent)},this.questRightAltClickDown=()=>{this.altClickDetail.click="rightAltClickDown",document.dispatchEvent(this.altClickEvent)},this.questRightAltClickUp=()=>{this.altClickDetail.click="rightAltClickUp",document.dispatchEvent(this.altClickEvent)},this.questJoystickOtherEvent=e=>{this.questJoystick4Other(e)},this.deadzoneLoco=.1,this.xNumLoco=0,this.yNumLoco=0,this.angleLoco=0,this.angleDegLoco=0,this.deadzoneOther=.3,this.xNumOther=0,this.yNumOther=0,this.angleOther=0,this.angleDegOther=0,this.other={action6Down:!1,action8Down:!1,action5Down:!1,action7Down:!1},this.deadzoneRot=.1,this.xNumRot=0,this.yNumRot=0,this.angleRot=0,this.angleDegRot=0,this.toggled={},this.docClick=!0,document.addEventListener("mainClick",this.mainClickHit),document.addEventListener("altClick",this.altClickHit),document.addEventListener("direction",this.directionHit),document.addEventListener("rotation",this.rotationHit),document.addEventListener("action1",this.action1Hit),document.addEventListener("action2",this.action2Hit),document.addEventListener("action3",this.action3Hit),document.addEventListener("action4",this.action4Hit),document.addEventListener("action5",this.action5Hit),document.addEventListener("action6",this.action6Hit),document.addEventListener("action7",this.action7Hit),document.addEventListener("action8",this.action8Hit),document.addEventListener("contextmenu",this.dispatchAlt),document.addEventListener("keydown",this.keyboardDownHit),document.addEventListener("keyup",this.keyboardUpHit),setTimeout((()=>{this.auxl.mouseController.GetEl().addEventListener("mousedown",this.mainClickDown),this.auxl.mouseController.GetEl().addEventListener("mouseup",this.mainClickUp),this.locomotion=this.el.components.locomotion,this.vrController1=document.getElementById("vrController1"),this.vrController2=document.getElementById("vrController2"),this.vrController1.addEventListener("triggerdown",this.questLeftMainClickDown),this.vrController1.addEventListener("triggerup",this.questLeftMainClickUp),this.vrController1.addEventListener("gripdown",this.questLeftAltClickDown),this.vrController1.addEventListener("gripup",this.questLeftAltClickUp),this.vrController1.addEventListener("xbuttondown",this.action1Down),this.vrController1.addEventListener("xbuttonup",this.action1Up),this.vrController1.addEventListener("ybuttondown",this.action2Down),this.vrController1.addEventListener("ybuttonup",this.action2Up),this.vrController2.addEventListener("triggerdown",this.questRightMainClickDown),this.vrController2.addEventListener("triggerup",this.questRightMainClickUp),this.vrController2.addEventListener("gripdown",this.questRightAltClickDown),this.vrController2.addEventListener("gripup",this.questRightAltClickUp),this.vrController2.addEventListener("abuttondown",this.action3Down),this.vrController2.addEventListener("abuttonup",this.action3Up),this.vrController2.addEventListener("bbuttondown",this.action4Down),this.vrController2.addEventListener("bbuttonup",this.action4Up),this.addJoystickEvents(),this.mobileStart.addEventListener("touchstart",this.auxl.ToggleHTMLMenu),this.mobileSelect.addEventListener("touchstart",this.auxl.player.MainMenuAction)}),250),this.mobileUpLeft.addEventListener("touchstart",this.directionForwardLeftDown),this.mobileUpLeft.addEventListener("touchend",this.directionForwardLeftUp),this.mobileUp.addEventListener("touchstart",this.directionForwardDown),this.mobileUp.addEventListener("touchend",this.directionForwardUp),this.mobileUpRight.addEventListener("touchstart",this.directionForwardRightDown),this.mobileUpRight.addEventListener("touchend",this.directionForwardRightUp),this.mobileLeft.addEventListener("touchstart",this.directionLeftDown),this.mobileLeft.addEventListener("touchend",this.directionLeftUp),this.mobileRight.addEventListener("touchstart",this.directionRightDown),this.mobileRight.addEventListener("touchend",this.directionRightUp),this.mobileDownLeft.addEventListener("touchstart",this.directionBackwardLeftDown),this.mobileDownLeft.addEventListener("touchend",this.directionBackwardLeftUp),this.mobileDown.addEventListener("touchstart",this.directionBackwardDown),this.mobileDown.addEventListener("touchend",this.directionBackwardUp),this.mobileDownRight.addEventListener("touchstart",this.directionBackwardRightDown),this.mobileDownRight.addEventListener("touchend",this.directionBackwardRightUp),this.mobileA.addEventListener("touchstart",this.action1Down),this.mobileA.addEventListener("touchend",this.action1Up),this.mobileB.addEventListener("touchstart",this.action2Down),this.mobileB.addEventListener("touchend",this.action2Up),this.mobileC.addEventListener("touchstart",this.action3Down),this.mobileC.addEventListener("touchend",this.action3Up),this.mobileD.addEventListener("touchstart",this.action4Down),this.mobileD.addEventListener("touchend",this.action4Up),this.mobileG.addEventListener("touchstart",this.action6Down),this.mobileG.addEventListener("touchend",this.action6Up),this.mobileH.addEventListener("touchstart",this.action7Down),this.mobileH.addEventListener("touchend",this.action7Up),this.mobileI.addEventListener("touchstart",this.action8Down),this.mobileI.addEventListener("touchend",this.action8Up)},updateInput:function(e){},updateAction:function(e){for(let t in e){let o,a,i;if("altDown"===t)o="altDownFunc",a="altDownParams",i="center";else if("altUp"===t)o="altUpFunc",a="altUpParams",i="center";else if("action1Down"===t)o="action1DownFunc",a="action1DownParams",i="a";else if("action1Up"===t)o="action1UpFunc",a="action1UpParams",i="a";else if("action2Down"===t)o="action2DownFunc",a="action2DownParams",i="b";else if("action2Up"===t)o="action2UpFunc",a="action2UpParams",i="b";else if("action3Down"===t)o="action3DownFunc",a="action3DownParams",i="c";else if("action3Up"===t)o="action3UpFunc",a="action3UpParams",i="c";else if("action4Down"===t)o="action4DownFunc",a="action4DownParams",i="d";else if("action4Up"===t)o="action4UpFunc",a="action4UpParams",i="d";else if("action5Down"===t)o="action5DownFunc",a="action5DownParams",i="f";else if("action5Up"===t)o="action5UpFunc",a="action5UpParams",i="f";else if("action6Down"===t)o="action6DownFunc",a="action6DownParams",i="g";else if("action6Up"===t)o="action6UpFunc",a="action6UpParams",i="g";else if("action7Down"===t)o="action7DownFunc",a="action7DownParams",i="h";else if("action7Up"===t)o="action7UpFunc",a="action7UpParams",i="h";else if("action8Down"===t)o="action8DownFunc",a="action8DownParams",i="i";else{if("action8Up"!==t)return void console.log("Failed to identify action");o="action8UpFunc",a="action8UpParams",i="i"}if(e[t]){let n=e[t].auxlObj,r=!1;e[t].component&&(r=e[t].component);let s=e[t].func;this[a]=!1,e[t].params&&(this[a]=e[t].params),this[o]=r?document.getElementById(n).components[r][s].bind(document.getElementById(n).components[r]):this.auxl[n][s],e[t].name&&(this.auxl.controlsInfo[t]={name:e[t].name,info:e[t].info}),this.auxl.ToggleHTML(i,!0)}else this[o]=!1,this[a]=!1}},disableAction:function(e){for(let t in e){let o,a,i;if("altDown"===t)o="altDownFunc",a="altDownParams",i="center";else if("altUp"===t)o="altUpFunc",a="altUpParams",i="center";else if("action1Down"===t)o="action1DownFunc",a="action1DownParams",i="a";else if("action1Up"===t)o="action1UpFunc",a="action1UpParams",i="a";else if("action2Down"===t)o="action2DownFunc",a="action2DownParams",i="b";else if("action2Up"===t)o="action2UpFunc",a="action2UpParams",i="b";else if("action3Down"===t)o="action3DownFunc",a="action3DownParams",i="c";else if("action3Up"===t)o="action3UpFunc",a="action3UpParams",i="c";else if("action4Down"===t)o="action4DownFunc",a="action4DownParams",i="d";else if("action4Up"===t)o="action4UpFunc",a="action4UpParams",i="d";else if("action5Down"===t)o="action5DownFunc",a="action5DownParams",i="f";else if("action5Up"===t)o="action5UpFunc",a="action5UpParams",i="f";else if("action6Down"===t)o="action6DownFunc",a="action6DownParams",i="g";else if("action6Up"===t)o="action6UpFunc",a="action6UpParams",i="g";else if("action7Down"===t)o="action7DownFunc",a="action7DownParams",i="h";else if("action7Up"===t)o="action7UpFunc",a="action7UpParams",i="h";else if("action8Down"===t)o="action8DownFunc",a="action8DownParams",i="i";else{if("action8Up"!==t)return console.log("Failed to identify action"),console.log(t),void console.log(e[t]);o="action8UpFunc",a="action8UpParams",i="i"}this.auxl.controlsInfo[t]&&delete this.auxl.controlsInfo[t],this.auxl.ToggleHTML(i,!1),this[o]=!1,this[a]=!1}},mainClick:function(e){e.target&&e.target.URL||(console.log(e),["clickDown","leftClickDown","rightClickDown","touchstart"].includes(e.detail.click)||["clickUp","leftClickUp","rightClickUp"].includes(e.detail.click))},altClick:function(e){"altClickHit"===e.detail.action?this.altDownFunc&&(this.altDownParams?this.altDownFunc(this.altDownParams):this.altDownFunc()):"altClickRelease"===e.detail.action&&this.altUpFunc&&(this.altUpParams?this.altUpFunc(this.altUpParams):this.altUpFunc())},direction:function(e){"forwardHit"===e.detail.direction?this.locomotion.movingForward():"forwardRelease"===e.detail.direction?this.locomotion.cancelForward():"leftHit"===e.detail.direction?this.locomotion.movingLeft():"leftRelease"===e.detail.direction?this.locomotion.cancelLeft():"backwardHit"===e.detail.direction?this.locomotion.movingReverse():"backwardRelease"===e.detail.direction?this.locomotion.cancelReverse():"rightHit"===e.detail.direction?this.locomotion.movingRight():"rightRelease"===e.detail.direction&&this.locomotion.cancelRight()},rotation:function(e){"forwardHit"===e.detail.rotation?this.gimbal.movingForward():"forwardRelease"===e.detail.rotation?this.gimbal.cancelForward():"leftHit"===e.detail.rotation?this.gimbal.movingLeft():"leftRelease"===e.detail.rotation?this.gimbal.cancelLeft():"backwardHit"===e.detail.rotation?this.gimbal.movingReverse():"backwardRelease"===e.detail.rotation?this.gimbal.cancelReverse():"rightHit"===e.detail.rotation?this.gimbal.movingRight():"rightRelease"===e.detail.rotation&&this.gimbal.cancelRight()},action1:function(e){"action1Hit"===e.detail.action?this.action1DownFunc&&(this.action1DownParams?this.action1DownFunc(this.action1DownParams):this.action1DownFunc()):"action1Release"===e.detail.action&&this.action1UpFunc&&(this.action1UpParams?this.action1UpFunc(this.action1UpParams):this.action1UpFunc())},action2:function(e){"action2Hit"===e.detail.action?this.action2DownFunc&&(this.action2DownParams?this.action2DownFunc(this.action2DownParams):this.action2DownFunc()):"action2Release"===e.detail.action&&this.action2UpFunc&&(this.action2UpParams?this.action2UpFunc(this.action2UpParams):this.action2UpFunc())},action3:function(e){"action3Hit"===e.detail.action?this.action3DownFunc&&(this.action3DownParams?this.action3DownFunc(this.action3DownParams):this.action3DownFunc()):"action3Release"===e.detail.action&&this.action3UpFunc&&(this.action3UpParams?this.action3UpFunc(this.action3UpParams):this.action3UpFunc())},action4:function(e){"action4Hit"===e.detail.action?this.action4DownFunc&&(this.action4DownParams?this.action4DownFunc(this.action4DownParams):this.action4DownFunc()):"action4Release"===e.detail.action&&this.action4UpFunc&&(this.action4UpParams?this.action4UpFunc(this.action4UpParams):this.action4UpFunc())},action5:function(e){"action5Hit"===e.detail.action?this.action5DownFunc&&(this.action5DownParams?this.action5DownFunc(this.action5DownParams):this.action5DownFunc()):"action5Release"===e.detail.action&&this.action5UpFunc&&(this.action5UpParams?this.action5UpFunc(this.action5UpParams):this.action5UpFunc())},action6:function(e){"action6Hit"===e.detail.action?this.action6DownFunc&&(this.action6DownParams?this.action6DownFunc(this.action6DownParams):this.action6DownFunc()):"action6Release"===e.detail.action&&this.action6UpFunc&&(this.action6UpParams?this.action6UpFunc(this.action6UpParams):this.action6UpFunc())},action7:function(e){"action7Hit"===e.detail.action?this.action7DownFunc&&(this.action7DownParams?this.action7DownFunc(this.action7DownParams):this.action7DownFunc()):"action7Release"===e.detail.action&&this.action7UpFunc&&(this.action7UpParams?this.action7UpFunc(this.action7UpParams):this.action7UpFunc())},action8:function(e){"action8Hit"===e.detail.action?this.action8DownFunc&&(this.action8DownParams?this.action8DownFunc(this.action8DownParams):this.action8DownFunc()):"action8Release"===e.detail.action&&this.action8UpFunc&&(this.action8UpParams?this.action8UpFunc(this.action8UpParams):this.action8UpFunc())},keyboardDown:function(e){Object.keys(this.toggled).includes(e.key)||(this.toggled[e.key]=!0,this.controls.directionForwardKeys.includes(e.key)?this.directionForwardDown():this.controls.directionLeftKeys.includes(e.key)?this.directionLeftDown():this.controls.directionBackwardKeys.includes(e.key)?this.directionBackwardDown():this.controls.directionRightKeys.includes(e.key)?this.directionRightDown():this.controls.rotationForwardKeys.includes(e.key)?this.rotationForwardDown():this.controls.rotationLeftKeys.includes(e.key)?this.rotationLeftDown():this.controls.rotationBackwardKeys.includes(e.key)?this.rotationBackwardDown():this.controls.rotationRightKeys.includes(e.key)?this.rotationRightDown():this.controls.action1Keys.includes(e.key)?this.action1Down():this.controls.action2Keys.includes(e.key)?this.action2Down():this.controls.action3Keys.includes(e.key)?this.action3Down():this.controls.action4Keys.includes(e.key)?this.action4Down():this.controls.action5Keys.includes(e.key)?this.action5Down():this.controls.action6Keys.includes(e.key)?this.action6Down():this.controls.action7Keys.includes(e.key)?this.action7Down():this.controls.action8Keys.includes(e.key)&&this.action8Down())},keyboardUp:function(e){delete this.toggled[e.key],this.controls.directionForwardKeys.includes(e.key)?this.directionForwardUp():this.controls.directionLeftKeys.includes(e.key)?this.directionLeftUp():this.controls.directionBackwardKeys.includes(e.key)?this.directionBackwardUp():this.controls.directionRightKeys.includes(e.key)?this.directionRightUp():this.controls.rotationForwardKeys.includes(e.key)?this.rotationForwardUp():this.controls.rotationLeftKeys.includes(e.key)?this.rotationLeftUp():this.controls.rotationBackwardKeys.includes(e.key)?this.rotationBackwardUp():this.controls.rotationRightKeys.includes(e.key)?this.rotationRightUp():this.controls.action1Keys.includes(e.key)?this.action1Up():this.controls.action2Keys.includes(e.key)?this.action2Up():this.controls.action3Keys.includes(e.key)?this.action3Up():this.controls.action4Keys.includes(e.key)?this.action4Up():this.controls.action5Keys.includes(e.key)?this.action5Up():this.controls.action6Keys.includes(e.key)?this.action6Up():this.controls.action7Keys.includes(e.key)?this.action7Up():this.controls.action8Keys.includes(e.key)&&this.action8Up()},questJoystick1Locomotion:function(e){let t=-1*e.detail.x,o=e.detail.y,a=!1,i=!1;(t>0&&t<this.deadzoneLoco||t<0&&t>-1*this.deadzoneLoco)&&(a=!0),(o>0&&o<this.deadzoneLoco||o<0&&o>-1*this.deadzoneLoco)&&(i=!0),a&&i?this.locomotion.joystickCancel():(this.joystickPos=new THREE.Vector3(t,0,o),this.locomotion.joystick(this.joystickPos))},questJoystick4Locomotion:function(e){this.xNumLoco=e.detail.x,this.yNumLoco=e.detail.y,this.angleLoco=Math.atan2(this.xNumLoco,this.yNumLoco),this.angleDegLoco=this.angleLoco/(Math.PI/180),this.yNumLoco<this.deadzoneLoco&&this.yNumLoco>-1*this.deadzoneLoco&&this.xNumLoco>-1*this.deadzoneLoco&&this.xNumLoco<this.deadzoneLoco?(this.locomotion.clearMovement(),this.updateInput("Locomotion Clear")):this.yNumLoco>this.deadzoneLoco||this.yNumLoco<-1*this.deadzoneLoco||this.xNumLoco<-1*this.deadzoneLoco||this.xNumLoco>this.deadzoneLoco?this.angleDegLoco>-45&&this.angleDegLoco<45?(this.locomotion.clearMovement(),this.locomotion.movingReverse()):this.angleDegLoco>45&&this.angleDegLoco<135?(this.locomotion.clearMovement(),this.locomotion.movingRight()):this.angleDegLoco>135||this.angleDegLoco<-135?(this.locomotion.clearMovement(),this.locomotion.movingForward()):this.angleDegLoco<-45&&this.angleDegLoco>-135&&(this.locomotion.clearMovement(),this.locomotion.movingLeft()):this.locomotion.clearMovement()},questJoystick8Locomotion:function(e){this.xNumLoco=e.detail.x,this.yNumLoco=e.detail.y,this.angleLoco=Math.atan2(this.xNumLoco,this.yNumLoco),this.angleDegLoco=this.angleLoco/(Math.PI/180),this.yNumLoco<this.deadzoneLoco&&this.yNumLoco>-1*this.deadzoneLoco&&this.xNumLoco>-1*this.deadzoneLoco&&this.xNumLoco<this.deadzoneLoco?this.locomotion.clearMovement():this.yNumLoco>this.deadzoneLoco||this.yNumLoco<-1*this.deadzoneLoco||this.xNumLoco<-1*this.deadzoneLoco||this.xNumLoco>this.deadzoneLoco?(this.locomotion.clearMovement(),this.angleDegLoco>-22.5&&this.angleDegLoco<22.5?this.directionBackwardDown():this.angleDegLoco>22.5&&this.angleDegLoco<67.5?this.directionBackwardRightDown():this.angleDegLoco>67.5&&this.angleDegLoco<112.5?this.directionRightDown():this.angleDegLoco>112.5&&this.angleDegLoco<157.5?this.directionForwardRightDown():this.angleDegLoco>157.5||this.angleDegLoco<-157.5?this.directionForwardDown():this.angleDegLoco<-112.5&&this.angleDegLoco>-157.5?this.directionForwardLeftDown():this.angleDegLoco<-67.5&&this.angleDegLoco>-112.5?this.directionLeftDown():this.angleDegLoco<-22.5&&this.angleDegLoco>-67.5&&this.directionBackwardLeftDown()):this.locomotion.clearMovement()},questJoystick4Other:function(e){this.xNumOther=e.detail.x,this.yNumOther=e.detail.y,this.angleOther=Math.atan2(this.xNumOther,this.yNumOther),this.angleDegOther=this.angleOther/(Math.PI/180),this.yNumOther<this.deadzoneOther&&this.yNumOther>-1*this.deadzone&&this.xNumOther>-1*this.deadzoneOther&&this.xNumOther<this.deadzoneOther?this.updateInput("Rotation|Duck Clear"):this.yNumOther>this.deadzoneOther||this.yNumOther<-1*this.deadzoneOther||this.xNumOther<-1*this.deadzoneOther||this.xNumOther>this.deadzoneOther?this.angleDegOther>-45&&this.angleDegOther<45?this.other.action6Down||(this.other.action5Down=!1,this.other.action7Down=!1,this.other.action8Down=!1,this.other.action6Down=!0,this.action6Down()):this.angleDegOther>45&&this.angleDegOther<135?this.other.action8Down||(this.other.action5Down=!1,this.other.action6Down=!1,this.other.action7Down=!1,this.other.action8Down=!0,this.action8Down()):this.angleDegOther>135||this.angleDegOther<-135?this.other.action5Down||(this.other.action6Down=!1,this.other.action7Down=!1,this.other.action8Down=!1,this.other.action5Down=!0,this.action5Down()):this.angleDegOther<-45&&this.angleDegOther>-135&&(this.other.action7Down||(this.other.action5Down=!1,this.other.action6Down=!1,this.other.action8Down=!1,this.other.action7Down=!0,this.action7Down())):(this.other.action5Down=!1,this.other.action6Down=!1,this.other.action7Down=!1,this.other.action8Down=!1)},addJoystickEvents:function(){this.questJoystickLocomotionEvent=e=>{1===this.auxl.joystickLoco?this.questJoystick1Locomotion(e):4===this.auxl.joystickLoco?this.questJoystick4Locomotion(e):8===this.auxl.joystickLoco&&this.questJoystick8Locomotion(e)},["bothRight","bothLeftLoco"].includes(this.auxl.vrHand)?(this.vrController1.addEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController2.addEventListener("thumbstickmoved",this.questJoystickOtherEvent)):["bothLeft","bothRightLoco"].includes(this.auxl.vrHand)?(this.vrController2.addEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController1.addEventListener("thumbstickmoved",this.questJoystickOtherEvent)):(this.vrController1.addEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController2.addEventListener("thumbstickmoved",this.questJoystickOtherEvent))},clearJoystickEvents:function(){["bothRight","bothLeftLoco"].includes(this.auxl.vrHandPrevious)?(this.vrController1.removeEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController2.removeEventListener("thumbstickmoved",this.questJoystickOtherEvent)):["bothLeft","bothRightLoco"].includes(this.auxl.vrHandPrevious)?(this.vrController2.removeEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController1.removeEventListener("thumbstickmoved",this.questJoystickOtherEvent)):(this.vrController1.removeEventListener("thumbstickmoved",this.questJoystickLocomotionEvent),this.vrController2.removeEventListener("thumbstickmoved",this.questJoystickOtherEvent))},blank:function(e){console.log(e)},swapClick:function(e){e&&this.docClick?(document.removeEventListener("mainClick",this.mainClickHit),this.vrController1.addEventListener("mainClick",this.mainClickHit),this.vrController2.addEventListener("mainClick",this.mainClickHit),this.docClick=!1):e||this.docClick||(this.vrController1.removeEventListener("mainClick",this.mainClickHit),this.vrController2.removeEventListener("mainClick",this.mainClickHit),document.addEventListener("mainClick",this.mainClickHit),this.docClick=!0)},update:function(){this.auxl.vrHandPrevious&&(this.clearJoystickEvents(),this.addJoystickEvents())},remove:function(){document.removeEventListener("mainClick",this.mainClickHit),document.removeEventListener("altClick",this.altClickHit),document.removeEventListener("direction",this.directionHit),document.removeEventListener("rotation",this.rotationHit),document.removeEventListener("action1",this.action1Hit),document.removeEventListener("action2",this.action2Hit),document.removeEventListener("action3",this.action3Hit),document.removeEventListener("action4",this.action4Hit),document.removeEventListener("action5",this.action5Hit),document.removeEventListener("action6",this.action6Hit),document.removeEventListener("action7",this.action7Hit),document.removeEventListener("action8",this.action8Hit),document.removeEventListener("contextmenu",this.dispatchAlt),document.removeEventListener("keydown",this.keyboardDownHit),document.removeEventListener("keyup",this.keyboardUpHit),this.auxl.mouseController.GetEl().removeEventListener("mousedown",this.mainClickDown),this.auxl.mouseController.GetEl().removeEventListener("mouseup",this.mainClickUp),this.vrController1.removeEventListener("triggerdown",this.questLeftMainClickDown),this.vrController1.removeEventListener("triggerup",this.questLeftMainClickUp),this.vrController1.removeEventListener("gripdown",this.questLeftAltClickDown),this.vrController1.removeEventListener("gripup",this.questLeftAltClickUp),this.vrController1.removeEventListener("xbuttondown",this.action1Down),this.vrController1.removeEventListener("xbuttonup",this.action1Up),this.vrController1.removeEventListener("ybuttondown",this.action2Down),this.vrController1.removeEventListener("ybuttonup",this.action2Up),this.vrController2.removeEventListener("triggerdown",this.questRightMainClickDown),this.vrController2.removeEventListener("triggerup",this.questRightMainClickUp),this.vrController2.removeEventListener("gripdown",this.questRightAltClickDown),this.vrController2.removeEventListener("gripup",this.questRightAltClickUp),this.vrController2.removeEventListener("abuttondown",this.action3Down),this.vrController2.removeEventListener("abuttonup",this.action3Up),this.vrController2.removeEventListener("bbuttondown",this.action4Down),this.vrController2.removeEventListener("bbuttonup",this.action4Up),this.clearJoystickEvents(),this.mobileUpLeft.removeEventListener("touchstart",this.directionForwardLeftDown),this.mobileUpLeft.removeEventListener("touchend",this.directionForwardLeftUp),this.mobileUp.removeEventListener("touchstart",this.directionForwardDown),this.mobileUp.removeEventListener("touchend",this.directionForwardUp),this.mobileUpRight.removeEventListener("touchstart",this.directionForwardRightDown),this.mobileUpRight.removeEventListener("touchend",this.directionForwardRightUp),this.mobileLeft.removeEventListener("touchstart",this.directionLeftDown),this.mobileLeft.removeEventListener("touchend",this.directionLeftUp),this.mobileRight.removeEventListener("touchstart",this.directionRightDown),this.mobileRight.removeEventListener("touchend",this.directionRightUp),this.mobileDownLeft.removeEventListener("touchstart",this.directionBackwardLeftDown),this.mobileDownLeft.removeEventListener("touchend",this.directionBackwardLeftUp),this.mobileDown.removeEventListener("touchstart",this.directionBackwardDown),this.mobileDown.removeEventListener("touchend",this.directionBackwardUp),this.mobileDownRight.removeEventListener("touchstart",this.directionBackwardRightDown),this.mobileDownRight.removeEventListener("touchend",this.directionBackwardRightUp),this.mobileStart.removeEventListener("touchstart",this.auxl.ToggleHTMLMenu),this.mobileSelect.removeEventListener("touchstart",this.auxl.player.MainMenuAction),this.mobileA.removeEventListener("touchstart",this.action1Down),this.mobileA.removeEventListener("touchend",this.action1Up),this.mobileB.removeEventListener("touchstart",this.action2Down),this.mobileB.removeEventListener("touchend",this.action2Up),this.mobileC.removeEventListener("touchstart",this.action3Down),this.mobileC.removeEventListener("touchend",this.action3Up),this.mobileD.removeEventListener("touchstart",this.action4Down),this.mobileD.removeEventListener("touchend",this.action4Up),this.mobileF.removeEventListener("touchstart",this.action5Down),this.mobileF.removeEventListener("touchend",this.action5Up),this.mobileG.removeEventListener("touchstart",this.action6Down),this.mobileG.removeEventListener("touchend",this.action6Up),this.mobileH.removeEventListener("touchstart",this.action7Down),this.mobileH.removeEventListener("touchend",this.action7Up),this.mobileI.removeEventListener("touchstart",this.action8Down),this.mobileI.removeEventListener("touchend",this.action8Up)},events:{"raycaster-intersected":function(e){},"raycaster-intersected-cleared":function(e){},"raycaster-intersection":function(e){},"raycaster-intersection-cleared":function(e){},"raycaster-closest-entity-changed":function(e){},mouseenter:function(e){this.auxl[this.id].TriggerEnter(e)},mousedown:function(e){this.Measure(),this.auxl[this.id].TriggerDown(e)},mouseup:function(e){this.auxl[this.id].TriggerUp(e),this.Measure(!0)},mouseleave:function(e){this.auxl[this.id].TriggerLeave(e)},collide:function(e){},click:function(e){},altclick:function(e){},keydown:function(e){},keyup:function(e){}},Measure:function(e){this.measure=!e},tick:function(e,t){this.measure?this.time>1?this.time--:(this.time=0,this.Measure(!0)):this.time=1,this.auxl[this.id]&&this.auxl[this.id].Ticker&&this.auxl[this.id].Ticker(this.time,this)}}),AFRAME.registerComponent("locomotion",{dependencies:["auxl"],schema:{uiid:{type:"string",default:"ui"},ray:{type:"string",default:"camera"},courserid:{type:"string",default:"mouseCursor"},movetype:{type:"string",default:"vr"},pov:{type:"string",default:"1st"},style:{type:"string",default:"free"},axis:{type:"string",default:"posXZ"},speedFast:{type:"number",default:.15},speedSlow:{type:"number",default:.075}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.freeStepThrottled=AFRAME.utils.throttle(this.freeStep,30,this),this.gridStepThrottled=AFRAME.utils.throttle(this.gridStep,400,this),this.mouseCursor=document.getElementById(this.data.courserid),this.data.uuid&&(this.ui=document.getElementById(this.data.uiid)),this.movetype=this.data.movetype,this.pov=this.data.pov,this.style=this.data.style,this.axis=this.data.axis,this.directionForward,this.directionReverse,this.directionBrake1,this.directionBrake2,this.directionBrake3,this.directionBrake4,this.camera=document.getElementById(this.data.ray),this.ray=document.getElementById(this.data.ray),this.rayBody=document.getElementById("playerRig"),this.rayRot=new THREE.Vector3,this.player=document.getElementById("playerRig"),this.avatar,this.avatarSphere,this.ui=document.getElementById("beltUIParent"),this.positionCam=new THREE.Vector3,this.positionPlayer=new THREE.Vector3,this.rotationPlayer=new THREE.Vector3,this.positionAvatar=new THREE.Vector3,this.rotationAvatar=new THREE.Vector3,this.positionNew=new THREE.Vector3,this.rotationNew=new THREE.Vector3,this.positionTemp=new THREE.Vector3,this.quaternion=new THREE.Quaternion,this.vector,this.angle,this.directionObject,this.directionVector=new THREE.Vector3,this.posRound=new THREE.Vector3,this.newPosRound=new THREE.Vector3,this.newPosStandRound=new THREE.Vector3,this.newPosTemp=new THREE.Vector3,this.mapX,this.mapZ,this.elPosVec3New=new THREE.Vector3,this.velocity,this.userPreviousPos=this.player.getAttribute("position"),this.userPos,this.userRot,this.userPov,this.userTravel,this.userView,this.newX,this.newZ,this.moveTo=!1,this.moveBack=!1,this.moveRight=!1,this.moveLeft=!1,this.moveUp=!1,this.moveDown=!1,this.moveBrake=!0,this.brakeReady=!0,this.brakeToggle=!1,this.brakeReset,this.moveSpeedDefault=this.data.speedFast,this.moveSpeedSlow=this.data.speedSlow,this.gridForwardTimeout,this.gridReverseTimeout,this.gridLeftTimeout,this.gridRightTimeout,this.gridUpTimeout,this.gridDownTimeout,this.gridMove=!1,this.gridSpeed=400,this.joystickLocoMove=!1,this.joystickLocoPos=!1,this.joystickOtherPos=!1,this.joystickHistory=10,this.inputsJoystick1=[],this.inputsJoystick2=[]},round:function(e){return Math.round(e)},roundHalf:function(e){return Math.round(2*e)/2},joystick:function(e){e.clone?(this.joystickLocoPos=e.clone(),this.joystickLocoMove=!0):(this.joystickLocoPos=!1,this.joystickLocoMove=!1)},joystickCancel:function(){this.joystickLocoPos=!1,this.joystickLocoMove=!1},movingForward:function(){clearTimeout(this.gridForwardTimeout),this.moveTo||(this.moveTo=!0)},cancelForward:function(){this.moveTo&&("grid"===this.style?this.gridMove?this.moveTo=!1:this.gridForwardTimeout=setTimeout((()=>{this.moveTo=!1}),this.gridSpeed/1.25):this.moveTo=!1)},movingReverse:function(){clearTimeout(this.gridReverseTimeout),this.moveBack||(this.moveBack=!0)},cancelReverse:function(){this.moveBack&&("grid"===this.style?this.gridMove?this.moveBack=!1:this.gridReverseTimeout=setTimeout((()=>{this.moveBack=!1}),this.gridSpeed/1.25):this.moveBack=!1)},movingLeft:function(){clearTimeout(this.gridLeftTimeout),this.moveLeft||(this.moveLeft=!0)},cancelLeft:function(){this.moveLeft&&("grid"===this.style?this.gridMove?this.moveLeft=!1:this.gridLeftTimeout=setTimeout((()=>{this.moveLeft=!1}),this.gridSpeed/1.25):this.moveLeft=!1)},movingRight:function(){clearTimeout(this.gridRightTimeout),this.moveRight||(this.moveRight=!0)},cancelRight:function(){this.moveRight&&("grid"===this.style?this.gridMove?this.moveRight=!1:this.gridRightTimeout=setTimeout((()=>{this.moveRight=!1}),this.gridSpeed/1.25):this.moveRight=!1)},movingUp:function(){clearTimeout(this.gridUpTimeout),this.moveUp||(this.moveUp=!0)},cancelUp:function(){this.moveUp&&("grid"===this.style?this.gridMove?this.moveUp=!1:this.gridUpTimeout=setTimeout((()=>{this.moveUp=!1}),this.gridSpeed/1.25):this.moveUp=!1)},movingDown:function(){clearTimeout(this.gridDownTimeout),this.moveDown||(this.moveDown=!0)},cancelDown:function(){this.moveDown&&("grid"===this.style?this.gridMove?this.moveDown=!1:this.gridDownTimeout=setTimeout((()=>{this.moveDown=!1}),this.gridSpeed/1.25):this.moveDown=!1)},clearMovement:function(){this.cancelForward(),this.cancelReverse(),this.cancelLeft(),this.cancelRight(),this.cancelUp(),this.cancelDown()},clearGridMovement:function(){this.moveTo=!1,this.moveBack=!1,this.moveLeft=!1,this.moveRight=!1,clearTimeout(this.gridForwardTimeout),clearTimeout(this.gridReverseTimeout),clearTimeout(this.gridLeftTimeout),clearTimeout(this.gridRightTimeout)},toggleSpeed:function(){this.brakeReady&&(this.brakeToggle?(this.brakeToggle=!1,this.brakeReady=!1,this.moveBrake=!0,this.gridSpeed=400,this.everyStepThrottled=AFRAME.utils.throttle(this.everyStep,this.gridSpeed,this)):(this.brakeToggle=!0,this.brakeReady=!1,this.moveBrake=!1,this.gridSpeed=200,this.everyStepThrottled=AFRAME.utils.throttle(this.everyStep,this.gridSpeed,this)),this.brakeReset=setTimeout((()=>{this.brakeReady=!0,clearTimeout(this.brakeReset)}),250))},brakeReadBufferLong:function(){this.brakeReset=setTimeout((()=>{this.brakeReady=!0,clearTimeout(this.brakeReset)}),2250)},hoverLocomotion:function(e){this.brakeReady&&(this.brakeToggle?(this.brakeToggle=!1,this.brakeReady=!1,this.moveBrake=!0,this.directionBrake1.setAttribute("material",{color:"red"}),this.directionBrake2.setAttribute("material",{color:"red"}),this.directionBrake3.setAttribute("material",{color:"red"}),this.directionBrake4.setAttribute("material",{color:"red"}),this.directionForward.emit("brakeOn",{}),this.directionReverse.emit("brakeOn",{}),this.directionBrake1.emit("brakeOn",{}),this.directionBrake2.emit("brakeOn",{}),this.directionBrake3.emit("brakeOn",{}),this.directionBrake4.emit("brakeOn",{})):(this.brakeToggle=!0,this.brakeReady=!1,this.moveBrake=!1,this.directionBrake1.setAttribute("material",{color:"black"}),this.directionBrake2.setAttribute("material",{color:"black"}),this.directionBrake3.setAttribute("material",{color:"black"}),this.directionBrake4.setAttribute("material",{color:"black"}),this.directionForward.emit("brakeOff",{}),this.directionReverse.emit("brakeOff",{}),this.directionBrake1.emit("brakeOff",{}),this.directionBrake2.emit("brakeOff",{}),this.directionBrake3.emit("brakeOff",{}),this.directionBrake4.emit("brakeOff",{})))},update:function(){this.moveTo=!1,this.moveBack=!1,this.moveRight=!1,this.moveLeft=!1,this.moveBrake=!0,this.brakeReady=!0,this.brakeToggle=!1,this.brakeReset,this.moveSpeedDefault=this.data.speedFast,this.moveSpeedSlow=this.data.speedSlow,this.gridForwardTimeout,this.gridReverseTimeout,this.gridLeftTimeout,this.gridRightTimeout,this.gridMove=!1,this.gridSpeed=500,this.mouseCursor=document.getElementById(this.data.courserid),this.data.uiid&&(this.ui=document.getElementById(this.data.uiid)),this.movetype=this.data.movetype,this.pov=this.data.pov,this.style=this.data.style,this.axis=this.data.axis,setTimeout((()=>{this.mouseController=document.getElementById("mouseController"),"3rd"===this.pov&&(this.auxl.avatar.SpawnLayer(!0),this.player.object3D.position.copy(new THREE.Vector3(0,5,10)),setTimeout((()=>{this.avatar=document.getElementById("avatarRig"),this.avatarSphere=document.getElementById("avatarSphere"),"angleXY"===this.axis&&(this.avatar.object3D.position.copy(new THREE.Vector3(0,0,-10)),this.player.object3D.position.copy(new THREE.Vector3(0,1.6,2)))}),500))}),1e3),"desktop"===this.movetype||"mobile"===this.movetype?this.directionObject=this.camera:"vr"===this.movetype?"camera"===this.auxl.directionType?this.directionObject=this.camera:"bothRight"===this.auxl.vrHand||"bothLeftLoco"===this.auxl.vrHand?this.directionObject=document.getElementById("vrController1"):"bothLeft"===this.auxl.vrHand||"bothRightLoco"===this.auxl.vrHand?this.directionObject=document.getElementById("vrController2"):this.directionObject=document.getElementById("vrController1"):"vrHover"===this.movetype&&("camera"===this.auxl.directionType?this.directionObject=this.camera:this.directionObject=document.getElementById("vrController1"),this.directionForward=document.getElementById("locomotionForwardUI"),this.directionReverse=document.getElementById("locomotionReverseUI"),this.directionBrake1=document.getElementById("locomotionBrake1UI"),this.directionBrake2=document.getElementById("locomotionBrake2UI"),this.directionBrake3=document.getElementById("locomotionBrake3UI"),this.directionBrake4=document.getElementById("locomotionBrake4UI"),this.directionForward.addEventListener("mouseenter",this.movingForward),this.directionForward.addEventListener("mouseleave",this.cancelForward),this.directionReverse.addEventListener("mouseenter",this.movingReverse),this.directionReverse.addEventListener("mouseleave",this.cancelReverse),this.hoverLocomotionEvent=e=>{this.hoverLocomotion(e)},document.querySelectorAll(".directionBrake").forEach((e=>{e.addEventListener("mouseenter",(e=>this.hoverLocomotionEvent))})),document.querySelectorAll(".directionBrake").forEach((e=>{e.addEventListener("mouseleave",(e=>this.brakeReadBufferLong))}))),this.directionObject=this.camera},remove:function(){"desktop"===this.movetype||"mobile"===this.movetype||"vr"===this.movetype||"vrHover"===this.movetype&&(this.directionForward.removeEventListener("mouseenter",this.movingForward),this.directionForward.removeEventListener("mouseleave",this.cancelForward),this.directionReverse.removeEventListener("mouseenter",this.movingReverse),this.directionReverse.removeEventListener("mouseleave",this.cancelReverse),document.querySelectorAll(".directionBrake").forEach((e=>{e.removeEventListener("mouseenter",(e=>this.hoverLocomotionEvent))})),document.querySelectorAll(".directionBrake").forEach((e=>{e.removeEventListener("mouseleave",(e=>this.brakeReadBufferLong))})))},tick:function(e,t){this.auxl.player.layer.move&&("free"===this.style?this.freeStepThrottled():"grid"===this.style&&this.gridStepThrottled())},freeStep:function(e,t){if(this.auxl.sceneEl.is("vr-mode")&&1===this.auxl.joystickLoco)return this.joystickLocoMove?void(this.moveBrake?this.move(!1,this.moveSpeedSlow):this.move(!1,this.moveSpeedDefault)):void 0;this.moveBrake?this.moveTo&&this.moveRight?this.move("forwardRight",this.moveSpeedSlow):this.moveTo&&this.moveLeft?this.move("forwardLeft",this.moveSpeedSlow):this.moveBack&&this.moveRight?this.move("reverseRight",this.moveSpeedSlow):this.moveBack&&this.moveLeft?this.move("reverseLeft",this.moveSpeedSlow):this.moveTo?this.move("forward",this.moveSpeedSlow):this.moveBack?this.move("reverse",this.moveSpeedSlow):this.moveRight?this.move("right",this.moveSpeedSlow):this.moveLeft&&this.move("left",this.moveSpeedSlow):this.moveTo&&this.moveRight?this.move("forwardRight",this.moveSpeedDefault):this.moveTo&&this.moveLeft?this.move("forwardLeft",this.moveSpeedDefault):this.moveBack&&this.moveRight?this.move("reverseRight",this.moveSpeedDefault):this.moveBack&&this.moveLeft?this.move("reverseLeft",this.moveSpeedDefault):this.moveTo?this.move("forward",this.moveSpeedDefault):this.moveBack?this.move("reverse",this.moveSpeedDefault):this.moveRight?this.move("right",this.moveSpeedDefault):this.moveLeft&&this.move("left",this.moveSpeedDefault)},freeStepPlus:function(e,t){this.movement="",this.moveUp&&this.moveDown||(this.moveUp?this.movement+="Up":this.moveDown&&(this.movement+="Down")),this.moveTo&&this.moveBack||(this.moveTo?this.movement+="Forward":this.moveBack&&(this.movement+="Reverse")),this.moveRight&&this.moveLeft||(this.moveRight?this.movement+="Right":this.moveLeft&&(this.movement+="Left")),this.moveBrake?this.move(this.movement,this.moveSpeedSlow):this.move(this.movement,this.moveSpeedDefault)},gridStep:function(e,t){this.moveTo||this.moveBack||this.moveRight||this.moveLeft?this.gridMove||(this.gridMove=!0):this.gridMove=!1,this.moveTo&&this.moveRight?this.move("forwardRight",.5):this.moveTo&&this.moveLeft?this.move("forwardLeft",.5):this.moveBack&&this.moveRight?this.move("reverseRight",.5):this.moveBack&&this.moveLeft?this.move("reverseLeft",.5):this.moveTo?this.move("forward",.5):this.moveBack?this.move("reverse",.5):this.moveRight?this.move("right",.5):this.moveLeft&&this.move("left",.5)},distance:function(e,t,o,a){return Math.sqrt(Math.pow(o-e,2)+1*Math.pow(a-t,2))},move:function(e,t){"1st"===this.pov?"posXZ"===this.axis?this.directionXZ(e,t):"posXZY"===this.axis?this.directionXZY(e,t):"posXY"===this.axis?this.directionXY(e,t):"posXYZ"===this.axis?this.directionXYZ(e,t):"posXYZWall"===this.axis?this.directionXYZWall(e,t):"angleXY"===this.axis?this.directionAXY(e,t):"angleXYZ"===this.axis&&this.directionAXYZ(e,t):"3rd"===this.pov&&("posXZ"===this.axis?this.rigXZ(e,t):"posXZY"===this.axis?this.rigXZY(e,t):"posXY"===this.axis?this.rigXY(e,t):"posXYZ"===this.axis?this.rigXYZ(e,t):"posXYZWall"===this.axis?this.rigXYZWall(e,t):"angleXY"===this.axis?this.rigAXY(e,t):"angleXYZ"===this.axis&&this.rigAXYZ(e,t))},togglePOV:function(){"3rd"===this.pov&&(this.auxl.avatar.SpawnLayer(!0),this.player.object3D.position.copy(new THREE.Vector3(0,5,10)),setTimeout((()=>{this.avatar=document.getElementById("avatarRig"),this.avatarSphere=document.getElementById("avatarSphere")}),500))},rayDirection:function(e,t,o){let a=new THREE.Vector3;if(e.object3D.getWorldDirection(a),this.joystickLocoPos)a.multiply(this.joystickLocoPos),this.joystickLocoPos=!1;else{let e=!1;"forwardRight"===t?e=135:"forwardLeft"===t?e=225:"reverseRight"===t?e=45:"reverseLeft"===t?e=315:"forward"===t?e=180:"reverse"===t?e=0:"right"===t?e=90:"left"===t&&(e=270),a=this.auxl.MatrixAxisRot(a,"y",e)}let i=new THREE.Vector3;return i.copy(this.rayBody.object3D.position).add(new THREE.Vector3(a.x,a.y,a.z).normalize().multiplyScalar(o)),i},movement:function(){if(this.auxl.player.layer.move)if(this.auxl.player.layer.playerPhysics)this.auxl.player.layer.physMove?this.positionNew.equals(this.positionPlayer)||(this.moveForce.copy(this.positionNew),this.moveForce.sub(this.positionPlayer),this.player.body.applyLocalImpulse(this.moveForce,new THREE.Vector3(0,0,0))):this.player.body.position.copy(this.positionNew),this.player.body.computeAABB();else if(this.auxl.collision){if(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.round(this.positionNew.y),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.y=this.round(this.positionPlayer.y),this.posRound.z=this.roundHalf(this.positionPlayer.z),this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.auxl.player.layer.bodyCrouch?this.allow=!0:(this.newPosStandRound.copy(this.newPosRound),this.newPosStandRound.y+=1,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosStandRound,this.posRound)?this.allow=!0:this.allow=!1)),this.allow||(this.newPosTemp.copy(this.newPosRound),this.newPosRound.x=this.posRound.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?(this.positionNew.x=this.positionPlayer.x,this.allow=!0):(this.newPosRound.z=this.posRound.z,this.newPosRound.x=this.newPosTemp.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.positionNew.z=this.positionPlayer.z,this.allow=!0))),this.allow){this.player.object3D.position.copy(this.positionNew),this.auxl.player.layer.gridPos.copy(this.newPosRound);let e="";this.newPosRound.z<this.posRound.z?e+="forward":this.newPosRound.z>this.posRound.z&&(e+="reverse"),this.newPosRound.x>this.posRound.x?e+="right":this.newPosRound.x<this.posRound.x&&(e+="left"),this.auxl.player.layer.gridDirection=e,this.newPosRound.x===this.posRound.x&&this.newPosRound.z===this.posRound.z||(this.auxl.map.CheckMapTriggers(this.newPosRound)&&this.auxl.map.TriggerEnterHit(this.newPosRound),this.auxl.map.CheckActiveTriggers(this.newPosRound),this.auxl.map.WaitingToSpawn())}}else this.player.object3D.position.copy(this.positionNew)},directionXZ:function(e,t){if(this.allow=!1,this.velocity=t,this.directionVector=new THREE.Vector3,this.directionObject.object3D.getWorldDirection(this.directionVector),this.moveForce=new THREE.Vector3(t,t,t),this.positionNew=new THREE.Vector3,this.positionPlayer.copy(this.player.object3D.position),this.angle=Math.atan2(this.directionVector.x,this.directionVector.z),this.face,this.angle>0&&this.angle<Math.PI/2?this.face="frontLeft":this.angle<0&&this.angle>-Math.PI/2?this.face="frontRight":this.angle>Math.PI/2&&this.angle<Math.PI?this.face="backLeft":this.angle<-Math.PI/2&&this.angle>-Math.PI?this.face="backRight":this.face="level",this.positionNew=new THREE.Vector3,this.positionNew.copy(this.rayDirection(this.directionObject,e,this.velocity)),this.positionNew.y=this.positionPlayer.y,this.auxl.player.layer.move)if(this.auxl.player.layer.playerPhysics)this.auxl.player.layer.physMove?(this.moveForce.copy(this.positionNew),this.moveForce.sub(this.positionPlayer),this.positionNew.equals(this.positionPlayer)||this.player.body.applyLocalImpulse(this.moveForce,new THREE.Vector3(0,0,0))):this.player.body.position.copy(this.positionNew),this.player.body.computeAABB();else if(this.auxl.collision){if(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.round(this.positionNew.y),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.y=this.round(this.positionPlayer.y),this.posRound.z=this.roundHalf(this.positionPlayer.z),this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.auxl.player.layer.bodyCrouch?this.allow=!0:(this.newPosStandRound.copy(this.newPosRound),this.newPosStandRound.y+=1,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosStandRound,this.posRound)?this.allow=!0:this.allow=!1)),this.allow||(this.newPosTemp.copy(this.newPosRound),this.newPosRound.x=this.posRound.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?(this.positionNew.x=this.positionPlayer.x,this.allow=!0):(this.newPosRound.z=this.posRound.z,this.newPosRound.x=this.newPosTemp.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.positionNew.z=this.positionPlayer.z,this.allow=!0))),this.allow){this.player.object3D.position.copy(this.positionNew),this.auxl.player.layer.gridPos.copy(this.newPosRound);let e="";this.newPosRound.z<this.posRound.z?e+="forward":this.newPosRound.z>this.posRound.z&&(e+="reverse"),this.newPosRound.x>this.posRound.x?e+="right":this.newPosRound.x<this.posRound.x&&(e+="left"),this.auxl.player.layer.gridDirection=e,this.newPosRound.x===this.posRound.x&&this.newPosRound.z===this.posRound.z||(this.auxl.map.CheckMapTriggers(this.newPosRound)&&this.auxl.map.TriggerEnterHit(this.newPosRound),this.auxl.map.CheckActiveTriggers(this.newPosRound),this.auxl.map.WaitingToSpawn())}}else this.player.object3D.position.copy(this.positionNew)},directionXZOLD:function(e,t){if(this.allow=!1,this.velocity=t,this.directionVector=new THREE.Vector3,this.directionObject.object3D.getWorldDirection(this.directionVector),this.moveForce=new THREE.Vector3(t,t,t),this.positionNew=new THREE.Vector3,this.positionPlayer.copy(this.player.object3D.position),this.angle=Math.atan2(this.directionVector.x,this.directionVector.z),this.face,this.angle>0&&this.angle<Math.PI/2?this.face="frontLeft":this.angle<0&&this.angle>-Math.PI/2?this.face="frontRight":this.angle>Math.PI/2&&this.angle<Math.PI?this.face="backLeft":this.angle<-Math.PI/2&&this.angle>-Math.PI?this.face="backRight":this.face="level","forwardRight"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity):"forwardLeft"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity):"reverseRight"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity):"reverseLeft"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity):"forward"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z-this.velocity):"reverse"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z+this.velocity):"right"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z):"left"===e&&("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z)),this.positionNew=new THREE.Vector3,this.positionNew.copy(this.rayDirection(this.directionObject,e,this.velocity)),this.positionNew.y=this.positionPlayer.y,this.auxl.player.layer.move)if(this.auxl.player.layer.playerPhysics)this.auxl.player.layer.physMove?(this.moveForce.copy(this.positionNew),this.moveForce.sub(this.positionPlayer),this.positionNew.equals(this.positionPlayer)||this.player.body.applyLocalImpulse(this.moveForce,new THREE.Vector3(0,0,0))):this.player.body.position.copy(this.positionNew),this.player.body.computeAABB();else if(this.auxl.collision){if(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.round(this.positionNew.y),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.y=this.round(this.positionPlayer.y),this.posRound.z=this.roundHalf(this.positionPlayer.z),this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.auxl.player.layer.bodyCrouch?this.allow=!0:(this.newPosStandRound.copy(this.newPosRound),this.newPosStandRound.y+=1,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosStandRound,this.posRound)?this.allow=!0:this.allow=!1)),this.allow||(this.newPosTemp.copy(this.newPosRound),this.newPosRound.x=this.posRound.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?(this.positionNew.x=this.positionPlayer.x,this.allow=!0):(this.newPosRound.z=this.posRound.z,this.newPosRound.x=this.newPosTemp.x,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.positionNew.z=this.positionPlayer.z,this.allow=!0))),this.allow){this.player.object3D.position.copy(this.positionNew),this.auxl.player.layer.gridPos.copy(this.newPosRound);let e="";this.newPosRound.z<this.posRound.z?e+="forward":this.newPosRound.z>this.posRound.z&&(e+="reverse"),this.newPosRound.x>this.posRound.x?e+="right":this.newPosRound.x<this.posRound.x&&(e+="left"),this.auxl.player.layer.gridDirection=e,this.newPosRound.x===this.posRound.x&&this.newPosRound.z===this.posRound.z||(this.auxl.map.CheckMapTriggers(this.newPosRound)&&this.auxl.map.TriggerEnterHit(this.newPosRound),this.auxl.map.CheckActiveTriggers(this.newPosRound),this.auxl.map.WaitingToSpawn())}}else this.player.object3D.position.copy(this.positionNew)},directionXZY:function(e,t){this.velocity=t,this.directionVector=new THREE.Vector3,this.directionStep=new THREE.Vector3,this.directionObject.object3D.getWorldDirection(this.directionVector),this.positionNew=new THREE.Vector3,this.positionPlayer.copy(this.player.object3D.position),this.angle=Math.atan2(this.directionVector.x,this.directionVector.z),this.face,this.angle>0&&this.angle<Math.PI/2?this.face="frontLeft":this.angle<0&&this.angle>-Math.PI/2?this.face="frontRight":this.angle>Math.PI/2&&this.angle<Math.PI?this.face="backLeft":this.angle<-Math.PI/2&&this.angle>-Math.PI?this.face="backRight":this.face="level","UpForwardRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownForwardRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"ForwardRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y):"UpForwardLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownForwardLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"ForwardLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y):"UpReverseRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownReverseRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"ReverseRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y):"UpReverseLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownReverseLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"ReverseLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y):"UpForward"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownForward"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"Forward"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z-this.velocity),this.positionNew.y=this.positionPlayer.y):"UpReverse"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownReverse"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y-this.velocity):"Reverse"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z+this.velocity),this.positionNew.y=this.positionPlayer.y):"UpRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownRight"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y-this.velocity):"Right"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y):"UpLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y+this.velocity):"DownLeft"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y-this.velocity):"Left"===e?("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z),this.positionNew.y=this.positionPlayer.y):"Up"===e?(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z,this.positionNew.y=this.positionPlayer.y+this.velocity):"Down"===e?(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z,this.positionNew.y=this.positionPlayer.y-this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z,this.positionNew.y=this.positionPlayer.y),this.auxl.collision?(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.z=this.roundHalf(this.positionPlayer.z),this.auxl.map.CheckMapObstacles(this.newPosRound,this.posRound)&&this.player.object3D.position.copy(this.positionNew)):this.auxl.player.layer.playerPhysics?this.player.body.position.copy(this.positionNew):this.player.object3D.position.copy(this.positionNew)},directionXY:function(e,t){this.velocity=t,this.directionVector=new THREE.Vector3,this.directionObject.object3D.getWorldDirection(this.directionVector),this.positionNew=new THREE.Vector3,this.positionPlayer.copy(this.player.object3D.position),this.angle=Math.atan2(this.directionVector.x,this.directionVector.z),this.face,this.angle>0&&this.angle<Math.PI/2||this.angle<0&&this.angle>-Math.PI/2?this.face="front":this.angle>Math.PI/2&&this.angle<Math.PI||this.angle<-Math.PI/2&&this.angle>-Math.PI?this.face="back":this.face="front","forwardRight"===e?("front"===this.face?this.positionNew.x=this.positionPlayer.x+this.velocity:this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.y=this.positionPlayer.y+this.velocity):"forwardLeft"===e?("front"===this.face?this.positionNew.x=this.positionPlayer.x-this.velocity:this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.y=this.positionPlayer.y+this.velocity):"reverseRight"===e?("front"===this.face?this.positionNew.x=this.positionPlayer.x+this.velocity:this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.y=this.positionPlayer.y-this.velocity):"reverseLeft"===e?("front"===this.face?this.positionNew.x=this.positionPlayer.x-this.velocity:this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.y=this.positionPlayer.y-this.velocity):"forward"===e?(this.positionNew.x=this.positionPlayer.x,this.positionNew.y=this.positionPlayer.y+this.velocity):"reverse"===e?(this.positionNew.x=this.positionPlayer.x,this.positionNew.y=this.positionPlayer.y-this.velocity):"right"===e?(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.y=this.positionPlayer.y):"left"===e&&(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.y=this.positionPlayer.y),this.positionNew.z=this.positionPlayer.z,this.auxl.collision?(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.roundHalf(this.positionNew.y),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.y=this.roundHalf(this.positionPlayer.y),this.auxl.map.CheckMapObstacles(this.newPosRound,this.posRound)&&this.player.object3D.position.copy(this.positionNew)):this.player.object3D.position.copy(this.positionNew)},directionXYZ:function(e,t){this.allow=!1,this.yDeadZone=.1,this.velocity=t,this.directionVector=new THREE.Vector3,this.cameraVector=new THREE.Vector3,this.camera.object3D.getWorldDirection(this.cameraVector),this.directionObject.object3D.getWorldDirection(this.directionVector),this.positionNew=new THREE.Vector3,this.positionPlayer.copy(this.player.object3D.position),this.angle=Math.atan2(this.directionVector.x,this.directionVector.z),this.face,this.angle>0&&this.angle<Math.PI/2?this.face="frontLeft":this.angle<0&&this.angle>-Math.PI/2?this.face="frontRight":this.angle>Math.PI/2&&this.angle<Math.PI?this.face="backLeft":this.angle<-Math.PI/2&&this.angle>-Math.PI?this.face="backRight":this.face="level","forwardRight"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity):"forwardLeft"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z-this.velocity):"reverseRight"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity):"reverseLeft"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z+this.velocity):"forward"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z-this.velocity):"reverse"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.cos(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.sin(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.cos(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x,this.positionNew.z=this.positionPlayer.z+this.velocity):"right"===e?"frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x+this.velocity,this.positionNew.z=this.positionPlayer.z):"left"===e&&("frontLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"frontRight"===this.face?(this.angle+=Math.PI,this.positionNew.x=this.positionPlayer.x+Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z-Math.sin(this.angle)*this.velocity):"backLeft"===this.face?(this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):"backRight"===this.face?(this.angle+=2*Math.PI,this.positionNew.x=this.positionPlayer.x-Math.cos(this.angle)*this.velocity,this.positionNew.z=this.positionPlayer.z+Math.sin(this.angle)*this.velocity):(this.positionNew.x=this.positionPlayer.x-this.velocity,this.positionNew.z=this.positionPlayer.z)),this.cameraVector.y<this.yDeadZone?this.positionNew.y=this.positionPlayer.y+-1*this.cameraVector.y*this.velocity:this.cameraVector.y>-1*this.yDeadZone?this.positionNew.y=this.positionPlayer.y-this.cameraVector.y*this.velocity:this.positionNew.y=this.positionPlayer.y,this.auxl.player.layer.move&&(this.auxl.collision?(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.round(this.positionNew.y),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionPlayer.x),this.posRound.y=this.round(this.positionPlayer.y),this.posRound.z=this.roundHalf(this.positionPlayer.z),this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?this.auxl.player.layer.bodyCrouch?this.allow=!0:(this.newPosStandRound.copy(this.newPosRound),this.newPosStandRound.y+=1,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosStandRound,this.posRound)?this.allow=!0:this.allow=!1):this.allow=!1,this.allow||(this.newPosTemp.copy(this.newPosRound),this.newPosRound.y=this.posRound.y,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?(this.positionNew.y=this.positionPlayer.y,this.allow=!0):(this.newPosRound.x=this.posRound.x,this.newPosRound.y=this.newPosTemp.y,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)?(this.positionNew.x=this.positionPlayer.x,this.allow=!0):(this.newPosRound.z=this.posRound.z,this.newPosRound.x=this.newPosTemp.x,this.newPosRound.y=this.newPosTemp.y,this.auxl.map.CheckMapObstaclesDiagonal(this.newPosRound,this.posRound)&&(this.positionNew.z=this.positionPlayer.z,this.allow=!0)))),this.allow&&(this.player.object3D.position.copy(this.positionNew),this.auxl.player.layer.gridPos.copy(this.newPosRound),this.newPosRound.x===this.posRound.x&&this.newPosRound.z===this.posRound.z||(this.auxl.map.CheckMapTriggers(this.newPosRound)&&this.auxl.map.TriggerEnterHit(this.newPosRound),this.auxl.map.CheckActiveTriggers(this.newPosRound),this.auxl.map.WaitingToSpawn()))):this.player.object3D.position.copy(this.positionNew))},directionXYZWall:function(e,t){},directionAXY:function(e,t){},directionAXYZ:function(e,t){},rigXZ:function(e,t){this.velocity=t,this.positionNew=new THREE.Vector3,this.positionAvatar.copy(this.avatar.object3D.position),"forwardRight"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.z=this.positionAvatar.z-this.velocity):"forwardLeft"===e?(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.z=this.positionAvatar.z-this.velocity):"reverseRight"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.z=this.positionAvatar.z+this.velocity):"reverseLeft"===e?(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.z=this.positionAvatar.z+this.velocity):"forward"===e?(this.positionNew.x=this.positionAvatar.x,this.positionNew.z=this.positionAvatar.z-this.velocity):"reverse"===e?(this.positionNew.x=this.positionAvatar.x,this.positionNew.z=this.positionAvatar.z+this.velocity):"right"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.z=this.positionAvatar.z):"left"===e&&(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.z=this.positionAvatar.z),this.positionNew.y=this.positionAvatar.y,this.auxl.collision?(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.z=this.roundHalf(this.positionNew.z),this.posRound.x=this.roundHalf(this.positionAvatar.x),this.posRound.z=this.roundHalf(this.positionAvatar.z),this.auxl.map.CheckMapObstacles(this.newPosRound,this.posRound)&&this.avatar.object3D.position.copy(this.positionNew)):this.avatar.object3D.position.copy(this.positionNew)},rigXZY:function(e,t){},rigXY:function(e,t){this.velocity=t,this.positionNew=new THREE.Vector3,this.positionAvatar.copy(this.avatar.object3D.position),"forwardRight"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.y=this.positionAvatar.y+this.velocity):"forwardLeft"===e?(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.y=this.positionAvatar.y+this.velocity):"reverseRight"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.y=this.positionAvatar.y-this.velocity):"reverseLeft"===e?(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.y=this.positionAvatar.y-this.velocity):"forward"===e?(this.positionNew.x=this.positionAvatar.x,this.positionNew.y=this.positionAvatar.y+this.velocity):"reverse"===e?(this.positionNew.x=this.positionAvatar.x,this.positionNew.y=this.positionAvatar.y-this.velocity):"right"===e?(this.positionNew.x=this.positionAvatar.x+this.velocity,this.positionNew.y=this.positionAvatar.y):"left"===e&&(this.positionNew.x=this.positionAvatar.x-this.velocity,this.positionNew.y=this.positionAvatar.y),this.positionNew.z=this.positionAvatar.z,this.auxl.collision?(this.newPosRound.x=this.roundHalf(this.positionNew.x),this.newPosRound.y=this.roundHalf(this.positionNew.y),this.posRound.x=this.roundHalf(this.positionAvatar.x),this.posRound.y=this.roundHalf(this.positionAvatar.y),this.auxl.map.CheckMapObstacles(this.newPosRound,this.posRound)&&this.avatar.object3D.position.copy(this.positionNew)):this.avatar.object3D.position.copy(this.positionNew)},rigXYZ:function(e,t){},rigXYZWall:function(e,t){},rigAXY:function(e,t){this.velocity=t/10,this.rotationNew=new THREE.Euler(0,0,0,"YXZ"),this.rotationAvatar.copy(this.avatarSphere.object3D.rotation),"forwardRight"===e?(this.rotationNew.x=this.rotationAvatar.x+this.velocity,this.rotationNew.y=this.rotationAvatar.y-this.velocity):"forwardLeft"===e?(this.rotationNew.x=this.rotationAvatar.x+this.velocity,this.rotationNew.y=this.rotationAvatar.y+this.velocity):"reverseRight"===e?(this.rotationNew.x=this.rotationAvatar.x-this.velocity,this.rotationNew.y=this.rotationAvatar.y-this.velocity):"reverseLeft"===e?(this.rotationNew.x=this.rotationAvatar.x-this.velocity,this.rotationNew.y=this.rotationAvatar.y+this.velocity):"forward"===e?(this.rotationNew.x=this.rotationAvatar.x+this.velocity,this.rotationNew.y=this.rotationAvatar.y):"reverse"===e?(this.rotationNew.x=this.rotationAvatar.x-this.velocity,this.rotationNew.y=this.rotationAvatar.y):"right"===e?(this.rotationNew.x=this.rotationAvatar.x,this.rotationNew.y=this.rotationAvatar.y-this.velocity):"left"===e&&(this.rotationNew.x=this.rotationAvatar.x,this.rotationNew.y=this.rotationAvatar.y+this.velocity),this.rotationNew.z=this.rotationAvatar.z,this.avatarSphere.object3D.rotation.copy(this.rotationNew)},rigAXYZ:function(e,t){},userDirection:function(){if(this.userPos=this.player.getAttribute("position"),this.userRot=this.camera.getAttribute("rotation"),this.userPreviousPos.x+this.userPos.x<0&&this.userPreviousPos.z+this.userPos.z<0?this.userTravel="northWest":this.userPreviousPos.x+this.userPos.x<0&&this.userPreviousPos.z+this.userPos.z>0?this.userTravel="southWest":this.userPreviousPos.x+this.userPos.x>0&&this.userPreviousPos.z+this.userPos.z>0?this.userTravel="southEast":(this.userPreviousPos.x+this.userPos.x>0&&(this.userPreviousPos.z,this.userPos.z),this.userTravel="northEast"),this.userPreviousPos=this.userPos,this.userRot.y>360){let e=this.userRot.y/360;this.userPov=360*Math.floor(e)-this.userRot.y,this.userPov*=-1}else if(this.userRot.y<-360){let e=this.userRot.y/360;this.userPov=360*Math.floor(e)-this.userRot.y,this.userPov*=-1}else this.userPov=this.userRot.y;this.userPov>0&&this.userPov<15||this.userPov>345&&this.userPov<360?this.userView="north":this.userPov>255&&this.userPov>285?this.userView="east":this.userPov>75&&this.userPov<105?this.userView="west":this.userPov>165&&this.userPov<195?this.userView="south":this.userPov<0&&this.userPov>-15||this.userPov<-345&&this.userPov>-360?this.userView="north":this.userPov<-255&&this.userPov>-285?this.userView="west":this.userPov<-75&&this.userPov>-105?this.userView="east":this.userPov<-165&&this.userPov>-195?this.userView="south":this.userPov>15&&this.userPov<75?this.userView="northWest":this.userPov>105&&this.userPov<165?this.userView="southWest":this.userPov>195&&this.userPov<255?this.userView="southEast":this.userPov>285&&this.userPov<345||this.userPov<-15&&this.userPov>-75?this.userView="northEast":this.userPov<-105&&this.userPov>-165?this.userView="southEast":this.userPov<-195&&this.userPov>-255?this.userView="southWest":this.userPov<-285&&this.userPov>-345?this.userView="northWest":this.userView="north","northWest"===this.userView?(this.positionTemp.x=-1*(this.velocity+this.positionPlayer.x),this.positionTemp.z=-1*(this.velocity+this.positionPlayer.z),this.positionTemp.z+=this.positionPlayer.z):"southWest"===this.userView?(this.positionTemp.x=-1*(this.velocity+this.positionPlayer.x),this.positionTemp.z=this.velocity+this.positionPlayer.z):"southEast"===this.userView?(this.positionTemp.x=this.velocity+this.positionPlayer.x,this.positionTemp.z=this.velocity+this.positionPlayer.z):"northEast"===this.userView||"north"===this.userView?(this.positionTemp.x=this.velocity+this.positionPlayer.x,this.positionTemp.z=-1*(this.velocity+this.positionPlayer.z)):"west"===this.userView?(this.positionTemp.x=-1*(this.velocity+this.positionPlayer.x),this.positionTemp.z=this.velocity+this.positionPlayer.z):"east"===this.userView||"south"===this.userView?(this.positionTemp.x=this.velocity+this.positionPlayer.x,this.positionTemp.z=this.velocity+this.positionPlayer.z):(this.positionTemp.x=0,this.positionTemp.z=0),this.positionNew=new THREE.Vector3(this.positionTemp.x,0,this.positionTemp.z)}}),AFRAME.registerComponent("teleportation",{dependencies:["auxl"],schema:{y:{type:"number",default:0}},init:function(){this.el.classList.contains("teleport")?this.el.parentNode.setAttribute("active","false"):this.el.classList.contains("cancel")&&(this.el.classList.toggle("clickable",!1),this.el.parentNode.setAttribute("active","false"))},resetTeleCircles:function(){this.allTeleportors=document.querySelectorAll(".teleporter");for(let e=0;e<this.allTeleportors.length;e++)"true"===this.allTeleportors[e].parentNode.getAttribute("active")&&(this.allTeleportors[e].emit("resetInstant",{}),this.allTeleportors[e].nextSibling.emit("resetInstant",{}))},resetInstantEvent:function(){this.classList.contains("teleport")?this.parentNode.setAttribute("active","false"):this.classList.contains("cancel")&&(this.classList.toggle("clickable",!1),this.parentNode.setAttribute("active","false"))},resetEvent:function(){this.classList.contains("teleport")?this.parentNode.setAttribute("active","false"):this.classList.contains("cancel")&&(this.classList.toggle("clickable",!1),this.parentNode.setAttribute("active","false"))},clickToTeleport:function(){let e,t=this,o=document.getElementById("playerRig"),a=document.getElementById("camera"),i=document.querySelector("a-scene").systems.auxl,n=o.getAttribute("position"),r=i.player.layer.transition.teleport,s=new THREE.Vector3,l=this.parentNode.getAttribute("position"),c=document.querySelectorAll(".teleporter");function d(e,t,o){e.emit("reset",{}),e.nextSibling.emit("reset",{}),t.copy(o),t.y=this.data.y}function p(e){i.player.layer.playerPhysics?(o.body.position.copy(e),o.body.computeAABB()):o.object3D.position.copy(s)}function h(){for(let e=0;e<c.length;e++)"true"===c[e].parentNode.getAttribute("active")&&(c[e].emit("resetInstant",{}),c[e].nextSibling.emit("resetInstant",{}))}if("false"===t.parentNode.getAttribute("active"))t.nextSibling.classList.toggle("clickable",!0),t.nextSibling.emit("click1",{}),t.userPov=a.getAttribute("rotation"),t.rotationParams={property:"object3D.rotation.y",to:t.userPov.y,dur:500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"},t.parentNode.setAttribute("animation__rotateToUser",t.rotationParams),t.parentNode.setAttribute("active","true");else if(t.classList.contains("teleport"))if("instant"===r)h(),d(t,s,l),e=setTimeout((function(){p(s),clearTimeout(e)}),250);else if("fade"===r)i.player.PlayerTeleportAnim(),d(t,s,l),e=setTimeout((function(){h(),p(s),clearTimeout(e)}),600);else if("locomotion"===r){let e={property:"position",from:{x:n.x,y:0,z:n.z},to:{x:l.x,y:0,z:l.z},dur:1e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"};o.setAttribute("animation__locomotion",e),t.nextSibling.emit("reset",{}),h()}else("sphere"===r||"blink"===r)&&(i.player.PlayerTeleportAnim(),d(t,s,l),e=setTimeout((function(){h(),p(s),clearTimeout(e)}),600));else t.classList.contains("cancel")&&t.emit("reset",{})},update:function(){this.el.addEventListener("reset",this.resetEvent),this.el.addEventListener("resetInstant",this.resetInstantEvent),this.el.addEventListener("click",this.clickToTeleport)},remove:function(){this.el.removeEventListener("reset",this.resetEvent),this.el.removeEventListener("resetInstant",this.resetInstantEvent),this.el.removeEventListener("click",this.clickToTeleport)}}),AFRAME.registerComponent("raycast-teleportation-select",{dependencies:["auxl"],schema:{y:{type:"number",default:0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.hoverSelectData={data:"hoverSelectData",id:"hoverSelect",text:{value:"Teleport Here",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:{primitive:"circle",radius:.5,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#3eb58c",opacity:1,metalness:.6,roughness:.4,emissive:"#3eb58c",emissiveIntensity:.2,side:"front"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:{stare:{twist:!0}}},this.hoverSelect=this.auxl.Core(this.hoverSelectData),this.spawned=!1},spawnSelect:function(e){let t=e.detail.intersection.point;this.spawned&&(this.hoverSelect.GetEl().removeEventListener("click",this.clickToTeleportEvent),this.hoverSelect.DespawnCore()),this.hoverSelect.core.position.x=t.x,this.hoverSelect.core.position.y=1,this.hoverSelect.core.position.z=t.z,this.hoverSelect.SpawnCore(),this.clickToTeleportEvent=e=>{this.clickToTeleport(e)},this.hoverSelect.GetEl().addEventListener("click",this.clickToTeleportEvent),this.spawned=!0},clickToTeleport:function(e){let t,o=document.getElementById("playerRig"),a=(document.getElementById("camera"),document.querySelector("a-scene").systems.auxl),i=o.getAttribute("position"),n=a.player.layer.transition.teleport,r=new THREE.Vector3,s=e.detail.intersection.point;function l(e,t){e.copy(t),e.y=this.data.y}function c(e){a.player.layer.playerPhysics?(o.body.position.copy(e),o.body.computeAABB()):o.object3D.position.copy(r)}if(document.querySelectorAll(".teleporter"),this.hoverSelect.GetEl().removeEventListener("click",this.clickToTeleportEvent),this.hoverSelect.DespawnCore(),this.spawned=!1,"instant"===n)l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),250);else if("fade"===n)a.player.PlayerTeleportAnim(),l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),600);else if("locomotion"===n){let e={property:"position",from:{x:i.x,y:0,z:i.z},to:{x:s.x,y:0,z:s.z},dur:1e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"};o.setAttribute("animation__locomotion",e)}else("sphere"===n||"blink"===n)&&(a.player.PlayerTeleportAnim(),l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),600))},update:function(){this.spawnSelectEvent=e=>{this.spawnSelect(e)},this.el.addEventListener("click",this.spawnSelectEvent)},remove:function(){this.spawned&&(this.hoverSelect.GetEl().removeEventListener("click",this.clickToTeleportEvent),this.hoverSelect.DespawnCore()),this.el.removeEventListener("click",this.spawnSelectEvent)}}),AFRAME.registerComponent("raycast-teleportation",{dependencies:["auxl"],init:function(){},clickToTeleport:function(e){let t,o=document.getElementById("playerRig"),a=(document.getElementById("camera"),document.querySelector("a-scene").systems.auxl),i=o.getAttribute("position"),n=a.player.layer.transition.teleport,r=new THREE.Vector3,s=e.detail.intersection.point;function l(e,t){e.copy(t)}function c(e){a.player.layer.playerPhysics?(o.body.position.copy(e),o.body.computeAABB()):o.object3D.position.copy(r)}if(document.querySelectorAll(".teleporter"),"instant"===n)l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),250);else if("fade"===n)a.player.PlayerTeleportAnim(),l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),600);else if("locomotion"===n){let e={property:"position",from:{x:i.x,y:0,z:i.z},to:{x:s.x,y:0,z:s.z},dur:1e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"};o.setAttribute("animation__locomotion",e)}else("sphere"===n||"blink"===n)&&(a.player.PlayerTeleportAnim(),l(r,s),t=setTimeout((()=>{c(r),clearTimeout(t)}),600))},update:function(){this.raycastTeleport=e=>{this.clickToTeleport(e)},this.el.addEventListener("click",this.raycastTeleport)},remove:function(){this.el.removeEventListener("click",this.raycastTeleport)}}),AFRAME.registerComponent("teleportation-to",{dependencies:["auxl"],schema:{x:{type:"number",default:0},y:{type:"number",default:0},z:{type:"number",default:0},twistTo:{type:"boolean",default:!1},twist:{type:"number",default:0},event:{type:"string",default:"click"}},init:function(){},eventToTeleport:function(e){let t,o=document.getElementById("playerRig"),a=(document.getElementById("camera"),document.querySelector("a-scene").systems.auxl),i=o.getAttribute("position"),n=a.player.layer.transition.teleport,r=new THREE.Vector3,s=new THREE.Vector3(this.data.x,this.data.y,this.data.z),l=(document.querySelectorAll(".teleporter"),this.data.twistTo),c=this.data.twist;function d(e,t){e.copy(t)}function p(e){a.player.layer.playerPhysics?(o.body.position.copy(e),o.body.computeAABB()):o.object3D.position.copy(r),l&&a.player.TwistTo(c)}if("instant"===n)d(r,s),t=setTimeout((()=>{p(r),clearTimeout(t)}),250);else if("fade"===n)a.player.PlayerQuickAnim(),d(r,s),t=setTimeout((()=>{p(r),clearTimeout(t)}),225);else if("locomotion"===n){let e={property:"position",from:{x:i.x,y:0,z:i.z},to:{x:s.x,y:0,z:s.z},dur:1e3,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"true",enabled:"true"};o.setAttribute("animation__locomotion",e)}else("sphere"===n||"blink"===n)&&(a.player.PlayerQuickAnim(),d(r,s),t=setTimeout((()=>{p(r),clearTimeout(t)}),225))},update:function(){this.raycastTeleport=e=>{this.eventToTeleport(e)},this.el.addEventListener(this.data.event,this.raycastTeleport)},remove:function(){this.el.removeEventListener(this.data.event,this.raycastTeleport)}}),AFRAME.registerComponent("clickfunc",{dependencies:["auxl"],schema:{clickObj:{type:"string",default:"auxlObj"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},events:{click:function(e){this.auxl[this.data.clickObj].Click(e.target)}}}),AFRAME.registerComponent("clickrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"},delay:{type:"number",default:0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},run:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):this.domEnt.components[this.data.component][this.data.method](this.data.params))},events:{click:function(e){this.timeout=setTimeout((()=>{this.run(e),clearTimeout(this.timeout)}),this.data.delay)}}}),AFRAME.registerComponent("clickrunfunc",{dependencies:["auxl"],multiple:!0,schema:{method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},events:{click:function(e){"null"===this.data.params?this.auxl[this.data.method]():"target"===this.data.params?this.auxl[this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.method](this.data.params)}}}),AFRAME.registerComponent("fusingrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},events:{fusing:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.domEnt.components[this.data.component][this.data.method](e.detail.cursorEl):this.domEnt.components[this.data.component][this.data.method](e):this.domEnt.components[this.data.component][this.data.method](this.data.params))}}}),AFRAME.registerComponent("mousedownrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},events:{mousedown:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.domEnt.components[this.data.component][this.data.method](e.detail.cursorEl):this.domEnt.components[this.data.component][this.data.method](e):this.domEnt.components[this.data.component][this.data.method](this.data.params))}}}),AFRAME.registerComponent("mouseenterrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},events:{mouseenter:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.domEnt.components[this.data.component][this.data.method](e.detail.cursorEl):this.domEnt.components[this.data.component][this.data.method](e):this.domEnt.components[this.data.component][this.data.method](this.data.params))}}}),AFRAME.registerComponent("mouseleaverun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},events:{mouseleave:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.domEnt.components[this.data.component][this.data.method](e.detail.cursorEl):this.domEnt.components[this.data.component][this.data.method](e):this.domEnt.components[this.data.component][this.data.method](this.data.params))}}}),AFRAME.registerComponent("mouseuprun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},events:{mouseup:function(e){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.auxl[this.data.cursorObj][this.data.method](e.detail.cursorEl):this.auxl[this.data.cursorObj][this.data.method](e):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):"other"===this.data.params?e.detail.cursorEl?this.domEnt.components[this.data.component][this.data.method](e.detail.cursorEl):this.domEnt.components[this.data.component][this.data.method](e):this.domEnt.components[this.data.component][this.data.method](this.data.params))}}}),AFRAME.registerComponent("menurun",{dependencies:["auxl"],schema:{cursorObj:{type:"string",default:"auxlObj"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},events:{click:function(e){this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](e.target):this.auxl[this.data.method](this.data.params))}}}),AFRAME.registerComponent("hoverrun",{dependencies:["auxl"],schema:{attached:{type:"string",default:"none"},menu:{type:"string",default:"menuName"},action:{type:"string",default:"actionName"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.attached=this.data.attached,this.menu=this.data.menu,this.action=this.data.action},events:{mouseenter:function(e){"none"!==this.attached?this.auxl[this.attached][this.menu].hoverMenu.active=this.action:this.auxl[this.menu].hoverMenu.active=this.action},mouseleave:function(e){"none"!==this.attached?this.auxl[this.attached][this.menu].hoverMenu.active=!1:this.auxl[this.menu].hoverMenu.active=!1}}}),AFRAME.registerComponent("onspawnrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt,"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](evt.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():this.domEnt.components[this.data.component][this.data.method](this.data.params))}}),AFRAME.registerComponent("onspawnfunc",{dependencies:["auxl"],multiple:!0,schema:{auxlFunc:{type:"string",default:"Test"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,"null"===this.data.params?this.auxl[this.data.auxlFunc]():this.auxl[this.data.auxlFunc](this.data.params)}}),AFRAME.registerComponent("onspawnfuncdual",{dependencies:["auxl"],multiple:!0,schema:{auxlFunc:{type:"string",default:"Test"},params:{type:"array",default:[!1,!1]}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.auxl[this.data.auxlFunc](this.data.params[0],this.data.params[1])}}),AFRAME.registerComponent("ondespawnrun",{dependencies:["auxl"],multiple:!0,schema:{cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},remove:function(){"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]?"null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():this.auxl[this.data.cursorObj][this.data.method](this.data.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](evt.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():this.domEnt.components[this.data.component][this.data.method](this.data.params))}}),AFRAME.registerComponent("ondespawnfuncdual",{dependencies:["auxl"],multiple:!0,schema:{auxlFunc:{type:"string",default:"Test"},params:{type:"array",default:[!1,!1]}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},remove:function(){this.auxl[this.data.auxlFunc](this.data.params[0],this.data.params[1])}}),AFRAME.registerComponent("oneventrun",{dependencies:["auxl"],multiple:!0,schema:{event:{type:"string",default:"eventName"},cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"},once:{type:"boolean",default:!1}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},update:function(){this.event=this.data.event,this.cursorObj=this.data.cursorObj,this.component=this.data.component,this.method=this.data.method,this.params=this.data.params,this.once=this.data.once,this.run=()=>{"null"===this.component?this.auxl[this.cursorObj][this.method]?"null"===this.params?this.auxl[this.cursorObj][this.method]():this.auxl[this.cursorObj][this.method](this.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](evt.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.cursorObj)&&(this.domEnt=document.getElementById(this.cursorObj),"null"===this.params?this.domEnt.components[this.component][this.method]():this.domEnt.components[this.component][this.method](this.params))},this.el.addEventListener(this.event,this.run,{once:this.once})},remove:function(){this.el.removeEventListener(this.event,this.run)}}),AFRAME.registerComponent("ondelayrun",{dependencies:["auxl"],multiple:!0,schema:{delay:{type:"number",default:1e3},cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},update:function(){this.delay=this.data.delay,this.cursorObj=this.data.cursorObj,this.component=this.data.component,this.method=this.data.method,this.params=this.data.params,this.run=()=>{"null"===this.component?this.auxl[this.cursorObj][this.method]?"null"===this.params?this.auxl[this.cursorObj][this.method]():this.auxl[this.cursorObj][this.method](this.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](evt.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.cursorObj)&&(this.domEnt=document.getElementById(this.cursorObj),"null"===this.params?this.domEnt.components[this.component][this.method]():this.domEnt.components[this.component][this.method](this.params))},this.timeout=setTimeout((()=>{this.run(),clearTimeout(this.timeout)}),this.delay)},remove:function(){clearTimeout(this.timeout)}}),AFRAME.registerComponent("onintervalrun",{dependencies:["auxl"],multiple:!0,schema:{interval:{type:"number",default:1e3},loop:{type:"number",default:0},end:{type:"string",default:"null"},cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt},update:function(){this.interval=this.data.interval,this.loop=this.data.loop,0===this.loop&&(this.loop=!1),this.end=this.data.end,this.checkEnd=!1,"null"===this.end||(this.checkEnd=!0),this.running=!0,this.cursorObj=this.data.cursorObj,this.component=this.data.component,this.method=this.data.method,this.params=this.data.params,this.run=()=>{"null"===this.component?this.auxl[this.cursorObj][this.method]?"null"===this.params?this.auxl[this.cursorObj][this.method]():this.auxl[this.cursorObj][this.method](this.params):"auxl"===this.data.cursorObj&&("null"===this.data.params?this.auxl[this.data.method](evt.target):this.auxl[this.data.method](this.data.params)):document.getElementById(this.cursorObj)&&(this.domEnt=document.getElementById(this.cursorObj),"null"===this.params?this.domEnt.components[this.component][this.method]():this.domEnt.components[this.component][this.method](this.params))},this.repeat=setInterval((()=>{this.checkEnd&&!0===this.auxl[this.cursorObj].GetFlag(this.end)&&(this.running=!1,clearInterval(this.repeat)),this.running&&this.run(),this.loop&&(this.loop--,this.loop<=0&&(this.running=!1,clearInterval(this.repeat)))}),this.interval)},remove:function(){clearInterval(this.repeat)}}),AFRAME.registerComponent("lookaround",{schema:{target:{type:"string"},maxRotation:{type:"number",default:180}},init:function(){this.target=document.getElementById(this.data.target),this.player=document.getElementById("player"),this.rotationAngle=0,this.updateRotation=this.updateRotation.bind(this),this.el.sceneEl.addEventListener("renderstart",this.updateRotation)},updateRotation:function(){if(!this.target.object3D||!this.player.object3D)return;const e=new THREE.Vector3,t=new THREE.Vector3;this.target.object3D.getWorldPosition(e),this.player.object3D.getWorldPosition(t);const o=(new THREE.Vector3).subVectors(e,t),a=Math.atan2(o.x,o.z),i=THREE.MathUtils.radToDeg(a);this.el.object3D.rotation.y=a,Math.abs(i-this.rotationAngle)>this.data.maxRotation?this.el.sceneEl.removeEventListener("renderstart",this.updateRotation):this.rotationAngle=i}}),AFRAME.registerComponent("sync-pos",{dependencies:["auxl"],schema:{idname:{type:"string",default:"ui"},position:{type:"vec3"}},init:function(){this.attachee=document.getElementById(this.data.idname),this.offset=new THREE.Vector3,this.data.position?this.offset.copy(this.data.position):this.offset.copy(this.attachee.object3D.position),this.newPosVec3=new THREE.Vector3},attached:function(){this.newPosVec3.copy(this.el.object3D.position),this.newPosVec3.x+=this.offset.x,this.newPosVec3.y+=this.offset.y,this.newPosVec3.z+=this.offset.z,this.attachee.object3D.position.copy(this.newPosVec3)},tick:function(e,t){this.attached()}}),AFRAME.registerComponent("sync-rot",{dependencies:["auxl"],schema:{idname:{type:"string",default:"ui"},rotation:{type:"vec4"}},init:function(){this.attachee=document.getElementById(this.data.idname),this.offset=new THREE.Euler,this.data.rotation?this.offset.copy(this.data.rotation):this.offset.copy(this.attachee.object3D.rotation),this.newRotEuler=new THREE.Euler},attached:function(){this.newRotEuler.copy(this.el.object3D.rotation),this.newRotEuler.x+=this.offset.x,this.newRotEuler.y+=this.offset.y,this.newRotEuler.z+=this.offset.z,this.newRotEuler.w+=this.offset.w,this.attachee.object3D.rotation.copy(this.newRotEuler)},tick:function(e,t){this.attached()}}),AFRAME.registerComponent("look-at-xyz",{dependencies:["auxl"],schema:{buffer:{type:"number",default:0},drag:{type:"number",default:0},max:{type:"number",default:360},match:{type:"string",default:"camera"},x:{type:"boolean",default:!1},y:{type:"boolean",default:!1},z:{type:"boolean",default:!1},reverse:{type:"boolean",default:!1}},init:function(){},update:function(){this.startRotation=new THREE.Euler,this.rotation=new THREE.Euler,this.rotation.copy(this.el.object3D.rotation),this.startRotation.copy(this.el.object3D.rotation),this.matchView=document.getElementById(this.data.match),this.maxView=this.data.max,this.matchRotation=new THREE.Euler,this.lookAtXYZThrottled=AFRAME.utils.throttle(this.lookAtXYZ,30,this)},lookAtXYZ:function(){this.matchRotation.copy(this.matchView.object3D.rotation),this.data.x&&Math.abs(this.matchRotation.x-this.rotation.x)>=this.data.buffer&&(this.data.drag>0?this.matchRotation.x>this.rotation.x?this.rotation.x+=this.data.drag:this.rotation.x-=this.data.drag:this.rotation.x=this.matchRotation.x),this.data.y&&Math.abs(this.matchRotation.y-this.rotation.y)>=this.data.buffer&&(this.data.drag>0?this.matchRotation.y>this.rotation.y?this.rotation.y+=this.data.drag:this.rotation.y-=this.data.drag:this.rotation.y=this.matchRotation.y),this.data.z&&Math.abs(this.matchRotation.z-this.rotation.z)>=this.data.buffer&&(this.data.drag>0?this.matchRotation.z>this.rotation.z?this.rotation.z+=this.data.drag:this.rotation.z-=this.data.drag:this.rotation.z=this.matchRotation.z),this.data.reverse&&(this.rotation.x*=-1,this.rotation.y*=-1,this.rotation.z*=-1,this.rotation.w*=-1),this.el.object3D.rotation.copy(this.rotation)},tick:function(e,t){this.lookAtXYZThrottled()}}),AFRAME.registerComponent("stare",{dependencies:["auxl"],schema:{id:{type:"string",default:"playerRig"},twist:{type:"boolean",default:!1}},init:function(){},update:function(){this.idView=document.getElementById(this.data.id),this.idPosition=new THREE.Vector3,this.stareThrottled=AFRAME.utils.throttle(this.stare,30,this)},stare:function(){this.idPosition.copy(this.idView.object3D.position),"playerRig"===this.data.id&&(this.idPosition.y+=document.getElementById("camera").object3D.position.y+document.getElementById("playerBody").object3D.position.y),this.data.twist&&(this.idPosition.y=this.el.object3D.position.y),this.el.object3D.lookAt(this.idPosition)},tick:function(e,t){this.stareThrottled()}}),AFRAME.registerComponent("camera-forward",{dependencies:["auxl"],schema:{distance:{type:"number",default:1}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},forward:function(){this.rayDir=this.auxl.player.RayDir(this.auxl.camera.GetEl(),this.data.distance),this.el.object3D.position.copy(this.rayDir.position),this.el.object3D.lookAt(this.auxl.playerRig.GetEl().object3D.position)}}),AFRAME.registerComponent("hovertext",{dependencies:["auxl"],schema:{value:{type:"string",default:"TEXT"},hover:{type:"string",default:"front"},offset:{type:"number",default:1},altOffset:{type:"number",default:0},twist:{type:"bool",default:!0},size:{type:"number",default:20}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.value=this.data.value,this.hover=this.data.hover,this.offset=this.data.offset,this.altOffset=this.data.altOffset,this.twist=this.data.twist,this.size=this.data.size,this.hoverSpawned=!1,this.position=new THREE.Vector3(0,0,0),"top"===this.hover?this.position=new THREE.Vector3(0,this.offset,this.altOffset):"front"===this.hover&&(this.position=new THREE.Vector3(0,this.altOffset,this.offset)),this.hoverTextParentData={data:"hoverTextParentData",id:"hoverTextParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["nullParent","a-ent"],components:{stare:{id:"playerRig",twist:this.twist}}},this.hoverTextParent=this.auxl.Core(this.hoverTextParentData),this.hoverTextData={data:"hoverTextData",id:"hoverText",text:{value:this.value,wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",width:2},position:this.position,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},this.hoverText=this.auxl.Core(this.hoverTextData),this.hoverTextAllData={parent:{core:this.hoverTextParent},child0:{core:this.hoverText}},this.hoverTextAll=this.auxl.Layer("hoverTextAll",this.hoverTextAllData)},events:{mouseenter:function(e){this.hoverSpawned||(this.hoverSpawned=!0,this.hoverTextAll.SpawnLayer(this.el))},mouseleave:function(e){this.hoverSpawned&&(this.hoverTextAll.DespawnLayer(),this.hoverSpawned=!1)}},update:function(){},remove:function(){this.hoverSpawned||(this.hoverTextAll.DespawnLayer(),this.hoverSpawned=!1)}}),AFRAME.registerComponent("gltfmat",{dependencies:["auxl"],schema:{colors:{type:"array",default:[!1]},emissives:{type:"array",default:[!1]},opacities:{type:"array",default:[!1]},textures:{type:"array",default:[!1]},repeats:{type:"array",default:[!1]},random:{type:"boolean",default:!1}},update:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.meshName=!1,this.current=0,this.materials=[],this.data.colors.forEach((e=>{e?(this.materials[this.current]="random"===e?new THREE.MeshStandardMaterial({color:this.auxl.ColorTheoryGen().base}):new THREE.MeshStandardMaterial({color:e}),this.data.emissives[this.current]&&(this.materials[this.current].emissive=this.materials[this.current].color,this.materials[this.current].emissiveIntensity=this.data.emissives[this.current]),this.data.opacities[this.current]&&this.data.opacities[this.current]<1&&(this.materials[this.current].transparent=!0,this.materials[this.current].opacity=this.data.opacities[this.current]),this.data.textures[this.current]&&(this.materials[this.current].map=(new THREE.TextureLoader).load(this.data.textures[this.current]),this.materials[this.current].map.center.set(.5,.5),this.materials[this.current].map.rotation=THREE.MathUtils.degToRad(180),this.materials[this.current].map.wrapS=THREE.RepeatWrapping,this.materials[this.current].map.wrapT=THREE.RepeatWrapping,this.materials[this.current].map.repeat.set(-1,1),this.data.repeats[this.current]&&"false"!==this.data.repeats[this.current]&&(this.materials[this.current].map.wrapS=THREE.RepeatWrapping,this.materials[this.current].map.wrapT=THREE.RepeatWrapping,this.materials[this.current].map.repeat.set(this.data.repeats[this.current])))):this.materials[this.current]=!1,this.current++})),this.current=-2,this.el.getObject3D("mesh")?this.apply():this.el.addEventListener("model-loaded",(()=>{this.apply()}))},apply:function(){this.current=-2,this.el.getObject3D("mesh").traverse((e=>{this.current<0||(this.data.random?e.material=new THREE.MeshStandardMaterial({color:this.auxl.ColorTheoryGen().base}):this.materials[this.current]&&(e.material=this.materials[this.current])),this.current++}))}}),AFRAME.registerComponent("modify-materials",{dependencies:["auxl"],init:function(){document.querySelector("a-scene").systems.auxl,this.el.addEventListener("model-loaded",(()=>{const e=this.el.getObject3D("mesh"),t=(new THREE.MeshBasicMaterial({color:16777215}),(new THREE.TextureLoader).load("./assets/img/gradient/threeTone.jpg"));t.minFilter=THREE.NearestFilter,t.magFilter=THREE.NearestFilter;const o=(new THREE.TextureLoader).load("./assets/img/gradient/fourTone.jpg");o.minFilter=THREE.NearestFilter,o.magFilter=THREE.NearestFilter;const a=(new THREE.TextureLoader).load("./assets/img/gradient/fiveTone.jpg");a.minFilter=THREE.NearestFilter,a.magFilter=THREE.NearestFilter,new THREE.DataTexture(2,1,2,3).needsUpdate=!0;const i=new THREE.MeshToonMaterial({color:"blue",gradientMap:a});e.traverse((e=>{-1!==e.name.indexOf("Mesh_crop_melon")&&(e.material=i)}))}))}}),AFRAME.registerComponent("scroll",{dependencies:["auxl","raycaster"],schema:{type:{type:"string",default:"plane"},axis:{type:"string",default:"horizontal"},parent:{type:"string",default:"auxlObj"},length:{type:"number",default:1},options:{type:"number",default:5},elements:{type:"array",default:[]}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.scrollee=document.getElementById(this.data.parent),this.domEnt,this.elements=[],this.data.elements.forEach((e=>this.elements.push(document.getElementById(e)))),this.scrollMap=new Map,this.scrollMap.set(4,this.elements[7]),this.scrollMap.set(3,this.elements[6]),this.scrollMap.set(2,this.elements[5]),this.scrollMap.set(1,this.elements[4]),this.scrollMap.set(0,this.elements[3]),this.scrollMap.set(-1,this.elements[2]),this.scrollMap.set(-2,this.elements[1]),this.scrollMap.set(-3,this.elements[0]),this.scrollThrottled=AFRAME.utils.throttle(this.scroll,50,this),this.mouse=document.querySelector("#mouseController"),this.mouseRay=this.mouse.components.raycaster,this.intersection,this.previous=new THREE.Vector3(0,0,0),this.hold=!1,this.distance=0,this.compass=!1,this.direction=!1,this.location=0,this.prevPos=0,this.pos=0,this.size=this.data.length/this.data.options,this.opacInit=!0,this.opacityPlus=0,this.plusFadeEl=!1,this.opacityMinus=0,this.minusFadeEl=!1,this.extraEl=!1,this.el.addEventListener("mousedown",(()=>{this.hold=!0,this.previous.copy(this.mouseRay.getIntersection(this.el).point)})),this.el.addEventListener("mouseup",(()=>{this.hold=!1,this.opacInit=!0})),this.el.addEventListener("mouseleave",(()=>{this.hold=!1,this.opacInit=!0})),this.el.addEventListener("raycaster-intersected",(function(e){}))},axisDirection:function(e,t){let o,a=[];return"vertical"===this.data.axis?(o="y",a=["down","up"]):"horizontal"===this.data.axis&&(o="x",a=["left","right"]),e[o]<t[o]?{axis:o,dir:a[0]}:{axis:o,dir:a[1]}},twoDecimal:function(e){return Math.round(100*e)/100},distanceTo:function(e,t){return Math.abs(Math.abs(e)-Math.abs(t))},getMapEl:function(e,t){for(;o=t,void 0===e.get(o);)t>0?t-=this.elements.length:t<0&&(t+=this.elements.length);var o;return e.get(t)},scroll:function(){if(this.hold)if(this.intersection=this.mouseRay.getIntersection(this.el),null===this.intersection||void 0===this.intersection);else if(this.intersection.point.equals(this.previous));else{if(this.compass=this.axisDirection(this.previous,this.intersection.point),this.distance=this.distanceTo(this.previous[this.compass.axis],this.intersection.point[this.compass.axis]),this.pos=this.scrollee.object3D.position[this.compass.axis],"plane"===this.data.type){let e,t;"left"===this.compass.dir||"down"===this.compass.dir?this.scrollee.object3D.position[this.compass.axis]+=this.distance:"right"!==this.compass.dir&&"up"!==this.compass.dir||(this.scrollee.object3D.position[this.compass.axis]-=this.distance),this.pos=this.twoDecimal(this.pos),this.location>0?(e=-1*(this.location*this.size+this.size),t=e+this.size):this.location<0?(t=-1*(this.location*this.size-this.size),e=t-this.size):(e=this.location*this.size-this.size,t=this.location*this.size+this.size),e=this.twoDecimal(e),t=this.twoDecimal(t),this.pos>t?(this.location--,this.opacityPlus=1,this.opacityMinus=0,this.direction="plus",this.opacInit=!1,this.plusFadeEl=this.getMapEl(this.scrollMap,this.location+2),this.minusFadeEl=this.getMapEl(this.scrollMap,this.location-3),this.extraEl=this.getMapEl(this.scrollMap,this.location+4),this.extraEl.object3D.position[this.compass.axis]=(this.location-this.elements.length/2)*this.size,console.log("Shift Plus"),console.log(this.pos),console.log(this.location)):this.pos<e&&(this.location++,this.opacityPlus=0,this.opacityMinus=1,this.direction="minus",this.opacInit=!1,this.plusFadeEl=this.getMapEl(this.scrollMap,this.location+3),this.minusFadeEl=this.getMapEl(this.scrollMap,this.location-2),this.extraEl=this.getMapEl(this.scrollMap,this.location-4),this.extraEl.object3D.position[this.compass.axis]=(this.location+this.elements.length/2)*this.size,console.log("Shift Minus"),console.log(this.pos),console.log(this.location));let o=0;this.pos>this.prevPos?(this.opacInit&&("minus"!==this.direction&&this.direction||(this.opacityPlus=1,this.opacityMinus=0,this.direction="plus",this.plusFadeEl=this.getMapEl(this.scrollMap,this.location+2),this.minusFadeEl=this.getMapEl(this.scrollMap,this.location-3),this.extraEl=this.getMapEl(this.scrollMap,this.location+4),this.extraEl.object3D.position[this.compass.axis]=(this.location-this.elements.length/2)*this.size,console.log("swap"))),o=this.twoDecimal((this.pos-this.prevPos)*this.data.options),this.opacityPlus=this.twoDecimal(this.opacityPlus-o),this.opacityMinus=this.twoDecimal(this.opacityMinus+o),console.log("Plus")):this.pos<this.prevPos&&(this.opacInit&&("plus"!==this.direction&&this.direction||(this.opacityPlus=0,this.opacityMinus=1,this.direction="minus",this.plusFadeEl=this.getMapEl(this.scrollMap,this.location+3),this.minusFadeEl=this.getMapEl(this.scrollMap,this.location-2),this.extraEl=this.getMapEl(this.scrollMap,this.location-4),this.extraEl.object3D.position[this.compass.axis]=(this.location+this.elements.length/2)*this.size,console.log("swap"))),o=this.twoDecimal((this.prevPos-this.pos)*this.data.options),this.opacityPlus=this.twoDecimal(this.opacityPlus+o),this.opacityMinus=this.twoDecimal(this.opacityMinus-o),console.log("Minus")),this.prevPos=this.pos,this.plusFadeEl&&this.minusFadeEl&&(this.plusFadeEl.setAttribute("material",{opacity:this.opacityPlus}),this.minusFadeEl.setAttribute("material",{opacity:this.opacityMinus})),console.log({previous:e,next:t,location:this.location,plusFadeEl:this.plusFadeEl,minusFadeEl:this.minusFadeEl,extraEl:this.extraEl})}else"cylinder"===this.data.type&&("left"===this.compass?this.scrollee.object3D.rotation.y+=this.distance:"right"===this.compass?this.scrollee.object3D.rotation.y-=this.distance:"up"===this.compass?this.scrollee.object3D.rotation.x+=this.distance:"down"===this.compass&&(this.scrollee.object3D.rotation.x-=this.distance));this.previous.copy(this.intersection.point)}},tick:function(e,t){this.scrollThrottled()}}),AFRAME.registerComponent("doorway",{dependencies:["auxl"],schema:{zone:{type:"string",default:"zone0"},to:{type:"string",default:"connect0"},posTo:{type:"boolean",default:!1},pos:{type:"vec3"},twistTo:{type:"boolean",default:!1},twist:{type:"number",default:0},delay:{type:"number",default:0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.zone=this.data.zone,this.to=this.data.to,this.delay=this.data.delay,this.pos=new THREE.Vector3(0,0,0),this.data.pos.x&&(this.pos.x=this.data.pos.x),this.data.pos.y&&(this.pos.y=this.data.pos.y),this.data.pos.z&&(this.pos.z=this.data.pos.z),this.twist=this.data.twist},posTwist:function(){this.moveTimeout=setTimeout((()=>{this.data.posTo&&this.auxl.player.UpdatePlayerPosition(this.pos),this.data.twistTo&&this.auxl.player.TwistTo(this.twist),clearTimeout(this.moveTimeout)}),450)},swap:function(){this.timeout=setTimeout((()=>{this.auxl[this.zone].Move(this.to),this.posTwist(),clearTimeout(this.timeout)}),this.delay)},events:{click:function(e){this.swap()}},remove:function(){clearTimeout(this.timeout)}}),AFRAME.registerComponent("doorway-trigger",{dependencies:["auxl"],schema:{zone:{type:"string",default:"zone0"},to:{type:"string",default:"connect0"},delay:{type:"number",default:0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.zone=this.data.zone,this.to=this.data.to,this.delay=this.data.delay},swap:function(){this.timeout=setTimeout((()=>{this.auxl[this.zone].Move(this.to),clearTimeout(this.timeout)}),this.delay)},remove:function(){clearTimeout(this.timeout)}}),AFRAME.registerComponent("clickaddinventory",{dependencies:["auxl"],multiple:!0,schema:{item:{type:"string",default:"itemName"},once:{type:"boolean",default:!0},delay:{type:"number",default:0},despawn:{type:"boolean",default:!0},auxlObj:{type:"string",default:"auxlObj"},despawnMethod:{type:"string",default:"DespawnCore"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt,this.item=this.data.item,this.once=this.data.once,this.delay=this.data.delay,this.give=!0,this.despawn=this.data.despawn,this.auxlObj=this.data.auxlObj,this.despawnMethod=this.data.despawnMethod},events:{click:function(){this.give&&(this.timeout=setTimeout((()=>{this.auxl.comp.AddToInventory({item:this.auxl[this.item]}),this.once&&(this.give=!1),this.despawn&&this.auxl[this.auxlObj][this.despawnMethod](),clearTimeout(this.timeout)}),this.delay))}}}),AFRAME.registerComponent("acceptobject",{dependencies:["auxl"],multiple:!0,schema:{item:{type:"string",default:"itemName"},uses:{type:"number",default:1},delay:{type:"number",default:0},despawn:{type:"boolean",default:!0},auxlObj:{type:"string",default:"auxlObj"},despawnMethod:{type:"string",default:"DespawnCore"},methodObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"methodName"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt,this.item=this.data.item,this.uses=this.data.uses,this.delay=this.data.delay,this.inUse=!1,this.despawn=this.data.despawn,this.auxlObj=this.data.auxlObj,this.despawnMethod=this.data.despawnMethod,this.methodObj=this.data.methodObj,this.component=this.data.component,this.method=this.data.method,this.params=this.data.params},run:function(){this.timeout=setTimeout((()=>{"null"===this.component?this.auxl[this.methodObj][this.method]&&("null"===this.params?this.auxl[this.methodObj][this.method]():this.auxl[this.methodObj][this.method](this.params)):document.getElementById(this.methodObj)&&(this.domEnt=document.getElementById(this.methodObj),"null"===this.params?this.domEnt.components[this.component][this.method]():this.domEnt.components[this.component][this.method](this.params)),"limited"===this.auxl[this.item].persist&&(this.auxl[this.item].amount--,this.auxl.comp.UpdateInventoryMenu(),this.auxl.player.Unequip()),this.uses--,this.uses<=0&&this.despawn&&this.auxl[this.auxlObj][this.despawnMethod](),this.inUse=!1,clearTimeout(this.timeout)}),this.delay)},events:{click:function(){this.auxl.player.layer.equipped&&this.auxl.player.layer.equippedObject===this.item&&(this.inUse||(this.inUse=!0,this.run()))}}}),AFRAME.registerComponent("linkcable",{dependencies:["auxl"],schema:{type:{type:"string",default:"to",oneOf:["to","grab","hit","launch","fling","flying"]}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl},events:{mouseenter:function(e){console.log({event:"mouseenter",data:e}),this.auxl[this.el.id].Enter(e)},mousedown:function(e){console.log({event:"mousedown",data:e}),this.Measure(),this.auxl[this.el.id].LinkStart(e)},mouseup:function(e){console.log({event:"mouseup",data:e}),this.auxl[this.el.id].LinkEnd(e),this.Measure(!0)},mouseleave:function(e){console.log({event:"mouseleave",data:e}),this.auxl[this.el.id].Exit(e)},collide:function(e){this.auxl[this.el.id].Collide(e)},click:function(e){console.log({event:"click",data:e}),this.auxl[this.el.id].Click(e)},altclick:function(e){console.log({event:"altclick",data:e}),this.auxl[this.el.id].AltClick(e)}},tick:function(e,t){this.measure?this.power>1?(this.power--,console.log(this.power)):(this.power=0,this.Measure(!0)):this.power=1,this.auxl[this.el.id].Tick(this.power)},Measure:function(e){this.measure=!e}}),AFRAME.registerComponent("camerasync",{dependencies:["auxl"],init:function(){},tick:function(e,t){this.el.body.quaternion.copy(this.el.object3D.getWorldQuaternion(new THREE.Quaternion))}}),AFRAME.registerComponent("staticsync",{dependencies:["auxl"],schema:{type:{type:"string",default:"self",oneOf:["self","other",,]},auxlObj:{type:"string",default:"auxlObj"},offset:{type:"vec3"},posSync:{type:"vec3"},sync:{type:"bool",default:!0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.offset=this.data.offset||new THREE.Vector3(0,0,0),this.posSync=new THREE.Vector3(0,0,0)},update:function(){this.posSync.copy(this.data.posSync)},tick:function(e,t){this.data.sync&&this.el.body&&this.el.body.position&&("self"===this.data.type?this.el.object3D.position&&this.posSync.copy(this.el.object3D.position):"other"===this.data.type&&this.posSync.copy(this.auxl[this.data.auxlObj].GetEl().object3D.position),this.posSync.add(this.offset),this.el.body.position.copy(this.posSync),this.el.object3D.position.copy(this.posSync))}}),AFRAME.registerComponent("collision",{dependencies:["auxl"],init:function(){playerRig.addEventListener("collide",(function(e){}))}}),AFRAME.registerComponent("trigger",{dependencies:["auxl"],multiple:!0,schema:{collide:{type:"array",default:[!1]},cursorObj:{type:"string",default:"auxlObj"},component:{type:"string",default:"null"},method:{type:"string",default:"Click"},params:{type:"string",default:"null"}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.domEnt,this.checkTriggerThrottled=AFRAME.utils.throttle(this.checkTrigger,1e3,this),this.playerEl=document.querySelector("#playerRig"),this.el.body.collisionResponse=!1},run:function(e){console.log(this),"null"===this.data.component?this.auxl[this.data.cursorObj][this.data.method]&&("null"===this.data.params?this.auxl[this.data.cursorObj][this.data.method]():"target"===this.data.params?this.auxl[this.data.cursorObj][this.data.method](e.target):this.auxl[this.data.cursorObj][this.data.method](this.data.params)):document.getElementById(this.data.cursorObj)&&(this.domEnt=document.getElementById(this.data.cursorObj),"null"===this.data.params?this.domEnt.components[this.data.component][this.data.method]():"target"===this.data.params?this.domEnt.components[this.data.component][this.data.method](e.target):this.domEnt.components[this.data.component][this.data.method](this.data.params))},events:{collide:function(e){this.run(e)}},checkTrigger:function(){this.el.body.aabb.overlaps(this.playerEl.body.aabb),this.el.body.aabb.contains(this.playerEl.body.aabb)}}),AFRAME.registerComponent("bodymaterial",{dependencies:["auxl"],schema:{friction:{type:"number",default:0},restitution:{type:"number",default:0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl;let e=new CANNON.Material({friction:this.data.friction,restitution:this.data.restitution});this.auxl.physWorld.addMaterial(e),this.el.body.material=e}}),AFRAME.registerComponent("auxconstraint",{dependencies:["auxl"],multiple:!0,schema:{connectTo:{type:"string",default:"auxlObj"},type:{type:"string",default:"lock",oneOf:["coneTwist","distance","hinge","lock","pointToPoint"]},pivotA:{type:"vec3"},axisA:{type:"vec3"},pivotB:{type:"vec3"},axisB:{type:"vec3"},collideConnected:{type:"boolean",default:!0},distance:{type:"number",default:0,min:0},maxForce:{type:"number",default:1e6},always:{type:"boolean",default:!0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.connected=!1,this.connectBody=!1,this.listenersEnabled=!1},link:function(e){return e&&(this.connectBody=!1),this.connectBody||(this.auxl[this.data.connect]?this.auxl[this.data.connect].core&&this.auxl[this.data.connect].core.inScene?this.connectBody=this.auxl[this.data.connect].GetEl().body:this.auxl[this.data.connect].layer&&this.auxl[this.data.connect].layer.inScene&&(this.connectBody=this.auxl[this.data.connect].GetElParent().body):document.getElementById(this.data.connectTo)&&(this.connectBody=document.getElementById(this.data.connectTo).body)),this.connectBody},pivots:function(){this.pivotA=new THREE.Vector3(0,0,0),this.pivotB=new THREE.Vector3(0,0,0),this.data.pivotA&&this.pivotA.copy(this.data.pivotA),this.data.pivotB&&this.pivotB.copy(this.data.pivotB)},axis:function(){this.axisA=new CANNON.Vec3(0,0,0),this.axisB=new CANNON.Vec3(0,0,0),this.data.axisA&&this.axisA.copy(this.data.axisA),this.data.axisB&&this.axisB.copy(this.data.axisB)},Retry:function(e){let t=setTimeout((()=>{this.Reconnect(e),clearTimeout(t)}),500)},Connect:function(e){if(void 0!==this.el.body){if(!this.connected&&this.link(e)){switch(this.data.type){case"lock":this.constraint=new CANNON.LockConstraint(this.el.body,this.connectBody,{maxForce:this.data.maxForce});break;case"distance":this.constraint=new CANNON.DistanceConstraint(this.el.body,this.connectBody,this.data.distance,this.data.maxForce);break;case"pointToPoint":this.pivots(),this.constraint=new CANNON.PointToPointConstraint(this.el.body,this.pivotA,this.connectBody,this.pivotB,this.data.maxForce);break;case"hinge":this.pivots(),this.axis(),this.constraint=new CANNON.HingeConstraint(this.el.body,this.connectBody,{pivotA:this.pivotA,axisA:this.axisA,pivotB:this.pivotB,axisB:this.axisB,maxForce:this.data.maxForce});break;case"coneTwist":this.pivots(),this.axis(),this.constraint=new CANNON.ConeTwistConstraint(this.el.body,this.connectBody,{pivotA:this.pivotA,pivotB:this.pivotB,axisA:this.axisA,axisB:this.axisB,maxForce:this.data.maxForce});break;default:throw new Error("[constraint] Unexpected type: "+data.type)}this.constraint.collideConnected=this.data.collideConnected,this.auxl.physWorld.addConstraint(this.constraint),this.connected=!0}}else this.Retry(e)},Disconnect:function(){this.auxl.physWorld.removeConstraint(this.constraint),this.connected=!1},Reconnect:function(e){this.connected&&this.Disconnect(),this.Connect(e)},addListeners:function(e){this.auxl.el.addEventListener(e+"spawned",this.Connect.bind(this)),this.auxl.el.addEventListener(e+"despawned",this.Disconnect.bind(this)),this.listenersEnabled=!0},removeListeners:function(e){this.auxl.el.addEventListener(e+"spawned",this.Connect.bind(this)),this.auxl.el.addEventListener(e+"despawned",this.Disconnect.bind(this)),this.listenersEnabled=!1},update:function(e){let t=!1;e.connectTo!==this.data.connectTo&&(t=!0),this.Reconnect(t),t&&this.listenersEnabled&&this.removeListeners(e.connectTo),this.data.always&&!this.listenersEnabled&&this.addListeners(this.data.connectTo)},remove:function(){this.listenersEnabled&&this.removeListeners(this.data.connectTo)}}),AFRAME.registerComponent("auxspring",{dependencies:["auxl"],multiple:!0,schema:{connectTo:{type:"string",default:"auxlObj"},name:{type:"string",default:"auxlConstraint"},localAnchorA:{type:"vec3"},localAnchorB:{type:"vec3"},restLength:{type:"number",default:1,min:0},stiffness:{type:"number",default:100,min:0},damping:{type:"number",default:1,min:0},collideConnected:{type:"boolean",default:!0},always:{type:"boolean",default:!0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.connected=!1,this.connectBody=!1,this.listenersEnabled=!1,this.active=!1},link:function(e){return e&&(this.connectBody=!1),this.connectBody||(this.auxl[this.data.connect]?this.auxl[this.data.connect].core&&this.auxl[this.data.connect].core.inScene?this.connectBody=this.auxl[this.data.connect].GetEl().body:this.auxl[this.data.connect].layer&&this.auxl[this.data.connect].layer.inScene&&(this.connectBody=this.auxl[this.data.connect].GetElParent().body):document.getElementById(this.data.connectTo)&&(this.connectBody=document.getElementById(this.data.connectTo).body)),this.connectBody},localAnchors:function(){this.localAnchorA=new THREE.Vector3(0,0,0),this.localAnchorB=new THREE.Vector3(0,0,0),this.data.localAnchorA&&this.localAnchorA.copy(this.data.localAnchorA),this.data.localAnchorB&&this.localAnchorB.copy(this.data.localAnchorB)},Retry:function(e){let t=setTimeout((()=>{this.Reconnect(e),clearTimeout(t)}),500)},Connect:function(e){void 0!==this.el.body?!this.connected&&this.link(e)&&(this.localAnchors(),this.spring=new CANNON.Spring(this.el.body,this.connectBody,{restLength:this.data.restLength,stiffness:this.data.stiffness,damping:this.data.damping,localAnchorA:this.localAnchorA,localAnchorB:this.localAnchorB,collideConnected:this.collideConnected}),this.connected=!0):this.Retry(e)},Disconnect:function(){delete this.spring,this.spring=null,this.connected=!1},Reconnect:function(e){this.connected&&this.Disconnect(),this.Connect(e)},addListeners:function(e){this.auxl.el.addEventListener(e+"spawned",this.Connect.bind(this)),this.auxl.el.addEventListener(e+"despawned",this.Disconnect.bind(this)),this.listenersEnabled=!0},removeListeners:function(e){this.auxl.el.addEventListener(e+"spawned",this.Connect.bind(this)),this.auxl.el.addEventListener(e+"despawned",this.Disconnect.bind(this)),this.listenersEnabled=!1},update:function(e){let t=!1;e.connectTo!==this.data.connectTo&&(t=!0),t&&(this.Reconnect(t),t&&this.listenersEnabled&&this.removeListeners(e.connectTo),this.data.always&&!this.listenersEnabled&&this.addListeners(this.data.connectTo))},remove:function(){this.listenersEnabled&&this.removeListeners(this.data.connectTo)},tick:function(e,t){return this.connected&&this.active?this.spring.applyForce():void 0},play:function(){this.active=!0},pause:function(){this.active=!1}}),AFRAME.registerComponent("gravitycontrol",{dependencies:["auxl"],schema:{type:{type:"string",default:"float",oneOf:["float","earth","moon","jupiter","io","mars","Uranus","Neptune","Sun","Pluto","Saturn","Custom"]},axis:{type:"vec3",default:new THREE.Vector3(0,0,0)},velocityExpo:{type:"number",default:1e3},chuteOpen:{type:"boolean",default:!1},gravityObject:{type:"string",default:"none"},customGravity:{type:"number",default:9.80665,min:1e-6}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.worldGravity=new THREE.Vector3,this.worldGravityOffset=new THREE.Vector3,this.velocityTick=0,this.playerPosition=new THREE.Vector3,this.playerPositionOld=new THREE.Vector3,this.type=this.data.type,this.gravityAmount=0,this.axis=new THREE.Vector3(0,0,0),this.axis.x=this.data.axis.x,this.axis.y=this.data.axis.y,this.axis.z=this.data.axis.z,this.rotation=new THREE.Quaternion(0,0,0,1),this.centerOfGravity=new THREE.Vector3(0,.314,0),this.gravityDirAdjust=new THREE.Vector3(0,0,0),this.gravityQuat=new THREE.Quaternion(0,0,0,1),this.gravityObject=!1,this.allGravityDirection=[new THREE.Vector3(0,0,0),new THREE.Vector3(0,-1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,0,1)],this.allGravityRotation=[new THREE.Quaternion(0,0,0,1),new THREE.Quaternion(0,0,0,1),new THREE.Quaternion(.7071067811865475,0,.7071067811865476,0),new THREE.Quaternion(.5,.5,.5,-.5),new THREE.Quaternion(.5,-.5,-.5,-.5),new THREE.Quaternion(.5,.5,.5,.5),new THREE.Quaternion(-.5,-.5,.5,.5)],this.allGravityTypes={float:0,earth:9.80665,moon:1.6268,jupiter:24.7912112,io:1.79461695,mars:3.71672035,uranus:8.6886919,neptune:11.15016105,sun:274.782333,pluto:.61781895,saturn:10.44408225,mercury:3.726527,venus:8.8652116,custom:this.data.customGravity},this.velocityNew=new THREE.Vector3(0,0,0),this.velocityAdjust=0,this.massAdjust=0,this.axisCycleCount=0,this.axisDir=0,this.typeCycleCount=0,this.worldAxis=new THREE.Vector3(0,0,0),this.worldType="float",this.worldAxisCycleCount=0,this.worldTypeCycleCount=0,this.localAxisChange=!1,this.worldAxisChange=!1,this.worldAxisSet=0,this.axisSet=0},update:function(e){this.chuteOpen=this.data.chuteOpen,this.data.gravityObject&&"none"!==this.data.gravityObject?(this.gravityObject=this.data.gravityObject,document.getElementById(this.gravityObject)&&this.centerOfGravity.copy(document.getElementById(this.gravityObject).getAttribute("position"))):(this.gravityObject=!1,this.clearForces())},setAxis:function(e){this.localAxisChange||(this.localAxisChange=!0,this.axisSet=e,this.axisCycleCount=e,this.axis.copy(this.allGravityDirection[e]),this.axisTimeout1=setTimeout((()=>{this.el.body.sleep(),this.newPosition=new THREE.Vector3,this.newPosition.copy(this.axis).add(this.el.body.position),this.el.object3D.position.copy(this.newPosition),this.el.body.position.copy(this.newPosition),this.axisDir=e,this.el.body.quaternion.copy(this.allGravityRotation[this.axisDir]),this.el.object3D.quaternion.copy(this.allGravityRotation[this.axisDir]),this.axisTimeout2=setTimeout((()=>{this.el.body.wakeUp(),this.localAxisChange=!1,clearTimeout(this.axisTimeout1),clearTimeout(this.axisTimeout2)}),275)}),225),this.auxl.player.PlayerQuickAnim(),this.auxl.player.Notification({message:"Local Axis Update",time:2750}))},cycleAxis:function(){this.localAxisChange||(this.localAxisChange=!0,this.axisCycleCount++,this.axisCycleCount>=this.allGravityDirection.length&&(this.axisCycleCount=0),this.axis.copy(this.allGravityDirection[this.axisCycleCount]),this.axisTimeout1=setTimeout((()=>{this.el.body.sleep(),this.newPosition=new THREE.Vector3,this.newPosition.copy(this.axis).add(this.el.body.position),this.el.object3D.position.copy(this.newPosition),this.el.body.position.copy(this.newPosition),this.axisDir=this.axisCycleCount,this.el.body.quaternion.copy(this.allGravityRotation[this.axisDir]),this.el.object3D.quaternion.copy(this.allGravityRotation[this.axisDir]),this.axisTimeout2=setTimeout((()=>{this.el.body.wakeUp(),this.localAxisChange=!1,clearTimeout(this.axisTimeout1),clearTimeout(this.axisTimeout2)}),275)}),225),this.auxl.player.PlayerQuickAnim(),this.auxl.player.Notification({message:"Local Axis Update",time:2750}))},randomAxis:function(){this.axisCycleCount=Math.floor(Math.random()*this.allGravityDirection.length),this.axis.copy(this.allGravityDirection[this.axisCycleCount]),this.axisTimeout1=setTimeout((()=>{this.el.body.sleep(),this.newPosition=new THREE.Vector3,this.newPosition.copy(this.axis).add(this.el.body.position),this.el.object3D.position.copy(this.newPosition),this.el.body.position.copy(this.newPosition),this.axisDir=this.axisCycleCount,this.el.body.quaternion.copy(this.allGravityRotation[this.axisDir]),this.el.object3D.quaternion.copy(this.allGravityRotation[this.axisDir]),this.axisTimeout2=setTimeout((()=>{this.el.body.wakeUp(),this.localAxisChange=!1,clearTimeout(this.axisTimeout1),clearTimeout(this.axisTimeout2)}),275)}),225),this.auxl.player.PlayerQuickAnim(),this.auxl.player.Notification({message:"Local Axis Update",time:2750})},gravityObjectAxis:function(){.314===this.gravityObject.y&&document.getElementById(this.gravityObject)&&this.centerOfGravity.copy(document.getElementById(this.gravityObject).getAttribute("position")),this.gravityDirAdjust.copy(this.centerOfGravity),this.gravityDirAdjust.sub(this.playerPosition),this.gravityDirAdjust.normalize(),this.gravityQuat=new THREE.Quaternion,this.gravityQuat.setFromUnitVectors(new THREE.Vector3(0,-1,0),this.gravityDirAdjust),this.axis.copy(this.gravityDirAdjust),this.el.body.quaternion.copy(this.gravityQuat),this.el.object3D.quaternion.copy(this.gravityQuat)},setWorldAxis:function(e){this.worldAxisSet=e,this.worldAxisCycleCount=e,this.worldAxis.copy(this.allGravityDirection[e]),this.worldAxis.multiplyScalar(this.allGravityTypes[this.worldType]),this.el.body.world.gravity.copy(this.worldAxis),this.auxl.player.Notification({message:"World Axis Update",time:2750})},cycleWorldAxis:function(){this.worldAxisCycleCount++,this.worldAxisCycleCount>=this.allGravityDirection.length&&(this.worldAxisCycleCount=0),this.worldAxisSet=this.worldAxisCycleCount,this.worldAxis.copy(this.allGravityDirection[this.worldAxisCycleCount]),this.worldAxis.multiplyScalar(this.allGravityTypes[this.worldType]),this.el.body.world.gravity.copy(this.worldAxis),this.auxl.player.Notification({message:"World Axis Update",time:2750})},setTypes:function(e){this.typeCycleCount=e,this.type=Object.keys(this.allGravityTypes)[e],this.auxl.player.Notification({message:"Local Gravity : "+this.type,time:2e3})},cycleTypes:function(){this.typeCycleCount++,this.typeCycleCount>=Object.keys(this.allGravityTypes).length&&(this.typeCycleCount=0),this.type=Object.keys(this.allGravityTypes)[this.typeCycleCount],this.auxl.player.Notification({message:"Local Gravity : "+this.type,time:2e3})},randomTypes:function(){this.typeCycleCount=Math.floor(Math.random()*Object.keys(this.allGravityTypes).length),this.type=Object.keys(this.allGravityTypes)[this.typeCycleCount],this.auxl.player.Notification({message:"Local Gravity : "+this.type,time:2e3}),console.log(this.type)},setWorldTypes:function(e){this.worldTypeCycleCount=e,this.worldType=Object.keys(this.allGravityTypes)[e],this.worldAxis.copy(this.allGravityDirection[this.worldAxisSet]),this.worldAxis.multiplyScalar(this.allGravityTypes[this.worldType]),this.el.body.world.gravity.copy(this.worldAxis),this.auxl.player.Notification({message:"World Gravity : "+this.worldType,time:2e3})},cycleWorldTypes:function(){this.worldTypeCycleCount++,this.worldTypeCycleCount>=Object.keys(this.allGravityTypes).length&&(this.worldTypeCycleCount=0),this.worldType=Object.keys(this.allGravityTypes)[this.worldTypeCycleCount],this.worldAxis.copy(this.allGravityDirection[this.worldAxisSet]),this.worldAxis.multiplyScalar(this.allGravityTypes[this.worldType]),this.el.body.world.gravity.copy(this.worldAxis),this.auxl.player.Notification({message:"World Gravity : "+this.worldType,time:2e3})},clearForces:function(){null!==this.el.body&&null!==this.el.body.world&&this.el.body.world.clearForces()},gravityVelocity:function(){if(this.auxl.playerRig.GetEl()&&this.auxl.playerRig.GetEl().body){this.playerPosition.copy(this.auxl.playerRig.GetEl().body.position);let e=!1;if(this.gravityObject){this.playerPosition.dot(this.gravityDirAdjust)>this.playerPositionOld.dot(this.gravityDirAdjust)&&(e=!0)}else 0!==this.axis.x?this.axis.x<0?this.playerPosition.x<this.playerPositionOld.x&&(e=!0):this.playerPosition.x>this.playerPositionOld.x&&(e=!0):0!==this.axis.y?this.axis.y<0?this.playerPosition.y<this.playerPositionOld.y&&(e=!0):this.playerPosition.y>this.playerPositionOld.y&&(e=!0):0!==this.axis.z&&(this.axis.z<0?this.playerPosition.z<this.playerPositionOld.z&&(e=!0):this.playerPosition.z>this.playerPositionOld.z&&(e=!0));this.playerPositionOld.copy(this.playerPosition),this.massAdjust=this.el.body.mass,"float"===this.type?this.gravityAmount=0:"earth"===this.type?this.gravityAmount=9.80665:"moon"===this.type?(this.gravityAmount=1.6268,this.massAdjust*=.1657):"jupiter"===this.type?(this.gravityAmount=24.7912112,this.massAdjust*=2.528):"io"===this.data.type?(this.gravityAmount=1.79461695,this.massAdjust*=.183):"mars"===this.type?(this.gravityAmount=3.71672035,this.massAdjust*=.379):"uranus"===this.type?(this.gravityAmount=8.6886919,this.massAdjust*=.886):"neptune"===this.type?(this.gravityAmount=11.15016105,this.massAdjust*=1.137):"sun"===this.type?(this.gravityAmount=274.782333,this.massAdjust*=28.02):"pluto"===this.type?(this.gravityAmount=.61781895,this.massAdjust*=.063):"saturn"===this.type?(this.gravityAmount=10.44408225,this.massAdjust*=1.065):"mercury"===this.type?this.gravityAmount=3.726527:"venus"===this.type?this.gravityAmount=8.8652116:"custom"===this.type&&(this.gravityAmount=this.data.customGravity),(this.axis.equals(new THREE.Vector3(0,0,0))||"float"===this.type||this.data.chuteOpen)&&(e=!1),e?(this.velocityTick++,this.velocityAdjust=this.data.velocityExpo,this.velocityAdjust/=this.massAdjust,this.velocityNew=new THREE.Vector3(this.velocityTick/this.velocityAdjust,this.velocityTick/this.velocityAdjust,this.velocityTick/this.velocityAdjust),this.velocityNew.multiply(this.axis),this.el.body.velocity.x+=this.velocityNew.x,this.el.body.velocity.y+=this.velocityNew.y,this.el.body.velocity.z+=this.velocityNew.z):(this.auxl.player.layer.velocity=new THREE.Vector3(0,0,0),this.velocityTick=0),this.planetGravity=new THREE.Vector3(0,0,0),this.planetGravity=new THREE.Vector3(this.gravityAmount,this.gravityAmount,this.gravityAmount),this.planetGravity.multiply(this.axis),this.el.body.applyForce(this.planetGravity,new THREE.Vector3(0,0,0))}},offsetWorldGravity:function(){this.worldGravityOffset=new THREE.Vector3,this.worldGravity.copy(this.auxl.physWorld.gravity),this.worldGravityOffset.copy(this.worldGravity),this.worldGravityOffset.equals(new THREE.Vector3)||(this.worldGravityOffset.multiplyScalar(-1*this.el.body.mass),this.el.body.applyForce(this.worldGravityOffset,this.el.body.position))},tick:function(e,t){this.gravityObject&&this.gravityObjectAxis(),this.offsetWorldGravity(),this.gravityVelocity()}}),AFRAME.registerComponent("kinsync",{dependencies:["auxl"],schema:{auxlObj:{type:"string",default:"auxlObj"},offset:{type:"vec3"},sync:{type:"bool",default:!0}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.offset=this.data.offset||new THREE.Vector3,this.posSync=new THREE.Vector3,this.rotSync=new THREE.Quaternion},update:function(){this.offset=this.data.offset||new THREE.Vector3(0,0,0)},tick:function(e,t){this.data.sync&&this.el.body&&(this.posSync.copy(this.auxl[this.data.auxlObj].GetEl().object3D.position),this.auxl[this.data.auxlObj].GetEl().object3D.getWorldQuaternion(this.rotSync),this.posSync.add(this.offset),this.el.object3D.position.copy(this.posSync),this.el.object3D.quaternion.copy(this.rotSync))}}),AFRAME.registerComponent("ammopush",{init:function(){var e=this.el;e.addEventListener("collidestart",(function(){const t=new Ammo.btVector3(1.4,1,0),o=new Ammo.btVector3(0,0,0);e.body.applyImpulse(t,o),Ammo.destroy(t),Ammo.destroy(o)}))}}),AFRAME.registerComponent("ammobounce",{init:function(){var e=this.el;e.addEventListener("collidestart",(function(){const t=new Ammo.btVector3(0,6,0),o=new Ammo.btVector3(0,0,0);e.body.applyImpulse(t,o),Ammo.destroy(t),Ammo.destroy(o)}))}}),AFRAME.registerComponent("rain",{schema:{density:{type:"number",default:30}},init:function(){this.auxl=document.querySelector("a-scene").systems.auxl,this.auxl.audioEnabled&&(this.playerAudio=document.querySelector("#playerAudio"),this.playerAudio.emit("thunderstorm",{bubbles:!1}));let e=document.querySelector("a-scene"),t=document.createElement("a-entity");this.parentId="rain",t.setAttribute("id",this.parentId),t.classList.add("weather"),e.appendChild(t);let o=this.data.density;for(let e=0;e<o;e++){let o,a,i,n=document.createElement("a-entity"),r=document.createElement("a-entity");t.classList.add("weatherElGroup"),t.appendChild(r),o=new THREE.Vector3(-.04,-.55,0),a=new THREE.Vector3(.04,-.55,0),i=new THREE.Vector3(0,0,0),n.setAttribute("geometry",{primitive:"triangle",vertexA:o,vertexB:a,vertexC:i}),n.setAttribute("material",{color:"#55a5be",opacity:.75,metalness:0,roughness:1,side:"double"});let s=40*Math.random()-20,l=40,c=40*Math.random()-20;n.setAttribute("position",{x:s,y:l,z:c}),n.setAttribute("scale",{x:1*Math.random()+.5,y:1*Math.random()+.5,z:1*Math.random()+.5}),n.classList.add("weatherEl"),n.setAttribute("raindrop",{});let d=!1,p=!1;if(0!==e&&e%2==0){p=document.createElement("a-entity");let e=new THREE.Vector3(-.1,-.1,0),t=new THREE.Vector3(.1,-.1,0),o=new THREE.Vector3(0,0,0);p.setAttribute("geometry",{primitive:"triangle",vertexA:e,vertexB:t,vertexC:o}),p.setAttribute("material",{color:"#327186",opacity:.75,metalness:0,roughness:1,side:"double"}),p.setAttribute("rotation","-90 0 0"),p.setAttribute("visible",!1),p.setAttribute("position",{x:s,y:"0.05",z:c}),p.classList.add("weatherElSplash"),d=!0}r.appendChild(n),d&&r.appendChild(p)}},remove:function(){let e=document.querySelector("a-scene"),t=document.getElementById(this.parentId);e.removeChild(t),this.auxl.audioEnabled&&this.playerAudio.components.sound__thunderstorm&&this.playerAudio.components.sound__thunderstorm.stopSound()}}),AFRAME.registerComponent("raindrop",{init:function(){let e=this.el,t=document.getElementById("playerRig"),o=Math.floor(2e3*Math.random()),a=Math.floor(1e3*Math.random()+1e3),i={property:"object3D.position.y",to:-2,dur:a,delay:o,loop:"true",dir:"normal",easing:"linear",elasticity:400,autoplay:"true",enabled:"true"};e.setAttribute("animation__drop",i);let n=!1,r=e.nextSibling;function s(){r.setAttribute("visible",!0),setTimeout((function(){r.setAttribute("visible",!1);let t=e.getAttribute("position");r.setAttribute("position",{x:t.x,z:t.z})}),500)}function l(){let o=t.getAttribute("position"),a=40*Math.random()-20+o.x,i=40*Math.random()-20+o.z;e.setAttribute("position",{x:a,z:i})}r&&(n=!0),this.splashTimeout=setTimeout((function(){setInterval(l,a),n&&setInterval(s,a)}),o+a)},remove:function(){clearTimeout(this.splashTimeout)}}),AFRAME.registerComponent("lightningbolt",{init:function(){this.auxl=document.querySelector("a-scene").systems.auxl;let e=document.querySelector("a-scene"),t=document.querySelector("#playerRig"),o=Math.floor(5e3*Math.random()+15e3),a=document.createElement("a-entity");a.setAttribute("position",{x:"0",y:"0",z:"0"}),a.setAttribute("scale","1 1 1"),a.setAttribute("id","lightningbolt"),a.setAttribute("visible",!1),a.classList.add("bolt"),a.setAttribute("animation__visibility",{property:"visible",from:!1,to:!0,dur:250,delay:0,loop:"true",dir:"normal",easing:"linear",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),e.appendChild(a);let i=document.createElement("a-entity");i.setAttribute("position",{x:"0",y:"7.5",z:"-3"}),i.setAttribute("scale","10 10 0"),i.classList.add("lightningbolt"),a.appendChild(i);let n=new THREE.Vector3(-.05,-.5,0),r=new THREE.Vector3(.05,-.5,0),s=new THREE.Vector3(0,0,0),l=document.createElement("a-entity");l.setAttribute("geometry",{primitive:"triangle",vertexA:n,vertexB:r,vertexC:s}),l.setAttribute("position",{x:"-0.15",y:"-0.7",z:"0"}),l.setAttribute("scale","0.25 0.25 0.25"),l.setAttribute("rotation","0 0 215"),l.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),l.classList.add("lightningboltleftsplash"),l.setAttribute("animation__scale",{property:"scale",from:"0.1 0.1 0.1",to:"1 1 1",dur:1e3,delay:0,loop:"true",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),l.setAttribute("animation__rotation",{property:"rotation",from:"0 0 215",to:"0 0 250",dur:1e3,delay:0,loop:"true",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),i.appendChild(l);let c=document.createElement("a-entity");c.setAttribute("rotation","0 0 -5"),c.classList.add("midBoltWrapper"),i.appendChild(c);let d=document.createElement("a-entity");d.setAttribute("rotation","0 0 0"),d.setAttribute("scale","0.25 1 1"),d.classList.add("boltTopWrapper"),c.appendChild(d);let p=document.createElement("a-entity");p.setAttribute("geometry",{primitive:"plane",width:1,height:1}),p.setAttribute("position",{x:"1.6",y:"4",z:"0"}),p.setAttribute("rotation","0 0 45"),p.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),p.classList.add("topBolt"),d.appendChild(p);let h=document.createElement("a-entity");h.setAttribute("rotation","0 0 0"),h.setAttribute("scale","0.25 1 1"),h.classList.add("boltTopMidWrapper"),c.appendChild(h);let m=document.createElement("a-entity");m.setAttribute("geometry",{primitive:"plane",width:1,height:1}),m.setAttribute("position",{x:"1.2",y:"3",z:"0"}),m.setAttribute("rotation","0 0 45"),m.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),m.classList.add("topMidBolt"),h.appendChild(m);let u=document.createElement("a-entity");u.setAttribute("rotation","0 0 0"),u.setAttribute("scale","0.25 1 1"),u.classList.add("boltMidWrapper"),c.appendChild(u);let y=document.createElement("a-entity");y.setAttribute("geometry",{primitive:"plane",width:1,height:1}),y.setAttribute("position",{x:"0.8",y:"2",z:"0"}),y.setAttribute("rotation","0 0 45"),y.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),y.classList.add("midBolt"),u.appendChild(y);let g=document.createElement("a-entity");g.setAttribute("rotation","0 0 0"),g.setAttribute("scale","0.25 1 1"),g.classList.add("boltBottomMidWrapper"),c.appendChild(g);let v=document.createElement("a-entity");v.setAttribute("geometry",{primitive:"plane",width:1,height:1}),v.setAttribute("position",{x:"0.4",y:"1",z:"0"}),v.setAttribute("rotation","0 0 45"),v.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),v.classList.add("bottomMidBolt"),g.appendChild(v);let f=document.createElement("a-entity");f.setAttribute("rotation","0 0 0"),f.setAttribute("scale","0.25 1 1"),f.classList.add("boltBottomWrapper"),c.appendChild(f);let b=document.createElement("a-entity");b.setAttribute("geometry",{primitive:"plane",width:1,height:1}),b.setAttribute("position",{x:"0",y:"0",z:"0"}),b.setAttribute("rotation","0 0 45"),b.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),b.classList.add("bottomBolt"),f.appendChild(b);let E=document.createElement("a-entity");E.setAttribute("geometry",{primitive:"triangle",vertexA:n,vertexB:r,vertexC:s}),E.setAttribute("position",{x:"0.05",y:"-0.7",z:"0"}),E.setAttribute("scale","0.25 0.25 0.25"),E.setAttribute("rotation","0 0 -215"),E.setAttribute("material",{color:"#f09e1b",opacity:.75,shader:"flat",side:"double"}),E.classList.add("lightningboltrightsplash"),E.setAttribute("animation__scale",{property:"scale",from:"0.1 0.1 0.1",to:"1 1 1",dur:1e3,delay:0,loop:"true",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),E.setAttribute("animation__rotation",{property:"rotation",from:"0 0 -215",to:"0 0 -250",dur:1e3,delay:0,loop:"true",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),i.appendChild(E);let w=document.createElement("a-entity");w.setAttribute("geometry",{primitive:"circle",radius:4,segments:16}),w.setAttribute("position",{x:"-0.5",y:"0.2",z:"-3"}),w.setAttribute("rotation","-90 0 0"),w.setAttribute("material",{color:"#dba54f",opacity:.75,shader:"flat",side:"double"}),w.classList.add("boltfloor"),a.appendChild(w);let x,T=document.createElement("a-entity");T.setAttribute("gltf-model",this.auxl.cloud0),T.setAttribute("position",{x:"6",y:"50",z:"-2"}),T.setAttribute("rotation","0 0 180"),T.classList.add("boltCloud"),a.appendChild(T),document.querySelector("#ambientLight")?(x=document.querySelector("#ambientLight"),x.setAttribute("light",{type:"ambient",color:"#716a9a",intensity:.5})):(x=document.createElement("a-entity"),x.setAttribute("light",{type:"ambient",color:"#716a9a",intensity:.5}),x.setAttribute("id","#ambientLight"),e.appendChild(x)),x.setAttribute("animation__lightningbolt1",{property:"light.intensity",from:"0.5",to:"4.5",dur:1,delay:0,loop:"false",dir:"normal",easing:"easeOutCirc",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),x.setAttribute("animation__lightningbolt2",{property:"light.intensity",from:"4.5",to:"0",dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),x.setAttribute("animation__lightningbolt3",{property:"light.intensity",from:"0",to:"2.5",dur:1,delay:500,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),x.setAttribute("animation__lightningbolt4",{property:"light.intensity",from:"3.5",to:"0",dur:200,delay:500,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),x.setAttribute("animation__lightningbolt5",{property:"light.intensity",from:"0",to:"3.5",dur:1,delay:700,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"}),x.setAttribute("animation__lightningbolt6",{property:"light.intensity",from:"2.5",to:"0.5",dur:50,delay:1e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:"false",enabled:"true",startEvents:"boltHit",pauseEvents:"boltStop"});let C=document.querySelector(".bolt"),D=document.querySelector(".lightningboltleftsplash"),S=document.querySelector(".lightningboltrightsplash"),k=document.querySelector("#playerAudio");function R(){let e=t.getAttribute("position"),o=80*Math.random()-40+e.x,a=80*Math.random()-40+e.z;C.setAttribute("position",{x:o,y:.15,z:a})}R(),this.boltInterval=setInterval((()=>{this.auxl.audioEnabled&&k.emit("boltHit"),setTimeout((()=>{C.setAttribute("visible",!0),x.emit("boltHit"),setTimeout((()=>{C.emit("boltHit"),D.emit("boltHit"),S.emit("boltHit"),setTimeout((()=>{C.setAttribute("visible",!1),a.emit("boltStop"),x.emit("boltStop"),D.emit("boltStop"),D.setAttribute("scale","0.25 0.25 0.25"),D.setAttribute("rotation","0 0 215"),S.emit("boltStop"),S.setAttribute("scale","0.25 0.25 0.25"),S.setAttribute("rotation","0 0 -215"),R()}),800)}),250)}),1500)}),o)},remove:function(){clearInterval(this.boltInterval);let e=document.querySelector("a-scene"),t=document.getElementById("lightningbolt");e.removeChild(t)}}),AFRAME.registerComponent("arcade",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.game1Preview="./assets/img/previews/game1.jpg",e.game2Preview="./assets/img/previews/game2.jpg",e.game3Preview="./assets/img/previews/game3.jpg",e.game4Preview="./assets/img/previews/game4.jpg",e.game5Preview="./assets/img/previews/game5.jpg",e.game6Preview="./assets/img/previews/game6.jpg",e.game7Preview="./assets/img/previews/game7.jpg",e.game8Preview="./assets/img/previews/game8.jpg",e.game9Preview="./assets/img/previews/game9.jpg",e.game10Preview="./assets/img/previews/game10.jpg",e.confirm1="./assets/audio/kenney/confirmation_001.mp3",e.confirm2="./assets/audio/kenney/confirmation_002.mp3",e.confirm3="./assets/audio/kenney/confirmation_003.mp3",e.confirm4="./assets/audio/kenney/confirmation_004.mp3",e.drop1="./assets/audio/kenney/drop_001.mp3",e.drop2="./assets/audio/kenney/drop_002.mp3",e.drop3="./assets/audio/kenney/drop_003.mp3",e.drop4="./assets/audio/kenney/drop_004.mp3",e.error7="./assets/audio/kenney/error_007.mp3",e.glass1="./assets/audio/kenney/glass_001.mp3",e.glass3="./assets/audio/kenney/glass_003.mp3",e.maximize6="./assets/audio/kenney/maximize_006.mp3",e.maximize7="./assets/audio/kenney/maximize_007.mp3",e.maximize8="./assets/audio/kenney/maximize_008.mp3",e.minimize6="./assets/audio/kenney/minimize_006.mp3",e.minimize7="./assets/audio/kenney/minimize_007.mp3",e.minimize8="./assets/audio/kenney/minimize_008.mp3",e.pluck1="./assets/audio/kenney/pluck_001.mp3",e.pluck2="./assets/audio/kenney/pluck_002.mp3",e.question3="./assets/audio/kenney/question_003.mp3",e.select2="./assets/audio/kenney/select_002.mp3",e.select6="./assets/audio/kenney/select_006.mp3",e.select7="./assets/audio/kenney/select_007.mp3",e.switch2="./assets/audio/kenney/switch_002.mp3",e.town3="./assets/audio/silverNimbus/Town_III.mp3",e.GameMenu=t=>{let o=Object.assign({},t);o.inScene=!1,o.menuId=o.id+"layer",o.state=!1,o.sceneTimeout,o.title=o.game.title,o.instructions=o.game.instructionsText,o.controls=o.game.controlsText,o.preview=o.game.previewImage,o.windowText={value:"",wrapCount:30,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.45},o.windowMaterial={shader:"flat",color:"#2694ce",opacity:1,side:"double"},o.previewMaterial={shader:"flat",color:"#FFFFFF",opacity:1,side:"double",src:o.preview,repeat:"1 1"},o.windowPreviewData={data:"windowPreviewData",id:"windowPreview",sources:!1,text:o.windowText,geometry:{primitive:"plane",width:.5,height:.5},material:o.previewMaterial,position:new THREE.Vector3(-.25,1.5,.25),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},o.windowPreview=e.Core(o.windowPreviewData),o.gameTitleData={data:"gameTitleData",id:"gameTitle",sources:!1,text:{value:o.title,wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.5},geometry:!1,material:!1,position:new THREE.Vector3(0,.225,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.gameTitle=e.Core(o.gameTitleData),o.gameControlButtonData={data:"gameControlButtonData",id:"gameControlButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"Load",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.5,.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.gameControlButton=e.Core(o.gameControlButtonData),o.gameInstructionsButtonData={data:"gameInstructionsButtonData",id:"gameInstructionsButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"Instructions",wrapCount:30,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.75,.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.gameInstructionsButton=e.Core(o.gameInstructionsButtonData),o.gameControlsButtonData={data:"gameControlsButtonData",id:"gameControlsButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"Controls",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.5,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.gameControlsButton=e.Core(o.gameControlsButtonData),o.gameScoresButtonData={data:"gameScoresButtonData",id:"gameScoresButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"High Scores",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.75,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.gameScoresButton=e.Core(o.gameScoresButtonData),o.gameSettingsButtonData={data:"gameSettingsButtonData",id:"gameSettingsButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"Settings",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.5,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:{visible:!1}},o.gameSettingsButton=e.Core(o.gameSettingsButtonData),o.menuHideButtonData={data:"menuHideButtonData",id:"menuHideButton",sources:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"}},text:{value:"Close",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.005,side:"double",align:"center",baseline:"center",width:.4},geometry:{primitive:"circle",radius:.1,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(.75,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},o.menuHideButton=e.Core(o.menuHideButtonData),o.gameMenuData={parent:{core:o.windowPreview},child0:{core:o.gameTitle},child1:{core:o.gameControlButton},child2:{core:o.gameInstructionsButton},child3:{core:o.gameControlsButton},child4:{core:o.gameScoresButton},child5:{core:o.gameSettingsButton},child6:{core:o.menuHideButton}},o[o.menuId]=e.Layer(o.menuId,o.gameMenuData);const a=()=>{o.inScene||(e.currentGameMenu&&e[e.currentGameMenu].DespawnGameMenu(),o[o.menuId].SpawnLayer(),r(),o.game.inScene?c():p(),h(),e.currentGameMenu=o.id,o.inScene=!0)},i=()=>{o.inScene&&(clearTimeout(o.sceneTimeout),n(!1),s(),o[o.menuId].DespawnLayer(),e.currentGameMenu=!1,o.inScene=!1)},n=e=>{"preview"===o.state?u():"instructions"===o.state?v():"controls"===o.state?E():"scores"===o.state&&T(),"preview"===e?m():"instructions"===e?g():"controls"===e?b():"scores"===e&&x(),o.state=e},r=()=>{o.gameControlButton.GetEl().addEventListener("click",l),o.gameInstructionsButton.GetEl().addEventListener("click",y),o.gameControlsButton.GetEl().addEventListener("click",f),o.gameScoresButton.GetEl().addEventListener("click",w),o.menuHideButton.GetEl().addEventListener("click",i)},s=()=>{o.gameControlButton.GetEl().removeEventListener("click",l),o.gameInstructionsButton.GetEl().removeEventListener("click",y),o.gameControlsButton.GetEl().removeEventListener("click",f),o.gameScoresButton.GetEl().removeEventListener("click",w),o.menuHideButton.GetEl().removeEventListener("click",i)},l=()=>{e[o.gameZone].Change(o.gameZone,o.gameConnect),c()},c=()=>{o.gameControlButton.GetEl().removeEventListener("click",l),o[o.menuId].ChangeParent({property:"position",value:o.inGamePos}),o.sceneTimeout=setTimeout((()=>{o.gameControlButton.GetEl().addEventListener("click",d),o.gameControlButton.ChangeSelf({property:"text",value:{value:"Return"}}),clearTimeout(o.sceneTimeout)}),500)},d=()=>{e[o.homeZone].Change(o.homeZone,o.homeConnect),p()},p=()=>{o.gameControlButton.GetEl().removeEventListener("click",d),o.sceneTimeout=setTimeout((()=>{o.gameControlButton.GetEl().addEventListener("click",l),o[o.menuId].ChangeParent({property:"position",value:o.outGamePos}),o.gameControlButton.ChangeSelf({property:"text",value:{value:"Load"}}),clearTimeout(o.sceneTimeout)}),500)},h=()=>{n("preview")},m=()=>{o.windowText.value="",o.windowPreview.ChangeSelf([{property:"material",value:o.previewMaterial},{property:"text",value:o.windowText}])},u=()=>{},y=()=>{n("instructions")},g=()=>{o.windowText.value=o.instructions,o.windowPreview.ChangeSelf([{property:"material",value:o.windowMaterial},{property:"text",value:o.windowText}]),o.gameInstructionsButton.ChangeSelf({property:"text",value:{value:"Back"}}),o.gameInstructionsButton.GetEl().removeEventListener("click",y),o.gameInstructionsButton.GetEl().addEventListener("click",h)},v=()=>{o.gameInstructionsButton.ChangeSelf({property:"text",value:{value:"Instructions"}}),o.gameInstructionsButton.GetEl().removeEventListener("click",h),o.gameInstructionsButton.GetEl().addEventListener("click",y)},f=()=>{n("controls")},b=()=>{o.windowText.value=o.controls,o.windowPreview.ChangeSelf([{property:"material",value:o.windowMaterial},{property:"text",value:o.windowText}]),o.gameControlsButton.ChangeSelf({property:"text",value:{value:"Back"}}),o.gameControlsButton.GetEl().removeEventListener("click",f),o.gameControlsButton.GetEl().addEventListener("click",h)},E=()=>{o.gameControlsButton.ChangeSelf({property:"text",value:{value:"Controls"}}),o.gameControlsButton.GetEl().removeEventListener("click",h),o.gameControlsButton.GetEl().addEventListener("click",f)},w=()=>{n("scores")},x=()=>{o.windowText.value=o.game.highScores.text,o.windowPreview.ChangeSelf([{property:"material",value:o.windowMaterial},{property:"text",value:o.windowText}]),o.gameScoresButton.ChangeSelf({property:"text",value:{value:"Back"}}),o.gameScoresButton.GetEl().removeEventListener("click",w),o.gameScoresButton.GetEl().addEventListener("click",h)},T=()=>{o.gameScoresButton.ChangeSelf({property:"text",value:{value:"High Scores"}}),o.gameScoresButton.GetEl().removeEventListener("click",h),o.gameScoresButton.GetEl().addEventListener("click",w)};return{gameMenu:o,SpawnGameMenu:a,DespawnGameMenu:i,ToggleGameMenu:()=>{o.inScene?i():a()}}},e.GameMenuControls=()=>({gameMenus:{id:"allGameMenus"},DespawnAllGameMenus:()=>{e.currentGameMenu&&e[e.currentGameMenu].DespawnGameMenu()}}),e.allGameMenus=e.GameMenuControls();const t=(e,t)=>{let o={};return o.type=" "+e+"\n",o.acc=t||0,o.score1=0,o.name1="Null",o.score2=0,o.name2="Null",o.score3=0,o.name3="Null",o.score4=0,o.name4="Null",o.score5=0,o.name5="Null",o.text="High Scores :\n1| 0 "+o.type+"2| 0 "+o.type+"3|0 "+o.type+"4| 0 "+o.type+"5| 0 "+o.type,o},o=e=>(e.text="High Scores :\n1| "+e.score1.toFixed(e.acc)+e.type+"2| "+e.score2.toFixed(e.acc)+e.type+"3| "+e.score3.toFixed(e.acc)+e.type+"4| "+e.score4.toFixed(e.acc)+e.type+"5| "+e.score5.toFixed(e.acc)+e.type,e.text),a=(t,a)=>t>a.score1?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=JSON.parse(JSON.stringify(a.score2)),a.name3=JSON.parse(JSON.stringify(a.name2)),a.score2=JSON.parse(JSON.stringify(a.score1)),a.name2=JSON.parse(JSON.stringify(a.name1)),a.score1=t,a.name1=e.local.profile.shortname,a.text=o(a),a):t>a.score2?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=JSON.parse(JSON.stringify(a.score2)),a.name3=JSON.parse(JSON.stringify(a.name2)),a.score2=t,a.name2=e.local.profile.shortname,a.text=o(a),a):t>a.score3?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=t,a.name3=e.local.profile.shortname,a.text=o(a),a):t>a.score4?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=t,a.name4=e.local.profile.shortname,a.text=o(a),a):t>a.score5?(a.score5=t,a.name5=e.local.profile.shortname,a.text=o(a),a):a;e.uiGameParentData={data:"uiGameParentData",id:"uiGameParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(2,1.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig",twist:!0}}},e.uiGameParent=e.Core(e.uiGameParentData),e.uiGameStatusData={data:"uiGameStatusData",id:"uiGameStatus",sources:!1,text:{value:"Game Status",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:30,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.75,height:.1},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,.4,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.uiGameStatus=e.Core(e.uiGameStatusData),e.uiGameTitleData={data:"uiGameTitleData",id:"uiGameTitle",sources:!1,text:{value:"Game Title",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:30,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.75,height:.1},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,-.2,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.uiGameTitle=e.Core(e.uiGameTitleData),e.uiGameLevelData={data:"uiGameLevelData",id:"uiGameLevel",sources:!1,text:{value:"Game Level",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:12,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.35,height:.4},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.2,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.uiGameLevel=e.Core(e.uiGameLevelData),e.uiGameScoresData={data:"uiGameScoresData",id:"uiGameScores",sources:!1,text:{value:"High Scores",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:15,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.35,height:.4},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(.2,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.uiGameScores=e.Core(e.uiGameScoresData),e.uiGameStartData={data:"uiGameStartData",id:"uiGameStart",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Start",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:8,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.2,height:.2},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,-.4,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.uiGameStart=e.Core(e.uiGameStartData),e.uiGameControlData={data:"uiGameControlData",id:"uiGameControl",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Continue",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:8,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.2,height:.2},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.3,-.4,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.uiGameControl=e.Core(e.uiGameControlData),e.uiGameMenuData={data:"uiGameMenuData",id:"uiGameMenu",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Menu",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0525,side:"front",wrapCount:8,baseline:"center"},geometry:{primitive:"box",depth:.1,width:.2,height:.2},material:{shader:"standard",color:"#256de0",emissive:"#256de0",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(.3,-.4,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.uiGameMenu=e.Core(e.uiGameMenuData),e.uiGameLayerData={parent:{core:e.uiGameParent},child0:{core:e.uiGameStatus},child1:{core:e.uiGameTitle},child2:{core:e.uiGameLevel},child3:{core:e.uiGameScores},child4:{core:e.uiGameStart},child5:{core:e.uiGameControl},child6:{core:e.uiGameMenu}},e.MemoryGame=i=>{let n={};n.id=i,n.title="Memory Order",n.instructionsText="How To Play :\nWatch the sequence play each round.\nClick each item in the exact order correctly to continue.\nSee how far you can get!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game1Preview,n.inScene=!1,e.memoryGameColor=e.ColorTheoryGen(!1,"lime"),n.highScores=t("Matches",0);let r={},s={data:"memoryParentData",id:"memoryParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,1,-2),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["nullParent","a-ent"],components:!1},l=e.Core(s);r.parent={},r.parent.core=l;let c={},d={};n.memory0Data={data:"0",id:"memory0",sources:!1,text:!1,sounds:{click:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"click"},select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"select"},gamestart:{src:e.confirm4,autoplay:!1,loop:!1,volume:1,on:"gameStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"},nextlevel:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"nextLevel"}},geometry:{primitive:"cylinder",radius:.45,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:3,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#3EB489",opacity:1,metalness:.6,roughness:.4,emissive:"#3EB489",emissiveIntensity:.2,side:"double",src:e.pattern44},position:new THREE.Vector3(-.45,.7,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},roundcomplete:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"roundComplete"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["clickable","memory","a-ent"],components:{clickrun__click:{cursorObj:n.id,component:"null",method:"MemoryClick",params:"target"}}},n.memory1Data={data:"1",id:"memory1",sources:!1,text:!1,sounds:{click:{src:e.drop2,autoplay:!1,loop:!1,volume:1,on:"click"},select:{src:e.drop2,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"box",width:.75,height:.75,depth:.15},material:{shader:"standard",color:"#C14B76",opacity:1,metalness:.6,roughness:.4,emissive:"#C14B76",emissiveIntensity:.2,side:"double",src:e.pattern52},position:new THREE.Vector3(.45,.85,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},roundcomplete:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"roundComplete"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["clickable","memory","a-ent"],components:{clickrun__click:{cursorObj:n.id,component:"null",method:"MemoryClick",params:"target"}}},n.memory2Data={data:"2",id:"memory2",sources:!1,text:!1,sounds:{click:{src:e.drop3,autoplay:!1,loop:!1,volume:1,on:"click"},select:{src:e.drop3,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"box",width:.15,height:.75,depth:.15},material:{shader:"standard",color:"#ce782f",opacity:1,metalness:.6,roughness:.4,emissive:"#ce782f",emissiveIntensity:.2,side:"double",src:e.pattern47,repeat:"1 3"},position:new THREE.Vector3(-.45,0,0),rotation:new THREE.Vector3(0,0,45),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},roundcomplete:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"roundComplete"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["clickable","memory","a-ent"],components:{clickrun__click:{cursorObj:n.id,component:"null",method:"MemoryClick",params:"target"}}},n.memory3Data={data:"3",id:"memory3",sources:!1,text:!1,sounds:{click:{src:e.drop4,autoplay:!1,loop:!1,volume:1,on:"click"},select:{src:e.drop4,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"cylinder",radius:.4,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#4b54c1",opacity:1,metalness:.6,roughness:.4,emissive:"#4b54c1",emissiveIntensity:.2,side:"double",src:e.pattern70},position:new THREE.Vector3(.45,0,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click, select"},roundcomplete:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"roundComplete"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["clickable","memory","a-ent"],components:{clickrun__click:{cursorObj:n.id,component:"null",method:"MemoryClick",params:"target"}}};let p,h,m,u,y,g=[n.memory0Data,n.memory1Data,n.memory2Data,n.memory3Data];for(let t in g)c=g[t],c.id="memory"+t,d[t]=e.Core(c),r["child"+t]={},r["child"+t].core=d[t];n.layer=e.Layer("memory",r),n.memoryUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"memoryUI",{position:new THREE.Vector3(1.25,1.5,-1.5)},!1,!0),n.memoryUI=e.Layer("memoryUI",n.memoryUIData),n.memoryUI.layer.all.child0.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child0.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child0.core.core.text.value="Game Ready",n.memoryUI.layer.all.child1.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child1.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child1.core.core.text.value="Memory Order",n.memoryUI.layer.all.child2.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child2.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child2.core.core.text.value="Sequence :\n*",n.memoryUI.layer.all.child3.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child3.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child4.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child4.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child4.core.core.components={},n.memoryUI.layer.all.child4.core.core.components.clickrun__gamemenu={cursorObj:n.id,component:"null",method:"GameMenuClick",params:"null"},n.memoryUI.layer.all.child5.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child5.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child5.core.core.components={},n.memoryUI.layer.all.child5.core.core.components.visible=!1,n.memoryUI.layer.all.child6.core.core.material.color=e.memoryGameColor.compl,n.memoryUI.layer.all.child6.core.core.material.emissive=e.memoryGameColor.compl,n.memoryUI.layer.all.child6.core.core.components={},n.memoryUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"memoryGameMenu",component:"null",method:"ToggleGameMenu",params:"null"};let v=[],f=[],b=0,E=1,w="*",x=[],T=0,C=!0,D=!1;const S=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.memoryUI.GetChild("memoryUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"memory",sub:!1,name:"highScores",data:n.highScores})},k=()=>{for(let e=0;e<5;e++)v.push(Math.floor(4*Math.random()))},R=()=>{C=!0,E>=v.length&&k();let e=0;p=setInterval((function(){d[v[e]].EmitEvent("select"),e++,e>=E&&(C=!1,clearInterval(p))}),750)},P=()=>{clearInterval(p),clearTimeout(h),clearTimeout(m),T=0,b=0,E=1,v=[],f=[],x=[],C=!0,D=!1,n.memoryUI.GetChild("memoryUI1").ChangeSelf({property:"text",value:{value:"Game Over"}}),n.memoryUI.GetChild("memoryUI3").ChangeSelf({property:"text",value:{value:"Sequence :\n"}}),n.memoryUI.GetChild("memoryUI5").ChangeSelf({property:"text",value:{value:"Start"}})},I=()=>{n.layer.GetChild("memory0").EmitEvent("gameOver");for(let e in d)d[e].EmitEvent("gameOver");y=setTimeout((()=>{S(T),P(),clearTimeout(y)}),2e3)},M=()=>{n.layer.GetChild("memory0").EmitEvent("nextLevel");for(let e in d)d[e].EmitEvent("roundComplete");m=setTimeout((()=>{R(),clearTimeout(m)}),1500)};return{memory:n,core:"memory",SpawnMemGame:()=>{n.inScene||(n.layer.SpawnLayer(),n.memoryUI.SpawnLayer(),S(),n.inScene=!0)},DespawnMemGame:()=>{n.inScene&&(n.layer.DespawnLayer(),n.memoryUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},GameMenuClick:()=>{D?P():(k(),D=!0,n.layer.GetChild("memory0").EmitEvent("gameStart"),n.memoryUI.GetChild("memoryUI1").ChangeSelf({property:"text",value:{value:"Game Started"}}),n.memoryUI.GetChild("memoryUI3").ChangeSelf({property:"text",value:{value:"Sequence :\n"+w}}),n.memoryUI.GetChild("memoryUI5").ChangeSelf({property:"text",value:{value:"Reset"}}),R())},MemoryClick:e=>{if(C);else{let t;"memory0"===e.id?t=0:"memory1"===e.id?t=1:"memory2"===e.id?t=2:"memory3"===e.id&&(t=3),f.push(t),(()=>{if(console.log("Checking"),f[b]===v[b]?(console.log("Match"),b++,x.unshift("X"),x.pop(),w=x.join(""),n.memoryUI.GetChild("memoryUI3").ChangeSelf({property:"text",value:{value:"Sequence :\n"+w}})):(console.log("Game Over"),D=!1,u=setTimeout((()=>{I()}),250)),b>=E){console.log("Correct Sequence"),b=0,E++,T++,n.memoryUI.GetChild("memoryUI1").ChangeSelf({property:"text",value:{value:"Current : "+T}}),x=[];for(let e=1;e<=E;e++)x.push("*");w=x.join(""),n.memoryUI.GetChild("memoryUI3").ChangeSelf({property:"text",value:{value:"Sequence :\n"+w}}),f=[],h=setTimeout((()=>{M(),clearTimeout(h)}),250)}})()}}}},e.AddObjGenToTracker("memory","SpawnMemGame","DespawnMemGame"),e.memory=e.MemoryGame("memory"),e.memoryGameMenuData={id:"memoryGameMenu",game:e.memory.memory,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game1",gameCabinet:"cadeCab1Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-6.75),inGamePos:new THREE.Vector3(.8,1.5,-1.25)},e.memoryGameMenu=e.GameMenu(e.memoryGameMenuData),e.SwipeLaunchGame=i=>{let n={};n.id=i,n.title="Swipe Launch",n.instructionsText="How To Play :\nOn game start, you will get 3 seconds to get ready.\nOnce started, you will have 6 seconds to hover on and off the ball as many times as you can.\nBefore the timer hits 0, click the ball to launch it otherwise it will miss.\nThe more times you hover and the closer you get to 0 when clicked, the more power you get for launch!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game2Preview,n.inScene=!1,e.swipeLaunchGameColor=e.ColorTheoryGen(!1,"red"),n.highScores=t("Pts",2),n.data={data:"swipeLaunchData",id:"swipeLaunchCore",sources:!1,text:!1,sounds:{start:{src:e.confirm4,autoplay:!1,loop:!1,volume:1,on:"gameStart"},hover:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mouseenter"},launch:{src:e.confirm2,autoplay:!1,loop:!1,volume:1,on:"mousedown"},timer:{src:e.glass1,autoplay:!1,loop:!1,volume:1,on:"second"},timeout:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"timeout"},gameover:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"}},geometry:{primitive:"sphere",radius:.5},material:{shader:"standard",color:e.swipeLaunchGameColor.splitCompl[1],emissive:e.swipeLaunchGameColor.splitCompl[1],emissiveIntensity:.25,opacity:1,src:e.pattern23},position:new THREE.Vector3(0,1,-.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hover:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:1,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},click:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:1e3,delay:0,loop:"1",dir:"alternate",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"}},mixins:!1,classes:["a-ent"],components:{mouseenterrun__hoveron:{cursorObj:n.id,component:"null",method:"hoverOn",params:"null"},mouseleaverun__hoveroff:{cursorObj:n.id,component:"null",method:"hoverOff",params:"null"},mousedownrun__launch:{cursorObj:n.id,component:"null",method:"launch",params:"null"}}},n.core=e.Core(n.data);let r={name:"launch",property:"scale",to:new THREE.Vector3(1,1,1),dur:2500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0};function s(t){t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.swipeLaunchUI.GetChild("swipeLaunchUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"swipeLaunch",sub:!1,name:"highScores",data:n.highScores})}function l(){clearTimeout(n.starting0),clearTimeout(n.starting1),clearTimeout(n.starting2),clearInterval(n.countdownInterval),clearTimeout(n.gameOver),n.start=!1,n.time=6e3,n.timeDisplay=6,n.countdownTimeout,n.in=!1,n.out=!0,n.launch=!1,n.hits=0,n.power=0,n.powerDisplay=0,n.show.ChangeSelf({property:"scale",value:new THREE.Vector3(.1,.1,.1)})}function c(e){n.swipeLaunchUI.GetChild("swipeLaunchUI1").ChangeSelf({property:"text",value:{value:e}})}function d(e){n.swipeLaunchUI.GetChild("swipeLaunchUI3").ChangeSelf({property:"text",value:{value:e+" Pts"}})}function p(){s(n.power),n.core.EmitEvent("gameOver"),n.gameOver=setTimeout((()=>{c("Ready?"),n.start=!1,n.starting=!1,d("0"),clearTimeout(n.gameOver)}),3e3)}return n.showData={data:"swipeLaunchData",id:"swipeLaunchShow",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.5},material:{shader:"standard",color:e.swipeLaunchGameColor.splitCompl[0],emissive:e.swipeLaunchGameColor.splitCompl[0],emissiveIntensity:.25,opacity:1,src:e.pattern23},position:new THREE.Vector3(0,30,-45),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.1,.1,.1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},n.show=e.Core(n.showData),n.displayTimeData={data:"displayTimeData",id:"displayTime",sources:!1,text:{value:"Ready?",color:"#FFFFFF",align:"left",font:"exo2bold",width:1.9,zOffset:.025,side:"front",wrapCount:75,baseline:"center",align:"center"},geometry:{primitive:"box",depth:.025,width:.3,height:.3},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,1.75,-.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},n.displayTime=e.Core(n.displayTimeData),n.swipeLaunchUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"swipeLaunchUI",{position:new THREE.Vector3(1,1.5,-.5)},!1,!0),n.swipeLaunchUI=e.Layer("swipeLaunchUI",n.swipeLaunchUIData),n.swipeLaunchUI.layer.all.child0.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child0.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child0.core.core.text.value="Ready?",n.swipeLaunchUI.layer.all.child1.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child1.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child1.core.core.text.value="Swipe Launch",n.swipeLaunchUI.layer.all.child2.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child2.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child2.core.core.text.value="0 Pts",n.swipeLaunchUI.layer.all.child3.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child3.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child4.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child4.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child4.core.core.components={},n.swipeLaunchUI.layer.all.child4.core.core.components.clickrun__countdown={cursorObj:n.id,component:"null",method:"countdownPrep",params:"null"},n.swipeLaunchUI.layer.all.child5.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child5.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child5.core.core.components={},n.swipeLaunchUI.layer.all.child5.core.core.components.visible=!1,n.swipeLaunchUI.layer.all.child6.core.core.material.color=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child6.core.core.material.emissive=e.swipeLaunchGameColor.compl,n.swipeLaunchUI.layer.all.child6.core.core.components={},n.swipeLaunchUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"swipeLaunchGameMenu",component:"null",method:"ToggleGameMenu",params:"null"},n.starting=!1,n.start=!1,n.time=6e3,n.timeDisplay=6,n.countdownTimeout,n.countdownInterval,n.in=!1,n.out=!0,n.launch=!1,n.hits=0,n.power=0,n.powerDisplay=0,{swipeLaunch:n,core:"swipeLaunch",SpawnSLGame:()=>{n.inScene||(n.core.SpawnCore(),n.show.SpawnCore(),n.swipeLaunchUI.SpawnLayer(),s(),n.inScene=!0)},DespawnSLGame:()=>{n.inScene&&(l(),n.core.DespawnCore(),n.show.DespawnCore(),n.swipeLaunchUI.DespawnLayer(),e.RemoveFromTracker(n.id),n.inScene=!1,e.RemoveFromTracker(n.id))},hoverOn:function(){n.start&&(n.in||(n.in=!0,n.hits++))},hoverOff:function(){n.start&&n.in&&(n.in=!1)},launch:function(){if(n.start){n.start=!1,n.launch=!0,n.core.GetEl().classList.toggle("clickable"),clearInterval(n.countdownInterval);let e=1.41;e+=17*n.hits/n.time*.01,n.power=Math.pow(n.hits,e);let t=n.power/10;r.to=new THREE.Vector3(t,t,t);let o=.975*n.power*10+.024*n.power/.1*50+.001*n.power/.01*100;r.dur=o,n.show.Animate(r),function(){let e=.975*n.power;n.powerDisplayFastInterval=setInterval((()=>{n.powerDisplay+=1,d(n.powerDisplay.toFixed(2)),n.powerDisplay>=e&&(function(){let e=.999*n.power;n.powerDisplaySlowInterval=setInterval((()=>{n.powerDisplay+=.1,d(n.powerDisplay.toFixed(2)),n.powerDisplay>=e&&(n.powerDisplaySlowerInterval=setInterval((()=>{n.powerDisplay+=.01,n.powerDisplay>=n.power?(d(n.power.toFixed(2)),p(),clearInterval(n.powerDisplaySlowerInterval)):d(n.powerDisplay.toFixed(2))}),100),clearInterval(n.powerDisplaySlowInterval))}),50)}(),clearInterval(n.powerDisplayFastInterval))}),10)}()}},countdownPrep:function(){n.starting||(n.starting=!0,l(),c("3"),n.core.EmitEvent("second"),n.starting2=setTimeout((()=>{c("2"),n.core.EmitEvent("second"),n.starting1=setTimeout((()=>{c("1"),n.core.EmitEvent("second"),n.starting0=setTimeout((()=>{c("GO"),n.start=!0,n.core.EmitEvent("gameStart"),n.core.GetEl().classList.toggle("clickable"),n.timeDisplay=n.time/1e3,n.countdownInterval=setInterval((()=>{n.timeDisplay-=.01,n.time-=10,n.time%1e3==0&&n.core.EmitEvent("second"),n.timeDisplay<=0?(n.core.EmitEvent("timeout"),n.launch||(c("TIME!"),n.start=!1,p()),clearInterval(n.countdownInterval)):c(n.timeDisplay.toFixed(2))}),10),clearTimeout(n.starting0),clearTimeout(n.starting1),clearTimeout(n.starting2)}),1e3)}),1e3)}),1e3))}}},e.AddObjGenToTracker("swipeLaunch","SpawnSLGame","DespawnSLGame"),e.swipeLaunchGame=e.SwipeLaunchGame("swipeLaunchGame"),e.swipeLaunchGameMenuData={id:"swipeLaunchGameMenu",game:e.swipeLaunchGame.swipeLaunch,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game2",gameCabinet:"cadeCab2Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-8.25),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.swipeLaunchGameMenu=e.GameMenu(e.swipeLaunchGameMenuData),e.GuessHitGame=i=>{let n={};function r(t){t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.guessHitUI.GetChild("guessHitUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"guessHit",sub:!1,name:"highScores",data:n.highScores})}function s(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function l(e,t){let o,a;1===t?(o=25*Math.random()-12.5,a=25*Math.random()-12.5):2===t?(o=20*Math.random()-10,a=28*Math.random()*-1):(o=60*Math.random()-30,o<12&&o>-12&&(o>0?o+=12:o-=12),a=60*Math.random()-30,a<12&&a>-12&&(a>0?a+=12:a-=12)),n[e].core.position=new THREE.Vector3(o,.25,a)}function c(e,t){e.EmitEvent("hit"),n.hitTimeouts[t]=setTimeout((()=>{e.DespawnCore(),clearTimeout(n.hitTimeouts[t])}),1010)}function d(e){n.clicks--;let t,o=!1,a=e.detail.intersection.point;n.hitSpawned||(n.hitSpawned=!0,n.hit.SpawnCore()),n.hit.ChangeSelf([{property:"scale",value:new THREE.Vector3(1,.01,1)},{property:"position",value:new THREE.Vector3(a.x,4,a.z)}]),n.hit.EmitEvent("loaded");for(let e in n.checkFor)if(g("yellow"),i=n.checkFor[e].core.position.x,l=n.checkFor[e].core.position.z,p=a.x,v=a.z,t=Math.sqrt(Math.pow(p-i,2)+1*Math.pow(v-l,2)),t<n.hitRadius){o=!0;let a=n.hitRadius/t;0===t?a=100:(a=n.hitRadius/t,a=s(a,2),a>10&&(a=10)),c(n.checkFor[e],n.checkFor.length),n.checkFor.splice(n.checkFor.indexOf(n.checkFor[e]),1);let i=10*a;i=s(i,2),n.points+=i,n.points=s(n.points,2),y("Level "+n.level+"-"+n.type+"\n"+n.points+"pts"),n.checkFor.length<=0?(u("Hit! "+i+" Pts | Complete! | Next?"),n.guessHitUI.GetChild("guessHitUI6").ChangeSelf({property:"visible",value:!0}),n.field.GetEl().removeEventListener("click",d)):u("Hit! "+i+" Pts | "+n.checkFor.length+" Left | "+n.clicks+" Tries");break}var i,l,p,v;o?n.field.EmitEvent("hit"):(g("red"),u("Miss | "+n.clicks+" Tries"),u("Miss | "+n.checkFor.length+" Left | "+n.clicks+" Tries"),n.field.EmitEvent("miss")),n.checkFor.length>0&&n.clicks<=0&&(r(n.points),u("Game Over"),n.field.GetEl().removeEventListener("click",d),h(),m(),n.guessHitUI.GetChild("guessHitUI5").ChangeSelf({property:"text",value:{value:"Start"}}),n.field.EmitEvent("gameOver"))}function p(e){n.checkFor=[n.guess1,n.guess2,n.guess3,n.guess4],l("guess1",e),n.guess1.SpawnCore(),l("guess2",e),n.guess2.SpawnCore(),l("guess3",e),n.guess3.SpawnCore(),l("guess4",e),n.guess4.SpawnCore()}function h(){for(let e in n.checkFor)n.checkFor[e].DespawnCore(),n.checkFor.splice(n.checkFor.indexOf(n.checkFor[e]),0)}function m(){n.hitSpawned&&(n.hitSpawned=!1,n.hit.DespawnCore())}function u(e){n.guessHitUI.GetChild("guessHitUI1").ChangeSelf({property:"text",value:{value:e}})}function y(e){n.guessHitUI.GetChild("guessHitUI3").ChangeSelf({property:"text",value:{value:e}})}function g(e){n.hit.ChangeSelf({property:"material",value:{color:e,emissive:e}})}function v(e){let t={},o=new THREE.Vector3(0,10,0);1===e?(t={primitive:"circle",radius:30},o=new THREE.Vector3(0,10,0)):2===e?(t={primitive:"plane",height:30,width:20},o=new THREE.Vector3(0,10,-15)):(t={primitive:"ring",radiusInner:10,radiusOuter:60,segmentsPhi:8,segmentsTheta:32,thetaStart:0,thetaLength:360},o=new THREE.Vector3(0,10,0)),n.field.ChangeSelf([{property:"geometry",value:t},{property:"position",value:o}])}return n.id=i,n.title="Guess Hit",n.instructionsText="How To Play :\nFor each floor item spawned, guess the matching position by clicking on the ceiling.\nIf you hit it successfully, it will be removed.\nIf you can hit them all within the given tries, you move onto the next level.\nEarn greater points for more accurate hits and higher levels.",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game3Preview,n.inScene=!1,e.guessHitGameColor=e.ColorTheoryGen(!1,"yellow"),n.highScores=t("Pts",1),n.fieldData={data:"fieldData",id:"field",sources:!1,text:!1,sounds:{hit:{src:e.drop4,autoplay:!1,loop:!1,volume:1,on:"hit"},miss:{src:e.switch2,autoplay:!1,loop:!1,volume:1,on:"miss"},gamestart:{src:e.confirm4,autoplay:!1,loop:!1,volume:1,on:"gameStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"},nextlevel:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"nextLevel"}},geometry:{primitive:"circle",radius:30},material:{shader:"standard",src:e.pattern14,repeat:"30 30",color:e.guessHitGameColor.splitCompl[1],emissive:e.guessHitGameColor.splitCompl[1],emissiveIntensity:.25,opacity:1,side:"double"},position:new THREE.Vector3(0,10,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},n.field=e.Core(n.fieldData),n.hitTimeouts=[n.hitTimeout1,n.hitTimeout2,n.hitTimeout3,n.hitTimeout4],n.guessData={data:"guessData",id:"guess1",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.5,height:.5,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",src:e.pattern15,repeat:"1 1",color:e.guessHitGameColor.compl,emissive:e.guessHitGameColor.compl,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,.25,-3),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hit:{property:"scale",from:new THREE.Vector3(1,1,1),to:new THREE.Vector3(.001,.001,.001),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"hit"}},mixins:!1,classes:["a-ent"],components:!1},n.guess1=e.Core(n.guessData),n.guessData.id="guess2",n.guess2=e.Core(n.guessData),n.guessData.id="guess3",n.guess3=e.Core(n.guessData),n.guessData.id="guess4",n.guess4=e.Core(n.guessData),n.hitData={data:"hitData",id:"hit",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:1,height:20},material:{shader:"standard",src:e.pattern10,repeat:"10 10",color:"#ddd517",emissive:"#ddd517",emissiveIntensity:.25,opacity:.25},position:new THREE.Vector3(0,4,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,.01,1),animations:{spawn:{property:"object3D.scale.y",from:.01,to:1,dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loaded"}},mixins:!1,classes:["a-ent"],components:!1},n.hit=e.Core(n.hitData),n.guessHitUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"guessHitUI",{position:new THREE.Vector3(1,1.5,-.5)},!1,!0),n.guessHitUI=e.Layer("guessHitUI",n.guessHitUIData),n.guessHitUI.layer.all.child0.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child0.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child0.core.core.text.value="Game Ready",n.guessHitUI.layer.all.child1.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child1.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child1.core.core.text.value="Guess Hit",n.guessHitUI.layer.all.child2.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child2.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child2.core.core.text.value="Level 1-1\n0pts",n.guessHitUI.layer.all.child3.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child3.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child4.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child4.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child4.core.core.components={},n.guessHitUI.layer.all.child4.core.core.components.clickrun__start={cursorObj:n.id,component:"null",method:"start",params:"null"},n.guessHitUI.layer.all.child5.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child5.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child5.core.core.components={},n.guessHitUI.layer.all.child5.core.core.components.visible=!1,n.guessHitUI.layer.all.child5.core.core.components.clickrun__next={cursorObj:n.id,component:"null",method:"next",params:"null"},n.guessHitUI.layer.all.child6.core.core.material.color=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child6.core.core.material.emissive=e.guessHitGameColor.compl,n.guessHitUI.layer.all.child6.core.core.components={},n.guessHitUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"guessHitGameMenu",component:"null",method:"ToggleGameMenu",params:"null"},n.start=!1,n.hitSpawned=!1,n.points=0,n.type=1,n.level=1,n.clicks=10,n.spawnRadius=12.5,n.hitRadius=1.5,n.checkFor=[n.guess1,n.guess2,n.guess3,n.guess4],{guessHit:n,core:"guessHit",SpawnGHGame:()=>{n.inScene||(n.field.SpawnCore(),n.guessHitUI.SpawnLayer(),r(),n.inScene=!0)},DespawnGHGame:()=>{n.inScene&&(n.hitTimeouts.forEach((e=>n.hitTimeouts[e])),h(),m(),n.guessHitUI.DespawnLayer(),n.field.DespawnCore(),e.RemoveFromTracker(n.id),n.inScene=!1,e.RemoveFromTracker(n.id))},start:function(){n.guessHitUI.GetChild("guessHitUI5").ChangeSelf({property:"text",value:{value:"Restart"}}),m(),n.points=0,n.level=1,n.type=1,n.clicks=10,n.hitRadius=1.5,v(1),u("Ready | 4 Left | 10 Tries"),y("Level "+n.level+"-"+n.type+"\n"+n.points+"pts"),n.field.GetEl().addEventListener("click",d),p(n.type),n.field.EmitEvent("gameStart")},next:function(){n.guessHitUI.GetChild("guessHitUI6").ChangeSelf({property:"visible",value:!1}),n.type++,4===n.type&&(n.level++,n.type=1),1===n.type?n.clicks=10:2===n.type?n.clicks=11:3===n.type&&(n.clicks=12),v(n.type),u("Ready | 4 Left | "+n.clicks+" Tries"),y("Level "+n.level+"-"+n.type+"\n"+n.points+"pts"),p(n.type),m(),n.field.GetEl().addEventListener("click",d),n.field.EmitEvent("nextLevel")}}},e.AddObjGenToTracker("guessHit","SpawnGHGame","DespawnGHGame"),e.guessHitGame=e.GuessHitGame("guessHitGame"),e.guessHitGameMenuData={id:"guessHitGameMenu",game:e.guessHitGame.guessHit,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game3",gameCabinet:"cadeCab3Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-9.75),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.guessHitGameMenu=e.GameMenu(e.guessHitGameMenuData),e.DragDiffuse=i=>{let n={};n.id=i,n.title="Drag Diffuse",n.instructionsText="How To Play :\nAs each bomb pops up, click hold and drag from the center diffuser to a single bomb to diffuse it.\nDiffuse the required amounts to complete the level or before 1 blows up.\n As you progress, bombs will spawn faster, countdown faster and spawn more at a time.\n The longer you last and quicker you are, the greater the rewards you will earn!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game4Preview,n.inScene=!1,e.dragDiffuseGameColor=e.ColorTheoryGen(!1,"cyan"),n.highScores=t("Pts",2),n.levelDelay,n.startDelay,n.gameInterval,n.gameStarted=!1,n.level=1,n.bombsLeft=0,n.points=0;let r=2e3,s=4e3;n.spawnSpeed=r,n.blowSpeed=s,n.bombsToSpawn=1,n.dragDiffuseUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"dragDiffuseUI",{position:new THREE.Vector3(1.35,1.5,-.5)},!1,!0),n.dragDiffuseUI=e.Layer("dragDiffuseUI",n.dragDiffuseUIData),n.dragDiffuseUI.layer.all.child0.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child0.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child0.core.core.text.value="Game Ready",n.dragDiffuseUI.layer.all.child1.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child1.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child1.core.core.text.value="Drag Diffuse",n.dragDiffuseUI.layer.all.child2.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child2.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child2.core.core.text.value="Level 1\nReady?\n0.00pts",n.dragDiffuseUI.layer.all.child3.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child3.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child4.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child4.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child4.core.core.components={},n.dragDiffuseUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:"dragDiffuseGame",component:"null",method:"GameStart",params:"null"},n.dragDiffuseUI.layer.all.child5.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child5.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child5.core.core.components={},n.dragDiffuseUI.layer.all.child5.core.core.components.visible=!1,n.dragDiffuseUI.layer.all.child5.core.core.components.clickrun__levelstart={cursorObj:"dragDiffuseGame",component:"null",method:"LevelStart",params:"null"},n.dragDiffuseUI.layer.all.child6.core.core.material.color=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child6.core.core.material.emissive=e.dragDiffuseGameColor.compl,n.dragDiffuseUI.layer.all.child6.core.core.components={},n.dragDiffuseUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"dragDiffuseGameMenu",component:"null",method:"ToggleGameMenu",params:"null"},n.gameParentData={data:"gameParentData",id:"gameParent",sources:!1,text:!1,sounds:{dragstart:{src:e.drop2,autoplay:!1,loop:!1,volume:1,on:"mousedown"},spawn:{src:e.pluck1,autoplay:!1,loop:!1,volume:1,on:"spawn"},diffuse:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"diffuse"},explode:{src:e.error7,autoplay:!1,loop:!1,volume:1,on:"explode"},gamestart:{src:e.confirm4,autoplay:!1,loop:!1,volume:1,on:"gameStart"},levelstart:{src:e.maximize8,autoplay:!1,loop:!1,volume:1,on:"levelStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"},nextlevel:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"nextLevel"}},geometry:{primitive:"sphere",radius:.5,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:360,thetaStart:0},material:{shader:"standard",color:e.dragDiffuseGameColor.splitCompl[1],emissive:e.dragDiffuseGameColor.splitCompl[1],emissiveIntensity:.25,opacity:1,src:e.pattern76,repeat:"5 5"},position:new THREE.Vector3(0,1.25,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{levelstart:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:575,delay:0,loop:4,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"levelstart"},levelcomplete:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:125,delay:0,loop:8,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"levelcomplete"},gamefail:{property:"material.emissiveIntensity",from:"0.25",to:"1",dur:2e3,delay:0,loop:1,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gamefail"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__start:{cursorObj:n.id,component:"null",method:"DragStart",params:"null"},mouseuprun__fail:{cursorObj:n.id,component:"null",method:"DragFail",params:"null"}}},n.gameParent=e.Core(n.gameParentData),n.dragParentData={data:"dragParentData",id:"dragParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["nullParent","a-ent"],components:!1},n.dragParentData.id="dragParent0",n.dragParent0=e.Core(n.dragParentData),n.dragMainData={data:"dragMainData",id:"dragMain",text:!1,geometry:{primitive:"sphere",radius:.15,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:360,thetaStart:0},material:{shader:"standard",color:e.dragDiffuseGameColor.compl,emissive:e.dragDiffuseGameColor.compl,emissiveIntensity:.25,opacity:1,src:e.pattern77},position:new THREE.Vector3(.8,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.001,.001,.001),animations:{countdownx:{property:"object3D.scale.x",from:.001,to:.9,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown"},countdowny:{property:"object3D.scale.y",from:.001,to:.9,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown"},countdownz:{property:"object3D.scale.z",from:.001,to:.9,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown"},resetx:{property:"object3D.scale.x",from:.9,to:.001,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},resety:{property:"object3D.scale.y",from:.9,to:.001,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},resetz:{property:"object3D.scale.z",from:.9,to:.001,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},blowupx:{property:"object3D.scale.x",from:.9,to:100,dur:1250,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blow"},blowupy:{property:"object3D.scale.y",from:.9,to:100,dur:1250,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blow"},blowupz:{property:"object3D.scale.z",from:.9,to:100,dur:1250,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blow"},blowbackx:{property:"object3D.scale.x",from:100,to:.001,dur:750,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__blowupx"},blowbacky:{property:"object3D.scale.y",from:100,to:.001,dur:750,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__blowupy"},blowbackz:{property:"object3D.scale.z",from:100,to:.001,dur:750,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__blowupz"}},mixins:!1,classes:["clickable","a-ent"],components:{mousedownrun__stop:{cursorObj:n.id,component:"null",method:"StopBombBubbling",params:"null"},mouseenterrun__end:{cursorObj:n.id,component:"null",method:"DragEnd",params:"target"}}},n.dragMainData.id="dragMain0",n.dragMain0=e.Core(n.dragMainData),n.dragOuterData={data:"dragOuterData",id:"dragOuter",text:!1,geometry:{primitive:"ring",radiusInner:.175,radiusOuter:.25,thetaLength:0},material:{shader:"standard",color:e.dragDiffuseGameColor.base,emissive:e.dragDiffuseGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(.8,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{countdown:{property:"geometry.thetaLength",from:0,to:360,dur:n.blowSpeed,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown",pauseEvents:"reset"},reset:{property:"geometry.thetaLength",to:0,dur:250,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"}},mixins:!1,classes:["a-ent"],components:{oneventrun__blow:{event:"animationcomplete__countdown",cursorObj:"dragDiffuseGame",component:"null",method:"Blow",params:"null"}}},n.dragOuterData.id="dragOuter0",n.dragOuterData.components.oneventrun__blow.params="0",n.dragOuter0=e.Core(n.dragOuterData),n.dragParentData.id="dragParent1",n.dragParentData.rotation=new THREE.Vector3(0,0,-45),n.dragParent1=e.Core(n.dragParentData),n.dragMainData.id="dragMain1",n.dragMain1=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter1",n.dragOuterData.components.oneventrun__blow.params="1",n.dragOuter1=e.Core(n.dragOuterData),n.dragParentData.id="dragParent2",n.dragParentData.rotation=new THREE.Vector3(0,0,-90),n.dragParent2=e.Core(n.dragParentData),n.dragMainData.id="dragMain2",n.dragMain2=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter2",n.dragOuterData.components.oneventrun__blow.params="2",n.dragOuter2=e.Core(n.dragOuterData),n.dragParentData.id="dragParent3",n.dragParentData.rotation=new THREE.Vector3(0,0,-135),n.dragParent3=e.Core(n.dragParentData),n.dragMainData.id="dragMain3",n.dragMain3=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter3",n.dragOuterData.components.oneventrun__blow.params="3",n.dragOuter3=e.Core(n.dragOuterData),n.dragParentData.id="dragParent4",n.dragParentData.rotation=new THREE.Vector3(0,0,-180),n.dragParent4=e.Core(n.dragParentData),n.dragMainData.id="dragMain4",n.dragMain4=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter4",n.dragOuterData.components.oneventrun__blow.params="4",n.dragOuter4=e.Core(n.dragOuterData),n.dragParentData.id="dragParent5",n.dragParentData.rotation=new THREE.Vector3(0,0,-225),n.dragParent5=e.Core(n.dragParentData),n.dragMainData.id="dragMain5",n.dragMain5=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter5",n.dragOuterData.components.oneventrun__blow.params="5",n.dragOuter5=e.Core(n.dragOuterData),n.dragParentData.id="dragParent6",n.dragParentData.rotation=new THREE.Vector3(0,0,-270),n.dragParent6=e.Core(n.dragParentData),n.dragMainData.id="dragMain6",n.dragMain6=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter6",n.dragOuterData.components.oneventrun__blow.params="6",n.dragOuter6=e.Core(n.dragOuterData),n.dragParentData.id="dragParent7",n.dragParentData.rotation=new THREE.Vector3(0,0,-315),n.dragParent7=e.Core(n.dragParentData),n.dragMainData.id="dragMain7",n.dragMain7=e.Core(n.dragMainData),n.dragOuterData.id="dragOuter7",n.dragOuterData.components.oneventrun__blow.params="7",n.dragOuter7=e.Core(n.dragOuterData),n.gameAllData={parent:{core:n.gameParent},child0:{parent:{core:n.dragParent0},child0:{core:n.dragMain0},child1:{core:n.dragOuter0}},child1:{parent:{core:n.dragParent1},child0:{core:n.dragMain1},child1:{core:n.dragOuter1}},child2:{parent:{core:n.dragParent2},child0:{core:n.dragMain2},child1:{core:n.dragOuter2}},child3:{parent:{core:n.dragParent3},child0:{core:n.dragMain3},child1:{core:n.dragOuter3}},child4:{parent:{core:n.dragParent4},child0:{core:n.dragMain4},child1:{core:n.dragOuter4}},child5:{parent:{core:n.dragParent5},child0:{core:n.dragMain5},child1:{core:n.dragOuter5}},child6:{parent:{core:n.dragParent6},child0:{core:n.dragMain6},child1:{core:n.dragOuter6}},child7:{parent:{core:n.dragParent7},child0:{core:n.dragMain7},child1:{core:n.dragOuter7}}},n.gameAll=e.Layer("gameAll",n.gameAllData);let l=["dragMain0","dragMain1","dragMain2","dragMain3","dragMain4","dragMain5","dragMain6","dragMain7"],c=["dragOuter0","dragOuter1","dragOuter2","dragOuter3","dragOuter4","dragOuter5","dragOuter6","dragOuter7"],d=[n.dragOuter0,n.dragOuter1,n.dragOuter2,n.dragOuter3,n.dragOuter4,n.dragOuter5,n.dragOuter6,n.dragOuter7],p=!1,h=Array.from(l);const m=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.dragDiffuseUI.GetChild("dragDiffuseUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"dragDiffuse",sub:!1,name:"highScores",data:n.highScores})},u=()=>{clearTimeout(n.levelDelay),clearTimeout(n.startDelay),clearInterval(n.gameInterval),v(),h=Array.from(l)},y=()=>{n.gameParent.EmitEvent("gameStart"),n.gameParent.GetEl().classList.toggle("clickable"),n.gameAll.EmitEventParent("levelstart"),n.dragDiffuseUI.GetChild("dragDiffuseUI6").ChangeSelf({property:"visible",value:!1}),n.diffuseTotal=4+2*n.level,b("Fusing | "+n.bombsToSpawn+" Bombs | "+n.diffuseTotal+" Bombs Left"),E("Level "+n.level+"\nGet Ready\n"+n.points.toFixed(2)+" Pts"),n.startDelay=setTimeout((()=>{n.gameParent.EmitEvent("levelStart"),n.gameInterval=setInterval((()=>{for(let e=0;e<n.bombsToSpawn;e++)g()}),n.spawnSpeed)}),2250)},g=()=>{if(h.length>0){let e=Math.floor(Math.random()*h.length),t=l.indexOf(h[e]);n[l[t]].EmitEvent("countdown"),n[c[t]].EmitEvent("countdown"),h.splice(e,1),n.gameParent.EmitEvent("spawn")}},v=()=>{p=!1,n.gameParent.ChangeSelf({property:"material",value:{emissiveIntensity:.25}})},f=()=>{for(let e in l)n[c[e]].EmitEvent("reset"),n[l[e]].EmitEvent("reset")},b=e=>{n.dragDiffuseUI.GetChild("dragDiffuseUI1").ChangeSelf({property:"text",value:{value:e}})},E=e=>{n.dragDiffuseUI.GetChild("dragDiffuseUI3").ChangeSelf({property:"text",value:{value:e}})},w=()=>{n.gameParent.EmitEvent("gameOver"),b("Game Over | Exploded! | Try Again?"),m(n.points),n.dragDiffuseUI.GetChild("dragDiffuseUI5").ChangeSelf({property:"visible",value:!0}),n.gameParent.GetEl().classList.toggle("clickable"),n.gameStarted=!1,u()};return{dragDiffuse:n,core:"dragDiffuse",SpawnDDGame:()=>{n.inScene||(n.gameAll.SpawnLayer(),n.dragDiffuseUI.SpawnLayer(),m(),n.inScene=!0)},DespawnDDGame:()=>{n.inScene&&(u(),n.gameAll.DespawnLayer(),n.dragDiffuseUI.DespawnLayer(),e.RemoveFromTracker(n.id),n.inScene=!1,e.RemoveFromTracker(n.id))},Blow:e=>{n.gameParent.EmitEvent("explode"),n[l[e]].EmitEvent("blow"),n[c[e]].EmitEvent("reset");for(let t in l)t===e||(n[c[t]].EmitEvent("reset"),n[l[t]].EmitEvent("reset"));w()},GameStart:()=>{n.gameStarted?w():(n.dragDiffuseUI.GetChild("dragDiffuseUI5").ChangeSelf({property:"visible",value:!1}),n.gameStarted=!0,n.points=0,n.level=1,n.spawnSpeed=r,n.blowSpeed=s,d.forEach((e=>e.Animate({name:"countdown",property:"geometry.thetaLength",from:0,to:360,dur:n.blowSpeed,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown",pauseEvents:"reset"}))),n.bombsToSpawn=1,y())},LevelStart:y,DragStart:()=>{p||(p=!0,n.gameParent.ChangeSelf({property:"material",value:{emissiveIntensity:1}}))},DragFail:()=>{p&&v()},StopBombBubbling:e=>{e.stopPropagation()},DragEnd:e=>{if(p)for(let t in l)if(e.id===l[t]){n.gameParent.EmitEvent("diffuse"),v();let o=(n.blowSpeed-n[c[t]].GetEl().components.animation__countdown.time)/n.blowSpeed+1;n[c[t]].EmitEvent("reset"),n[l[t]].EmitEvent("reset"),h.push(e.id),n.diffuseTotal--;let a=n.level*o;n.points+=a,b("Fusing | "+n.bombsToSpawn+" Bombs | "+n.diffuseTotal+" Bombs Left"),E("Level "+n.level+"\n"+a.toFixed(2)+" Pts\n"+n.points.toFixed(2)+" Pts"),n.diffuseTotal<=0&&(n.gameParent.EmitEvent("nextLevel"),f(),n.gameAll.EmitEventParent("levelcomplete"),n.level++,b("Complete | "+n.bombsToSpawn+" Bombs | "+n.diffuseTotal+" Bombs Left"),5===n.level||15===n.level||25===n.level?(n.bombsToSpawn+=1,n.spawnSpeed=r,n.blowSpeed=s,d.forEach((e=>e.Animate({name:"countdown",property:"geometry.thetaLength",from:0,to:360,dur:n.blowSpeed,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown",pauseEvents:"reset"})))):n.level<57&&n.level%2==0&&(n.spawnSpeed-=100,n.blowSpeed-=200,d.forEach((e=>e.Animate({name:"countdown",property:"geometry.thetaLength",from:0,to:360,dur:n.blowSpeed,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"countdown",pauseEvents:"reset"})))),n.points+=10*n.level,u(),n.levelDelay=setTimeout((()=>{n.dragDiffuseUI.GetChild("dragDiffuseUI6").ChangeSelf({property:"visible",value:!0}),n.gameParent.GetEl().classList.toggle("clickable")}),1e3))}}}},e.AddObjGenToTracker("dragDiffuse","SpawnDDGame","DespawnDDGame"),e.dragDiffuseGame=e.DragDiffuse("dragDiffuseGame"),e.dragDiffuseGameMenuData={id:"dragDiffuseGameMenu",game:e.dragDiffuseGame.dragDiffuse,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game4",gameCabinet:"cadeCab4Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-11.25),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.dragDiffuseGameMenu=e.GameMenu(e.dragDiffuseGameMenuData),e.SharpShooter=i=>{let n={};n.id=i,n.title="Sharp Shooter",n.instructionsText="How To Play :\nShoot the target before the countdown hits 0.\nOn each hit, you will earn more time and it will respawn farther and farther away infinitely.\nThe quicker you are and more hits you get, the more points you will earn.",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game5Preview,n.inScene=!1,e.sharpShooterGameColor=e.ColorTheoryGen("#00ebff"),n.highScores=t("Pts",2),n.timer=3e3,n.respawnTime=500,n.timeBonus=2e3,n.ptsBonus=0,n.seconds=1e3,n.timeout,n.hitDelay,n.spawnDelay,n.countdown2,n.countdown1,n.countdown0,n.countdownInterval,n.hits=0,n.pts=0,n.pos=new THREE.Vector3(0,0,0),n.targetData={data:"targetData",id:"target",sources:!1,text:!1,sounds:{hover:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mouseenter"},hit:{src:e.confirm2,autoplay:!1,loop:!1,volume:1,on:"mousedown"},spawn:{src:e.confirm3,autoplay:!1,loop:!1,volume:1,on:"spawn"}},geometry:{primitive:"box",depth:1,width:1,height:1},material:{shader:"standard",color:e.sharpShooterGameColor.compl,emissive:e.sharpShooterGameColor.compl,emissiveIntensity:.1,opacity:1,src:e.pattern54},position:new THREE.Vector3(0,2,-2),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.001,.001,.001),animations:{spawnin:{property:"scale",from:"0.001 0.001 0.001",to:"1 1 1",dur:200,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spawn"},hoveron:{property:"material.emissiveIntensity",from:"0.1",to:"1",dur:200,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"1",to:"0.1",dur:200,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},spawnout:{property:"scale",from:"1 1 1",to:"0.001 0.001 0.001",dur:200,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__hit:{cursorObj:n.id,component:"null",method:"TargetHit",params:"null"}}},n.target=e.Core(n.targetData),n.gameSoundData={data:"gameSoundData",id:"gameSound",sources:!1,text:!1,sounds:{start:{src:e.confirm2,autoplay:!1,loop:!1,volume:1,on:"gameStart"},begin:{src:e.confirm4,autoplay:!1,loop:!1,volume:1,on:"begin"},timer:{src:e.glass1,autoplay:!1,loop:!1,volume:1,on:"second"},gameover:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"}},geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},n.gameSound=e.Core(n.gameSoundData),n.sharpShooterUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"sharpShooterUI",{position:new THREE.Vector3(1,1.5,.5)},!1,!0),n.sharpShooterUI=e.Layer("sharpShooterUI",n.sharpShooterUIData),n.sharpShooterUI.layer.all.child0.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child0.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child0.core.core.text.value="Game Ready",n.sharpShooterUI.layer.all.child1.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child1.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child1.core.core.text.value="Sharp Shooter",n.sharpShooterUI.layer.all.child2.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child2.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child2.core.core.text.value="Hits : 0\nPts : 0",n.sharpShooterUI.layer.all.child3.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child3.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child4.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child4.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child4.core.core.components={},n.sharpShooterUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:n.id,component:"null",method:"GameStart",params:"null"},n.sharpShooterUI.layer.all.child5.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child5.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child5.core.core.components={},n.sharpShooterUI.layer.all.child5.core.core.components.visible=!1,n.sharpShooterUI.layer.all.child6.core.core.material.color=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child6.core.core.material.emissive=e.sharpShooterGameColor.compl,n.sharpShooterUI.layer.all.child6.core.core.components={},n.sharpShooterUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"sharpShooterGameMenu",component:"null",method:"ToggleGameMenu",params:"null"};const r=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.sharpShooterUI.GetChild("sharpShooterUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"sharpShooter",sub:!1,name:"highScores",data:n.highScores})},s=()=>{clearTimeout(n.hitDelay),clearTimeout(n.timeout),clearTimeout(n.spawnDelay),clearTimeout(n.countdown2),clearTimeout(n.countdown1),clearTimeout(n.countdown0),clearInterval(n.countdownInterval),n.timer=3e3,n.respawnTime=500,n.timeBonus=2e3,n.hits=0,n.pts=0,n.seconds=1e3,n.target.core.inScene&&n.target.DespawnCore()},l=e=>{clearTimeout(n.timeout),clearInterval(n.countdownInterval);let t=0;n.countdownInterval=setInterval((()=>{t++;let o=(e-100*t)/1e3;n.timer-=100,n.seconds-=100,4e3===n.timer&&(n.seconds=1e3),n.seconds<=0&&n.timer<=4e3&&(n.seconds=1e3,n.gameSound.EmitEvent("second")),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:o.toFixed(2)}})}),100),n.timeout=setTimeout((()=>{n.gameSound.EmitEvent("gameOver"),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:"Game Over"}}),r(n.pts),s()}),e)},c=()=>{let e=Math.floor(Math.random()*n.hits*-2+.5*n.hits),t=Math.floor(Math.random()*n.hits)+.5,o=-1*n.hits-1;return new THREE.Vector3(e,t,o)},d=()=>{n.spawnDelay=setTimeout((()=>{n.target.EmitEvent("spawn"),n.target.GetEl().classList.toggle("clickable",!0),clearTimeout(n.spawnDelay)}),50)};return{sharpShooter:n,core:"sharpShooter",SpawnSSGame:()=>{n.inScene||(n.sharpShooterUI.SpawnLayer(),n.gameSound.SpawnCore(),r(),n.inScene=!0)},DespawnSSGame:()=>{n.inScene&&(s(),n.gameSound.DespawnCore(),n.sharpShooterUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},GameStart:()=>{n.target.position=c(),n.target.SpawnCore(),n.sharpShooterUI.GetChild("sharpShooterUI3").ChangeSelf({property:"text",value:{value:"Hits : "+n.hits+"\nPts : "+n.pts}}),n.gameSound.EmitEvent("gameStart"),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:"Starting in 3..."}}),n.countdown2=setTimeout((()=>{n.gameSound.EmitEvent("second"),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:"2.."}}),n.countdown1=setTimeout((()=>{n.gameSound.EmitEvent("second"),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:"1."}}),n.countdown0=setTimeout((()=>{n.gameSound.EmitEvent("begin"),n.sharpShooterUI.GetChild("sharpShooterUI1").ChangeSelf({property:"text",value:{value:"SHOOT!"}}),d(),l(n.timer)}),1e3)}),1e3)}),1e3)},TargetHit:()=>{n.target.GetEl().classList.toggle("clickable",!1),n.hits++,n.pts+=n.timer/1e3*n.hits,n.timer+=n.respawnTime,n.timeBonus>800&&(n.timeBonus-=100),n.timer+=n.timeBonus,l(n.timer),n.hitDelay=setTimeout((()=>{n.target.ChangeSelf({property:"position",value:c()}),d()}),300),n.sharpShooterUI.GetChild("sharpShooterUI3").ChangeSelf({property:"text",value:{value:"Hits : "+n.hits+"\nPts : "+n.pts.toFixed(2)}})}}},e.AddObjGenToTracker("sharpShooter","SpawnSSGame","DespawnSSGame"),e.sharpShooterGame=e.SharpShooter("sharpShooterGame"),e.sharpShooterGameMenuData={id:"sharpShooterGameMenu",game:e.sharpShooterGame.sharpShooter,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game5",gameCabinet:"cadeCab5Layer",outGamePos:new THREE.Vector3(-2.25,1.5,-13.25),inGamePos:new THREE.Vector3(.5,1.5,.75)},e.sharpShooterGameMenu=e.GameMenu(e.sharpShooterGameMenuData),e.PerfectScale=i=>{let n={};n.id=i,n.title="Perfect Scale",n.instructionsText="How To Play :\nUsing the attached menu, adjust the scale of each shape axis in attempt to make each one perfectly identical.\n4 total levels each with a different shape will test your skills.\nThe closer you get to the same scale within the fewest clicks, the more points you will earn.\nA Good message means you got 2 axis exact and a Perfect message means all three are exact which grants you a bigger bonus!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game6Preview,n.inScene=!1,e.perfectScaleGameColor=e.ColorTheoryGen("#eb21a5"),n.highScores=t("Pts",2),n.gameStarted=!1,n.levelDelay,n.despawnDelay,n.scaleDelay,n.bonusDelay,n.level=0,n.levelClicks=0,n.clicks=0,n.pts=0,n.levelScaleAmount=.1,n.startingScale=new THREE.Vector3(0,0,0),n.levelScalers=["Cube","Pyramid","Sphere","Cylinder"],n.axis=!1,n.scaler=!1,n.scale1Data={data:"scale1Data",id:"scale1",sources:!1,text:!1,sounds:!1,geometry:{primitive:"box",depth:1,width:1,height:1},material:{shader:"standard",color:"red",emissive:"red",emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.001,.001,.001),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},spinx:{property:"object3D.rotation.y",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinX"},spiny:{property:"object3D.rotation.z",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinY"},spinz:{property:"object3D.rotation.x",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinZ"}},mixins:!1,classes:["a-ent"],components:!1},n.scale1=e.Core(n.scale1Data),n.scale2ParentData={data:"scale2ParentData",id:"scale2Parent",sources:!1,text:!1,sounds:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,3.5,0),rotation:new THREE.Vector3(0,45,0),scale:new THREE.Vector3(.001,.001,.001),animations:{spinx:{property:"object3D.rotation.y",from:"45",to:"405",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinX"},spiny:{property:"object3D.rotation.z",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinY"},spinz:{property:"object3D.rotation.x",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinZ"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2Parent=e.Core(n.scale2ParentData),n.scale2aData={data:"scale2aData",id:"scale2a",sources:!1,text:!1,sounds:!1,geometry:{primitive:"triangle",vertexA:"0 1 0",vertexB:"-0.5 0 0.5",vertexC:"0.5 0 0.5"},material:{shader:"standard",color:"yellow",emissive:"yellow",emissiveIntensity:.1,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2a=e.Core(n.scale2aData),n.scale2bData={data:"scale2bData",id:"scale2b",sources:!1,text:!1,sounds:!1,geometry:{primitive:"triangle",vertexA:"0 1 0",vertexB:"-0.5 0 0.5",vertexC:"-0.5 0 -0.5"},material:{shader:"standard",color:"yellow",emissive:"yellow",emissiveIntensity:.1,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2b=e.Core(n.scale2bData),n.scale2cData={data:"scale2cData",id:"scale2c",sources:!1,text:!1,sounds:!1,geometry:{primitive:"triangle",vertexA:"0 1 0",vertexB:"-0.5 0 -0.5",vertexC:"0.5 0 -0.5"},material:{shader:"standard",color:"yellow",emissive:"yellow",emissiveIntensity:.1,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2c=e.Core(n.scale2cData),n.scale2dData={data:"scale2dData",id:"scale2d",sources:!1,text:!1,sounds:!1,geometry:{primitive:"triangle",vertexA:"0 1 0",vertexB:"0.5 0 -0.5",vertexC:"0.5 0 0.5"},material:{shader:"standard",color:"yellow",emissive:"yellow",emissiveIntensity:.1,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2d=e.Core(n.scale2dData),n.scale2eData={data:"scale2eData",id:"scale2e",sources:!1,text:!1,sounds:!1,geometry:{primitive:"plane",height:1,width:1},material:{shader:"standard",color:"yellow",emissive:"yellow",emissiveIntensity:.1,opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["a-ent"],components:!1},n.scale2e=e.Core(n.scale2eData),n.scale2Data={parent:{core:n.scale2Parent},child0:{core:n.scale2a},child1:{core:n.scale2b},child2:{core:n.scale2c},child3:{core:n.scale2d},child4:{core:n.scale2e}},n.scale2=e.Layer("scale2",n.scale2Data),n.scale3Data={data:"scale3Data",id:"scale3",sources:!1,text:!1,sounds:!1,geometry:{primitive:"sphere",radius:1},material:{shader:"standard",color:"blue",emissive:"blue",emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.001,.001,.001),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},spinx:{property:"object3D.rotation.y",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinX"},spiny:{property:"object3D.rotation.z",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinY"},spinz:{property:"object3D.rotation.x",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinZ"}},mixins:!1,classes:["a-ent"],components:!1},n.scale3=e.Core(n.scale3Data),n.scale4Data={data:"scale4Data",id:"scale4",sources:!1,text:!1,sounds:!1,geometry:{primitive:"cylinder",radius:.5,height:.5,openEnded:!1,segmentsHeight:4,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"green",emissive:"green",emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.001,.001,.001),animations:{spawn:{property:"material.opacity",from:"0",to:"1",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},despawn:{property:"material.opacity",from:"1",to:"0",dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"despawn"},hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},spinx:{property:"object3D.rotation.y",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinX"},spiny:{property:"object3D.rotation.z",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinY"},spinz:{property:"object3D.rotation.x",from:"0",to:"360",dur:3e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spinZ"}},mixins:!1,classes:["a-ent"],components:!1},n.scale4=e.Core(n.scale4Data),n.perfectScaleUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"perfectScaleUI",{position:new THREE.Vector3(1,1.5,7)},!1,!0),n.perfectScaleUI=e.Layer("perfectScaleUI",n.perfectScaleUIData),n.perfectScaleUI.layer.all.child0.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child0.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child0.core.core.text.value="Game Ready",n.perfectScaleUI.layer.all.child1.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child1.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child1.core.core.text.value="Perfect Scale",n.perfectScaleUI.layer.all.child2.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child2.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child2.core.core.text.value="Pts : 0",n.perfectScaleUI.layer.all.child3.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child3.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child4.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child4.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child4.core.core.components={},n.perfectScaleUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:n.id,component:"null",method:"GameStart",params:"null"},n.perfectScaleUI.layer.all.child5.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child5.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child5.core.core.text.value="Confirm",n.perfectScaleUI.layer.all.child5.core.core.components={},n.perfectScaleUI.layer.all.child5.core.core.components.clickrun__confirm={cursorObj:n.id,component:"null",method:"Confirm",params:"null"},n.perfectScaleUI.layer.all.child5.core.core.components.visible=!1,n.perfectScaleUI.layer.all.child6.core.core.material.color=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child6.core.core.material.emissive=e.perfectScaleGameColor.compl,n.perfectScaleUI.layer.all.child6.core.core.components={},n.perfectScaleUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"perfectScaleGameMenu",component:"null",method:"ToggleGameMenu",params:"null"},n.scalingUIParentData={data:"scalingUIParentData",id:"scalingUIParent",sources:!1,text:!1,sounds:{levelstart:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"levelStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"}},geometry:!1,material:!1,position:new THREE.Vector3(.175,.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{"look-at-xyz":{buffer:.65,drag:.25,match:"camera",x:!1,y:!0,z:!1}}},n.scalingUIParent=e.Core(n.scalingUIParentData),n.scalingUIHolderData={data:"scalingUIHolderData",id:"scalingUIHolder",sources:!1,text:!1,sounds:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,-1),rotation:new THREE.Vector3(-15,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},n.scalingUIHolder=e.Core(n.scalingUIHolderData),n.scaleUpData={data:"scaleUpData",id:"scaleUp",sources:!1,text:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},geometry:{primitive:"cylinder",radius:.125,height:.05,openEnded:!1,segmentsHeight:2,segmentsRadial:3,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#ff8900",emissive:"#ff8900",emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,1.15,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click:{property:"material.emissiveIntensity",from:"0.5",to:"1",dur:125,delay:0,loop:1,dir:"alternate",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun__scaleup:{cursorObj:n.id,component:"null",method:"ScaleUp",params:"null"}}},n.scaleUp=e.Core(n.scaleUpData),n.scaleDownData={data:"scaleDownData",id:"scaleDown",sources:!1,text:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},geometry:{primitive:"cylinder",radius:.125,height:.05,openEnded:!1,segmentsHeight:2,segmentsRadial:3,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#ff8900",emissive:"#ff8900",emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,.95,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click:{property:"material.emissiveIntensity",from:"0.5",to:"1",dur:125,delay:0,loop:1,dir:"alternate",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun__scaleup:{cursorObj:n.id,component:"null",method:"ScaleDown",params:"null"}}},n.scaleDown=e.Core(n.scaleDownData),n.confirmData={data:"confirmData",id:"confirm",sources:!1,sounds:{confirm:{src:e.confirm1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Confirm",color:"#FFFFFF",align:"center",font:"exo2bold",xOffset:.01,zOffset:.0251,side:"front",wrapCount:10,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.4,height:.1},material:{shader:"standard",color:e.perfectScaleGameColor.base,emissive:e.perfectScaleGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,.75,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:{visible:!1,clickrun__confirm:{cursorObj:n.id,component:"null",method:"Confirm",params:"null"}}},n.confirm=e.Core(n.confirmData),n.axisXData={data:"axisXData",id:"axisX",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"X",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0251,side:"front",wrapCount:2,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.2,height:.2},material:{shader:"standard",color:e.perfectScaleGameColor.base,emissive:e.perfectScaleGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.5,1.2,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:n.id,component:"null",method:"ChangeAxis",params:"x"}}},n.axisX=e.Core(n.axisXData),n.axisYData={data:"axisYData",id:"axisY",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Y",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0251,side:"front",wrapCount:2,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.2,height:.2},material:{shader:"standard",color:e.perfectScaleGameColor.base,emissive:e.perfectScaleGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.5,1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:n.id,component:"null",method:"ChangeAxis",params:"y"}}},n.axisY=e.Core(n.axisYData),n.axisZData={data:"axisZData",id:"axisZ",sources:!1,sounds:{select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Z",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0251,side:"front",wrapCount:2,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.2,height:.2},material:{shader:"standard",color:e.perfectScaleGameColor.base,emissive:e.perfectScaleGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.5,.8,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:n.id,component:"null",method:"ChangeAxis",params:"z"}}},n.axisZ=e.Core(n.axisZData),n.spinData={data:"spinData",id:"spin",sources:!1,sounds:{spin:{src:e.switch2,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},text:{value:"Spin",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.0251,side:"front",wrapCount:5,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.2,height:.2},material:{shader:"standard",color:e.perfectScaleGameColor.base,emissive:e.perfectScaleGameColor.base,emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.3,1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"material.emissiveIntensity",from:"0.25",to:"0.5",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"material.emissiveIntensity",from:"0.5",to:"0.25",dur:1,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:250,delay:0,loop:1,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:n.id,component:"null",method:"Spin",params:"null"}}},n.spin=e.Core(n.spinData),n.scalingUIData={parent:{core:n.scalingUIParent},child0:{parent:{core:n.scalingUIHolder},child0:{core:n.confirm},child1:{core:n.scaleUp},child2:{core:n.scaleDown},child3:{core:n.axisX},child4:{core:n.axisY},child5:{core:n.axisZ},child6:{core:n.spin}}},n.scalingUI=e.Layer("scalingUI",n.scalingUIData);const r=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.perfectScaleUI.GetChild("perfectScaleUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"perfectScale",sub:!1,name:"highScores",data:n.highScores})},s=()=>{clearTimeout(n.levelDelay),clearTimeout(n.despawnDelay),clearTimeout(n.scaleDelay),clearTimeout(n.bonusDelay),n.level=0,n.levelClicks=0,n.clicks=0,n.pts=0,n.startingScale=new THREE.Vector3(0,0,0),n.scaler=!1,n.axis=!1,c(),n.perfectScaleUI.GetChild("perfectScaleUI3").ChangeSelf({property:"text",value:{value:"0 Pts\nTotal 0 Pts"}})},l=()=>{n.scale1.core.inScene&&(n.scale1.EmitEvent("despawn"),n.despawnDelay=setTimeout((()=>{n.scale1.DespawnCore()}),2e3)),n.scale2.layer.inScene&&(n.scale2.EmitEventAll("despawn"),n.despawnDelay=setTimeout((()=>{n.scale2.DespawnLayer()}),2e3)),n.scale3.core.inScene&&(n.scale3.EmitEvent("despawn"),n.despawnDelay=setTimeout((()=>{n.scale3.DespawnCore()}),2e3)),n.scale4.core.inScene&&(n.scale4.EmitEvent("despawn"),n.despawnDelay=setTimeout((()=>{n.scale4.DespawnCore()}),2e3))},c=()=>{n.axisX.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.base}}),n.axisY.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.base}}),n.axisZ.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.base}})},d=()=>{if(n.scalingUIParent.EmitEvent("levelStart"),n.level++,n.level>n.levelScalers.length)return n.scalingUIParent.EmitEvent("gameOver"),r(n.pts),n.perfectScaleUI.GetChild("perfectScaleUI1").ChangeSelf({property:"text",value:{value:"Game Complete!"}}),n.scalingUI.GetChild("confirm").ChangeSelf({property:"visible",value:!1}),n.perfectScaleUI.GetChild("perfectScaleUI5").ChangeSelf({property:"text",value:{value:"Start"}}),void(n.gameStarted=!1);var e;n.clicks=0,e=n.levelScalers[n.level-1],n.scaler=e,"Cube"===e?n.scale1.SpawnCore():"Pyramid"===e?n.scale2.SpawnLayer():"Sphere"===e?n.scale3.SpawnCore():"Cylinder"===e&&n.scale4.SpawnCore(),h(),n.perfectScaleUI.GetChild("perfectScaleUI1").ChangeSelf({property:"text",value:{value:"Level : "+n.level+" | Shape : "+n.scaler}}),n.scalingUI.GetChild("confirm").ChangeSelf({property:"visible",value:!0}),n.perfectScaleUI.GetChild("perfectScaleUI6").ChangeSelf({property:"visible",value:!0})},p=e=>Math.round(10*e)/10,h=()=>{n.scaleDelay=setTimeout((()=>{n.scale1.core.inScene&&n.scale1.ChangeSelf({property:"scale",value:m(1)}),n.scale2.layer.inScene&&n.scale2.ChangeParent({property:"scale",value:m(1)}),n.scale3.core.inScene&&n.scale3.ChangeSelf({property:"scale",value:m(1)}),n.scale4.core.inScene&&n.scale4.ChangeSelf({property:"scale",value:m(1)})}),50)},m=e=>{n.levelClicks=Math.floor(Math.random()*(5*n.level))+2*n.level+5;let t=p(Math.random()*n.level+2),o=p(.1*Math.floor(n.levelClicks/3)),a=p(.1*(n.levelClicks-Math.floor(n.levelClicks/3))),i=!1,r=!1,s=!1,l=Math.random(),c=Math.floor(2*Math.random()-1);l>=.67?i=t:l<.67&&l>.33?r=t:s=t,Math.random()>.5?o*=-1:a*=-1,i?c>0?(r=t+o,s=t+a):(r=t+a,s=t+o):r?c>0?(i=t+o,s=t+a):(i=t+a,s=t+o):s&&(c>0?(i=t+o,r=t+a):(i=t+a,r=t+o));let d=new THREE.Vector3(p(i),p(r),p(s));return n.startingScale.copy(d),d};return{perfectScale:n,core:"perfectScale",SpawnPSGame:()=>{n.inScene||(n.perfectScaleUI.SpawnLayer(),n.scalingUI.SpawnLayer(e.playerBody),r(),n.inScene=!0)},DespawnPSGame:()=>{n.inScene&&(s(),n.scalingUI.DespawnLayer(),l(),n.perfectScaleUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},GameStart:()=>{s(),d(),n.perfectScaleUI.GetChild("perfectScaleUI5").ChangeSelf({property:"text",value:{value:"Restart"}}),n.gameStarted=!0},Confirm:()=>{let e="",t=new THREE.Vector3(0,0,0);n.scale1.core.inScene&&t.copy(n.scale1.GetEl().getAttribute("scale")),n.scale2.layer.inScene&&t.copy(n.scale2.GetParentEl().getAttribute("scale")),n.scale3.core.inScene&&t.copy(n.scale3.GetEl().getAttribute("scale")),n.scale4.core.inScene&&t.copy(n.scale4.GetEl().getAttribute("scale")),l();let o=[p(t.x),p(t.y),p(t.z)];function a(e,t){return p(Math.abs(e-t))}o.sort((function(e,t){return e-t}));let i=a(o[0],o[1]),r=a(o[1],o[2]),s=0,c=0,h=0;0===i&&0===r?(s+=100*n.level,e+="Perfect! "):(0===i?(c=25*n.level,e+="Great! "):c=Math.floor(i/.1)*(2*n.level)*-1,0===r?(h=25*n.level,e+="Great! "):h=Math.floor(r/.1)*(2*n.level)*-1);let m=50*n.level+c+h;m>0&&(s+=m);let u=a(n.clicks,n.levelClicks);n.clicks===n.levelClicks?s+=2*n.levelClicks:n.clicks>.69*n.levelClicks&&n.clicks<n.levelClicks?s+=3*u:n.clicks>n.levelClicks&&n.clicks<1.5*n.levelClicks?s+=2*u:n.clicks>1.5*n.levelClicks&&n.clicks<2*n.levelClicks&&(s+=u),n.pts+=s,e+=s,n.perfectScaleUI.GetChild("perfectScaleUI3").ChangeSelf({property:"text",value:{value:e+" Pts\nTotal "+n.pts+" Pts"}}),n.scalingUI.GetChild("confirm").ChangeSelf({property:"visible",value:!1}),n.perfectScaleUI.GetChild("perfectScaleUI6").ChangeSelf({property:"visible",value:!1}),n.levelDelay=setTimeout((()=>{d()}),2100)},Spin:()=>{"Cube"===n.scaler?n.scale1.EmitEvent("spin"+n.axis.toUpperCase()):"Pyramid"===n.scaler?n.scale2.EmitEventParent("spin"+n.axis.toUpperCase()):"Sphere"===n.scaler?n.scale3.EmitEvent("spin"+n.axis.toUpperCase()):"Cylinder"===n.scaler&&n.scale4.EmitEvent("spin"+n.axis.toUpperCase())},ChangeAxis:t=>{n.axis=t,c(),"x"===t?n.axisX.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.compl}}):"y"===t?n.axisY.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.compl}}):"z"===t&&n.axisZ.ChangeSelf({property:"material",value:{emissive:e.perfectScaleGameColor.compl}})},ScaleUp:()=>{if(n.axis){let e=new THREE.Vector3(0,0,0);"Cube"===n.scaler?e=n.scale1.GetEl().getAttribute("scale"):"Pyramid"===n.scaler?e=n.scale2.GetParentEl().getAttribute("scale"):"Sphere"===n.scaler?e=n.scale3.GetEl().getAttribute("scale"):"Cylinder"===n.scaler&&(e=n.scale4.GetEl().getAttribute("scale")),e[n.axis]+n.levelScaleAmount<n.startingScale[n.axis]+n.level+1&&(n.clicks++,e[n.axis]+=n.levelScaleAmount)}},ScaleDown:()=>{if(n.axis){let e=new THREE.Vector3(0,0,0);"Cube"===n.scaler?e=n.scale1.GetEl().getAttribute("scale"):"Pyramid"===n.scaler?e=n.scale2.GetParentEl().getAttribute("scale"):"Sphere"===n.scaler?e=n.scale3.GetEl().getAttribute("scale"):"Cylinder"===n.scaler&&(e=n.scale4.GetEl().getAttribute("scale")),e[n.axis]-n.levelScaleAmount>n.startingScale[n.axis]-(n.level+1)&&(n.clicks++,e[n.axis]-=n.levelScaleAmount)}}}},e.AddObjGenToTracker("perfectScale","SpawnPSGame","DespawnPSGame"),e.perfectScaleGame=e.PerfectScale("perfectScaleGame"),e.perfectScaleGameMenuData={id:"perfectScaleGameMenu",game:e.perfectScaleGame.perfectScale,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game6",gameCabinet:"cadeCab6Layer",outGamePos:new THREE.Vector3(-.75,1.5,-13.25),inGamePos:new THREE.Vector3(.5,1.5,7.5)},e.perfectScaleGameMenu=e.GameMenu(e.perfectScaleGameMenuData),e.Reflex7=a=>{let i={};i.id=a,i.title="Reflex 7",i.instructionsText="How To Play :\nQuickly click the main object at each of the 7 consecitive prompts via Opacity, Rotation and Sound.\n Prematurely clicking will freeze you out for 1 second.\nYour total will be an average out of all 7 attempts, so be consistent for the best results!",i.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",i.previewImage=e.game7Preview,i.inScene=!1,e.reflex7GameColor=e.ColorTheoryGen("#9e22a2"),i.highScores=t("ms",2),i.gameStarted=!1,i.hits=6,i.times=[],i.currentTime=0,i.avgTime=0,i.bestTime=0,i.hitTimeout,i.fireTimeout,i.prematureTimeout,i.fired=!1,i.hitDelay=4e3*Math.random()+3e3,i.targetData={data:"targetData",id:"target",sources:!1,text:!1,sounds:{levelstart:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"levelStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"},fire:{src:e.confirm1,autoplay:!1,loop:!1,volume:1,on:"fire"},hit:{src:e.confirm2,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},geometry:{primitive:"box",depth:1,width:1,height:1},material:{shader:"standard",color:e.reflex7GameColor.compl,emissive:e.reflex7GameColor.compl,emissiveIntensity:.25,opacity:.5},position:new THREE.Vector3(0,1.95,-4),rotation:new THREE.Vector3(0,45,0),scale:new THREE.Vector3(3,3,3),animations:{onload:{property:"object3D.position.y",to:1.95,dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0},anticipation:{property:"object3D.position.y",from:1.95,to:2.05,dur:3e3,delay:0,loop:!0,dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0,startEvents:"animationcomplete__onload, click",pauseEvents:"fire"},spin:{property:"object3D.rotation.y",from:45,to:405,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},fire0:{property:"material.opacity",to:1,dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fire"},fire1:{property:"material.opacity",from:1,to:.5,dur:2e3,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fire"},clickx:{property:"object3D.scale.x",from:3,to:3.5,dur:75,delay:0,loop:1,dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},clicky:{property:"object3D.scale.y",from:3,to:3.5,dur:75,delay:0,loop:1,dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},clickz:{property:"object3D.scale.z",from:3,to:3.5,dur:75,delay:0,loop:1,dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},complete:{property:"material.opacity",to:1,dur:250,delay:0,loop:"8",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"complete"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__hit:{cursorObj:i.id,component:"null",method:"TargetHit",params:"null"}}},i.target=e.Core(i.targetData),i.reflex7UIData=e.LayerDataFromTemplate(e.uiGameLayerData,"reflex7UI",{position:new THREE.Vector3(1.5,1.5,0)},!1,!0),i.reflex7UI=e.Layer("reflex7UI",i.reflex7UIData),i.reflex7UI.layer.all.child0.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child0.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child0.core.core.text.value="Game Ready",i.reflex7UI.layer.all.child1.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child1.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child1.core.core.text.value="Reflex 7",i.reflex7UI.layer.all.child2.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child2.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child2.core.core.text.wrapCount=15,i.reflex7UI.layer.all.child2.core.core.text.value="Time : 0.00ms\nAvg : 0.00ms\nBest : 0.00ms",i.reflex7UI.layer.all.child3.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child3.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child4.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child4.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child4.core.core.components={},i.reflex7UI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:i.id,component:"null",method:"GameStart",params:"null"},i.reflex7UI.layer.all.child5.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child5.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child5.core.core.text.value="Give Up",i.reflex7UI.layer.all.child5.core.core.components={},i.reflex7UI.layer.all.child5.core.core.components.visible=!1,i.reflex7UI.layer.all.child6.core.core.material.color=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child6.core.core.material.emissive=e.reflex7GameColor.compl,i.reflex7UI.layer.all.child6.core.core.components={},i.reflex7UI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"reflex7GameMenu",component:"null",method:"ToggleGameMenu",params:"null"};const n=t=>{t&&(i.highScores=((t,a)=>t<a.score1||0===a.score1?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=JSON.parse(JSON.stringify(a.score2)),a.name3=JSON.parse(JSON.stringify(a.name2)),a.score2=JSON.parse(JSON.stringify(a.score1)),a.name2=JSON.parse(JSON.stringify(a.name1)),a.score1=t,a.name1=e.local.profile.shortname,a.text=o(a),a):t<a.score2||0===a.score2?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=JSON.parse(JSON.stringify(a.score2)),a.name3=JSON.parse(JSON.stringify(a.name2)),a.score2=t,a.name2=e.local.profile.shortname,a.text=o(a),a):t<a.score3||0===a.score3?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=JSON.parse(JSON.stringify(a.score3)),a.name4=JSON.parse(JSON.stringify(a.name3)),a.score3=t,a.name3=e.local.profile.shortname,a.text=o(a),a):t<a.score4||0===a.score4?(a.score5=JSON.parse(JSON.stringify(a.score4)),a.name5=JSON.parse(JSON.stringify(a.name4)),a.score4=t,a.name4=e.local.profile.shortname,a.text=o(a),a):t<a.score5||0===a.score5?(a.score5=t,a.name5=e.local.profile.shortname,a.text=o(a),a):a)(t,i.highScores)),i.highScores.text=o(i.highScores),i.reflex7UI.GetChild("reflex7UI4").ChangeSelf({property:"text",value:{value:i.highScores.text}}),e.SaveToProfile({auxlObject:i.id,type:"reflex7",sub:!1,name:"highScores",data:i.highScores})},r=()=>{i.hits=6,i.times=[],i.currentTime=0,i.avgTime=0,i.bestTime=0,i.hitDelay=4e3*Math.random()+3e3,i.fired=!1,clearTimeout(i.hitTimeout),clearTimeout(i.fireTimeout),clearTimeout(i.prematureTimeout)},s=e=>{clearTimeout(i.hitTimeout),e>0?(i.fired=!1,i.hitDelay=4e3*Math.random()+3e3,i.hitTimeout=setTimeout((()=>{i.target.EmitEvent("fire"),i.fired=!0,l()}),i.hitDelay)):(i.target.EmitEvent("gameOver"),i.target.GetEl().classList.toggle("clickable",!1),i.target.EmitEvent("complete"),i.reflex7UI.GetChild("reflex7UI1").ChangeSelf({property:"text",value:{value:"Game Completed!"}}),n(i.avgTime),i.gameStarted=!1)},l=()=>{clearTimeout(i.fireTimeout),i.currentTime=0,i.fireTimeout=setTimeout((()=>{c(),clearTimeout(i.fireTimeout)}),2e3)},c=()=>{i.currentTime=2e3,d(i.currentTime),s(i.hits--)},d=e=>{i.times.push(e),i.avgTime=i.times.reduce(((e,t)=>e+t),0),i.avgTime/=i.times.length;let t=[...i.times];t.sort((function(e,t){return e-t})),i.bestTime=t[0],i.reflex7UI.GetChild("reflex7UI3").ChangeSelf({property:"text",value:{value:"Time : "+i.currentTime.toFixed(2)+" ms\nAvg : "+i.avgTime.toFixed(2)+" ms\nBest : "+i.bestTime.toFixed(2)+" ms"}}),i.reflex7UI.GetChild("reflex7UI1").ChangeSelf({property:"text",value:{value:i.hits+" Left"}})};return{reflex7:i,core:"reflex7",SpawnR7Game:()=>{i.inScene||(i.target.SpawnCore(),i.reflex7UI.SpawnLayer(),n(),i.inScene=!0)},DespawnR7Game:()=>{i.inScene&&(r(),i.target.DespawnCore(),i.reflex7UI.DespawnLayer(),i.inScene=!1,e.RemoveFromTracker(i.id))},GameStart:()=>{r(),i.target.EmitEvent("levelStart"),i.target.GetEl().classList.toggle("clickable",!0),i.reflex7UI.GetChild("reflex7UI1").ChangeSelf({property:"text",value:{value:"Get Ready!"}}),i.gameStarted=!0,s(i.hits)},TargetHit:()=>{i.fired?(clearTimeout(i.fireTimeout),i.currentTime=i.target.GetEl().components.animation__fire1.time,d(i.currentTime),s(i.hits--)):(i.target.GetEl().classList.toggle("clickable",!1),e.player.Notification({message:"Too Soon!",time:1250}),i.prematureTimeout=setTimeout((()=>{i.target.GetEl().classList.toggle("clickable",!0),clearTimeout(i.prematureTimeout)}),1250))}}},e.AddObjGenToTracker("reflex7","SpawnR7Game","DespawnR7Game"),e.reflex7Game=e.Reflex7("reflex7Game"),e.reflex7GameMenuData={id:"reflex7GameMenu",game:e.reflex7Game.reflex7,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game7",gameCabinet:"cadeCab7Layer",outGamePos:new THREE.Vector3(.75,1.5,-13.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.reflex7GameMenu=e.GameMenu(e.reflex7GameMenuData),e.TapIt=i=>{let n={};n.id=i,n.title="Tap It",n.instructionsText="How To Play :\nWatch for 1 of 4 mechanic prompts to interact with an object.\n Each object can only be interacted with by their specific input type.\n Triangle is Tap/Click.\n Circle is Hover.\n Square is Double Tap/Click.\n Triangle with a Circle is a Click and Drag.\nMatch the object with their appropriate input within an ever reducing time frame to continue.\nSee how long you can last!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game8Preview,n.inScene=!1,e.tapItGameColor=e.ColorTheoryGen("#e02020"),n.highScores=t("Hits",0),n.gameStarted=!1,n.hits=0,n.startTimeout,n.hitTimer,n.hitTimerDelay=3100,n.correct=!1,n.current=!1,n.objectives=["tap","doubleTap","hover","drag"],n.objectivesText=["Tap It!","Double Tap It!","Hover It!","Drag It!"],n.dragStart=!1,n.doubleTapStart=!1,n.tapData={data:"tapData",id:"tap",sources:!1,text:!1,sounds:{levelstart:{src:e.maximize6,autoplay:!1,loop:!1,volume:1,on:"levelStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"gameOver"},mousedown:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"},select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"cylinder",radius:.45,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:3,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#b967ff",emissive:"#b967ff",emissiveIntensity:.2,opacity:1,src:e.pattern46,repeat:"4 4"},position:new THREE.Vector3(0,2,-1),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{gamestart:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:500,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameStart"},click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown, select"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__tap:{cursorObj:n.id,component:"null",method:"Tap",params:"null"}}},n.tap=e.Core(n.tapData),n.doubleTapData={data:"doubleTapData",id:"doubleTap",sources:!1,text:!1,sounds:{doubletap:{src:e.switch2,autoplay:!1,loop:!1,volume:1,on:"doubletap"},select:{src:e.switch2,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"box",depth:.15,width:.75,height:.75},material:{shader:"standard",color:"#01cdfe",emissive:"#01cdfe",emissiveIntensity:.2,opacity:1,src:e.pattern48,repeat:"4 4"},position:new THREE.Vector3(0,.5,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{gamestart:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:500,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameStart"},click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},click1select:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"4",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"select"},click2select:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"4",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"select"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__doubletap:{cursorObj:n.id,component:"null",method:"DoubleTap",params:"null"}}},n.doubleTap=e.Core(n.doubleTapData),n.hoverData={data:"hoverData",id:"hover",sources:!1,text:!1,sounds:{mouseenter:{src:e.pluck1,autoplay:!1,loop:!1,volume:1,on:"mouseenter"},select:{src:e.pluck1,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"cylinder",radius:.35,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#05ffa1",emissive:"#05ffa1",emissiveIntensity:.2,opacity:1,src:e.pattern73,repeat:"4 4"},position:new THREE.Vector3(1,1.35,-1),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{gamestart:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:500,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameStart"},click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, select"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["a-ent"],components:{mouseenterrun__hover:{cursorObj:n.id,component:"null",method:"Hover",params:"null"}}},n.hover=e.Core(n.hoverData),n.drag1Data={data:"drag1Data",id:"drag1",sources:!1,text:!1,sounds:{mousedown:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"mousedown"},select:{src:e.drop1,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"cylinder",radius:.45,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:3,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#ff71ce",emissive:"#ff71ce",emissiveIntensity:.2,opacity:1,src:e.pattern84,repeat:"4 4"},position:new THREE.Vector3(-.85,1.25,-1),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{gamestart:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:500,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameStart"},click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown, select"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown, select"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["a-ent"],components:{mousedownrun__dragstart:{cursorObj:n.id,component:"null",method:"DragStart",params:"null"}}},n.drag1=e.Core(n.drag1Data),n.drag2Data={data:"drag2Data",id:"drag2",sources:!1,text:!1,sounds:{mouseenter:{src:e.pluck1,autoplay:!1,loop:!1,volume:1,on:"mouseenter"},select:{src:e.pluck1,autoplay:!1,loop:!1,volume:1,on:"select"}},geometry:{primitive:"cylinder",radius:.35,height:.15,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#fffb96",emissive:"#fffb96",emissiveIntensity:.1,opacity:1,src:e.pattern84,repeat:"4 4"},position:new THREE.Vector3(-1.5,1.35,-1),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{gamestart:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:500,delay:0,loop:"6",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameStart"},click1:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},click2:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},click1select:{property:"scale",from:"1 1 1",to:"1.1 1.1 1.1",dur:125,delay:125,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"select"},click2select:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:125,delay:125,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"select"},gameover1:{property:"material.emissiveIntensity",from:"0.2",to:"0.8",dur:250,delay:0,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"},gameover2:{property:"material.emissiveIntensity",from:"0.8",to:"0.2",dur:250,delay:2e3,loop:"false",dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"gameOver"}},mixins:!1,classes:["a-ent"],components:{mouseenterrun__dragend:{cursorObj:n.id,component:"null",method:"DragEnd",params:"null"}}},n.drag2=e.Core(n.drag2Data),n.tapItUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"tapItUI",{position:new THREE.Vector3(1.5,1.5,0)},!1,!0),n.tapItUI=e.Layer("tapItUI",n.tapItUIData),n.tapItUI.layer.all.child0.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child0.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child0.core.core.text.value="Game Ready",n.tapItUI.layer.all.child1.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child1.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child1.core.core.text.value="Tap It",n.tapItUI.layer.all.child2.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child2.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child2.core.core.text.value="Hits : 0",n.tapItUI.layer.all.child3.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child3.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child4.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child4.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child4.core.core.components={},n.tapItUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:n.id,component:"null",method:"GameStart",params:"null"},n.tapItUI.layer.all.child5.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child5.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child5.core.core.text.value="Give Up",n.tapItUI.layer.all.child5.core.core.components={},n.tapItUI.layer.all.child5.core.core.components.visible=!1,n.tapItUI.layer.all.child6.core.core.material.color=e.tapItGameColor.compl,n.tapItUI.layer.all.child6.core.core.material.emissive=e.tapItGameColor.compl,n.tapItUI.layer.all.child6.core.core.components={},n.tapItUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"tapItGameMenu",component:"null",method:"ToggleGameMenu",params:"null"};const r=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.tapItUI.GetChild("tapItUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"tapIt",sub:!1,name:"highScores",data:n.highScores})},s=()=>{n.dragStart=!1,n.doubleTapStart=!1,n.current=!1},l=()=>{s(),n.correct=!1,n.hits=0,n.hitTimerDelay=3100,clearTimeout(n.startTimeout),clearTimeout(n.hitTimer)},c=e=>{n.tap.GetEl().classList.toggle("clickable",e),n.doubleTap.GetEl().classList.toggle("clickable",e),n.hover.GetEl().classList.toggle("clickable",e),n.drag1.GetEl().classList.toggle("clickable",e),n.drag2.GetEl().classList.toggle("clickable",e)},d=e=>{n.tap.EmitEvent(e),n.doubleTap.EmitEvent(e),n.hover.EmitEvent(e),n.drag1.EmitEvent(e),n.drag2.EmitEvent(e)},p=()=>{c(!1),d("gameOver"),n.hits>0&&n.hits--,r(n.hits),n.tapItUI.GetChild("tapItUI1").ChangeSelf({property:"text",value:{value:"Ahhhh Game Over!"}}),n.gameStarted=!1,l()},h=()=>{c(!0),clearTimeout(n.hitTimer),n.correct=!1;let e=Math.floor(Math.random()*n.objectives.length);n.current=n.objectives[e],n.hits++,n.hitTimerDelay>1100&&(n.hitTimerDelay-=100),n.tapItUI.GetChild("tapItUI1").ChangeSelf({property:"text",value:{value:n.objectivesText[e]}}),"tap"===n.current?n.tap.EmitEvent("select"):"doubleTap"===n.current?n.doubleTap.EmitEvent("select"):"hover"===n.current?n.hover.EmitEvent("select"):"drag"===n.current&&(n.drag1.EmitEvent("select"),n.drag2.EmitEvent("select")),n.hitTimer=setTimeout((()=>{n.correct?h():m()}),n.hitTimerDelay)},m=()=>{clearTimeout(n.hitTimer),p()},u=()=>{s(),n.correct=!0,c(!1),n.tapItUI.GetChild("tapItUI3").ChangeSelf({property:"text",value:{value:"Hits : "+n.hits}}),n.tapItUI.GetChild("tapItUI1").ChangeSelf({property:"text",value:{value:"Correct"}})};return{tapIt:n,core:"tapIt",SpawnTIGame:()=>{n.inScene||(n.tap.SpawnCore(),n.doubleTap.SpawnCore(),n.hover.SpawnCore(),n.drag1.SpawnCore(),n.drag2.SpawnCore(),n.tapItUI.SpawnLayer(),r(),n.inScene=!0)},DespawnTIGame:()=>{n.inScene&&(l(),n.tap.DespawnCore(),n.doubleTap.DespawnCore(),n.hover.DespawnCore(),n.drag1.DespawnCore(),n.drag2.DespawnCore(),n.tapItUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},GameStart:()=>{l(),n.tap.EmitEvent("levelStart"),n.tapItUI.GetChild("tapItUI1").ChangeSelf({property:"text",value:{value:"Get Ready!"}}),d("gameStart"),n.gameStarted=!0,n.startTimeout=setTimeout((()=>{h(),clearTimeout(n.startTimeout)}),3e3)},Tap:()=>{"tap"===n.current?u():p()},DoubleTap:()=>{n.doubleTapStart?"doubleTap"===n.current&&(u(),n.doubleTap.EmitEvent("doubletap")):"doubleTap"===n.current?n.doubleTapStart=!0:p()},Hover:()=>{"hover"===n.current?u():p()},DragStart:()=>{"drag"===n.current?n.dragStart=!0:p()},DragEnd:()=>{n.dragStart&&("drag"===n.current?u():p())}}},e.AddObjGenToTracker("tapIt","SpawnTIGame","DespawnTIGame"),e.tapItGame=e.TapIt("tapItGame"),e.tapItGameMenuData={id:"tapItGameMenu",game:e.tapItGame.tapIt,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game8",gameCabinet:"cadeCab8Layer",outGamePos:new THREE.Vector3(2.25,1.5,-13.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.tapItGameMenu=e.GameMenu(e.tapItGameMenuData),e.PopPopGame=i=>{let n={};n.id=i,n.title="Pop Pop",n.instructionsText="How To Play :\n10 Levels with an increasing amount of Pops as well as popping speed to collect as many as you can.\nHover on a Pop to collect it.\nThe quicker you can collect them, the greater your bonus will be.\n If you can collect them all, earn a big bonus as well!",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game9Preview,n.inScene=!1,e.popPopGameColor=e.ColorTheoryGen("#d0621e"),n.highScores=t("Pts",0),n.gameStarted=!1,n.totalPoints=0,n.levelPoints=0,n.level=1,n.startTimeout,n.levelTimeout,n.hits=[],n.poptotal=200,n.levelSpawn=[0,50,65,80,95,110,135,150,165,180,200],n.loopTime=[0,1500,1375,1250,1125,1e3,875,750,625,500,375],n.loopBonus=[0,10,5,3,2,1,1,1,1,1,1],n.baseData={data:"baseData",id:"base",sources:!1,text:!1,sounds:{levelstart:{src:e.maximize6,autoplay:!1,loop:!1,volume:1.5,on:"levelStart"},gameover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1.5,on:"levelOver"},fire:{src:e.select6,autoplay:!1,loop:!1,volume:1.5,on:"fire"}},geometry:{primitive:"cylinder",radius:7.5,height:1,openEnded:!1,segmentsHeight:2,segmentsRadial:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:e.popPopGameColor.compl,emissive:e.popPopGameColor.compl,emissiveIntensity:.25,opacity:1,src:e.pattern10,repeat:"1 1"},position:new THREE.Vector3(0,.5,-15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},n.base=e.Core(n.baseData),n.popData={data:"popData",id:"pop",sources:!1,text:!1,sounds:{hit:{src:e.drop3,autoplay:!1,loop:!1,volume:1.5,on:"mouseenter"}},geometry:{primitive:"dodecahedron",radius:.6,detail:0},material:{shader:"standard",color:"#fffb96",emissive:"#fffb96",emissiveIntensity:.25,opacity:1,src:e.pattern63,repeat:"2 2"},position:new THREE.Vector3(-1,0,-15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{pop:{property:"object3D.position.y",from:"0",to:"10",dur:1500,delay:0,loop:"20",dir:"alternate",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"pop",pauseEvents:"animationcomplete__hitx, reset"},hitx:{property:"object3D.scale.x",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hity:{property:"object3D.scale.y",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hitz:{property:"object3D.scale.z",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},resetx:{property:"object3D.scale.x",from:1e-4,to:1,dur:1,delay:500,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, reset"},resety:{property:"object3D.scale.y",from:1e-4,to:1,dur:1,delay:500,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, reset"},resetz:{property:"object3D.scale.z",from:1e-4,to:1,dur:1,delay:500,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, reset"},reset:{property:"object3D.position.y",to:"0",dur:1,delay:450,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter, reset"}},mixins:!1,classes:["clickable","a-ent"],components:{mouseenterrun__hit:{cursorObj:n.id,component:"null",method:"Hit",params:"0"}}},n.pop=e.Core(n.popData),n.popCores=[];let r,s=0,l=0,c=0;for(let t=0;t<n.poptotal;t++)s=14*Math.random()-7,l=7*Math.random()+7,c=-6*Math.random()-15,r=e.ColorTheoryGen(!1,"yellow").base,n.popCores[t]=e.CoreFromTemplate(n.pop,{id:"pop"+t,material:{shader:"standard",color:r,emissive:r,emissiveIntensity:.25,opacity:1,src:e.pattern63,repeat:"2 2"},position:new THREE.Vector3(s,0,c),components:{mouseenterrun__hit:{cursorObj:n.id,component:"null",method:"Hit",params:t}}},!0),n.popCores[t].core.animations.pop.to=l,n.popCores[t].core.animations.pop.delay=1500*Math.random();n.popPopUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"popPopUI",{position:new THREE.Vector3(1.5,1.5,0)},!1,!0),n.popPopUI=e.Layer("popPopUI",n.popPopUIData),n.popPopUI.layer.all.child0.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child0.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child0.core.core.text.value="Game Ready",n.popPopUI.layer.all.child1.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child1.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child1.core.core.text.value="Pop Pop",n.popPopUI.layer.all.child2.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child2.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child2.core.core.text.value="Hits : 0\nPts : 0\nTotal : 0",n.popPopUI.layer.all.child3.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child3.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child4.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child4.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child4.core.core.components={},n.popPopUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:n.id,component:"null",method:"GameStart",params:"null"},n.popPopUI.layer.all.child5.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child5.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child5.core.core.text.value="Next",n.popPopUI.layer.all.child5.core.core.components={},n.popPopUI.layer.all.child5.core.core.components.visible=!1,n.popPopUI.layer.all.child5.core.core.components.clickrun__menutoggle={cursorObj:n.id,component:"null",method:"GameLoop",params:"null"},n.popPopUI.layer.all.child6.core.core.material.color=e.popPopGameColor.compl,n.popPopUI.layer.all.child6.core.core.material.emissive=e.popPopGameColor.compl,n.popPopUI.layer.all.child6.core.core.components={},n.popPopUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"popPopGameMenu",component:"null",method:"ToggleGameMenu",params:"null"};const d=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.popPopUI.GetChild("popPopUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"popPop",sub:!1,name:"highScores",data:n.highScores})},p=e=>{n.popPopUI.GetChild("popPopUI1").ChangeSelf({property:"text",value:{value:"Starting in "+e+"..."}});let t=setTimeout((()=>{e>1?p(e-1):n.popPopUI.GetChild("popPopUI1").ChangeSelf({property:"text",value:{value:"GO!"}}),clearTimeout(t)}),1e3)},h=e=>{let t=0,o=0,a=0,i={name:"pop",property:"object3D.position.y",from:"0",to:"10",dur:n.loopTime[n.level],delay:0,loop:"20",dir:"alternate",easing:"easeOutCirc",elasticity:400,autoplay:!1,enabled:!0,startEvents:"pop",pauseEvents:"animationcomplete__hitx, reset"};for(let e=0;e<n.levelSpawn[n.level];e++)t=14*Math.random()-7,o=10*Math.random()+7,a=-6*Math.random()-15,i.to=o,i.delay=1e3*Math.random()+5*e,n.popCores[e].Animate(i),n.popCores[e].ChangeSelf({property:"position",value:new THREE.Vector3(t,0,a)}),n.popCores[e].GetEl().classList.toggle("clickable",!0)},m=()=>{n.popPopUI.GetChild("popPopUI3").ChangeSelf({property:"text",value:{value:"Hits : "+n.hits+"\nPts : "+n.levelPoints+"\nTotal : "+n.totalPoints}}),n.popPopUI.GetChild("popPopUI6").ChangeSelf({property:"visible",value:!1}),n.base.EmitEvent("levelStart"),p(3),n.startTimeout=setTimeout((()=>{n.base.EmitEvent("fire"),(e=>{for(let t=0;t<e;t++)n.popCores[t].EmitEvent("pop")})(n.levelSpawn[n.level]),clearTimeout(n.startTimeout)}),3e3),n.levelTimeout=setTimeout((()=>{u()}),20*n.loopTime[n.level]+5e3)},u=()=>{clearTimeout(n.levelTimeout),n.base.EmitEvent("levelOver"),n.popPopUI.GetChild("popPopUI1").ChangeSelf({property:"text",value:{value:"Level "+n.level+" Over"}}),10===n.level?y():(n.level++,n.hits=0,n.levelPoints=0,h(n.level),n.popPopUI.GetChild("popPopUI6").ChangeSelf({property:"visible",value:!0}))},y=()=>{n.gameStarted=!1,n.popPopUI.GetChild("popPopUI1").ChangeSelf({property:"text",value:{value:"Game Complete"}}),n.popPopUI.GetChild("popPopUI5").ChangeSelf({property:"text",value:{value:"Start"}}),d(n.totalPoints)};return{popPop:n,core:"popPop",SpawnPPGame:()=>{n.inScene||(n.popPopUI.SpawnLayer(),n.base.SpawnCore(),n.popCores.forEach((e=>e.SpawnCore())),d(),n.inScene=!0)},DespawnPPGame:()=>{n.inScene&&(n.base.DespawnCore(),n.popCores.forEach((e=>e.DespawnCore())),n.popPopUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id))},GameStart:()=>{clearTimeout(n.startTimeout),clearTimeout(n.levelTimeout),n.popCores.forEach((e=>e.EmitEvent("reset"))),n.totalPoints=0,n.levelPoints=0,n.level=1,n.hits=0,h(n.level),n.gameStarted=!0,n.popPopUI.GetChild("popPopUI5").ChangeSelf({property:"text",value:{value:"Restart"}}),m()},Hit:e=>{n.popCores[e].GetEl().classList.toggle("clickable",!1);let t=n.popCores[e].GetEl().components.animation__pop.animation.remaining;t=Math.ceil(t/2);let o=n.loopBonus[t]*(10*n.level);n.totalPoints+=o,n.levelPoints+=o,n.hits++,n.popPopUI.GetChild("popPopUI3").ChangeSelf({property:"text",value:{value:"Hits : "+n.hits+"\nPts : "+n.levelPoints+"\nTotal : "+n.totalPoints}}),n.hits>=n.levelSpawn[n.level]&&(n.totalPoints+=100*n.level,n.levelPoints+=100*n.level,n.popPopUI.GetChild("popPopUI3").ChangeSelf({property:"text",value:{value:"Bonus "+100*n.level+"!\nHits : "+n.hits+"\nPts : "+n.levelPoints+"\nTotal : "+n.totalPoints}}),u())},GameLoop:m}},e.AddObjGenToTracker("popPop","SpawnPPGame","DespawnPPGame"),e.popPopGame=e.PopPopGame("popPopGame"),e.popPopGameMenuData={id:"popPopGameMenu",game:e.popPopGame.popPop,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game9",gameCabinet:"cadeCab9Layer",outGamePos:new THREE.Vector3(4.25,1.5,-11.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.popPopGameMenu=e.GameMenu(e.popPopGameMenuData),e.HordeHaltGame=i=>{let n={};n.id=i,n.title="Horde Halt",n.instructionsText="How To Play :\nA horde of enemies will spawn relentlesly every level.\nKill enough each level to continue while avoiding dying from excessive damage.\nClick an enemy to stun it temporarily and swipe on/off to damage them.\nContinue clicking to reset the stun time.\nAs you progress, earn health and face more enemies which are more durable as well.\nHow many can you kill before they take you down?",n.controlsText="Game Controls :\nUse the controller raycaster and controller click to play the game.",n.previewImage=e.game10Preview,n.inScene=!1,e.hordeHaltGameColor=e.ColorTheoryGen("#4cd041"),n.highScores=t("Kills",0),n.gameStarted=!1,n.gameDelay,n.spawnInterval,n.targetPos=new THREE.Vector3(0,0,-4.5),n.level=1,n.health=5,n.totalKills=0,n.kills=0,n.maxEnemies=30;let r=2e3,s=3e3;n.spawnTotal=1,n.levelKills=10,n.spawnRate=r,n.resumeSpeed=s,n.spawnDistance=20,n.enemyHealth=3,n.targetData={data:"targetData",id:"target",sources:!1,text:!1,sounds:{countdown:{src:e.drop3,autoplay:!1,loop:!1,volume:1,on:"countdown"},levelstart:{src:e.maximize8,autoplay:!1,loop:!1,volume:1,on:"levelStart"},levelover:{src:e.minimize6,autoplay:!1,loop:!1,volume:1,on:"levelOver"},damage:{src:e.minimize7,autoplay:!1,loop:!1,volume:1,on:"damage"}},geometry:{primitive:"box",depth:1,width:1,height:1.25},material:{shader:"standard",color:e.hordeHaltGameColor.compl,emissive:e.hordeHaltGameColor.compl,emissiveIntensity:.1,opacity:1,src:e.pattern76,repeat:"2 2"},position:n.targetPos,rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},n.target=e.Core(n.targetData),n.enemyData={data:"enemyData",id:"enemy",sources:!1,text:!1,sounds:{stun:{src:e.select6,autoplay:!1,loop:!1,volume:1,on:"mousedown"},hit:{src:e.pluck2,autoplay:!1,loop:!1,volume:1,on:"hit"},kill:{src:e.minimize8,autoplay:!1,loop:!1,volume:1,on:"kill"}},geometry:{primitive:"dodecahedron",radius:.6,detail:0},material:{shader:"standard",color:"#cdef14",emissive:"#cdef14",emissiveIntensity:.25,opacity:1,src:e.pattern78,repeat:"2 2"},position:new THREE.Vector3(-1,0,-15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1e-4,1e-4,1e-4),animations:{spawn:{property:"object3D.rotation.y",to:0,dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0},move:{property:"position",to:n.targetPos,dur:2e4,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__spawn",pauseEvents:"mousedown",resumeEvents:"resume"},stun:{property:"material.color",to:"#d12323",dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},stun2:{property:"material.emissive",to:"#d12323",dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},hit:{property:"material.emissiveIntensity",from:.25,to:1,dur:50,delay:0,loop:"1",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"hit"},resume:{property:"material.color",to:"#cdef14",dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resume"},resume2:{property:"material.emissive",to:"#cdef14",dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resume"},spawnx:{property:"object3D.scale.x",from:1e-4,to:1,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0},spawny:{property:"object3D.scale.y",from:1e-4,to:1,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0},spawnz:{property:"object3D.scale.z",from:1e-4,to:1,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0},killx:{property:"object3D.scale.x",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"kill"},killy:{property:"object3D.scale.y",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"kill"},killz:{property:"object3D.scale.z",from:1,to:1e-4,dur:400,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"kill"},damagex:{property:"object3D.scale.x",from:1,to:5,dur:250,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"damage"},damagex1:{property:"object3D.scale.x",from:1,to:1e-4,dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__damagex"},damagey:{property:"object3D.scale.y",from:1,to:5,dur:250,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"damage"},damagey1:{property:"object3D.scale.y",from:1,to:1e-4,dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__damagey"},damagez:{property:"object3D.scale.z",from:1,to:5,dur:250,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"damage"},damagez1:{property:"object3D.scale.z",from:1,to:1e-4,dur:1,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__damagez"}},mixins:!1,classes:["clickable","a-ent"],components:{mousedownrun__hit:{cursorObj:n.id,component:"null",method:"Stun",params:"0"},mouseenterrun__slashin:{cursorObj:n.id,component:"null",method:"SlashIn",params:"0"},mouseleaverun__slashout:{cursorObj:n.id,component:"null",method:"SlashOut",params:"0"},oneventrun__kill:{event:"kill",cursorObj:n.id,component:"null",method:"ToggleClick",params:"0"},oneventrun__kill2:{event:"animationcomplete__killz",cursorObj:n.id,component:"null",method:"DespawnEnemy",params:"0"},oneventrun__damage:{event:"animationcomplete__move",cursorObj:n.id,component:"null",method:"Damage",params:"0"}}},n.enemy=e.Core(n.enemyData),n.enemies=[],n.enemyCores=[];let l=0,c=0,d=0;for(let t=0;t<n.maxEnemies;t++)l=40*Math.random()-20,c=20*Math.random()+.5,d=-10*Math.random()-20,n.enemyCores[t]=e.CoreFromTemplate(n.enemy,{id:"enemy"+t,material:{shader:"standard",color:"#cdef14",emissive:"#cdef14",emissiveIntensity:.25,opacity:1,src:e.pattern78,repeat:"2 2"},position:new THREE.Vector3(l,c,d),components:{mousedownrun__hit:{cursorObj:n.id,component:"null",method:"Stun",params:t},oneventrun__kill:{event:"kill",cursorObj:n.id,component:"null",method:"ToggleClick",params:t},oneventrun__kill2:{event:"animationcomplete__killz",cursorObj:n.id,component:"null",method:"DespawnEnemy",params:t},mouseenterrun__slashin:{cursorObj:n.id,component:"null",method:"SlashIn",params:t},mouseenterrun__slashout:{cursorObj:n.id,component:"null",method:"SlashOut",params:t},oneventrun__damage:{event:"animationcomplete__move",cursorObj:n.id,component:"null",method:"Damage",params:t}}},!0),n.enemyCores[t].core.animations.move.dur=5e3*Math.random()+2e4,n.enemies.push({num:t,stunned:!1,health:4,slashStart:!1,resumeTimeout:!1,spawnDistance:-20,moveSpeed:8e3,resumeSpeed:n.resumeSpeed});n.hordeHaltUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"hordeHaltUI",{position:new THREE.Vector3(1.5,1.5,0)},!1,!0),n.hordeHaltUI=e.Layer("hordeHaltUI",n.hordeHaltUIData),n.hordeHaltUI.layer.all.child0.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child0.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child0.core.core.text.value="Game Ready",n.hordeHaltUI.layer.all.child1.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child1.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child1.core.core.text.value="Horde Halt",n.hordeHaltUI.layer.all.child2.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child2.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child2.core.core.text.value="Health 0\nKills: 0\nLeft: 0\nTotal: 0",n.hordeHaltUI.layer.all.child3.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child3.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child4.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child4.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child4.core.core.components={},n.hordeHaltUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:n.id,component:"null",method:"GameStart",params:"null"},n.hordeHaltUI.layer.all.child5.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child5.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child5.core.core.text.value="Next",n.hordeHaltUI.layer.all.child5.core.core.components={},n.hordeHaltUI.layer.all.child5.core.core.components.visible=!1,n.hordeHaltUI.layer.all.child5.core.core.components.clickrun__next={cursorObj:n.id,component:"null",method:"GameLoop",params:"null"},n.hordeHaltUI.layer.all.child6.core.core.material.color=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child6.core.core.material.emissive=e.hordeHaltGameColor.compl,n.hordeHaltUI.layer.all.child6.core.core.components={},n.hordeHaltUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"hordeHaltGameMenu",component:"null",method:"ToggleGameMenu",params:"null"};const p=t=>{t&&(n.highScores=a(t,n.highScores)),n.highScores.text=o(n.highScores),n.hordeHaltUI.GetChild("hordeHaltUI4").ChangeSelf({property:"text",value:{value:n.highScores.text}}),e.SaveToProfile({auxlObject:n.id,type:"hordeHalt",sub:!1,name:"highScores",data:n.highScores})},h=e=>{n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Starting in "+e+"..."}}),n.target.EmitEvent("countdown");let t=setTimeout((()=>{e>1?h(e-1):n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"GO!"}}),clearTimeout(t)}),1e3)},m=e=>{let t=0;n.enemyCores.every((o=>(o.core.inScene||(o.SpawnCore(),t++),!(t>=e))))},u=()=>{for(let e=0;e<n.enemyCores.length;e++)n.enemyCores[e].core.inScene&&(clearTimeout(n.enemies[e].resumeTimeout),n.enemyCores[e].DespawnCore())},y=()=>{n.enemies.forEach((e=>{e.stunned=!1,e.health=n.enemyHealth,e.slashStart=!1,e.spawnDistance=n.spawnDistance,e.resumeSpeed=n.resumeSpeed,e.resumeTimeout=!1}));let e=0,t=0,o=0;n.enemyCores.forEach((a=>{e=Math.random()*n.spawnDistance-n.spawnDistance/2,t=Math.random()*n.spawnDistance+.5,o=-10*Math.random()-n.spawnDistance,a.core.position=new THREE.Vector3(e,t,o)}))},g=()=>{n.hordeHaltUI.GetChild("hordeHaltUI6").ChangeSelf({property:"visible",value:!1}),n.hordeHaltUI.GetChild("hordeHaltUI3").ChangeSelf({property:"text",value:{value:"Health "+n.health+"\nKills: "+n.kills+"\nLeft: "+(n.levelKills-n.kills)+"\nTotal: "+n.totalKills}}),h(3),n.gameDelay=setTimeout((()=>{n.target.EmitEvent("levelStart"),m(n.spawnTotal),n.spawnInterval=setInterval((()=>{m(n.spawnTotal)}),n.spawnRate)}),3e3)},v=e=>{if(n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Killed!"}}),n.kills++,n.totalKills++,clearTimeout(n.enemies[e].resumeTimeout),n.enemyCores[e].EmitEvent("kill"),n.hordeHaltUI.GetChild("hordeHaltUI3").ChangeSelf({property:"text",value:{value:"Health "+n.health+"\nKills: "+n.kills+"\nLeft: "+(n.levelKills-n.kills)+"\nTotal: "+n.totalKills}}),n.kills>=n.levelKills)clearInterval(n.spawnInterval),clearTimeout(n.gameDelay),n.target.EmitEvent("levelOver"),u(),n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Level "+n.level+" Complete!"}}),n.kills=0,n.level++,n.health+=Math.ceil(n.level/2),n.levelKills=10+3*n.level,n.enemyHealth=3+Math.floor(n.level/10),n.spawnDistance=20+n.level,n.spawnTotal<30&&(n.spawnTotal=1+Math.floor(n.level/3)),n.spawnRate>200&&(n.spawnRate=r-100*Math.floor(n.level/5)),n.resumeSpeed>200&&(n.resumeSpeed=s-100*Math.floor(n.level/10)),y(),n.hordeHaltUI.GetChild("hordeHaltUI6").ChangeSelf({property:"visible",value:!0});else{n.enemies[e].stunned=!1,n.enemies[e].health=n.enemyHealth,n.enemies[e].slashStart=!1;let t=Math.random()*n.spawnDistance-n.spawnDistance/2,o=Math.random()*n.spawnDistance+.5,a=-10*Math.random()-n.spawnDistance;n.enemyCores[e].core.position=new THREE.Vector3(t,o,a)}};return{hordeHalt:n,core:"hordeHalt",SpawnHHGame:()=>{n.target.SpawnCore(),n.hordeHaltUI.SpawnLayer(),p(),n.inScene=!0},DespawnHHGame:()=>{u(),n.target.DespawnCore(),n.hordeHaltUI.DespawnLayer(),n.inScene=!1,e.RemoveFromTracker(n.id)},GameStart:()=>{clearTimeout(n.gameDelay),clearInterval(n.spawnInterval),n.level=1,n.health=5,n.totalKills=0,n.kills=0,n.spawnTotal=1,n.levelKills=10,n.spawnRate=r,n.resumeSpeed=s,n.spawnDistance=20,n.enemyHealth=3,y(),n.hordeHaltUI.GetChild("hordeHaltUI6").ChangeSelf({property:"visible",value:!1}),n.gameStarted=!0,n.hordeHaltUI.GetChild("hordeHaltUI5").ChangeSelf({property:"text",value:{value:"Restart"}}),g()},GameLoop:g,Stun:e=>{n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Stunned"}}),n.enemies[e].stunned=!0,clearTimeout(n.enemies[e].resumeTimeout),n.enemies[e].resumeTimeout=setTimeout((()=>{n.enemyCores[e].EmitEvent("resume"),clearTimeout(n.enemies[e].resumeTimeout)}),n.enemies[e].resumeSpeed)},SlashIn:e=>{n.enemies[e].stunned&&(n.enemies[e].slashStart=!0)},SlashOut:e=>{n.enemies[e].stunned&&n.enemies[e].slashStart&&(n.enemies[e].health--,n.enemies[e].slashStart=!1,n.enemyCores[e].EmitEvent("hit"),n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Hit"}}),n.enemies[e].health<=0&&v(e))},Damage:e=>{n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Damaged"}}),n.health--,n.enemyCores[e].EmitEvent("damage"),n.target.EmitEvent("damage"),n.hordeHaltUI.GetChild("hordeHaltUI3").ChangeSelf({property:"text",value:{value:"Health "+n.health+"\nKills: "+n.kills+"\nLeft: "+(n.levelKills-n.kills)+"\nTotal: "+n.totalKills}}),n.health<=0&&(clearInterval(n.spawnInterval),clearTimeout(n.gameDelay),u(),n.gameStarted=!1,p(n.totalKills),n.hordeHaltUI.GetChild("hordeHaltUI1").ChangeSelf({property:"text",value:{value:"Game Over!"}}),n.hordeHaltUI.GetChild("hordeHaltUI5").ChangeSelf({property:"text",value:{value:"Start"}}))},ToggleClick:(e,t)=>{n.enemyCores[e].GetEl().classList.toggle("clickable",t)},DespawnEnemy:e=>{n.enemyCores[e].DespawnCore()}}},e.AddObjGenToTracker("hordeHalt","SpawnHHGame","DespawnHHGame"),e.hordeHaltGame=e.HordeHaltGame("hordeHaltGame"),e.hordeHaltGameMenuData={id:"hordeHaltGameMenu",game:e.hordeHaltGame.hordeHalt,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game10",gameCabinet:"cadeCab10Layer",outGamePos:new THREE.Vector3(4.25,1.5,-9.75),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.hordeHaltGameMenu=e.GameMenu(e.hordeHaltGameMenuData),e.BasicGame=o=>{let a={};return a.id=o,a.title="Basic",a.instructionsText="How To Play :\n",a.controlsText="Game Controls :\nUse the controller ray and controller click to play the game.",a.previewImage=e.pattern01,a.inScene=!1,e.basicGameColor=e.ColorTheoryGen("#0076ff"),a.highScores=t("Hits",0),a.gameStarted=!1,a.basicObjData={data:"basicObjData",id:"basicObj",sources:!1,text:!1,sounds:{fire:{src:e.confirm1,autoplay:!1,loop:!1,volume:1,on:"fire"},hit:{src:e.confirm2,autoplay:!1,loop:!1,volume:1,on:"mousedown"}},geometry:{primitive:"box",depth:1,width:1,height:1},material:{shader:"standard",color:e.basicGameColor.compl,emissive:e.basicGameColor.compl,emissiveIntensity:.1,opacity:1},position:new THREE.Vector3(0,2,-4),rotation:new THREE.Vector3(0,45,0),scale:new THREE.Vector3(2,2,2),animations:!1,mixins:!1,classes:["a-ent"],components:{mousedownrun__hit:{cursorObj:a.id,component:"null",method:"TargetHit",params:"null"}}},a.basicObj=e.Core(a.basicObjData),a.basicUIData=e.LayerDataFromTemplate(e.uiGameLayerData,"basicUI",{position:new THREE.Vector3(1.5,1.5,0)},!1,!0),a.basicUI=e.Layer("basicUI",a.basicUIData),a.basicUI.layer.all.child0.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child0.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child0.core.core.text.value="Game Ready",a.basicUI.layer.all.child1.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child1.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child1.core.core.text.value="Basic",a.basicUI.layer.all.child2.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child2.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child2.core.core.text.value="Pts : 0",a.basicUI.layer.all.child3.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child3.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child4.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child4.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child4.core.core.components={},a.basicUI.layer.all.child4.core.core.components.clickrun__gamestart={cursorObj:a.id,component:"null",method:"GameStart",params:"null"},a.basicUI.layer.all.child5.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child5.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child5.core.core.text.value="Give Up",a.basicUI.layer.all.child5.core.core.components={},a.basicUI.layer.all.child5.core.core.components.visible=!1,a.basicUI.layer.all.child6.core.core.material.color=e.basicGameColor.compl,a.basicUI.layer.all.child6.core.core.material.emissive=e.basicGameColor.compl,a.basicUI.layer.all.child6.core.core.components={},a.basicUI.layer.all.child6.core.core.components.clickrun__menutoggle={cursorObj:"basicGameMenu",component:"null",method:"ToggleGameMenu",params:"null"},{basic:a,core:"basic",SpawnBasicGame:()=>{a.basicObj.SpawnCore(),a.basicUI.SpawnLayer(),a.inScene=!0},DespawnBasicGame:()=>{a.basicObj.DespawnCore(),a.basicUI.DespawnLayer(),a.inScene=!1,e.RemoveFromTracker(a.id)},GameStart:()=>{console.log("Game Start"),console.log("Reset"),a.gameStarted=!0},TargetHit:()=>{console.log("Hit")}}},e.AddObjGenToTracker("basic","SpawnBasicGame","DespawnBasicGame"),e.basicGame=e.BasicGame("basicGame"),e.basicGameMenuData={id:"basicGameMenu",game:e.basicGame.basic,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game#",gameCabinet:"cadeCab#Layer",outGamePos:new THREE.Vector3(8,1.5,-11.75),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.basicGameMenu=e.GameMenu(e.basicGameMenuData),e.HighScoreBoard=t=>{let o={};return o.id=t,o.inScene=!1,o.boardData={data:"boardData",id:"board",sources:!1,text:{value:"High Scores",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.005,side:"front",wrapCount:25,baseline:"center",align:"left",width:2.75},geometry:{primitive:"plane",width:3,height:3},material:{shader:"standard",color:"#2694ce",emissive:"#2694ce",emissiveIntensity:.75,opacity:1},position:new THREE.Vector3(-5.5,2.25,1.73),rotation:new THREE.Vector3(0,180,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.board=e.Core(o.boardData),o.backBoardData={data:"backBoardData",id:"backBoard",sources:!1,text:!1,geometry:{primitive:"plane",width:3.2,height:3.2},material:{shader:"standard",color:"#FFFFFF",emissive:"#FFFFFF",emissiveIntensity:.5,opacity:1},position:new THREE.Vector3(-5.5,2.25,1.74),rotation:new THREE.Vector3(0,180,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},o.backBoard=e.Core(o.backBoardData),o.allGames=[e.memory,e.swipeLaunchGame,e.guessHitGame,e.dragDiffuseGame,e.sharpShooterGame,e.perfectScaleGame,e.reflex7Game,e.tapItGame,e.popPopGame,e.hordeHaltGame],o.allScores={},o.text="XRcade High Scores\n",{highScoreBoard:o,SpawnBoard:()=>{o.board.SpawnCore(),o.backBoard.SpawnCore(),o.inScene=!0},DespawnBoard:()=>{o.board.DespawnCore(),o.backBoard.DespawnCore(),o.inScene=!1},UpdateBoard:()=>{o.text="XRcade High Scores\n",o.allGames.forEach((e=>{o.allScores[e.core]={},o.allScores[e.core].title=e[e.core].title,o.allScores[e.core].name=e[e.core].highScores.name1,o.allScores[e.core].score=e[e.core].highScores.score1,o.allScores[e.core].type=e[e.core].highScores.type,o.allScores[e.core].acc=e[e.core].highScores.acc,o.text+=e[e.core].title+" : "+e[e.core].highScores.score1.toFixed(e[e.core].highScores.acc)+" "+e[e.core].highScores.type})),o.board.ChangeSelf({property:"text",value:{value:o.text}})}}},e.AddObjGenToTracker("highScoreBoard","SpawnBoard","DespawnBoard"),e.highScoresBoard=e.HighScoreBoard("highScoresBoard"),e.buildMiniGames=()=>{e.memory=e.MemoryGame("memory"),e.memoryGameMenuData={id:"memoryGameMenu",game:e.memory.memory,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game1",gameCabinet:"cadeCab1Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-6.75),inGamePos:new THREE.Vector3(.8,1.5,-1.25)},e.memoryGameMenu=e.GameMenu(e.memoryGameMenuData),e.swipeLaunchGame=e.SwipeLaunchGame("swipeLaunchGame"),e.swipeLaunchGameMenuData={id:"swipeLaunchGameMenu",game:e.swipeLaunchGame.swipeLaunch,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game2",gameCabinet:"cadeCab2Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-8.25),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.swipeLaunchGameMenu=e.GameMenu(e.swipeLaunchGameMenuData),e.guessHitGame=e.GuessHitGame("guessHitGame"),e.guessHitGameMenuData={id:"guessHitGameMenu",game:e.guessHitGame.guessHit,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game3",gameCabinet:"cadeCab3Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-9.75),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.guessHitGameMenu=e.GameMenu(e.guessHitGameMenuData),e.dragDiffuseGame=e.DragDiffuse("dragDiffuseGame"),e.dragDiffuseGameMenuData={id:"dragDiffuseGameMenu",game:e.dragDiffuseGame.dragDiffuse,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game4",gameCabinet:"cadeCab4Layer",outGamePos:new THREE.Vector3(-4.25,1.5,-11.25),inGamePos:new THREE.Vector3(.75,1.5,-.25)},e.dragDiffuseGameMenu=e.GameMenu(e.dragDiffuseGameMenuData),e.sharpShooterGame=e.SharpShooter("sharpShooterGame"),e.sharpShooterGameMenuData={id:"sharpShooterGameMenu",game:e.sharpShooterGame.sharpShooter,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game5",gameCabinet:"cadeCab5Layer",outGamePos:new THREE.Vector3(-2.25,1.5,-13.25),inGamePos:new THREE.Vector3(.5,1.5,.75)},e.sharpShooterGameMenu=e.GameMenu(e.sharpShooterGameMenuData),e.perfectScaleGame=e.PerfectScale("perfectScaleGame"),e.perfectScaleGameMenuData={id:"perfectScaleGameMenu",game:e.perfectScaleGame.perfectScale,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game6",gameCabinet:"cadeCab6Layer",outGamePos:new THREE.Vector3(-.75,1.5,-13.25),inGamePos:new THREE.Vector3(.5,1.5,7.5)},e.perfectScaleGameMenu=e.GameMenu(e.perfectScaleGameMenuData),e.reflex7Game=e.Reflex7("reflex7Game"),e.reflex7GameMenuData={id:"reflex7GameMenu",game:e.reflex7Game.reflex7,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game7",gameCabinet:"cadeCab7Layer",outGamePos:new THREE.Vector3(.75,1.5,-13.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.reflex7GameMenu=e.GameMenu(e.reflex7GameMenuData),e.tapItGame=e.TapIt("tapItGame"),e.tapItGameMenuData={id:"tapItGameMenu",game:e.tapItGame.tapIt,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game8",gameCabinet:"cadeCab8Layer",outGamePos:new THREE.Vector3(2.25,1.5,-13.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.tapItGameMenu=e.GameMenu(e.tapItGameMenuData),e.popPopGame=e.PopPopGame("popPopGame"),e.popPopGameMenuData={id:"popPopGameMenu",game:e.popPopGame.popPop,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game9",gameCabinet:"cadeCab9Layer",outGamePos:new THREE.Vector3(4.25,1.5,-11.25),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.popPopGameMenu=e.GameMenu(e.popPopGameMenuData),e.hordeHaltGame=e.HordeHaltGame("hordeHaltGame"),e.hordeHaltGameMenuData={id:"hordeHaltGameMenu",game:e.hordeHaltGame.hordeHalt,homeZone:"xrcadeZone",homeConnect:"xrcadeHome",gameZone:"xrcadeZone",gameConnect:"game10",gameCabinet:"cadeCab10Layer",outGamePos:new THREE.Vector3(4.25,1.5,-9.75),inGamePos:new THREE.Vector3(.75,1.5,.5)},e.hordeHaltGameMenu=e.GameMenu(e.hordeHaltGameMenuData),e.highScoresBoard=e.HighScoreBoard("highScoresBoard")},e.ToBeRebuilt("buildMiniGames")}}),AFRAME.registerComponent("auxl-rpg",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.Battler=(e,t)=>{let o=Object.assign({},t),a=!1;return{core:o,name:e,life:!0,rank:1,healthPoolMax:10,healthPoolCurr:10,attack:5,defense:3,speed:1,magicProf:1,manaPoolMax:5,manaPoolCurr:5,manaType:7,manaTypeResistance:{type1:!1,type2:!1,type3:!1,type4:!1,type5:!1,type6:!1,type7:!1,type8:!1,type9:!1,type10:!1},altResistance:{aR1:!1},Attack:(e,t)=>{a?(console.log(e.name+" attacks "+t.name+" for "+e.attack+" dmg"),a=!1):console.log(e.name+" missed their attack against "+t.name)},Hurt:(e,t)=>{e.UpdateHealth(e,t),console.log(e.name+" takes "+t+" dmg")},UpdateHealth:(e,t)=>{e.healthPoolCurr-=t,console.log(e.name+"'s health is at "+e.healthPoolCurr),e.healthPoolCurr<=0?(e.life=!1,console.log(e.name+" is dead...")):console.log(e.name+" withstood the attack!")}}};let t={name:"Basic Attack",id:"basicAttack",description:"Basic Attack",manaType:1,rank:1,turns:1,cooldown:1,power:40,accuracy:100,critChance:10,targets:1,manaType:1,moveType:1,castCost:1,effects:!1},o={name:"Special Attack",id:"specialAttack",description:"Special Attack",manaType:1,rank:1,turns:1,cooldown:1,power:60,accuracy:100,critChance:10,targets:1,manaType:1,moveType:1,castCost:1,effects:!1},a={name:"Utility",id:"utility",description:"Utility Move",manaType:1,rank:1,turns:1,cooldown:1,power:25,accuracy:100,critChance:10,targets:1,manaType:1,moveType:1,castCost:1,effects:!1},i={name:"Defend",id:"defend",description:"Defend Move",manaType:1,rank:1,turns:1,cooldown:1,power:10,accuracy:100,critChance:10,targets:1,manaType:1,moveType:1,castCost:1,effects:!1},n=[t.id,o.id,a.id,i.id];e.BattleRef=(r,s,l)=>{let c={};c.poly1=s,c.poly2=l,c.order=[],c.battleStart=!1,c.battleEnd=!1,c.roundStart=!1,c.roundEnd=!1,c.roundPrep=!1,c.rounds=0,c.roundMenuData={id:"battleRoundMenu",prompt:"Ready...",options:{option0:"Basic Attack",option1:"Special Attack",option2:"Utility",option3:"Defend"},actions:{action0:"basicAttack",action1:"specialAttack",action2:"utility",action3:"defend"},data:e.menuBaseData,cursorObj:r,method:"Click",pos:new THREE.Vector3(-.25,1.25,-1.25)};const d=()=>{c.rounds++,console.log("Round "+c.rounds+" Start"),c.order=[],c.poly1.speed>c.poly2.speed?(c.order.push("poly1"),c.order.push("poly2")):c.poly1.speed<c.poly2.speed?(c.order.push("poly2"),c.order.push("poly1")):0===Math.floor(2*Math.random())?(c.order.push("poly1"),c.order.push("poly2")):(c.order.push("poly2"),c.order.push("poly1")),console.log("Round Order :"),console.log(c.order),c.roundMenu=e.Menu(c.roundMenuData),c.roundMenu.SpawnMenu()},p=e=>{let t=n[Math.floor(Math.random()*n.length)];return"poly1"===c.order[0]?h(c.poly1,c.poly2,e):h(c.poly2,c.poly1,t),c.poly1.life&&c.poly2.life?("poly1"===c.order[1]?h(c.poly1,c.poly2,e):h(c.poly2,c.poly1,t),c.poly1.life&&c.poly2.life?(console.log("Round "+c.rounds+" Complete"),d()):m()):m()},h=(e,n,r)=>{let s;switch(r||"basicAttack"){case"basicAttack":console.log("Basic Attack!"),s=JSON.parse(JSON.stringify(t));break;case"specialAttack":s=JSON.parse(JSON.stringify(o)),console.log("Special Attack!");break;case"utility":s=JSON.parse(JSON.stringify(a)),console.log("Utility!");break;case"defend":s=JSON.parse(JSON.stringify(i)),console.log("Defend!");break;default:console.log("Huh????")}{let t=function(e,t,o){console.log(o);let a=1;o.targets>1&&(a=.75);let i=1;2===o.turns?i=.5:o.turns>2&&(i=.25);let n=1;o.critChance,Math.floor(100*Math.random());let r=Math.floor(15*Math.random()+90)/100,s=1;e.manaType===o.manaType&&(s=1.25);let l=((10*o.rank/5+1)*o.power*(e.attack/t.defense)/50+1)*a*i*r*s*1;return Math.floor(l)}(e,n,s);console.log("Total Hit Dmg :"),console.log(t),e.UpdateHealth(e,t)}},m=()=>{console.log("Round "+c.rounds+" Complete"),c.poly1.life?(console.log("poly1 lives"),c.poly2.core.DespawnCore()):(console.log("poly2 lives"),c.poly1.core.DespawnCore()),console.log("Battle Over!")};return{battle:c,Start:()=>{console.log(c.poly1),c.poly1.core.SpawnCore(),c.poly2.core.SpawnCore(),c.battleStart=!0,console.log("Battle Start!"),d()},Round:p,Click:e=>{let t=e.getAttribute("result");c.roundMenu.DespawnMenu(),p(t)}}},e.battlerPet1Build={data:"battler pet 1 build",id:"battlerPet1",sources:!1,text:{value:"O_O",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.135,side:"double"},geometry:{primitive:"box",depth:.25,width:.25,height:.25},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(-1,1.2,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{bobbing:{property:"object3D.position.y",from:.9,to:1.1,dur:7e3,delay:0,loop:"true",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0,pauseEvents:"mouseenter",resumeEvents:"mouseleave"},weaving:{property:"object3D.rotation.y",from:90,to:30,dur:1e4,delay:0,loop:"true",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0},click:{property:"scale",from:"1 1 1",to:"1.25 1.25 1.25",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.battlerPet2Build={data:"battler pet 2 build",id:"battlerPet2",sources:!1,text:{value:"o_o",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.171,side:"double"},geometry:{primitive:"icosahedron",radius:.2,detail:0},material:{shader:"standard",color:"#C14B76",opacity:1,metalness:.2,roughness:.8,emissive:"#C14B76",emissiveIntensity:.6},position:new THREE.Vector3(1,1.13,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{bobbing:{property:"object3D.position.y",from:1.1,to:.9,dur:7e3,delay:2e3,loop:"true",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0,pauseEvents:"mouseenter,attack,hit,death",resumeEvents:"mouseleave, idle"},weaving:{property:"object3D.rotation.y",from:330,to:280,dur:1e4,delay:2e3,loop:"true",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0,pauseEvents:"attack,hit,death",resumeEvents:"idle"},click:{property:"scale",from:"1 1 1",to:"1.25 1.25 1.25",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.battlerPet1Core=e.Core(e.battlerPet1Build),e.battlerPet2Core=e.Core(e.battlerPet2Build),e.battlerPet1=e.Battler("Turq",e.battlerPet1Core),e.battlerPet2=e.Battler("Minera",e.battlerPet2Core),e.cs1B0Data={data:"cs1B0",id:"cs1B0",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,1.5,-.75),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{bobbing:{property:"object3D.position.y",from:1.45,to:1.55,dur:7e3,delay:0,loop:"true",dir:"alternate",easing:"easeInOutSine",elasticity:400,autoplay:!0,enabled:!0},weaving:{property:"object3D.rotation.y",from:170,to:190,dur:1e4,delay:0,loop:"true",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["clickable","a-ent"],components:{}},e.cs1B1Data={data:"cs1B1",id:"cs1B1",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.3,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:360,thetaStart:0},material:{shader:"standard",src:e.pattern08,repeat:"10 10",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{anim1:{property:"material.offset",from:"0 0",to:"10 10",dur:12e4,delay:0,loop:"true",dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:{}},e.cs1B2Data={data:"cs1B2",id:"cs1B2",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.075,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:360,thetaStart:0},material:{shader:"standard",src:e.pattern10,repeat:"5 5",color:"#3EB489",emissive:"#3EB489",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-.5,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{rotate1:{property:"object3D.rotation.y",from:0,to:360,dur:3e4,delay:0,loop:!0,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0},anim1:{property:"material.offset",from:"0 0",to:"-10 -10",dur:6e4,delay:0,loop:"true",dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:{}},e.cs1B3Data={data:"cs1B3",id:"cs1B3",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.075,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:360,thetaStart:0},material:{shader:"standard",src:e.pattern10,repeat:"5 5",color:"#3EB489",emissive:"#3EB489",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(.5,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{rotate1:{property:"object3D.rotation.y",from:0,to:-1080,dur:3e4,delay:0,loop:!0,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0},anim1:{property:"material.offset",from:"0 0",to:"-10 -10",dur:6e4,delay:0,loop:!0,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:{}},e.cs1B0=e.Core(e.cs1B0Data),e.cs1B1=e.Core(e.cs1B1Data),e.cs1B2=e.Core(e.cs1B2Data),e.cs1B3=e.Core(e.cs1B3Data),e.cs1Data={parent:{core:e.cs1B0},child0:{core:e.cs1B1},child1:{core:e.cs1B2},child2:{core:e.cs1B3}},e.cs1=e.Layer("cs1",e.cs1Data),e.newBattle=e.BattleRef("newBattle",e.battlerPet1,e.battlerPet2),e.buildRPG=()=>{e.battlerPet1Core=e.Core(e.battlerPet1Build),e.battlerPet2Core=e.Core(e.battlerPet2Build),e.battlerPet1=e.Battler("Turq",e.battlerPet1Core),e.battlerPet2=e.Battler("Minera",e.battlerPet2Core),e.cs1B0=e.Core(e.cs1B0Data),e.cs1B1=e.Core(e.cs1B1Data),e.cs1B2=e.Core(e.cs1B2Data),e.cs1B3=e.Core(e.cs1B3Data),e.cs1=e.Layer("cs1",e.cs1Data),e.newBattle=e.BattleRef("newBattle",e.battlerPet1,e.battlerPet2)},e.toBeRebuilt("buildRPG")}}),AFRAME.registerComponent("auxsound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var e=this;this.listener=null,this.audioLoader=new THREE.AudioLoader,this.pool=new THREE.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){e.playSound()}},update:function(e){var t,o,a=this.data,i=a.src!==e.src;if(i){if(!a.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)o=this.pool.children[t],a.positional&&(o.setDistanceModel(a.distanceModel),o.setMaxDistance(a.maxDistance),o.setRefDistance(a.refDistance),o.setRolloffFactor(a.rolloffFactor)),o.setLoop(a.loop),o.setLoopStart(a.loopStart),0!==a.loopStart&&0===a.loopEnd?o.setLoopEnd(o.buffer.duration):o.setLoopEnd(a.loopEnd),o.setVolume(a.volume),o.isPaused=!1;if(a.on!==e.on&&this.updateEventListener(e.on),i){var n=this;this.loaded=!1,this.audioLoader.load(a.src,(function(e){for(t=0;t<n.pool.children.length;t++)(o=n.pool.children[t]).setBuffer(e);n.loaded=!0,THREE.Cache.remove(a.src),(n.data.autoplay||n.mustPlay)&&n.playSound(n.processSound),n.el.emit("sound-loaded",n.evtDetail,!1)}))}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var e;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(e=0;e<this.pool.children.length;e++)this.pool.children[e].disconnect()}catch(e){}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var e,t,o=this.el,a=o.sceneEl,i=this;this.pool.children.length>0&&(this.stopSound(),o.removeObject3D("sound"));var n=this.listener=a.audioListener||new THREE.AudioListener;for(a.audioListener=n,a.camera&&a.camera.add(n),a.addEventListener("camera-set-active",(function(e){e.detail.cameraEl.getObject3D("camera").add(n)})),this.pool=new THREE.Group,e=0;e<this.data.poolSize;e++)t=this.data.positional?new THREE.PositionalAudio(n):new THREE.Audio(n),this.pool.add(t);for(o.setObject3D(this.attrName,this.pool),e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).onEnded=function(){this.isPlaying=!1,i.el.emit("sound-ended",i.evtDetail,!1)}},pauseSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(e){var t,o,a;if(!this.loaded)return this.mustPlay=!0,void(this.processSound=e);for(t=!1,this.isPlaying=!0,o=0;o<this.pool.children.length;o++)(a=this.pool.children[o]).isPlaying||!a.buffer||t||(e&&e(a),a.play(),a.isPaused=!1,t=!0);t&&(this.mustPlay=!1,this.processSound=void 0)},stopSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++){if(!(t=this.pool.children[e]).source||!t.source.buffer)return;t.stop()}}}),AFRAME.registerComponent("auxl-third-party",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.TestObj=t=>{let o={};return o.id=t,o.testData={data:"testData",id:"test",sources:!1,text:!1,geometry:{primitive:"box",depth:.5,width:.5,height:.5},material:{shader:"standard",src:e.pattern10,repeat:"1 1",color:"#52a539",emissive:"#52a539",emissiveIntensity:.25,opacity:1},position:new THREE.Vector3(-1.5,2.5,-1.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:{doorway:{zone:"zone0",to:"connect0"}}},o.test=e.Core(o.testData),{testObj:o,SpawnTest:()=>{o.test.SpawnCore()},DespawnTest:()=>{o.test.DespawnCore()},TestMethod:e=>{console.log(e)}}},e.AddObjGenToTracker("testObj","SpawnTest","DespawnTest"),e.test=e.TestObj("test"),e.buildExtra=()=>{e.test=e.TestObj("test")},e.toBeRebuilt("buildExtra")}}),AFRAME.registerShader("threeColorGradientShader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},middleColor:{type:"color",default:"0 1 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 bottomColor;","uniform vec3 middleColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," if (h>0.0) {","   gl_FragColor = vec4( mix( middleColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );"," } else {","   gl_FragColor = vec4( mix( middleColor, bottomColor, max( pow( max(-h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );"," }","}"].join("\n")}),AFRAME.registerComponent("camrender",{schema:{fps:{type:"number",default:90},cid:{type:"string",default:"camRenderer"},height:{type:"number",default:300},width:{type:"number",default:400}},update:function(e){var t=this.data;if(e.cid!==t.cid){var o=document.getElementById(this.data.cid);this.renderer=new THREE.WebGLRenderer({antialias:!0,canvas:o}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.domElement.crossorigin="anonymous"}e.width===t.width&&e.height===t.height||(this.renderer.setSize(t.width,t.height),this.renderer.domElement.height=t.height,this.renderer.domElement.width=t.width),e.fps!==t.fps&&(this.tick=AFRAME.utils.throttleTick(this.tick,1e3/t.fps,this))},tick:function(e,t){this.renderer.render(this.el.sceneEl.object3D,this.el.object3DMap.camera)}}),AFRAME.registerComponent("canvas-updater",{dependencies:["geometry","material"],tick:function(){var e;(e=this.el.getObject3D("mesh").material).map&&(e.map.needsUpdate=!0)}}),AFRAME.registerComponent("ortho",{init:function(){this.oldCam=this.el.components.camera,this.el.addEventListener("render-target-loaded",(()=>{this.originalCamera=this.el.components.camera,this.cameraParent=this.el.parent,this.orthoCamera=new THREE.OrthographicCamera(-1,1,1,-1),this.cameraParent.add(this.orthoCamera),this.el.camera=this.orthoCamera}))},remove:function(){this.cameraParent.remove(this.orthoCamera),this.oldCam.camera=this.originalCamera}}),AFRAME.registerComponent("library",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.mintyGreen="#3EB489",e.mintyPink="#C14B76",e.vaporPink="#ff71ce",e.vaporBlue="#01cdfe",e.vaporGreen="#05ffa1",e.vaporPurple="#b967ff",e.vaporYellow="#fffb96",e.grassMaterial={shader:"standard",color:"#55be71",opacity:1,metalness:.1,roughness:.9,emissive:"#397e4b",emissiveIntensity:.2},e.waterMaterial={shader:"standard",color:"#55a5be",opacity:1,metalness:.1,roughness:.9,emissive:"#65c3e0",emissiveIntensity:.2},e.nullParentData={data:"nullParent",id:"nullParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["nullParent","a-ent"],components:!1},e.menuBaseData={data:"menu part",id:"menuBaseTemp",sources:!1,text:{value:"Hmmm...",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:{primitive:"box",depth:.04,width:.4,height:.15},material:{shader:"standard",color:"#2694ce",opacity:1,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"},click2:{property:"material.emissiveIntensity",from:"0.6",to:"0.8",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:{stare:{id:"playerRig"}}},e.menuCylinderData={data:"menuCylinderData",id:"menuCylinder",sources:!1,text:{value:"Menu",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:.9},geometry:{primitive:"circle",radius:.25,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:.9,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.menuHoverData={data:"menuHoverData",id:"menuHover",sources:!1,text:{value:"Menu",wrapCount:40,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:!1,material:!1,position:new THREE.Vector3(0,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.menuPlaneHideData={data:"menuPlaneHideData",id:"menuPlaneHide",sources:!1,text:!1,geometry:{primitive:"plane",width:.5,height:.125},material:{shader:"standard",color:"#cbcbcb",opacity:.9,metalness:.2,roughness:.8,emissive:"#cbcbcb",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(0,-.1625,-.01),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.menuCylinderAltData={data:"menuCylinderAltData",id:"menuCylinderAlt",sources:!1,text:{value:"Menu",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:.8},geometry:{primitive:"circle",radius:.375,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#2694ce",opacity:.8,metalness:.2,roughness:.8,emissive:"#2694ce",emissiveIntensity:.6,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.buildCoreData={data:"buildCoreData",id:"buildCore",sources:!1,text:{value:"Menu",wrapCount:20,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:{primitive:"circle",radius:.25,segments:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#c1664b",opacity:1,metalness:.2,roughness:.8,emissive:"#c1664b",emissiveIntensity:.4,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{hoveron:{property:"components.material.material.emissiveIntensity",from:.4,to:.6,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"components.material.material.emissiveIntensity",from:.6,to:.4,dur:125,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click1:{property:"scale",from:"1 1 1",to:"1.05 1.05 1.05",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.buildHoverData={data:"buildHoverData",id:"buildHover",sources:!1,text:{value:"Menu",wrapCount:40,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center"},geometry:!1,material:!1,position:new THREE.Vector3(0,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.playerRigData={data:"playerRigData",id:"playerRig",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{auxcontroller:null,locomotion:{uiid:!1,courserid:"mouseController",movetype:"desktop"},light:{type:"point",intensity:.075,distance:5,decay:.75}}},e.playerRig=e.Core(e.playerRigData),e.playerBodyData={data:"playerBodyData",id:"playerBody",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,1,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:!1},e.playerBody=e.Core(e.playerBodyData),e.playerHeadData={data:"Player Head",id:"playerHead",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"]},e.playerHead=e.Core(e.playerHeadData),e.headRigData={data:"headRigData",id:"headRig",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:!1},e.headRig=e.Core(e.headRigData),e.cameraData={data:"Camera Entity",id:"camera",entity:"preAdded",position:new THREE.Vector3(0,1.6,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{"look-controls":{enabled:!0,reverseMouseDrag:!1,reverseTouchDrag:!1,touchEnabled:!0,mouseEnabled:!0,pointerLockEnabled:!0,magicWindowTrackingEnabled:!0},"wasd-controls":{enabled:!1}}},e.camera=e.Core(e.cameraData),e.cameraUIData={data:"Camera UI",id:"cameraUI",sources:!1,text:{value:"Message",width:.5,color:"#FFFFFF",align:"center",font:"exo2bold",side:"double",opacity:0},geometry:{primitive:"plane",width:.3,height:.15},material:{shader:"flat",color:"#ac2d2d",opacity:.69,side:"double"},position:new THREE.Vector3(0,.05,-.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{opacinbk:{property:"components.material.material.opacity",from:0,to:.82,dur:500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"cameraMsg"},opacoutbk:{property:"components.material.material.opacity",from:.82,to:0,dur:500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"cameraMsgFadeOut",pauseEvents:"cameraMsg"},opacintxt:{property:"text.opacity",from:0,to:.82,dur:500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"cameraMsg"},opacouttxt:{property:"text.opacity",from:.82,to:0,dur:500,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"cameraMsgFadeOut",pauseEvents:"cameraMsg"}},mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.cameraUI=e.Core(e.cameraUIData),e.mouseControllerData={data:"Mouse Controller",id:"mouseController",sources:!1,text:!1,geometry:{primitive:"plane",width:.002,height:.002},material:{shader:"flat",color:"#ac2d2d",opacity:.42,side:"double"},position:new THREE.Vector3(0,0,-.1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{click:{property:"components.material.material.opacity",from:.42,to:.82,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mousedown"},clickreset:{property:"components.material.material.opacity",from:.82,to:.42,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseup"}},mixins:!1,classes:["a-ent","player","clickable"],components:{raycaster:{enabled:"true",autoRefresh:"true",objects:".clickable",far:"Infinity",near:.15,interval:0,lineColor:"red",lineOpacity:.5,showLine:"false",useWorldCoordinates:"false"}}},e.mouseController=e.Core(e.mouseControllerData),e.mouseControllerUIData={data:"mouseControllerUIData",id:"mouseControllerUI",geometry:{primitive:"ring",radiusInner:.005,radiusOuter:.01,segmentsPhi:1,segmentsTheta:12,thetaStart:90,thetaLength:0},material:{shader:"flat",color:"#ac2d2d",opacity:.8,side:"double"},position:new THREE.Vector3(0,0,-.25),rotation:new THREE.Vector3(0,180,0),scale:new THREE.Vector3(.88,1,.88),animations:{charge0:{property:"start",from:0,to:1,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charge"},charge1:{property:"geometry.thetaLength",from:360,to:0,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge0, animationcomplete__charge4",pauseEvents:"charged, reset"},charge2:{property:"rotation",from:"0 180 0",to:"0 0 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge1",pauseEvents:"charged, reset"},charge3:{property:"geometry.thetaLength",from:0,to:360,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge2",pauseEvents:"charged, reset"},charge4:{property:"rotation",from:"0 0 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge3",pauseEvents:"charged, reset"},charged0:{property:"geometry.radiusInner",from:.005,to:0,dur:1e3,delay:0,loop:"true",dir:"alternate",easing:"easeInOutCubic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},charged1:{property:"geometry.thetaLength",from:360,to:360,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},chargereset0:{property:"geometry.thetaLength",to:0,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset1:{property:"rotation",from:"0 180 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset2:{property:"geometry.radiusInner",from:.005,to:.005,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"}},mixins:!1,classes:["a-ent","player"],components:{visible:"true"}},e.mouseControllerUI=e.Core(e.mouseControllerUIData),e.vrController1Data={data:"vrController1Data",id:"vrController1",position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),classes:["a-ent","player"],components:{visible:"false"}},e.vrController1=e.Core(e.vrController1Data),e.vrController1UIData={data:"vrController1UIData",id:"vrController1UI",sources:!1,text:{value:"...",width:.5,color:"#FFFFFF",align:"center",font:"exo2bold"},geometry:{primitive:"plane",width:.25,height:.1},material:{shader:"flat",color:"#ac2d2d",opacity:.75,side:"double"},position:new THREE.Vector3(0,-.25,-.25),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{visible:"false"}},e.vrController1UI=e.Core(e.vrController1UIData),e.vrController1CursorData={data:"vrController1CursorData",id:"vrController1Cursor",geometry:{primitive:"ring",radiusInner:.005,radiusOuter:.01,segmentsPhi:1,segmentsTheta:12,thetaStart:90,thetaLength:0},material:{shader:"flat",color:"#ac2d2d",opacity:.8,side:"double"},position:new THREE.Vector3(0,0,-.25),rotation:new THREE.Vector3(0,180,0),scale:new THREE.Vector3(.88,1,.88),animations:{charge0:{property:"start",from:0,to:1,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charge"},charge1:{property:"geometry.thetaLength",from:360,to:0,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge0, animationcomplete__charge4",pauseEvents:"charged, reset"},charge2:{property:"rotation",from:"0 180 0",to:"0 0 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge1",pauseEvents:"charged, reset"},charge3:{property:"geometry.thetaLength",from:0,to:360,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge2",pauseEvents:"charged, reset"},charge4:{property:"rotation",from:"0 0 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge3",pauseEvents:"charged, reset"},charged0:{property:"geometry.radiusInner",from:.005,to:0,dur:1e3,delay:0,loop:"true",dir:"alternate",easing:"easeInOutCubic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},charged1:{property:"geometry.thetaLength",from:360,to:360,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},chargereset0:{property:"geometry.thetaLength",to:0,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset1:{property:"rotation",from:"0 180 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset2:{property:"geometry.radiusInner",from:.005,to:.005,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"}},mixins:!1,classes:["a-ent","player"],components:{visible:"false"}},e.vrController1Cursor=e.Core(e.vrController1CursorData),e.vrController2Data={data:"vrController2Data",id:"vrController2",position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),classes:["a-ent","player"],components:{visible:"false"}},e.vrController2=e.Core(e.vrController2Data),e.vrController2UIData={data:"vrController2UIData",id:"vrController2UI",sources:!1,text:{value:"...",width:.5,color:"#FFFFFF",align:"center",font:"exo2bold"},geometry:{primitive:"plane",width:.25,height:.1},material:{shader:"flat",color:"#ac2d2d",opacity:.75,side:"double"},position:new THREE.Vector3(0,-.25,-.25),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{visible:"false"}},e.vrController2UI=e.Core(e.vrController2UIData),e.vrController2CursorData={data:"vrController2CursorData",id:"vrController2Cursor",geometry:{primitive:"ring",radiusInner:.005,radiusOuter:.01,segmentsPhi:1,segmentsTheta:12,thetaStart:90,thetaLength:0},material:{shader:"flat",color:"#ac2d2d",opacity:.8,side:"double"},position:new THREE.Vector3(0,0,-.25),rotation:new THREE.Vector3(0,180,0),scale:new THREE.Vector3(.88,1,.88),animations:{charge0:{property:"start",from:0,to:1,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charge"},charge1:{property:"geometry.thetaLength",from:360,to:0,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge0, animationcomplete__charge4",pauseEvents:"charged, reset"},charge2:{property:"rotation",from:"0 180 0",to:"0 0 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge1",pauseEvents:"charged, reset"},charge3:{property:"geometry.thetaLength",from:0,to:360,dur:1e3,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge2",pauseEvents:"charged, reset"},charge4:{property:"rotation",from:"0 0 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__charge3",pauseEvents:"charged, reset"},charged0:{property:"geometry.radiusInner",from:.005,to:0,dur:1e3,delay:0,loop:"true",dir:"alternate",easing:"easeInOutCubic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},charged1:{property:"geometry.thetaLength",from:360,to:360,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"charged",pauseEvents:"reset, charge"},chargereset0:{property:"geometry.thetaLength",to:0,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset1:{property:"rotation",from:"0 180 0",to:"0 180 0",dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"},chargereset2:{property:"geometry.radiusInner",from:.005,to:.005,dur:0,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset, charge"}},mixins:!1,classes:["a-ent","player"],components:{visible:"false"}},e.vrController2Cursor=e.Core(e.vrController2CursorData),e.playerBeltUIData={data:"playerBeltUIData",id:"playerBeltUI",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,.3,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{"look-at-xyz":{match:"camera",x:!1,y:!0,z:!1}}},e.playerBeltUI=e.Core(e.playerBeltUIData),e.playerBeltTextData={data:"playerBeltTextData",id:"playerBeltText",sources:!1,text:{value:"Hello World!",color:"#FFFFFF",align:"left",font:"exo2bold",width:.9,zOffset:.03,side:"front",wrapCount:45,baseline:"center"},geometry:{primitive:"box",depth:.025,width:1,height:.25},material:{shader:"standard",color:"#4bb8c1",opacity:.75,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,.69,-.6),rotation:new THREE.Vector3(-30,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{visible:!1}},e.playerBeltText=e.Core(e.playerBeltTextData),e.playerBeltTitleTextData={data:"playerBeltTitleTextData",id:"playerBeltTitleText",sources:!1,text:{value:"Read",color:"#FFFFFF",align:"left",font:"exo2bold",width:.225,zOffset:.03,side:"front",wrapCount:16,baseline:"center"},geometry:{primitive:"box",depth:.05,width:.25,height:.05},material:{shader:"standard",color:"#4bb8c1",opacity:.75,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(-.35,.15,.1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{visible:!1}},e.playerBeltTitleText=e.Core(e.playerBeltTitleTextData),e.playerFloorData={data:"Player Floor",id:"playerFloor",sources:!1,text:{value:"N\nW         E\nS",width:7,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.01,side:"double"},geometry:{primitive:"circle",radius:.69,segments:32,thetaStart:0,thetaLength:360},material:{shader:"flat",repeat:"1 1",color:"#3EB489",opacity:.42,side:"double"},position:new THREE.Vector3(0,.05,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.playerFloor=e.Core(e.playerFloorData),e.playerAudioData={data:"playerAudioData",id:"playerAudio",position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:!1},e.playerAudio=e.Core(e.playerAudioData),e.fadeScreenData={data:"Fade Screen",id:"fadeScreen",sources:!1,text:!1,geometry:{primitive:"plane",width:1,height:.5},material:{shader:"flat",color:"#000000",opacity:0},position:new THREE.Vector3(0,0,-.15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{fadein:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fade"},fadeout:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fade"},fadeinquick:{property:"components.material.material.opacity",from:0,to:1,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fadequick"},fadeoutquick:{property:"components.material.material.opacity",from:1,to:0,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fadequick"},fadeinscene:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fadeScene1"},fadeoutscene:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"fadeScene2"}},mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.fadeScreen=e.Core(e.fadeScreenData),e.sphereScreenData={data:"Sphere Screen",id:"sphereScreen",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.125,segmentsWidth:36,segmentsHeight:18,phiLength:360,phiStart:0,thetaLength:0,thetaStart:90},material:{shader:"flat",color:"#000000",opacity:1,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{spherein1:{property:"geometry.thetaLength",from:0,to:180,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphere"},spherein2:{property:"geometry.thetaStart",from:90,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphere"},sphereout1:{property:"geometry.thetaLength",from:180,to:0,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphere"},sphereout2:{property:"geometry.thetaStart",from:0,to:90,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphere"},spherein1quick:{property:"geometry.thetaLength",from:0,to:180,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spherequick"},spherein2quick:{property:"geometry.thetaStart",from:90,to:0,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spherequick"},sphereout1quick:{property:"geometry.thetaLength",from:180,to:0,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spherequick"},sphereout2quick:{property:"geometry.thetaStart",from:0,to:90,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"spherequick"},spherein1scene:{property:"geometry.thetaLength",from:0,to:180,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphereScene1"},spherein2scene:{property:"geometry.thetaStart",from:90,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphereScene1"},sphereout1scene:{property:"geometry.thetaLength",from:180,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphereScene2"},sphereout2scene:{property:"geometry.thetaStart",from:0,to:90,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sphereScene2"}},mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.sphereScreen=e.Core(e.sphereScreenData),e.blink1ScreenData={data:"Blink 1 Screen",id:"blink1Screen",sources:!1,text:!1,geometry:{primitive:"plane",width:5,height:2},material:{shader:"flat",color:"#000000",opacity:0,side:"double"},position:new THREE.Vector3(0,2.5,-.15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{blinkin:{property:"object3D.position.y",from:2.5,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkopacin:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkout:{property:"object3D.position.y",from:1,to:2.5,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkopacout:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkinquick:{property:"object3D.position.y",from:2.5,to:1,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkopacinquick:{property:"components.material.material.opacity",from:0,to:1,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkoutquick:{property:"object3D.position.y",from:1,to:2.5,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkopacoutquick:{property:"components.material.material.opacity",from:1,to:0,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkinscene:{property:"object3D.position.y",from:2.5,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene1"},blinkopacinscene:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene1"},blinkoutscene:{property:"object3D.position.y",from:1,to:2.5,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene2"},blinkopacoutscene:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene2"}},mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.blink1Screen=e.Core(e.blink1ScreenData),e.blink2ScreenData={data:"Blink 2 Screen",id:"blink2Screen",sources:!1,text:!1,geometry:{primitive:"plane",width:5,height:2},material:{shader:"flat",color:"#000000",opacity:0,side:"double"},position:new THREE.Vector3(0,-2.5,-.15),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{blinkin:{property:"object3D.position.y",from:-2.5,to:-1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkopacin:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkout:{property:"object3D.position.y",from:-1,to:-2.5,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkopacout:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:800,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blink"},blinkinquick:{property:"object3D.position.y",from:-2.5,to:-1,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkopacinquick:{property:"components.material.material.opacity",from:0,to:1,dur:200,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkoutquick:{property:"object3D.position.y",from:-1,to:-2.5,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkopacoutquick:{property:"components.material.material.opacity",from:1,to:0,dur:200,delay:300,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkquick"},blinkinscene:{property:"object3D.position.y",from:-2.5,to:-1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene1"},blinkopacinscene:{property:"components.material.material.opacity",from:0,to:1,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene1"},blinkoutscene:{property:"object3D.position.y",from:-1,to:-2.5,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene2"},blinkopacoutscene:{property:"components.material.material.opacity",from:1,to:0,dur:400,delay:0,loop:"false",dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"blinkScene2"}},mixins:!1,classes:["a-ent","player"],components:{visible:!1}},e.blink2Screen=e.Core(e.blink2ScreenData),e.playerAll={parent:{core:e.playerRig},child0:{parent:{core:e.playerBody},child0:{parent:{core:e.playerHead},child0:{parent:{core:e.headRig},child0:{parent:{core:e.camera},child0:{core:e.mouseController},child1:{core:e.mouseControllerUI},child2:{core:e.cameraUI},child3:{core:e.fadeScreen},child4:{core:e.sphereScreen},child5:{core:e.blink1Screen},child6:{core:e.blink2Screen}},child1:{parent:{core:e.vrController1},child0:{core:e.vrController1Cursor},child1:{core:e.vrController1UI}},child2:{parent:{core:e.vrController2},child0:{core:e.vrController2Cursor},child1:{core:e.vrController2UI}}},child1:{core:e.playerAudio},child2:{parent:{core:e.playerBeltUI},child0:{parent:{core:e.playerBeltText},child0:{core:e.playerBeltTitleText}}}}},child1:{core:e.playerFloor}},e.playerLayer=e.Layer("playerLayer",e.playerAll),e.avatarRigData={data:"avatarRigData",id:"avatarRig",sources:!1,text:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,1,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"]},e.avatarRig=e.Core(e.avatarRigData),e.avatarHand1Data={data:"avatarHand1Data",id:"avatarHand1",sources:!1,text:!1,geometry:{primitive:"box",depth:.07,width:.07,height:.07},material:{shader:"standard",color:"#c14b6b",opacity:.75,metalness:.2,roughness:.8,emissive:"#c14b6b",emissiveIntensity:.6},position:new THREE.Vector3(-.35,.6,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarHand1=e.Core(e.avatarHand1Data),e.avatarHand2Data={data:"avatarHand2Data",id:"avatarHand2",sources:!1,text:!1,geometry:{primitive:"box",depth:.07,width:.07,height:.07},material:{shader:"standard",color:"#4b7dc1",opacity:1,metalness:.2,roughness:.8,emissive:"#4b7dc1",emissiveIntensity:.6},position:new THREE.Vector3(.35,.6,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarHand2=e.Core(e.avatarHand2Data),e.avatarTorsoData={data:"avatarTorsoData",id:"avatarTorso",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.15,height:1.3,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"flat",opacity:0},position:new THREE.Vector3(0,.65,0),rotation:new THREE.Vector3(0,1,0),scale:new THREE.Vector3(1,1,1),animations:!1,components:{"look-at-xyz":{buffer:.25,drag:.1,match:"camera",x:!1,y:!0,z:!1,reverse:!1}},mixins:!1,classes:["a-ent","avatar"]},e.avatarTorso=e.Core(e.avatarTorsoData),e.avatarBody0Data={data:"avatarBody0Data",id:"avatarBody0",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.25,phiStart:0,phiLength:180,segmentsWidth:16,segmentsHeight:16,thetaStart:0,thetaLength:180},material:{shader:"standard",color:"#EF2D5E",emissive:"#EF2D5E",emissiveIntensity:.25,opacity:1,side:"front",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarBody0=e.Core(e.avatarBody0Data),e.avatarBody1Data={data:"avatarBody1Data",id:"avatarBody1",sources:!1,text:!1,geometry:{primitive:"cone",height:.1,radiusBottom:.25,radiusTop:.2,segmentsHeight:3,segmentsRadial:32,openEnded:!1,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#EF2D5E",emissive:"#EF2D5E",emissiveIntensity:.25,opacity:1,side:"front",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.05,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarBody1=e.Core(e.avatarBody1Data),e.avatarBody2Data={data:"avatarBody2Data",id:"avatarBody2",sources:!1,text:!1,geometry:{primitive:"cone",height:.25,radiusBottom:.1,radiusTop:.2,segmentsHeight:3,segmentsRadial:32,openEnded:!1,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#EF2D5E",emissive:"#EF2D5E",emissiveIntensity:.25,opacity:1,side:"front",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.225,0),rotation:new THREE.Vector3(180,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarBody2=e.Core(e.avatarBody2Data),e.avatarBody3Data={data:"avatarBody3Data",id:"avatarBody3",sources:!1,text:!1,geometry:{primitive:"cone",height:.275,radiusBottom:.1,radiusTop:0,segmentsHeight:3,segmentsRadial:32,openEnded:!1,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#EF2D5E",emissive:"#EF2D5E",emissiveIntensity:.25,opacity:1,side:"front",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.487,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarBody3=e.Core(e.avatarBody3Data),e.avatarBody4Data={data:"avatarBody4Data",id:"avatarBody4",sources:!1,text:!1,geometry:{primitive:"torus",radius:.21,radiusTubular:.025,segmentsRadial:36,segmentsTubular:32},material:{shader:"standard",color:"#F2E646",emissive:"#F2E646",emissiveIntensity:.25,opacity:1,side:"front",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1.5),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.avatarBody4=e.Core(e.avatarBody4Data),e.avatarHeadData={data:"avatarHeadData",id:"avatarHead",sources:!1,text:!1,geometry:{primitive:"dodecahedron",radius:.15,detail:1},material:{shader:"standard",color:"#c14b6b",opacity:.9,metalness:.2,roughness:.8,emissive:"#c14b6b",emissiveIntensity:.6},position:new THREE.Vector3(0,1.6,0),rotation:new THREE.Vector3(0,1,0),scale:new THREE.Vector3(1,1,1),animations:!1,components:{visible:!1,"look-at-xyz":{match:"camera",x:!0,y:!0,z:!0,reverse:!1}},mixins:!1,classes:["a-ent","avatar"]},e.avatarHead=e.Core(e.avatarHeadData),e.avatarBackpackData={data:"avatarBackpackData",id:"avatarBackpack",sources:!1,text:!1,geometry:{primitive:"ring",radiusInner:.2,radiusOuter:.275,segmentsPhi:8,segmentsTheta:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#F2E646",emissive:"#F2E646",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.275,-.25),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarBackpack=e.Core(e.avatarBackpackData),e.avatarFeetData={data:"avatarFeetData",id:"avatarFeet",sources:!1,text:!1,geometry:{primitive:"ring",radiusInner:.2,radiusOuter:.275,segmentsPhi:8,segmentsTheta:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#F2E646",emissive:"#F2E646",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:!1},e.avatarFeet=e.Core(e.avatarFeetData),e.avatarHoverData={data:"avatarHoverData",id:"avatarHover",sources:!1,text:{value:"Avatar",width:.95,color:"#FFFFFF",align:"center",font:"exo2bold",wrapCount:12,zOffset:.251},geometry:{primitive:"octahedron",radius:.25,detail:0},material:{shader:"standard",color:"#c1664b",opacity:.8,metalness:.2,roughness:.8,emissive:"#c1664b",emissiveIntensity:.6,blending:"subtractive"},position:new THREE.Vector3(0,3.75,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1.5,1),animations:!1,mixins:!1,classes:["a-ent","avatar"],components:{visible:!1}},e.avatarHover=e.Core(e.avatarHoverData),e.avatarData={parent:{core:e.avatarRig},child0:{core:e.avatarHand1},child1:{core:e.avatarHand2},child2:{parent:{core:e.avatarTorso},child0:{core:e.avatarBody0},child1:{core:e.avatarBody1},child2:{core:e.avatarBody2},child3:{core:e.avatarBody3},child4:{core:e.avatarBody4}},child3:{core:e.avatarHead},child4:{core:e.avatarFeet},child5:{core:e.avatarHover}},e.avatar=e.Layer("avatar",e.avatarData),e.player=e.Player("player",e.playerLayer),e.beltUIParentData={data:"beltUIParentData",id:"beltUIParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["nullParent","a-ent"],components:!1},e.beltUIParent=e.Core(e.beltUIParentData),e.locomotionForwardUIData={data:"locomotionForwardUIData",id:"locomotionForwardUI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.4,radiusBottom:1.5,radiusTop:2,segmentsHeight:6,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"flat",color:"#5c174b",opacity:.3,side:"double"},position:new THREE.Vector3(0,.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:1,to:.25,dur:1250,delay:250,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.25,to:1,dur:700,delay:100,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.locomotionForwardUI=e.Core(e.locomotionForwardUIData),e.locomotionReverseUIData={data:"locomotionReverseUIData",id:"locomotionReverseUI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.001,radiusBottom:1.25,radiusTop:1.5,segmentsHeight:1,segmentsRadial:24,thetaStart:0,thetaLength:360},material:{shader:"flat",color:"#46113a",opacity:.3,side:"double"},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:.75,to:.1,dur:1150,delay:350,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.1,to:.75,dur:700,delay:250,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.locomotionReverseUI=e.Core(e.locomotionReverseUIData),e.locomotionBrake1UIData={data:"locomotionBrake1UIData",id:"locomotionBrake1UI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.01,radiusBottom:.75,radiusTop:1,segmentsHeight:1,segmentsRadial:8,thetaStart:0,thetaLength:30},material:{shader:"flat",color:"red",opacity:.3,side:"double"},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:.5,to:.1,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.1,to:.5,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent","directionBrake"],components:!1},e.locomotionBrake1UI=e.Core(e.locomotionBrake1UIData),e.locomotionBrake2UIData={data:"locomotionBrake2UIData",id:"locomotionBrake2UI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.01,radiusBottom:.75,radiusTop:1,segmentsHeight:1,segmentsRadial:8,thetaStart:90,thetaLength:30},material:{shader:"flat",color:"red",opacity:.3,side:"double"},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:.5,to:.1,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.1,to:.5,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent","directionBrake"],components:!1},e.locomotionBrake2UI=e.Core(e.locomotionBrake2UIData),e.locomotionBrake3UIData={data:"locomotionBrake3UIData",id:"locomotionBrake3UI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.01,radiusBottom:.75,radiusTop:1,segmentsHeight:1,segmentsRadial:8,thetaStart:180,thetaLength:30},material:{shader:"flat",color:"red",opacity:.3,side:"double"},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:.5,to:.1,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.1,to:.5,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent","directionBrake"],components:!1},e.locomotionBrake3UI=e.Core(e.locomotionBrake3UIData),e.locomotionBrake4UIData={data:"locomotionBrake4UIData",id:"locomotionBrake4UI",sources:!1,text:!1,geometry:{primitive:"cone",openEnded:!0,height:.01,radiusBottom:.75,radiusTop:1,segmentsHeight:1,segmentsRadial:8,thetaStart:270,thetaLength:30},material:{shader:"flat",color:"red",opacity:.3,side:"double"},position:new THREE.Vector3(0,.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{brakeon:{property:"object3D.position.y",from:.5,to:.1,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOn"},brakeoff:{property:"object3D.position.y",from:.1,to:.5,dur:1050,delay:450,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"brakeOff"}},mixins:!1,classes:["clickable","a-ent","directionBrake"],components:!1},e.locomotionBrake4UI=e.Core(e.locomotionBrake4UIData),e.locomotionUIAllData={parent:{core:e.beltUIParent},child0:{core:e.locomotionForwardUI},child1:{core:e.locomotionReverseUI},child2:{core:e.locomotionBrake1UI},child3:{core:e.locomotionBrake2UI},child4:{core:e.locomotionBrake3UI},child5:{core:e.locomotionBrake4UI}},e.locomotionUILayer=e.Layer("locomotionUILayer",e.locomotionUIAllData),e.roamCameraRigData={data:"roamCameraRigData",id:"roamCameraRig",entity:"preAdded",position:new THREE.Vector3(0,.06,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:!1},e.roamCameraRig=e.Core(e.roamCameraRigData),e.roamCameraData={data:"roamCameraData",id:"roamCamera",entity:"preAdded",position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","player"],components:{camera:{active:!0,fov:80,near:.005,far:1e4,zoom:1},camrender:"cid: roamCameraCanvas; height: 300; width: 400;"}},e.roamCamera=e.Core(e.roamCameraData),e.roamCameraViewerData={data:"roamCameraViewerData",id:"roamCameraViewer",sources:!1,text:!1,geometry:{primitive:"plane",width:.33,height:.25},material:{src:"#roamCameraCanvas",repeat:"1 1",opacity:.42,shader:"flat"},position:new THREE.Vector3(-.2,-.2,-.4),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{"canvas-updater":null}},e.roamCameraViewer=e.Core(e.roamCameraViewerData),e.ghostParentData={data:"ghostParentData",id:"ghostParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(2,1.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.ghostParent=e.Core(e.ghostParentData),e.ghostAllData={data:"ghostAllData",id:"ghostAll",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,.25),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.5,.5,.5),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.ghostAll=e.Core(e.ghostAllData),e.eye1SocketData={data:"eye1SocketData",id:"eye1Socket",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.175,height:.0125,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#fcfafd",emissive:"#fcfafd",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(-.15,.1,.4),rotation:new THREE.Vector3(90,0,0),scale:new THREE.Vector3(.75,1,1),animations:{powerup1:{property:"material.color",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerup2:{property:"material.emissive",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown1:{property:"material.color",to:"#fcfafd",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"},powerdown2:{property:"material.emissive",to:"#fcfafd",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["a-ent"],components:!1},e.eye1Socket=e.Core(e.eye1SocketData),e.eye2SocketData=e.CoreDataFromTemplate(e.eye1SocketData,{id:"eye2Socket",position:new THREE.Vector3(.15,.1,.4)},!0),e.eye2Socket=e.Core(e.eye2SocketData),e.eye1PupilData={data:"eye1PupilData",id:"eye1Pupil",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.1,height:.025,openEnded:!1,segmentsHeight:2,segmentsRadial:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#1500fa",emissive:"#1500fa",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.01,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1.25,1,1),animations:{lookdown:{property:"position",to:new THREE.Vector3(0,.01,.07),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookDown"},lookup:{property:"position",to:new THREE.Vector3(0,.01,-.07),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookUp"},lookright:{property:"position",to:new THREE.Vector3(.05,.01,0),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookRight"},lookleft:{property:"position",to:new THREE.Vector3(-.05,.01,0),dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"lookLeft"},lookloop0:{property:"position",to:new THREE.Vector3(0,.01,0),dur:0,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0},lookloop1:{property:"position",to:new THREE.Vector3(0,.01,.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop0, animationcomplete__lookloop8"},lookloop2:{property:"position",to:new THREE.Vector3(0,.01,-.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop1"},lookloop3:{property:"position",to:new THREE.Vector3(-.05,.01,.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop2"},lookloop4:{property:"position",to:new THREE.Vector3(.05,.01,.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop3"},lookloop5:{property:"position",to:new THREE.Vector3(-.05,.01,-.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop4"},lookloop6:{property:"position",to:new THREE.Vector3(.05,.01,-.07),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop5"},lookloop7:{property:"position",to:new THREE.Vector3(0,.01,0),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop6"},lookloop8:{property:"position",to:new THREE.Vector3(0,.01,0),dur:1500,delay:3e3,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"animationcomplete__lookloop7"},powerup1:{property:"material.color",to:"#fcfafd",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerup2:{property:"material.emissive",to:"#fcfafd",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown1:{property:"material.color",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"},powerdown2:{property:"material.emissive",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["a-ent"],components:!1},e.eye1Pupil=e.Core(e.eye1PupilData),e.eye2PupilData=e.CoreDataFromTemplate(e.eye1PupilData,{id:"eye2Pupil"},!0),e.eye2Pupil=e.Core(e.eye2PupilData),e.mouthData={data:"mouthData",id:"mouth",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{powerup:{property:"visible",to:!0,dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown:{property:"visible",to:!1,dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["a-ent"],components:{visible:!1,line:{start:new THREE.Vector3(-.3,-.2,.41),end:new THREE.Vector3(-.2,-.15,.41),color:"white"},line__2:{start:new THREE.Vector3(-.2,-.15,.41),end:new THREE.Vector3(-.1,-.2,.41),color:"white"},line__3:{start:new THREE.Vector3(-.1,-.2,.41),end:new THREE.Vector3(0,-.15,.41),color:"white"},line__4:{start:new THREE.Vector3(0,-.15,.41),end:new THREE.Vector3(.1,-.2,.41),color:"white"},line__5:{start:new THREE.Vector3(.1,-.2,.41),end:new THREE.Vector3(.2,-.15,.41),color:"white"},line__6:{start:new THREE.Vector3(.2,-.15,.41),end:new THREE.Vector3(.3,-.2,.41),color:"white"}}},e.mouth=e.Core(e.mouthData),e.spinData={data:"spinData",id:"spin",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,-.1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{rotate:{property:"object3D.rotation.y",from:0,to:360,dur:1500,delay:0,loop:!0,dir:"normal",easing:"linear",elasticity:400,autoplay:!0,enabled:!0}},mixins:!1,classes:["a-ent"],components:!1},e.spin=e.Core(e.spinData),e.headData={data:"headData",id:"head",sources:!1,text:!1,geometry:{primitive:"sphere",radius:.4,phiStart:0,phiLength:180,segmentsWidth:16,segmentsHeight:16,thetaStart:0,thetaLength:180},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,.15,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{powerup1:{property:"material.color",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerup2:{property:"material.emissive",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown1:{property:"material.color",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"},powerdown2:{property:"material.emissive",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.head=e.Core(e.headData),e.bodyData={data:"bodyData",id:"body",sources:!1,text:!1,geometry:{primitive:"cylinder",radius:.4,height:.3,openEnded:!1,segmentsHeight:2,segmentsRadial:32,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{powerup1:{property:"material.color",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerup2:{property:"material.emissive",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown1:{property:"material.color",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"},powerdown2:{property:"material.emissive",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.body=e.Core(e.bodyData),e.legData={data:"legData",id:"leg",sources:!1,text:!1,geometry:{primitive:"cone",radiusBottom:0,radiusTop:.15,height:.2,openEnded:!1,segmentsHeight:4,segmentsRadial:8,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#C14B76",emissive:"#C14B76",emissiveIntensity:.25,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(-.25,-.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{powerup1:{property:"material.color",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerup2:{property:"material.emissive",to:"#1500fa",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredUp"},powerdown1:{property:"material.color",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"},powerdown2:{property:"material.emissive",to:"#C14B76",dur:100,delay:0,loop:!1,dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"poweredDown"}},mixins:!1,classes:["a-ent"],components:!1},e.leg1Data=e.CoreDataFromTemplate(e.legData,{id:"leg1"},!0),e.leg1=e.Core(e.leg1Data),e.leg2Data=e.CoreDataFromTemplate(e.legData,{id:"leg2",position:new THREE.Vector3(.25,-.25,0)},!0),e.leg2=e.Core(e.leg2Data),e.leg3Data=e.CoreDataFromTemplate(e.legData,{id:"leg3",position:new THREE.Vector3(0,-.25,-.25)},!0),e.leg3=e.Core(e.leg3Data),e.leg4Data=e.CoreDataFromTemplate(e.legData,{id:"leg4",position:new THREE.Vector3(0,-.25,.25)},!0),e.leg4=e.Core(e.leg4Data),e.ghostGrabData={data:"ghostGrabData",id:"ghostGrab",sources:!1,text:!1,geometry:{primitive:"box",width:.15,height:.05,depth:.05},material:{shader:"standard",color:"#917b9d",emissive:"#917b9d",emissiveIntensity:.5,opacity:1,side:"double",metalness:.2,roughness:.8},position:new THREE.Vector3(0,-.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","clickable"],components:{mousedownrun:{cursorObj:"comp",component:"null",method:"DragToPosition",params:"other"},mouseuprun:{cursorObj:"comp",component:"null",method:"DragToPosition",params:"false"}}},e.ghostGrab=e.Core(e.ghostGrabData),e.ghostLayerData={parent:{core:e.ghostParent},child0:{parent:{core:e.ghostAll},child0:{parent:{core:e.eye1Socket},child0:{core:e.eye1Pupil}},child1:{parent:{core:e.eye2Socket},child0:{core:e.eye2Pupil}},child2:{core:e.mouth},child3:{parent:{core:e.spin},child0:{core:e.head},child1:{core:e.body},child2:{core:e.leg1},child3:{core:e.leg2},child4:{core:e.leg3},child5:{core:e.leg4}}},child1:{core:e.ghostGrab}},e.ghost=e.Layer("ghost",e.ghostLayerData),e.compCubeParentData={data:"compCubeParentData",id:"compCubeParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(2,1.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},e.compCubeParent=e.Core(e.compCubeParentData),e.compCubeData={data:"compCubeData",id:"compCube",sources:!1,text:{value:"Menu",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.135,side:"double"},geometry:{primitive:"box",depth:.25,width:.25,height:.25},material:{shader:"flat",color:"#C14B76",opacity:1},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.compCube=e.Core(e.compCubeData),e.cubeLayerData={parent:{core:e.compCubeParent},child0:{core:e.compCube}},e.compCubeLayer=e.Layer("compCubeLayer",e.cubeLayerData),e.compSphereParentData={data:"compSphereParentData",id:"compSphereParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(2,1.5,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},e.compSphereParent=e.Core(e.compSphereParentData),e.compSphereData={data:"compSphereData",id:"compSphere",sources:!1,text:{value:"Menu",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.26,side:"double"},geometry:{primitive:"sphere",radius:.25},material:{shader:"flat",color:"#C14B76",opacity:1},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.compSphere=e.Core(e.compSphereData),e.compSphereLayerData={parent:{core:e.compSphereParent},child0:{core:e.compSphere}},e.compSphereLayer=e.Layer("compSphereLayer",e.compSphereLayerData),e.compBubbleParentData={data:"compBubbleParentData",id:"compBubbleParent",sources:!1,text:{value:"... ... ...",color:"#FFFFFF",align:"left",font:"exo2bold",width:.75,zOffset:.025,side:"front",wrapCount:35,baseline:"center"},geometry:{primitive:"box",depth:.025,width:.8,height:.15},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,.36,.36),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.01,.01,.01),animations:{loadin:{property:"scale",from:new THREE.Vector3(.01,.01,.01),to:new THREE.Vector3(1,1,1),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadin"},loadout:{property:"scale",from:new THREE.Vector3(1,1,1),to:new THREE.Vector3(.01,.01,.01),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadout"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.compBubbleParent=e.Core(e.compBubbleParentData),e.compBubbleCloseData={data:"compBubbleCloseData",id:"compBubbleClose",sources:!1,text:{value:"X",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.025,side:"front",wrapCount:2,baseline:"center"},geometry:{primitive:"box",depth:.025,width:.08,height:.08},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(.5,.06,-.05),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.01,.01,.01),animations:{loadin:{property:"scale",from:new THREE.Vector3(.01,.01,.01),to:new THREE.Vector3(1,1,1),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadin"},loadout:{property:"scale",from:new THREE.Vector3(1,1,1),to:new THREE.Vector3(.01,.01,.01),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadout"},hoveron:{property:"text.color",to:"#000000",dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"text.color",to:"#ffffff",dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click:{property:"scale",from:"1 1 1",to:"1.25 1.25 1.25",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.compBubbleClose=e.Core(e.compBubbleCloseData),e.compBubbleResetData={data:"compBubbleResetData",id:"compBubbleReset",sources:!1,text:{value:"@",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.025,side:"front",wrapCount:2,baseline:"center"},geometry:{primitive:"box",depth:.025,width:.08,height:.08},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(.5,-.04,-.05),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.01,.01,.01),animations:{loadin:{property:"scale",from:new THREE.Vector3(.01,.01,.01),to:new THREE.Vector3(1,1,1),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadin"},loadout:{property:"scale",from:new THREE.Vector3(1,1,1),to:new THREE.Vector3(.01,.01,.01),dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"loadout"},hoveron:{property:"text.color",to:"#000000",dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseenter"},hoveroff:{property:"text.color",to:"#ffffff",dur:100,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"mouseleave"},click:{property:"scale",from:"1 1 1",to:"1.25 1.25 1.25",dur:125,delay:0,loop:"1",dir:"alternate",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.compBubbleReset=e.Core(e.compBubbleResetData),e.compBubbleLayerData={parent:{core:e.compBubbleParent},child0:{core:e.compBubbleClose},child1:{core:e.compBubbleReset}},e.compBubbleLayer=e.Layer("compBubbleLayer",e.compBubbleLayerData),e.compPage0Data={info:{id:"compPage0",description:"Companion page 0.",tags:"comp",nextPage:null,prevPage:null,timeline:"linear"},timeline0:{self:{Speak:{speech:"Hey there!"}}},timeline1:{self:{Speak:{speech:"Having fun?"}}},timeline2:{self:{Speak:{speech:"Lets look around."}}},timeline3:{self:{Speak:{speech:"Whats over there?"}}},timeline4:{self:{Speak:{speech:"Now... where was that cookie I was eating?"}}},timeline5:{self:{Speak:{speech:"Found it!"}}},timeline6:{self:{NewPage:!0}}},e.compPage1Data={info:{id:"compPage1",description:"Companion page 1.",tags:"comp",nextPage:null,prevPage:null,timeline:"linear"},timeline0:{self:{Speak:{speech:"2 Hey there!"}}},timeline1:{self:{Speak:{speech:"2 Having fun?"}}},timeline2:{self:{Speak:{speech:"2 Lets look around."}}},timeline3:{self:{Speak:{speech:"2 Whats over there?"}}},timeline4:{self:{Speak:{speech:"2 Now... where was that cookie I was eating?"}}},timeline5:{self:{Speak:{speech:"2 Found it!"}}},timeline6:{self:{ResetBook:!0}}},e.compIdleData={info:{id:"compIdleData",description:"Companion idle page.",tags:"comp",nextPage:null,prevPage:null,timeline:"random"},timeline0:{self:{Speak:{speech:"Yo ho ho ho and a bottle of rum for me..."}}},timeline1:{self:{Speak:{speech:"Ooh a piece of candy!"}}},timeline2:{self:{Speak:{speech:"Nom nom nom nom..."}}},timeline3:{self:{Speak:{speech:"Yada yada yada..."}}},timeline4:{self:{Speak:{speech:"Whistle whistle whistle..."}}},timeline5:{self:{Speak:{speech:"16 16 16..."}}},timeline6:{self:{Speak:{speech:"Twinkle twinkle little star..."}}},timeline7:{self:{IdleReset:!0}}},e.compBookData={info:{id:"compBook",name:"Comp",description:"Companion book.",tags:"comp",timeline:"other",idleDelay:5e3,idleInterval:7e3},pages:{page0:e.compPage0Data,page1:e.compPage1Data},idle:{page0:e.compIdleData}},e.comp=e.Companion("comp",e.ghost),e.configurationViewData={data:"configurationViewData",id:"configurationView",sources:!1,text:{value:"Controls",color:"#FFFFFF",align:"left",font:"exo2bold",width:1.9,zOffset:.025,side:"front",wrapCount:75,baseline:"center"},geometry:{primitive:"box",depth:.025,width:2,height:1},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,1.5,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:{clickrun:{cursorObj:"comp",method:"ToggleControlView"}}},e.configurationView=e.Core(e.configurationViewData),e.sceneTextData={data:"Scene display text.",id:"sceneText",sources:!1,text:{value:"... ... ...",color:"#FFFFFF",align:"left",font:"exo2bold",width:1.9,zOffset:.025,side:"front",wrapCount:75,baseline:"center"},geometry:{primitive:"box",depth:.025,width:2,height:.3},material:{shader:"standard",color:"#4bb8c1",opacity:.8,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,.69,-.4),rotation:new THREE.Vector3(-30,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.textBubbleSideData={data:"text bubble to the side of user/character",id:"textBubbleSide",sources:!1,text:{value:"... ... ...",color:"#FFFFFF",align:"left",font:"exo2bold",width:.45,zOffset:.025,side:"front",wrapCount:45,baseline:"center"},geometry:{primitive:"box",depth:.025,width:.5,height:.15},material:{shader:"standard",color:"#4bb8c1",opacity:.8,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(.375,1.7,-.65),rotation:new THREE.Vector3(5,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.textBubbleSide=e.Core(e.textBubbleSideData),e.textBubbleBottomData={data:"text bubble on bottom",id:"textBubbleBottom",sources:!1,text:{value:"... ... ...",color:"#FFFFFF",align:"left",font:"exo2bold",width:1.9,zOffset:.025,side:"front",wrapCount:75,baseline:"center"},geometry:{primitive:"box",depth:.025,width:2,height:.3},material:{shader:"standard",color:"#4bb8c1",opacity:.8,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,.69,-.8),rotation:new THREE.Vector3(-30,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.textBubbleBottom=e.Core(e.textBubbleBottomData),e.textBubbleTopData={data:"text bubble on top",id:"textBubbleTop",sources:!1,text:{value:"... ... ...",color:"#FFFFFF",align:"left",font:"exo2bold",width:1.9,zOffset:.025,side:"front",wrapCount:75,baseline:"center"},geometry:{primitive:"box",depth:.025,width:2,height:.3},material:{shader:"standard",color:"#4bb8c1",opacity:.8,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,2.05,-1.25),rotation:new THREE.Vector3(15,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["clickable","a-ent"],components:!1},e.textBubbleTop=e.Core(e.textBubbleTopData),e.detailMainData={data:"detailMainData",id:"detailMain",sources:!1,text:{value:"Details...",color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.065,side:"double"},geometry:{primitive:"box",depth:.1,width:1,height:1},material:{shader:"standard",color:"#4bb8c1",opacity:1,metalness:.2,roughness:.8,emissive:"#4bb8c1",emissiveIntensity:.6},position:new THREE.Vector3(0,1.5,-1.5),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(0,0,0),animations:{opening:{property:"scale",from:"0.001 0.001 0.001",to:"1 1 1",dur:500,delay:50,loop:"false",dir:"linear",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0,startEvents:"open"},close:{property:"scale",from:"1 1 1",to:"0.001 0.001 0.001",dur:500,delay:50,loop:!1,dir:"linear",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"close"}},mixins:!1,classes:["a-ent"],components:{stare:{id:"playerRig"}}},e.detailCloseData={data:"detailCloseData",id:"detailClose",sources:!1,text:{value:"X",width:3,color:"#FFFFFF",align:"center",font:"exo2bold",zOffset:.065,side:"double"},geometry:{primitive:"box",depth:.1,width:.25,height:.25},material:{shader:"standard",color:"#c14b4b",opacity:1,metalness:.2,roughness:.8,emissive:"#c14b4b",emissiveIntensity:.6},position:new THREE.Vector3(.5,.5,.05),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(0,0,0),animations:{opening:{property:"scale",from:"0.001 0.001 0.001",to:"1 1 1",dur:500,delay:50,loop:"false",dir:"linear",easing:"easeInOutElastic",elasticity:400,autoplay:!0,enabled:!0,startEvents:"open"},close:{property:"scale",from:"1 1 1",to:"0.001 0.001 0.001",dur:500,delay:50,loop:!1,dir:"linear",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"close"}},mixins:!1,classes:["clickable","a-ent"],components:!1},e.teleportParentData={data:"teleportParentData",id:"teleportParent",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,.025,0),rotation:new THREE.Vector3(-90,0,0),scale:new THREE.Vector3(1,1,1),animations:{click1pos:{property:"object3D.position.y",from:.025,to:.75,dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click1"},click1rot:{property:"object3D.rotation.x",from:-90,to:720,dur:2e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click1"},posreset:{property:"object3D.position.y",from:.75,to:.025,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},rotreset:{property:"object3D.rotation.x",from:720,to:-90,dur:1e3,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},posresetinstant:{property:"object3D.position.y",from:.75,to:.025,dur:50,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resetInstant"},rotresetinstant:{property:"object3D.rotation.x",from:720,to:-90,dur:50,delay:0,loop:!1,dir:"normal",easing:"easeInOutElastic",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resetInstant"}},mixins:!1,classes:["a-ent"],components:!1},e.teleportConfirmData={data:"teleportConfirmData",id:"teleportConfirm",sources:!1,text:{value:"Teleport Here",wrapCount:45,width:5,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:.75},geometry:{primitive:"circle",radius:.75,segments:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#838282",opacity:.75,metalness:.6,roughness:.4,emissive:"#838282",emissiveIntensity:.2,side:"double"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","clickable","teleporter","teleport"],components:{teleportation:null}},e.teleportCancelData={data:"teleportCancelData",id:"teleportCancel",sources:!1,text:{value:"Cancel",wrapCount:45,width:5,color:"#FFFFFF",font:"exo2bold",zOffset:.025,side:"double",align:"center",baseline:"center",opacity:0},geometry:{primitive:"circle",radius:.75,segments:16,thetaStart:0,thetaLength:360},material:{shader:"standard",color:"#838282",opacity:0,metalness:.6,roughness:.4,emissive:"#838282",emissiveIntensity:.2,side:"double"},position:new THREE.Vector3(0,1.25,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(.5,.5,.5),animations:{click1opac:{property:"material.opacity",from:0,to:.75,dur:1e3,delay:1800,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click1"},click1textopac:{property:"text.opacity",from:0,to:1,dur:1e3,delay:1800,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"click1"},click1opacreset:{property:"material.opacity",from:.75,to:0,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},click1textopacreset:{property:"text.opacity",from:1,to:0,dur:500,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"reset"},click1opacresetinstant:{property:"material.opacity",from:.75,to:0,dur:50,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resetInstant"},click1textopacresetinstant:{property:"text.opacity",from:1,to:0,dur:50,delay:0,loop:!1,dir:"normal",easing:"easeInOutSine",elasticity:400,autoplay:!1,enabled:!0,startEvents:"resetInstant"}},mixins:!1,classes:["a-ent","clickable","teleporter","cancel"],components:{teleportation:null}};let t=[new THREE.Vector3(0,.025,0),new THREE.Vector3(-5,.025,-5),new THREE.Vector3(0,.025,-10),new THREE.Vector3(-5,.025,5),new THREE.Vector3(-10,.025,0),new THREE.Vector3(5,.025,-5),new THREE.Vector3(10,.025,0),new THREE.Vector3(5,.025,5),new THREE.Vector3(0,.025,10)];e.teleport=e.Teleport("teleport",t);let o=[new THREE.Vector3(0,.025,0),new THREE.Vector3(-5,.025,-5),new THREE.Vector3(-5,.025,5),new THREE.Vector3(5,.025,-5),new THREE.Vector3(5,.025,5)];e.teleport0=e.Teleport("teleport0",o),e.teleportPortalData={data:"teleportPortalData",id:"teleportPortal",sources:!1,text:!1,geometry:{primitive:"plane",width:2,height:10},material:{shader:"standard",color:"#beef1a",opacity:.25,metalness:.6,roughness:.4,emissive:"#beef1a",emissiveIntensity:.2,side:"double"},position:new THREE.Vector3(10,5,-10),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent","clickable"],components:{stare:{id:"playerRig",twist:!0},"raycast-teleportation":null}},e.teleportPortal1Data=e.CoreDataFromTemplate(e.teleportPortalData,{id:"teleportPortal1"},!0),e.teleportPortal1=e.Core(e.teleportPortal1Data),e.teleportPortal2Data=e.CoreDataFromTemplate(e.teleportPortalData,{id:"teleportPortal2",position:new THREE.Vector3(0,5,3)},!0),e.teleportPortal2=e.Core(e.teleportPortal2Data),e.directionalLightData={data:"directionalLight",id:"directionalLight",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(-1,1,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{daylight:{property:"light.intensity",from:.1,to:1,dur:e.timeInDay/4,delay:0,loop:"true",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},daypos:{property:"position",from:new THREE.Vector3(-1,1,-1),to:new THREE.Vector3(1,1,1),dur:e.timeInDay/2,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:{light:{type:"directional",intensity:1,castShadow:!1}}},e.directionalLight=e.Core(e.directionalLightData),e.ambientLightData={data:"ambientLight",id:"ambientLight",entity:"preAdded",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{daylight:{property:"light.intensity",from:.5,to:.25,dur:e.timeInDay/2,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},daycolor:{property:"light.color",from:"#99154E",to:"#fffb96",dur:e.timeInDay/4,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:{light:{type:"ambient",intensity:1,color:"#716a9a"}}},e.ambientLight=e.Core(e.ambientLightData),e.directionalLight2Data={data:"directionalLight2",id:"directionalLight2",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(1,1,1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{nightlight:{property:"light.intensity",from:.2,to:.1,dur:e.timeInDay/4,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},daypos:{property:"position",from:new THREE.Vector3(1,1,1),to:new THREE.Vector3(-1,1,-1),dur:e.timeInDay/2,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:{light:{type:"directional",intensity:.1,castShadow:!1}}},e.directionalLight2=e.Core(e.directionalLight2Data),e.directionalLight3Data={data:"directionalLight3",id:"directionalLight3",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(1,1,-1),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:{daylight:{property:"light.intensity",from:.05,to:.1,dur:e.timeInDay/4,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},daypos:{property:"position",from:new THREE.Vector3(1,1,-1),to:new THREE.Vector3(-1,1,-1),dur:e.timeInDay/2,delay:0,loop:"1",dir:"alternate",easing:"linear",elasticity:400,autoplay:!1,enabled:!1,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:{light:{type:"directional",intensity:.05,castShadow:!1}}},e.directionalLight3=e.Core(e.directionalLight3Data),e.sunOuterData={data:"sunOuter",id:"sunOuter",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(-5,45,0),scale:new THREE.Vector3(1,1,1),animations:{daynight:{property:"object3D.rotation.x",from:-5,to:355,dur:e.timeInDay,delay:0,loop:"1",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:!1},e.sunData={data:"sun",id:"sun",sources:!1,text:!1,geometry:{primitive:"sphere",radius:325},material:{shader:"flat",color:"#F0A500",opacity:1,side:"front",fog:!1},position:new THREE.Vector3(0,0,-3400),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.sunOuter=e.Core(e.sunOuterData),e.sun=e.Core(e.sunData),e.sunLayerData={parent:{core:e.sunOuter},child0:{core:e.sun}},e.sunLayer=e.Layer("sunLayer",e.sunLayerData),e.moonOuterData={data:"moonOuter",id:"moonOuter",sources:!1,text:!1,geometry:!1,material:!1,position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(175,45,0),scale:new THREE.Vector3(1,1,1),animations:{daynight:{property:"object3D.rotation.x",from:175,to:535,dur:e.timeInDay,delay:0,loop:"1",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:!1},e.moonData={data:"moonData",id:"moon",sources:!1,text:!1,geometry:{primitive:"sphere",radius:325},material:{shader:"flat",color:"#5c2196",opacity:1,side:"front",fog:!1},position:new THREE.Vector3(0,0,-3400),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.moonOuter=e.Core(e.moonOuterData),e.moon=e.Core(e.moonData),e.moonLayerData={parent:{core:e.moonOuter},child0:{core:e.moon}},e.moonLayer=e.Layer("moonLayer",e.moonLayerData),e.skyGradData={data:"sky gradient",id:"skyGrad",entity:"a-sky",sources:!1,text:!1,geometry:!1,material:{shader:"threeColorGradientShader",topColor:"#613381",middleColor:"#99154E",bottomColor:"#b967ff"},position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(8.046,8.046,8.046),animations:{sunrisetop:{property:"material.topColor",from:"#613381",to:"#01cdfe",dur:e.timeInDay/6,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},sunrisemid:{property:"material.middleColor",from:"#99154E",to:"#fffb96",dur:e.timeInDay/6,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunrise",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},sunsettop:{property:"material.topColor",from:"#01cdfe",to:"#613381",dur:e.timeInDay/6,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunset",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"},sunsetmid:{property:"material.middleColor",from:"#fffb96",to:"#99154E",dur:e.timeInDay/6,delay:0,loop:"false",dir:"normal",easing:"linear",elasticity:400,autoplay:!1,enabled:!0,startEvents:"sunset",pauseEvents:"pauseDayNight",resumeEvents:"resumeDayNight"}},mixins:!1,classes:["a-ent"],components:{"hide-on-enter-ar":null}},e.skyGrad=e.Core(e.skyGradData),e.skyBox0Data={data:"skyBox0Data",id:"skyBox0",sources:!1,lights:[e.directionalLight,e.directionalLight2,e.directionalLight3,e.ambientLight],sky:[e.skyGrad],space:[e.sunLayer,e.moonLayer]},e.skyBox0=e.SkyBox(e.skyBox0Data),e.mapEdgeBasicData={data:"mapEdgeBasicData",id:"mapEdgeBasic",sources:!1,text:!1,geometry:{primitive:"box",depth:.25,width:.25,height:.5},material:{shader:"standard",color:"#6c4646",opacity:1},position:new THREE.Vector3(0,1,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1),animations:!1,mixins:!1,classes:["a-ent"],components:!1},e.mapEdgeBasic=e.Core(e.mapEdgeBasicData),e.buildLibrary=()=>{e.ghostParent=e.Core(e.ghostParentData),e.ghostAll=e.Core(e.ghostAllData),e.eye1Socket=e.Core(e.eye1SocketData),e.eye2Socket=e.Core(e.eye2SocketData),e.eye1Pupil=e.Core(e.eye1PupilData),e.eye2Pupil=e.Core(e.eye2PupilData),e.mouth=e.Core(e.mouthData),e.spin=e.Core(e.spinData),e.head=e.Core(e.headData),e.body=e.Core(e.bodyData),e.leg1=e.Core(e.leg1Data),e.leg2=e.Core(e.leg2Data),e.leg3=e.Core(e.leg3Data),e.leg4=e.Core(e.leg4Data),e.ghost=e.Layer("ghost",e.ghostLayerData),e.compCubeParent=e.Core(e.compCubeParentData),e.compCube=e.Core(e.compCubeData),e.compCubeLayer=e.Layer("compCubeLayer",e.cubeLayerData),e.compSphereParent=e.Core(e.compSphereParentData),e.compSphere=e.Core(e.compSphereData),e.compSphereLayer=e.Layer("compSphereLayer",e.compSphereLayerData),e.compBubbleParent=e.Core(e.compBubbleParentData),e.compBubbleClose=e.Core(e.compBubbleCloseData),e.compBubbleReset=e.Core(e.compBubbleResetData),e.compBubbleLayer=e.Layer("compBubbleLayer",e.compBubbleLayerData),e.comp=e.Companion("comp",e.ghost),e.configurationView=e.Core(e.configurationViewData),e.textBubbleSide=e.Core(e.textBubbleSideData),e.textBubbleBottom=e.Core(e.textBubbleBottomData),e.textBubbleTop=e.Core(e.textBubbleTopData),e.teleport=e.Teleport("teleport",t),e.teleport0=e.Teleport("teleport0",o),e.teleportPortal1=e.Core(e.teleportPortal1Data),e.teleportPortal2=e.Core(e.teleportPortal2Data),e.directionalLight=e.Core(e.directionalLightData),e.ambientLight=e.Core(e.ambientLightData),e.directionalLight2=e.Core(e.directionalLight2Data),e.directionalLight3=e.Core(e.directionalLight3Data),e.sunOuter=e.Core(e.sunOuterData),e.sun=e.Core(e.sunData),e.sunLayer=e.Layer("sunLayer",e.sunLayerData),e.moonOuter=e.Core(e.moonOuterData),e.moon=e.Core(e.moonData),e.moonLayer=e.Layer("moonLayer",e.moonLayerData),e.skyGrad=e.Core(e.skyGradData),e.skyBox0=e.SkyBox(e.skyBox0Data),e.mapEdgeBasic=e.Core(e.mapEdgeBasicData)},e.ToBeRebuilt("buildLibrary")}}),AFRAME.registerComponent("start-library",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.buildSceneLibrary=()=>{},e.ToBeRebuilt("buildSceneLibrary")}}),AFRAME.registerComponent("start-scenes",{dependencies:["auxl"],init:function(){const e=document.querySelector("a-scene").systems.auxl;e.zoneHomeData={info:{id:"zoneHome",name:"zoneHome",zoneNum:0,start:"zoneHomeScene0",travelMenu:!1},controls:{},start:{},delay:{},interval:{},event:{},interaction:{},exit:{}},e.zoneHomeScene0Data={info:{id:"zoneHomeScene0",name:"Scene: 0",description:"...",sceneText:!1,fog:{type:"exponential",color:"#000",density:.025},map:!1,spawnPos:{x:0,y:0,z:0}},controls:{},start:{},delay:{},interval:{},event:{},interaction:{},exit:{},map:{data:e.zoneHomeData.zoneHomeScene0}},e.zoneHomeScene0=e.SceneNode(e.zoneHomeScene0Data),e.zoneHome=e.MapZone(e.zoneHomeData),e.scenarioStartData={info:{id:"scenarioStart",name:"Scenario: Start",scenarioNum:0,startZone:"zoneHome",instructions:"..."},map:{zoneHome:{zoneHomeScene0:{}}},controls:{action5Down:{auxlObj:"player",func:"MainMenuAction",name:"Toggle Main Menu",info:"Go back in the Main Menu or Spawn/Despawn Companion."},action6Down:{auxlObj:"player",func:"CycleCameraZoom",name:"Cycle Camera Zoom",info:"Cycle through various camera zoom lengths."},action7Down:{auxlObj:"player",func:"SnapLeft",name:"Snap View Left",info:"Quick snap rotate to the left."},action8Down:{auxlObj:"player",func:"SnapRight",name:"Snap View Right",info:"Quick snap rotate to the right."}},start:{skyBox0:{SpawnSkyBox:null}},delay:{500:{comp:{SpawnComp:null}}},interval:{},event:{},interaction:{},exit:{}},e.scenarioStart=e.Scenario(e.scenarioStartData),e.worldHomeData={info:{id:"worldHome",name:"World: Home",description:"...",maxLoadtime:5e3,dayTime:36e4,inventory:!1,collision:!1,physics:!1,menuStyle:!1,menuOptions:!1},scenarios:[e.scenarioStart]},e.worldHome=e.World(e.worldHomeData)}});var h=o(72),m=o.n(h),u=o(825),y=o.n(u),g=o(659),v=o.n(g),f=o(56),b=o.n(f),E=o(540),w=o.n(E),x=o(113),T=o.n(x),C=o(487),D={};D.styleTagTransform=T(),D.setAttributes=b(),D.insert=v().bind(null,"head"),D.domAPI=y(),D.insertStyleElement=w(),m()(C.A,D),C.A&&C.A.locals&&C.A.locals;var S=o(415),k={};k.styleTagTransform=T(),k.setAttributes=b(),k.insert=v().bind(null,"head"),k.domAPI=y(),k.insertStyleElement=w(),m()(S.A,k),S.A&&S.A.locals&&S.A.locals})()})();